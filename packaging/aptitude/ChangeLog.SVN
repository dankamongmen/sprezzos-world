2005-10-01  Daniel Burrows  <dburrows@debian.org>

	* NEWS:

	  Add some missing entries and bug numbers.

	* Makefile.am:

	  Distribute the other READMEs.

	* NEWS:

	  Mention the build script migration.

	* configure.ac, src/aptitude.h:

	  Deal with the fact that the old gettext/autoools generated a
	  test for locale.h and setlocale but the new one doesn't.  I
	  could stop using the test, but instead I decided to just test
	  explicitly for them and define the appropriate variables if
	  they're found.

	* src/aptitude.h:

	  Instead of using #define to empty setlocale, inline it.  This
	  still fails to compile, but the error is a lot more obvious.

	* ***:

	  Rebuilt all of the autotools and gettext junk from scratch using
	  automake-1.9.  In theory this will make VPATH builds work
	  (xgettext was failing); however, I'm going to wait and see.  It
	  does mean that I am no longer using old crufty versions of the
	  tools, though.

	* Makefile.am:

	  On the other hand, the non-generated manual files really *are*
	  in $(srcdir).

	* doc/en/Makefile.am, doc/fi/Makefile.am, doc/fr/Makefile.am:

	  Also pick up README from '.', not $(srcdir).

	* doc/cs/Makefile.am, doc/de/Makefile.am, doc/en/Makefile.am, doc/fi/Makefile.am, doc/fr/Makefile.am:

	  Whoops, there is no $(builddir) -- it's just '.' in rules.

	* doc/cs/Makefile.am, doc/de/Makefile.am, doc/en/Makefile.am, doc/fi/Makefile.am, doc/fr/Makefile.am:

	  Consistently put the output directories in $(builddir), not
	  $(srcdir).

	* src/mine/Makefile.am:

	  Use $(wildcard) instead of listing all the help texts
	  explicitly.

	* Makefile.am:

	  Use $(wildcard) for some wildcarded filenames so that VPATH
	  builds work.

	* doc/fi/Makefile.am, doc/fr/Makefile.am:

	  Fix up some more documentation Makefiles that I missed
	  previously.

	* doc/cs/Makefile.am, doc/de/Makefile.am, doc/en/Makefile.am, doc/fi/Makefile.am, doc/fr/Makefile.am:

	  Fix the documentation Makefiles to refer symbolically to the
	  souce directory using $(srcdir) instead of directly via '..' and
	  '.'.

	* NEWS:

	  Add a comment about whitespace in patterns, change the quote.

	* Makefile.am:

	  Put intl before the other subdirectories, so builds with an
	  included libintl work.

2005-09-30  Daniel Burrows  <dburrows@debian.org>

	* src/download_screen.h:

	  Fix the #include of config.h. (done previously but I forgot to
	  save!  ah the irony)

	* configure.ac:

	  Bump the version to 0.3.4.

	* src/mine/Makefile.am:

	  Explicitly list all of the minesweeper help files -- apparently
	  automake's "make dist" target doesn't expand wildcards.

	* src/mine/Makefile.am:

	  Add top_builddir to Minesweeper's include path as well.

	* src/generic/util/Makefile.am:

	  Add slotarg.h to the list of sources for libgeneric-util.

	* src/aptitude.h, src/main.cc, src/pkg_ver_item.h, src/ui.cc, src/vscreen/curses++.h, src/vscreen/vscreen_widget.cc:

	  Change a bunch of includes of config.h to use <>, and protect
	  the ones that weren't with #ifdef HAVE_CONFIG_H.

	* src/generic/util/Makefile.am:

	  Add bool_accumulate.h to the list of generic sources.

	* src/vscreen/Makefile.am:

	  Add ref_ptr.h to the list of vscreen sources.

	* src/generic/problemresolver/Makefile.am:

	  Forgot to add resolver_undo.h to EXTRA_DIST so that it gets
	  distributed; do so.

	* src/Makefile.am, src/cmdline/Makefile.am, src/generic/apt/Makefile.am, src/generic/problemresolver/Makefile.am, src/generic/util/Makefile.am, src/vscreen/Makefile.am, src/vscreen/config/Makefile.am, tests/Makefile.am:

	  Include $(top_builddir) so we can get config.h in VPATH builds
	  (e.g., in 'make distcheck').

	* doc/en/aptitude.xml:

	  Correct a strange turn of phrase.

	* src/vscreen/Makefile.am:

	  Remove references to some .h files that got moved down to
	  generic/.

	* src/vscreen/vscreen_widget.cc:

	  Allow destroy() to be called multiple times but ignore it after
	  the first call.  This allows download widgets to destroy
	  themselves immediately upon being cancelled, even though the
	  download process will also issue a destroy command on its own.

	* src/ui.cc, src/ui_download_manager.cc, src/ui_download_manager.h:

	  Fix more compile problems.

	* src/download_list.cc, src/download_list.h:

	  Fix compilation errors.

	* src/download_list.cc:

	  Actually use abortslot when a download is cancelled.

	* src/ui.cc, src/ui.h, src/ui_download_manager.cc, src/ui_download_manager.h:

	  Expose the widget that's handling the download status, so it can
	  be explicitly kept alive as long as the download lasts
	  (regardless of its destruction).

	* src/download_list.cc:

	  Always destroy a download list when destroy() is called, even
	  though "cancel" is a side-effect.

	* src/ui.cc:

	  Don't let mini-buffer downloads overload the Q key.

	* NEWS:

	  Update the NEWS file for 0.3.4 (may get additional updates).

	* po/POTFILES.in:

	  Update the list of files.

	* src/ui.cc:

	  Editorial change to the no-cache-modification-during-a-download
	  message.

	* src/solution_item.cc:

	  Reinstate the advance-after-action behavior of solution items.

	* doc/en/images/Makefile.am:

	  Update the list of distributed images.

	* doc/en/aptitude.xml:

	  More fully document the resolver (the prose is a little stilted
	  in some places but it'll do for a first draft).

	* src/generic/problemresolver/model.tex:

	  Add a disclaimer regarding the stupidity-removal algorithm.

	* src/apt_options.cc:

	  Add an option item for suppress-read-only-warning.

	* src/ui.cc:

	  Make prompt_yesno_popup not always default to 'yes'.
	  (I confused the scrollbar parameter with the default parameter
	  -- arguably this is a sign that vs_dialog_yesno's interface is
	  way too hariy).

	* src/vscreen/vs_multiplex.cc:

	  Bind weak references instead of strong references.

	* src/cmdline/cmdline_update.cc:

	  Fix a silly compile problem.

	* doc/en/aptitude.xml:

	  Fix the documentation as regards the default resolver scores.

	* doc/en/aptitude.xml:

	  Document several undocumented configuration options.

	* doc/en/aptitude.xml:

	  Typo fix.

	* src/cmdline/cmdline_update.cc, src/generic/apt/download_update_manager.cc, src/ui.cc:

	  Add some missing connections to the download managers' hooks.

	* src/cmdline/cmdline_changelog.cc:

	  Kill off some memory leaks.

	* src/changelog_parse.cc:

	  Instead of using the description parser to generate formatted
	  changelogs, just parse them by hand; the bulletting conventions
	  are not, unfortunately, as well-defined as for descriptions.

	* src/menu_text_layout.cc, src/menu_text_layout.h:

	  Make the search keystrokes active in the menu_text_layout
	  widget.

	* src/view_changelog.cc:

	  Use a menu_text_layout instead of a vs_text_layout to display
	  the changelog, and hook it up to the menu signals.

	* src/menu_text_layout.cc, src/menu_text_layout.h:

	  Write a vs_text_layout variant customized to hook the menu's
	  search command up to itself.

	* src/vscreen/vs_text_layout.cc, src/vscreen/vs_text_layout.h:

	  Write basic code for searching in a vs_text_layout.

2005-09-29  Daniel Burrows  <dburrows@debian.org>

	* doc/en/aptitude.xml, src/Makefile.am, src/changelog_parse.cc, src/changelog_parse.h, src/defaults.cc, src/generic/util/temp.h, src/view_changelog.cc:

	  Add support for parsing changelogs and doing something useful
	  with the information therein.  In particular, changelogs are now
	  wrapped like descriptions (and get bullet parsing for free), and
	  newer versions of the package are highlighted.  (Closes: #290692)

	* src/generic/util/temp.h:

	  Allow clients to extract the parent directory of temporary
	  objects.

	* src/cmdline/cmdline_do_action.cc:

	  Fix a nasty bug: when constructing the download manager in
	  do_action, I was actually (and accidentally) constructing a
	  manager on the heap, implicitly casting it to bool (hence always
	  getting 'true') and then passing that as download_only to the
	  true manager.  Obviously this is not quite what was desired.

	* src/ui.cc, src/ui_download_manager.cc, src/ui_download_manager.h, src/view_changelog.cc:

	  Require code that creates a ui_download_manager to set all the
	  usual parameters for its internal download status widget, and
	  change all the creation points to do so (resurrecting the
	  various title strings that got lost earlier).

	* src/cmdline/cmdline_changelog.cc:

	  Fix the command-line changelog code: binding a reference doesn't
	  really work, you have to bind a pointer to the object you want
	  to set instead.

	* src/cmdline/cmdline_changelog.cc, src/view_changelog.cc:

	  Update the changelog viewers for the new interface.

	* src/generic/apt/pkg_changelog.cc, src/generic/apt/pkg_changelog.h:

	  Base the package changelog downloader on the download_manager
	  class.

	* src/Makefile.am, src/download.cc, src/download.h:

	  Remove the old download code.

	* src/cmdline/cmdline_upgrade.cc:

	  Use the download_manager code for upgrades too.

	* src/pkg_item.cc, src/pkg_tree.cc:

	  Eliminate more unnecessary #includes.

	* src/cmdline/cmdline_do_action.cc, src/cmdline/cmdline_update.cc:

	  Eliminate some unnecessary #includes.

	* src/cmdline/cmdline_update.cc:

	  Use the download_manager code in 'update'.

	* src/cmdline_do_action.cc:

	  Use the download_manager code to handle stuff that gets kicked
	  to do_action.

	* src/cmdline_util.cc, src/cmdline_util.h:

	  Write generic code to execute a download object from the
	  command-line.

	* src/ui_download_manager.cc:

	  Actually use both ui_start_download and ui_stop_download.

	* src/ui.cc, src/generic/download_install_manager.cc, src/generic/download_update_manager.cc:

	  Implement the before/after hooks in the UI to shut down curses
	  and to display a message while automatic autocleaning is
	  happening.

	* src/ui.cc:

	  Implement ui_stop_download.

	* po/POTFILES.in, src/Makefile.am, src/ui.cc, src/ui.h, src/ui_download_manager.cc, src/ui_download_manager.h:

	  Split the wrapper class into another file.  Added some public UI
	  routines to allow other code to manipulate the "is something
	  downloading now?" state.

	* src/ui.cc:

	  Instead of subclassing the download managers, use a generic
	  wrapper class that takes a manager as a constructor parameter.

	* src/generic/apt/download_manager.h, src/generic/apt/download_install_manager.h, src/generic/apt/download_install_manager.cc, src/ui.cc:

	  Make prepare() part of the generic download_manager interface
	  (additional arguments should be 'passed' in the constructor
	  now).  This will pave the way for fully generic code in the UI
	  to handle a download.

	* src/generic/apt/download_install_manager.cc, src/generic/apt/download_install_manager.h, src/ui.cc:

	  Make download_only a constructor parameter of the
	  download_install_manager, not an argument of finish().

	* src/generic/apt/download_update_manager.cc:

	  Instead of creating an Acquire object with no status callback,
	  pass our status callback into its constructor; also save the
	  signal generator in signallog rather than just ignoring it.

	* src/ui.cc:

	  First cut at using the download_manager code instead of the old
	  download code.

	* src/download_thread.cc, src/download_thread.h:

	  Accept download managers instead of acquire objects as the
	  thread parameter.

	* src/generic/apt/download_manager.h:

	  Make download managers SigC++ trackable objects.

	* src/generic/apt/download_install_manager.cc, src/generic/apt/download_install_manager.h, src/generic/apt/log.cc, src/generic/apt/log.h:

	  Split the log code from the download code.

	* po/POTFILES.in, src/generic/apt/download_install_manager.cc, src/generic/apt/download_install_manager.h, src/generic/apt/download_manager.cc, src/generic/apt/download_manager.h, src/generic/apt/download_update_manager.cc, src/generic/apt/download_update_manager.h, src/generic/apt/Makefile.am:

	  Write a generic interface to manage operations that involve
	  downloading something and then doing more stuff, and transform
	  the old download code into subclasses of this interface.

	* src/cmdline/cmdline_changelog.cc, src/cmdline/cmdline_do_action.cc, src/cmdline/cmdline_download.cc, src/cmdline/cmdline_progress.cc, src/cmdline/cmdline_progress.h, src/cmdline/cmdline_prompt.cc, src/cmdline/cmdline_update.cc, src/cmdline/cmdline_upgrade.cc, src/download.cc, src/download.h, src/download_list.cc, src/download_list.h, src/download_thread.cc, src/download_thread.h, src/generic/apt/acqprogress.cc, src/generic/apt/acqprogress.h, src/generic/apt/Makefile.am, src/Makefile.am, src/ui.cc, src/ui.h, src/view_changelog.cc:

	  Update include file locations and class names to refer to
	  download_signal_log instead of download_manager.

	* src/download_manager.cc, src/download_manager.h, src/generic/apt/download_signal_log.cc, src/generic/apt/download_signal_log.h:

	  Move the download_manager code into the generic layer and rename
	  it.

2005-09-27  Daniel Burrows  <dburrows@debian.org>

	* src/view_changelog.cc:

	  Since the changelog pager reads in the whole changelog when it's
	  constructed, it no longer needs to ensure that the changelog
	  file (object) exists as long as the pager does; delete the file
	  object as soon as we finish reading it.

	* src/generic/util/exception.h:

	  Update the exception documentation to match reality.

	* configure.ac:

	  Fix the enabling of dynamic backtraces.

	* configure.ac, src/generic/util/exception.cc:

	  Make the dynamic generation of backtraces a configure-time
	  option; in order for them to be useful, a full symbol table
	  needs to be shipped with the program, and in the case of
	  aptitude, this DOUBLES the executable size.

	* configure.ac:

	  Put libraries detected by configure into LIBS, not LDFLAGS.

	* configure.ac, src/generic/util/Makefile.am, src/generic/util/exception.cc, src/generic/util/exception.h, src/main.cc, tests/Makefile.am:

	  Add support for backtracing the program when creating an
	  exception on systems that support it.  (currently rather broken)

	* src/download.cc:

	  Remove the assumption that stdin is line-buffered; explicitly
	  search for a \n character (and handle EOF conditions).

	* src/main.cc, src/cmdline/cmdline_prompt.cc, src/cmdline/cmdline_prompt.h:

	  Toss an exception from the command-line code when EOF is
	  encountered, and write a corresponding catch handler; also
	  replace the special-cased catch blocks in main.cc with generic
	  catches for the Exception type (so the exception gets printed to
	  stderr).  In particular, this means that aptitude no longer goes
	  nuts when it encounters an EOF.  (Closes: #318749)

	* src/ui.cc:

	  Check for the existence of the old temporary directory on
	  startup and display a one-time prompt asking whether it should
	  be removed (currently defaults to "no").

	* src/ui.cc:

	  When su-ing to root, use temp::* instead of making the needed
	  temporary names manually.  (Closes: #146485)

	* src/generic/apt/pkg_changelog.cc, src/generic/apt/pkg_changeloh.h:

	  Use the temp::* classes to manage the changelog instead of
	  manually constructing a temporary name.

	* src/generic/util/Makefile.am, src/generic/util/temp.cc, src/generic/util/temp.h, tests/Makefile.am, tests/test_temp.cc:

	  Add C++-based support code for securely creating and cleaning up
	  temporary files and directories.

	* src/vscreen/config/colors.cc:

	  Don't blow up if no colors are available (e.g., if the terminal
	  doesn't support colors at all).

2005-09-26  Daniel Burrows  <dburrows@debian.org>

	* src/pkg_item.cc:

	  Make the interactive 'keep' command cancel any hold set on a
	  package; the behavior at the command line is unchanged.
	  (Closes: #326949)

	* src/generic/apt/aptcache.cc:

	  Preserve the last version of pkgstates when saving the selection
	  list. (Closes: #316460)  Also, don't remove the .new version if
	  we fail to save the cache (so the user can manually recover).

	* src/ui.cc:

	  Write a better description for the flat package list viewer.

	* src/ui.cc:

	  Also gray out autocleaning and mark-upgradable when the apt
	  cache file isn't available, and don't crash even if someone does
	  call do_autoclean with apt_cache_file == NULL.

	* src/ui.cc:

	  Gray out the install-run menu item whenever the apt cache file
	  isn't available.

	* src/ui.cc:

	  Also clear the 'active download' flag after a download that
	  failed up-front.

	* src/ui.cc:

	  If the download preparation routine fails, tell the download
	  manager that the download was complete so that the download
	  widget is destroyed.

	* src/download.cc:

	  If the user tries to start a download while the package cache is
	  NULL, print a cryptic error message instead of crashing.  If the
	  user tries to start an update while the package cache is NULL,
	  do the update instead of crashing.  (Closes: #309445)

	* src/cmdline/cmdline_moo.cc:

	  Delete the text at the end, which not only lacks a trailing
	  newline, but is also rather rude.  (Closes: #295924)

	* src/broken_indicator.cc:

	  Don't segfault if the apt cache is NULL (e.g., if apt_init
	  failed).  (Closes: #290408) -- at least for the time being; the
	  general problem is that I need to remember to test the program
	  in situations where the apt cache fails to initialize due to,
	  say, invalid configuration files.

	* src/generic/apt/aptcache.cc:

	  Fix the code that sets packages back to manual mode on a keep or
	  hold: it ran after the package was already kept back, so of
	  course the test for whether the package was to be deleted was
	  wrong! (Closes: #278490)

	* src/cmdline/cmdline_action.cc:

	  Only print a message about not being able to forbid an upgrade
	  because the package is not upgradable for packages that are
	  *NOT* upgradable, not packages that are.  (Closes: #246140)

	* src/cmdline/cmdline_show.cc:

	  Abort with an error message if some of the packages the user
	  tried to show don't exist, and return non-zero if errors were
	  generated while showing packages.  (Closes: #301291)

	* doc/en/aptitude.xml, doc/en/manpage.xml, src/generic/apt/apt.cc, src/main.cc:

	  Change Aptitude::Cmdline::Simulate to Aptitude::Simulate; if it
	  is true, always open the cache in read-only mode regardless of
	  whether the user is root or not.  This really Closes: #243192.

	* src/download.cc:

	  Write the date stamps for aptitude logs in RFC2822 format;
	  in particular, add timezones to them.  (Closes: #318501)

	* src/generic/util/util.cc, src/generic/util/util.h:

	  Add a safe wrapper for strerror_r.

	* src/generic/util/util.cc:

	  Correct get_homedir(): it was using the non-array form of delete
	  on arrays (remember, auto_ptr doesn't work on arrays...).

	* src/generic/util/util.cc, src/generic/util/util.h:

	  Write a safe strftime wrapper.

	* src/edit_pkg_hier.cc, src/generic/apt/apt.cc, src/generic/apt/pkg_changelog.cc, src/ui.cc:

	  Consistently use pkg_homedir() instead of getenv("HOME").
	  (Closes: #272429, #274216, #285334)

	* src/generic/util/util.cc, src/generic/util/util.h:

	  Write a utility routine to look up the current user's home
	  directory from the password database.

	* src/main.cc:

	  Automatically activate quiet mode if stdout is not a terminal.
	  (Closes: #276767)

	* src/pkg_item.cc:

	  Hang onto the lock while running reportbug.  This obviates the
	  need to reload the package cache, and in particular it means
	  that aptitude no longer discards information about package
	  states after reporting a bug; hence (Closes: #304748).

2005-09-25  Daniel Burrows  <dburrows@debian.org>

	* src/ui.cc:

	  Add a configuration option to suppress the warning message, and
	  display a customized dialog box that allows the user to disable
	  the message in the future.  With the other changes, this finally
	  (Closes: #175408).

	* src/ui.cc:

	  Make show_message() generate reverse video by default again.

	* src/download_list.cc, src/download_list.h, src/generic/util/slotarg.h, src/ui.h, src/vscreen/slotarg.h, src/vscreen/vs_menu.h, src/vscreen/vs_menu.cc:

	  Move slotarg to the generic code layer.

	* src/generic/apt/aptcache.cc:

	  Add a missing permission check in internal_mark_install.

	* src/ui.cc:

	  Make the package cache read-only while a download is going on.

	* src/vscreen/config/colors.cc:

	  Actually set default_colors_avail based on the result of
	  use_default_colors().  The codepath where this value is false is
	  untested, because I can't seem to find a terminal that doesn't
	  provide default colors.

	* src/ui.cc:

	  Connect up the new cache functions to display a helpful (?)
	  message when a read-only cache is modified.  This enforces a
	  rule that modifying the cache during a download is Not Allowed,
	  and it resets the cache to not-read-only after displaying a
	  single warning message otherwise.

	* src/generic/aptcache.cc, src/generic/aptcache.h:

	  Add support for making the cache 'read-only'; writing to a
	  read-only cache will generate what you could loosely describe as
	  a 'page fault', to be dealt with by slots connected to a public
	  signal.

	* src/generic/util/bool_accumulate, src/ui/ui.h, src/vscreen/bool_accumulate, src/vscreen/vs_menu.h:

	  Move bool_accumulate to generic code.

	* doc/en/aptitude.xml, src/generic/apt/aptcache.cc:

	  Add an option to purge packages that are unused, with big red
	  warning flags in its documentation appropriate to the level of
	  foot-shooting-ness that it enables.  (Closes: #275150)

	* src/cmdline/cmdline_download.cc, src/cmdline/cmdline_upgrade.cc, src/main.cc:

	  Fix the remaining points in the code that need to be updated for
	  quietness.  The code should now work just fine in quiet mode.
	  (Closes: #217477)

	* src/cmdline/cmdline_update.cc, src/cmdline/cmdline_forget_new.cc, src/cmdline/cmdline_progress.cc, src/cmdline/cmdline_do_action.cc:

	  Fix a bunch of typos and update do_action for quietness.

	* src/cmdline/cmdline_clean.cc:

	  Update the clean and autoclean code for quietness.

	* src/cmdline/cmdline_progress.cc:

	  Make downloads quiet.

	* src/cmdline/cmdline_update.cc:

	  Update for quietness.

	* src/cmdline/cmdline_resolver.cc, src/cmdline/cmdline_spinner.cc, src/cmdline/cmdline_spinner.h:

	  Disable output from the spinner when the quiet level is greater
	  than zero.

	* doc/en/aptitude.xml, doc/en/manpage.xml, src/main.cc:

	  Add basic support for a 'quiet' option; it needs to be
	  integrated into all cmdline files.

	* doc/en/aptitude.xml:

	  Explicitly note that ~a matches the *current state* of a
	  package; for instance, ~aupgrade doesn't do what ~U does.
	  (Closes: #311290)

	* FAQ, doc/en/aptitude.xml:

	  Apply several typo fixes submitted by
	  Olivier Trichet <olivier.trichet@freesurf.fr>.
	  (Closes: #268916)

	* doc/en/manpage.xml:

	  Fix the SEE ALSO reference to the full documentation
	  (Closes: #265723).

	* src/vscreen/vscreen.cc:

	  Don't initialize the unused style WidgetFrame.

	* doc/en/aptitude.xml, src/defaults.cc, src/ui.cc:

	  Add keybindings and menu items to directly select the first and
	  last generated solution.

	* src/load_config.cc, src/vscreen/config/colors.cc, src/vscreen/config/colors.h, src/vscreen/config/style.cc, src/vscreen/config/style.h:

	  Support using the default background color by encoding it in the
	  slots that would be used for an identical foreground &
	  background color.  Attempts to set identical foreground &
	  background now return an arbitrary color with the same
	  background, and the style code sets A_INVIS in such a case
	  (resulting in a blank space with the same background).  This is
	  a bit of a hack, but it's the only way to do this when you
	  consider that xterm provides 9 colors (including the default
	  color) but only 64 color pairs.  (Closes: #161872)

	* src/cmdline/cmdline_clean.cc:

	  Unreverse the logic that determines the return value of 'clean':
	  it was returning 0 iff there WERE errors.  (Closes: #274098)

	* src/ui.cc:

	  Try to start a background solution calculation when connecting
	  up the signal (it's possible that we missed a signal that gets
	  emitted when the resolver is created).

	* src/cmdline/cmdline_upgrade.cc:

	  When we have to abort an upgrade, display any broken packages
	  that forced us to abort. Maybe this should hook into the full
	  resolver in the future? (Closes: #316027)

2005-09-25 Miroslav Kure <kurem@upcase.inf.upol.cz>

	* update Czech translation. Closes:#330014
	
2005-09-24  Daniel Burrows  <dburrows@debian.org>

	* src/generic/util/setset.h, tests/***:

	  Fix more include files that I missed (oops).

	* src/vscreen/vs_menubar.cc:

	  Display left and right arrows at the edge of the terminal if the
	  menu bar is too large for it.

	* src/***:

	  Fix all the include file problems and other stuff arising from
	  the reorganization.

	* po/POTFILES.in:

	  Update POTFILES.in.

	* Makefile.am, src/Makefile.am, src/vscreen/Makefile.am, src/generic/***:

	  Massively reorganize the generic/ subdirectory.  The code is now
	  split into three parts: code which is fully generic (util/), the
	  problem resolver, and "generic" apt routines (apt/).  Not only
	  is this more aesthetically pleasing, it also means that there
	  are no weird cross-directory dependencies (dependencies still
	  exist but they aren't weird any more: specifically, a straight
	  "make" will now always build code before its dependencies are
	  built.

	* src/ui.cc:

	  Fix do_next_solution_enabled().

	* src/generic/resolver_manager.cc, src/generic/resolver_manager.h:

	  Eliminate out_of_solutions; use the solutions_exhausted member
	  of the state snapshot to calculate
	  solution_generation_complete().

	* src/generic/resolver_manager.cc:

	  Use the resolver counts instead of out_of_solutions to set the
	  solutions_exhausted member of the state snapshot.  This fixes
	  the 'are there more solutions?' indicator.

	* src/generic/problemresolver/problemresolver.h:

	  Add an element to the counts cache that mirrors 'finished', and
	  update the cache at the important exit points from the solver
	  and (if no solver is running) when retrieving queue counts.

	* src/generic/problemresolver/problemresolver.h:

	  When screening out solutions that we've already generated a
	  subset of, take into account the set of unresolved dependencies
	  as well as the set of actions.

	* src/generic/problemresolver/solution.h:

	  If an action coincidentally fixes an unresolved dependency,
	  remove that dependency from the unresolved set.

	* src/generic/problemresolver/problemresolver.h:

	  Remove the forced_broken interface from the resolver itself.
	  Switch a call to unforce_break that I missed earlier to invoke
	  unapprove_break instead.

	* src/generic/resolver_manager.cc, src/generic/resolver_manager.h:

	  Rip the forced_broken stuff out of the resolver manager.

	* src/solution_item.cc:

	  Switch the solution_unresolved_item class to using the new
	  approved_broken stuff instead of forced_broken.

	* src/generic/problemresolver/problemresolver.h:

	  Doh, of course the MUTATORS for the new structure shouldn't be
	  constant!

	* src/generic/resolver_manager.cc, src/generic/resolver_manager.h:

	  Expose the approved_broken stuff from the manager.

	* src/generic/resolver_manager.cc, src/generic/resolver_manager.h:

	  Collect all the resolver manipulations into a common routine.

	* src/generic/problemresolver/problemresolver.h:

	  Add a set of "approved breaks" that should provide a more
	  sensible way of handling soft dependencies: instead of forbidden
	  the dependency to be solved outright, it just says that we
	  should place it in the 'unresolved' set whenever it comes up as
	  an option.  In other words, it defers any solution in which an
	  action is labelled with that dependency.

	* src/generic/problemresolver/problemresolver.h:

	  Fix the resolver indentation (finally).

2005-09-24 Rubén Porras <nahoo@inicia.es>

	* Update spanish translation

	* regenerate po/aptitude.pot, po/POTFILES.in and po files

2005-09-23  Daniel Burrows  <dburrows@debian.org>

	* src/generic/problemresolver/problemresolver.h:

	  When force-breaking a soft dependency, make sure to reject its
	  source as well.  NOTE: the semantics of force-breaking may be a
	  bit off; maybe they should be reviewed to better match approval?
	  (i.e., only reject solutions due to force-breaking if something
	  force-broken is listed as a justification)

	* src/ui.cc:

	  Connect state_changed to vscreen_update, so an update is always
	  enqueued when the resolver state changes.  In particular, this
	  ensures that a keyboard-invoked undo will always trigger a
	  screen update.

	* src/generic/resolver_manager.cc:

	  For safety, always unsuspend a background thread before calling
	  state_changed().

	* src/generic/resolver_manager.cc:

	  Fix background_suspender::unsuspend -- it wasn't clearing its
	  suspended flag, so the suspender would try to unsuspend AGAIN
	  when it was destroyed.

	* src/solution_screen.cc:

	  Write a solution_undo_tree (analogue of apt_undo_tree) and use
	  it to activate the undo command in solution displays.

	* src/ui.cc:

	  Remove the no-longer-necessary do_undo() and undo_enabled()
	  routines.

	* src/apt_info_tree.h, src/pkg_tree.h:

	  Derive apt_info_tree and pkg_tree from the new undo-supporting
	  tree.

	* src/apt_undo_tree.cc, src/apt_undo_tree.h:

	  Add a tree class that implements an apt undo interface (i.e., so
	  package manipulation screens work as expected).

	* src/menu_redirect.cc:

	  Fix a rather silly typo.

	* src/menu_redirect.cc, src/menu_redirect.h:

	  Add menu_redirect hooks for the "undo" command.

	* src/ui.cc, src/ui.h:

	  Connect undo() through a signal instead of directly.  For now
	  do_undo() is still used, though.

	* src/generic/resolver_manager.cc:

	  Always signal state_changed() after an undo.

	* src/generic/resolver_manager.cc, src/generic/resolver_manager.h:

	  Add support for tracking an undo stack for a resolver manager's
	  state.

	* src/generic/problemresolver/problemresolver.h, src/generic/problemresolver/resolver_undo.h:

	  Correct a typo (generic_problem_resolver, not generic_resolver)
	  so the new code compiles.

	* src/generic/problemresolver/problemresolver.h, src/generic/problemresolver/resolver_undo.h:

	  Add support in the resolver for recording the inverse of
	  operations performed on it.  (could be done at a higher level,
	  but for obvious reasons, the resolver is uniquely positioned to
	  know exactly how to reverse its actions)

	* src/vscreen/vs_menu.cc, src/vscreen/vs_menu.h:

	  Allow the user to scroll the menu up and down on small
	  terminals.

	* src/view_changelog.cc:

	  Write a long menu description for the changelog pager.

	* src/ui.cc:

	  Edit the long menu description of the manual pager.

	* src/ui.cc:

	  Display the user's manual as a top-level widget instead of a
	  dialog box.

	* src/solution_screen.cc:

	  Switch back to using the widget itself as the menu target, and
	  bind menu handlers for the info area; the resolver menu works
	  now!

	* src/menu_redirect.cc:

	  Merge do_menu_test and do_menu_action into do_menu_callback, and
	  make the new routine use get_widget_active() to filter calls:
	  menu actions on a widget are valid only when every ancestor of
	  the widget is either the root or the 'active' widget of its
	  owner.

	* src/vscreen/vs_multiplex.cc:

	  Make it compile.

	* src/vscreen/vscreen_widget.cc, src/vscreen/vscreen_widget.h:

	  Make get_owner() return a ref_ptr, not a bare pointer.

	* src/vscreen/vs_container.h, src/vscreen/vs_menubar.cc, src/vscreen/vs_menubar.h, src/vscreen/vs_passthrough.cc, src/vscreen/vs_passthrough.h:

	  Add a routine to fetch the 'active' widget of a container (where
	  the definition of 'active' varies by widget, but is usually the
	  widget with the interaction focus).

	* src/ui.cc:

	  Add shortcut characters to the Resolver menu.

2005-09-22  Daniel Burrows  <dburrows@debian.org>

	* src/menu_tree.cc:

	  Say "Search Backwards", not "Search Back" (more readable).

	* src/ui.cc:

	  Don't talk about packages in the long menu description of
	  Search->Find and Search->Find Backwards now that other things
	  support those commands.

	* src/view_changelog.cc, src/view_changelog.h:

	  Add support for either forward or backwards searching.

	* src/vscreen/vs_pager.cc, src/vscreen/vs_pager.h:

	  Add support for searching backwards in a file.

	* src/menu_redirect.cc, src/menu_redirect.h, src/pkg_node.cc, src/solution_item.cc:

	  Write default implementations for the menu_redirect methods that
	  cause all commands to be disabled; avoids lots of repetitive and
	  pointless code in subclasses.

	* src/view_changelog.cc:

	  Make sure that the changelog pager's scroll bar occupies the
	  full vertical extent of the screen.

	* src/menu_tree.cc, src/menu_tree.h, src/pkg_item.cc, src/pkg_item.h, src/pkg_node.cc, src/pkg_node.h, src/pkg_ver_item.cc, src/pkg_ver_item.h, src/solution_item.cc, src/solution_item.h:

	  Split up the menu_tree monstrosity and eliminate most of the
	  dynamic_casts.  Now it just does a single dynamic_cast of the
	  currently selected item to the menu_redirect interface; if the
	  cast succeeds, it just proxies for the result.

	* src/solution_screen.cc:

	  D'oh, connect up the bindings to the examiner, not the info
	  tree.

	* src/menu_tree.cc, src/menu_tree.h:

	  Implement the resolver commands.  This exposed some real
	  kludginess in the menu_tree that should be fixed in the future
	  (I imagine it acting as simply a proxy for the selection when
	  the selection is a menu_redirect).

	* src/solution_item.cc, src/solution_item.h:

	  Split the key response actions into public methods.

	* src/Makefile.am, src/apt_info_tree.h, src/load_grouppolicy.cc, src/menu_tree.cc, src/menu_tree.h, src/pkg_tree.cc, src/pkg_tree.h, src/solution_screen.cc, src/ui.cc:

	  Rename pkg_menu_tree to menu_tree and split it into a separate
	  file from pkg_tree.

	* src/solution_screen.cc:

	  Use a pkg_menu_tree instead of a vs_tree to build the solution
	  screen.  Note that pkg_menu_tree is a bit of a misnomer now...

	* src/pkg_tree.h:

	  Make pkg_menu_tree::create a static method (whoops).

	* src/menu_redirect.cc:

	  Bind up the resolver menu signals.

	* src/Makefile.am, src/menu_redirect.cc, src/menu_redirect.h, src/pkg_view.cc:

	  Split the code to bind up a menu_redirect object and the active
	  package view out into a separate .cc file.

	* src/ui.cc:

	  Actually put the new items in the menu and define the signals.

	* src/ui.h:

	  Add signals that will be used to hook up the new menu items.

	* src/solution_item.cc, src/solution_item.h, src/solution_screen.cc:

	  Split the tree items from solution_screen.cc into their own
	  file.

	* src/ui.cc:

	  Typo fix.

	* src/menu_redirect.h, src/pkg_tree.cc, src/pkg_tree.h:

	  Add stubs for future resolver menu items.

	* src/ui.cc:

	  Add a Resolver menu with various resolver commands, for those
	  who like such things.

	* src/vscreen/vs_staticitem.cc:

	  Make vs_staticitem really use the whole width (it was using one
	  character less).

	* src/solution_screen.cc:

	  Add more verbiage to unresolved soft deps when they show up as
	  possible alternatives to the selected action.

	* doc/en/aptitude.xml, src/defaults.cc, src/solution_screen.cc:

	  Modify the SolutionActionAccepted style and the
	  SolutionActionAccept keybinding to conform to the new "approved"
	  terminology; don't overspecify the SolutionAction styles.

	* doc/en/aptitude.xml, doc/en/images/broken-snapshot.png, doc/en/images/solution-screen-snapshot.png, doc/en/images/solution-screen-snapshot2.png, doc/en/images/solution-screen-snapshot3.png, doc/en/images/solution-screen-snapshot4.png, doc/en/images/solution-screen-snapshot5.png:

	  Update the broken packages tutorial.

	* src/generic/problemresolver/problemresolver.h, src/generic/resolver_manager.cc:

	  Make approving and rejecting an action mutually exclusive:
	  actions that are approved are automatically un-rejected, and
	  vice versa.

	* src/generic/problemresolver/problemresolver.h:

	  Allow mandated versions to be ignored in favor of other mandated
	  versions, and don't special-case other versions of the package.

	* doc/en/aptitude.xml, src/defaults.cc:

	  Don't explicitly set the background color in package colors, so
	  the user can globally override the background color if he/she so
	  desires.

	* doc/en/aptitude.xml, src/defaults.cc, src/pkg_item.cc, src/pkg_item.h, src/reason_fragment.cc:

	  Make a separate named style for each and every possible package
	  item state, including both highlighted and non-highlighted
	  styles.  Among other things, this makes xterm display reasonable
	  cursor colors for highlighted packages (by removing the
	  A_REVERSE flag, which seems to confuse it in some cases).  Of
	  course, it also means that people have much more flexibility in
	  customizing the colors of the package list.

	* src/generic/resolver_manager.cc:

	  Optimize for the case of block_steps == 0 (so users can
	  stop it from using any threading primitives at all).

	* src/vscreen/vs_menubar.cc, src/vscreen/vs_menubar.h:

	  If the screen is too narrow to display a whole menubar, allow it
	  to "scroll" while the user is interacting with it.

	* src/vscreen/vscreen.cc:

	  (hopefully) fix the cursor placement problems that I was having.

	* src/vscreen/curses++.h:

	  Fix mvaddnstr for std::wstrings.

2005-09-22 Rubén Porras <nahoo@inicia.es>

	* Update spanish translation

	* regenerate po/aptitude.pot and po files

2005-09-21  Daniel Burrows  <dburrows@debian.org>

	* doc/en/aptitude.xml:

	  Document Aptitude::ProblemResolver::WaitSteps and
	  Aptitude::Spin-Interval.

	* src/generic/resolver_manager.cc:

	  Don't hold the lock while calling state_changed().  This avoids
	  deadlocks if state-changing callbacks trigger code that tries to
	  grab the instance lock from another thread.  (and just avoids
	  holding the lock over arbitrary code in general, probably a good
	  idea)

	* src/ui.cc:

	  Use the new maybe-blocking solution fetching routine.

	* src/generic/resolver_manager.cc:

	  Add support for cancelling a suspension before destroying the
	  corresponding background_suspender object.

	* src/generic/resolver_manager.cc, src/generic/resolver_manager.h:

	  Add a routine that waits for the resolver to perform some number
	  of steps before returning; can be used to avoid displaying a
	  progress indicator unless the search seems to be taking a while.

	* src/ui.cc:

	  Ignore attempts to apply solutions that don't exist yet.

	* src/broken_indicator.cc, src/cmdline/cmdline_resolver.cc, src/generic/resolver_manager.cc, src/generic/resolver_manager.h, src/solution_dialog.cc, src/solution_screen.cc, src/ui.cc:

	  Make the number of steps an explicit parameter to get_solution
	  and get_solution_background.

	* src/ui.cc:

	  Signal that the resolver state changed when it runs out of
	  solutions.

	* src/broken_indicator.cc:

	  Fix the placement of a bunch of code in broken_indicator::update
	  that accidentally ended up inside a loop.

	* src/broken_indicator.cc:

	  Dim out the unavailable actions in the broken hint line.

	* src/vscreen/fragment.cc:

	  Make column fragments always have a final newline.

	* src/vscreen/vscreen.cc:

	  When determining how long the timeout thread should sleep,
	  return the absolute time that the next timeout will trigger at,
	  not the amount of time until that time (this results in the
	  timeout thread spinning forever).

	* src/ui.cc, src/ui.h:

	  Trigger package_states_changed from apply_current_solution.
	  Among other things, this means that the information area is
	  properly updated when a solution is applied.

	* src/solution_screen.cc:

	  Destroy the whole examiner when there aren't any broken
	  packages, and do it from external code (not update() or a
	  connection to destroyed) to avoid any possibility of weirdness.

	* src/cmdline/cmdline_do_action.cc, src/generic/aptcache.cc, src/generic/aptcache.h, src/ui.cc:

	  Upgrade packages that were to-be-removed when doing a
	  dist-upgrade from the command line.  This is achieved by adding
	  a new flag to mark_all_upgradable that selects one or the other
	  behavior; also fixed the handling of Unknown packages in
	  mark_all_upgradable (it was just wrong before, and probably
	  wasn't noticed because that case should never come up anyway).

	* src/broken_indicator.cc, src/dep_item.h, src/download_bar.h, src/download_list.h, src/edit_pkg_hier.h, src/mine/cmine.h, src/pkg_info_screen.h, src/pkg_tree.h, src/pkg_ver_item.h, src/pkg_view.cc, src/solution_dialog.cc, src/solution_screen.cc, src/ui.cc, src/view_changelog.cc, src/vscreen/vs_button.h, src/vscreen/vs_center.h, src/vscreen/vscreen_widget.h, src/vscreen/vs_editline.h, src/vscreen/vs_frame.h, src/vscreen/vs_label.cc, src/vscreen/vs_label.h, src/vscreen/vs_menubar.h, src/vscreen/vs_menu.h, src/vscreen/vs_minibuf_win.h, src/vscreen/vs_multiplex.h, src/vscreen/vs_pager.h, src/vscreen/vs_scrollbar.h, src/vscreen/vs_size_box.h, src/vscreen/vs_stacked.h, src/vscreen/vs_statuschoice.h, src/vscreen/vs_table.h, src/vscreen/vs_text_layout.h, src/vscreen/vs_togglebutton.h, src/vscreen/vs_transient.h, src/vscreen/vs_tree.h:

	  Make the reference count of vscreen_widgets default to 1, not 0.
	  As a result, it is necessary for every creation routine to
	  explicitly decref() its return value before returning it.  Also
	  wrote a ::create() routine for cmine (it was missing one) and
	  changed ui.cc to call it.

	  The reason for doing this is that it allows routines run from
	  the constructor to acquire and release references without
	  causing the world to explode violently.

	* src/apt_info_tree.cc, src/broken_indicator.cc, src/download_bar.cc, src/download_list.cc, src/download_screen.cc, src/edit_pkg_hier.cc, src/mine/cmine.cc, src/pkg_info_screen.cc, src/pkg_view.cc, src/solution_dialog.cc, src/solution_screen.cc, src/vscreen/vs_bin.cc, src/vscreen/vs_button.cc, src/vscreen/vs_center.cc, src/vscreen/vs_container.cc, src/vscreen/vscreen_widget.cc, src/vscreen/vs_editline.cc, src/vscreen/vs_frame.cc, src/vscreen/vs_label.cc, src/vscreen/vs_menubar.cc, src/vscreen/vs_menu.cc, src/vscreen/vs_minibuf_win.cc, src/vscreen/vs_multiplex.cc, src/vscreen/vs_pager.cc, src/vscreen/vs_passthrough.cc, src/vscreen/vs_scrollbar.cc, src/vscreen/vs_size_box.cc, src/vscreen/vs_stacked.cc, src/vscreen/vs_statuschoice.cc, src/vscreen/vs_table.cc:

	  Take a self-reference in any routine that's not totally trivial
	  (in particular, any routine that invokes a virtual method or a
	  signal) in order to avoid future surprises like the one that
	  wasted so much time yesterday.

2005-09-20  Daniel Burrows  <dburrows@debian.org>

	* src/apt_info_tree.cc:

	  Preemptively fix a likely problem that turned up in an audit for
	  other instances of the access-this-after-self-destructing bug.

	* src/solution_screen.cc:

	  Have the examiner take a reference to itself in the destroy()
	  call; fixes a crash due to accessing members of the examiner
	  after it's deleted by destroy().

	* src/solution_screen.cc:

	  Clear out the other information areas when the multiplex goes.

	* src/vscreen/vs_multiplex.cc, src/vscreen/vs_table.cc:

	  Tighten some asserts.

	* src/vscreen/vs_table.cc:

	  Fix the logic that chooses a new focus after the current focus
	  goes away: most places were only looking at *UN*focussable
	  widgets; instead, only consider widgets that are visible and can
	  be focussed.

	* src/vscreen/vscreen_widget.cc:

	  Don't mark the widget as having been destroyed until after it's
	  been hidden and removed from its owner; this avoids some nasty
	  weirdness due to the way that the vscreen_widget accessors
	  change their behavior when the widget is destroyed.

	* src/broken_indicator.cc, src/solution_screen.cc:

	  Display the resolver progress in the solution screen instead of
	  in the broken indicator; use the new slot timeout object
	  to set up the broken indicator's timeout.

	* src/vscreen/vscreen.cc, src/vscreen/vscreen.h:

	  Add a slot_event that wraps a sigc++ slot in a safe
	  vscreen_event wrapper.

	* src/vscreen/vs_tree.cc:

	  Be robust in the face of a totally empty tree (one with a NULL
	  root pointer).

	* src/solution_screen.cc:

	  Display a list of the possible resolutions of the dependency
	  corresponding to each action.

	* src/solution_fragment.cc, src/solution_fragment.h:

	  Add a routine to display a description of a dependency that
	  might be a conflict through a Provides.

	* src/solution_screen.cc:

	  Remember that both trees have their visible flag set even though
	  only one is actually shown; the proper way to determine the
	  active child of a multiplexer is to call visible_widget().

	* src/solution_screen.cc:

	  Use the changes to vs_tree and vs_multiplex to correctly manage
	  the auxillary status areas.

	* src/vscreen/vs_multiplex.cc, src/vscreen/vs_multiplex.h:

	  Add a signal that is emitted when the visible widget changes.

	* src/vscreen/vs_tree.cc:

	  Fix a silly compilation error.

	* src/vscreen/vs_tree.cc, src/vscreen/vs_tree.h:

	  Add hooks for highlighting or unhighlighting the currently
	  selected item.

	* src/solution_screen.cc:

	  Set up a split-screen display of prospective solutions; this
	  will be used (in the future) to display alternatives to a given
	  action.

	* src/apt_options.cc:

	  Fix button placement in the options dialog: the Ok/Cancel
	  buttons were being crammed into the first column instead of
	  spreading across both columns.

	* src/vscreen/vs_editline.cc:

	  Don't crash when creating a very small line-editor, such as when
	  displaying the options dialog in a thin terminal (it has other
	  problems in a thin terminal, but at least this one is fixed
	  now).

2005-09-19  Daniel Burrows  <dburrows@debian.org>

	* src/broken_indicator.cc, src/mine/cmine.cc, src/vscreen/vscreen.cc:

	  It turns out that sigc++ isn't really threadsafe -- thanks to
	  weak references and deletion callbacks, read access to a slot
	  created in one thread can be interefered with (disastrously) by
	  the deletion of an apparently unrelated object in another
	  thread.  As it's virtually impossible to guarantee that this
	  doesn't occur, I have decided to just avoid touching slots
	  anywhere but the main thread.  The easiest way to make this
	  explicit is to require a vscreen_event to be passed to the
	  timeout thread (although a heap structure containing a slot
	  could also be safe).

	* src/solutions_screen.cc:

	  Make pressing Enter (or whatever is bound to InfoScreen) on an
	  action solution item pop up the information screen about the
	  corresponding version.

	* doc/en/aptitude.xml, src/cmdline/cmdline_resolver.cc:

	  Make the version score tweaking default to 0.

	* src/generic/resolver_manager.cc:

	  When the resolver is interrupted, put the job we were working on
	  back onto the queue, so that we start working on it again at the
	  next opportunity.

	* src/broken_indicator.cc:

	  Format the statistics in the interactive UI better.

	* src/cmdline/cmdline_resolver.cc:

	  Display resolver statistics from the command line.

	* src/cmdline/cmdline_spinner.cc:

	  Really handle the case where the message we want to display is
	  longer than the screen width.

	* src/broken_indicator.cc:

	  Display the resolver statistics while it's running.

	* src/generic/resolver_manager.cc, src/generic/resolver_manager.h:

	  Expose the resolver's queue counts in the state snapshot.

	* src/generic/problemresolver/problemresolver.h:

	  Allow users of the resolver to check the size of its various
	  queues.

	* src/generic/resolver_manager.cc:

	  Indicate that the background thread left the resolver before
	  calling the continuation (so if we ran out of threads, the
	  foreground thread will know to hide the spinner).

	* src/broken_indicator.cc:

	  Use columns to display the spinner flush-right and to display it
	  even when the user selects a finished solution again.

	* src/vscreen/fragment.cc, src/vscreen/fragment.h, src/vscreen/testvscreen.cc:

	  Add a simple column-generating class.  It has a caveat regarding
	  indentation, but aside from that it should be safe.

	* src/broken_indicator.cc, src/cmdline/cmdline_resolver.cc, src/cmdline/cmdline_spinner.cc, src/cmdline/cmdline_spinner.h, src/cmdline/Makefile.am, src/generic/resolver_manager.cc, src/generic/resolver_manager.h, src/solution_dialog.cc, src/solution_screen.cc, src/ui.cc:

	  Use the background thread to keep the UI responsive while the
	  resolver is running.

	* src/vscreen/vscreen.cc:

	  Fix the timeout thread; it was utterly broken (whoops).

2005-09-17  Daniel Burrows  <dburrows@debian.org>

	* src/generic/problemresolver/problemresolver.h:

	  When building a prospective solution from an old one, use
	  find_submap_containing instead of find_submap; this virtually
	  eliminates the huge amount of time that was being spent in
	  find_submap.

	* tests/test_dense_setset.cc:

	  Fix the predicate search test: the id halver was declared to
	  return bool, so it was actually only returning 0 or 1!

	* tests/test_dense_setset.c:

	  Add more tests of find_subset_containing.

	* tests/test_wtree.cc:

	  Correct a mistake in the test.

	* src/generic/immset.h:

	  Switch the second comparison of the roots of the two trees in
	  node_contains() -- I forgot to transform that one to its dual.

	* tests/test_wtree.cc:

	  Add a test for the subset (containment) routine.

	* src/generic/dense_setset.h, tests/Makefile.am, tests/test_dense_setset.cc:

	  Add a routine in dense_setset that searches for a subset of a
	  set that contains a particular element; will be useful for
	  optimizing the core resolver.

	* src/generic/immset.h:

	  Write an intrinsic subset routine for the binary trees that
	  should be quicker than iterating over them.

	* src/generic/problemresolver/conflictset.h, src/generic/problemresolver/problemresolver.h, tests/test_resolver.cc:

	  Back out the conflictset class, since it didn't speed anything
	  up and may have slowed stuff down.  Also, I have a better
	  high-level idea about cutting back on the cost of conflict
	  testing.

2005-09-16  Daniel Burrows  <dburrows@debian.org>

	* src/generic/problemresolver/conflictset.h:

	  Properly handle the case of an empty right branch by just
	  setting right_offset to one past the left branch.  This is
	  exactly correct, although it has the effect of causing the tree
	  to overlap itself (if you work it out, though, this is exactly
	  what's desired anyway).

	* tests/test_resolver.cc, src/generic/problemresolver/conflictset.h, src/generic/problemresolver/problemresolver.h:

	  Add an experimental conflict set optimized under some
	  assumptions that may or may not turn out to actually hold for
	  real programs once I get it working.

	* src/generic/resolver_manager.cc:

	  Make a thread-kill override all other control messages, so that
	  the program doesn't deadlock trying to shut the background
	  thread down.  What would happen was that if, e.g., the resolver
	  was null and the foreground thread tried to kill the background
	  thread, the background thread would sit there waiting for the
	  resolver to be non-null.

	* src/generic/resolver_manager.cc:

	  Fix a segfault that occurred when shutting down the resolver
	  thread.

2005-09-15  Daniel Burrows  <dburrows@debian.org>

	* src/generic/problemresolver/Makefile.am:

	  Don't put threads.o and util.o in LDADD any more; the changes in
	  the last commit made this unnecessary.

	* src/generic/resolver_manager.cc, src/generic/resolver_manager.h:

	  Rewrite the threading support to allow multiple simultaneous
	  jobs in the background thread; the foreground thread now just
	  posts jobs to the background thread and waits for a reply.
	  Furthermore, the complicated dance of constantly
	  stopping/starting the background thread has been removed in
	  favor of a scheme where the thread is started once and then
	  suspended using condition variables.

	* src/generic/problemresolver/problemresolver.h:

	  Allow the cancellation of a find_next_solution call to be
	  revoked or posted before the call starts.  Needed to avoid
	  races.

	* src/generic/threads.h:

	  Let the filled state of void boxes be directly set in the
	  constructor.

	* src/download_list.cc:

	  Fix a divide-by-zero.

	* src/ui.cc, src/ui.h, src/view_changelog.cc:

	  Add support for the new display mode of download_list.

	* src/generic/resolver_manager.cc:

	  Initialize the continuation to NULL to prevent nasty nasty
	  segfaults.

	* src/download_list.cc, src/download_list.h:

	  Add support for a display mode in which no estimated time is
	  provided and the progress bar assumes that all files have the
	  same size; this will be useful for list updates (where apt
	  kindly provides absolutely useless total-size information to the
	  status object).  Note that since TotalItems is not meaningful,
	  this doesn't (can't) fix all the problems.

2005-09-14  Daniel Burrows  <dburrows@debian.org>

	* src/generic/resolver_manager.cc:

	  Reset the currently selected solution to 0 when discarding the
	  resolver.

	* src/generic/resolver_manager.cc:

	  Don't let the solution pointer go past
	  one-off-the-end-of-the-list; fixes some uncaught exceptions.

	* src/resolver_manager.cc, src/resolver_manager.h:

	  Add coarse-grained threading support: the manager can start a
	  background thread for computations; thread-safety is ensured by
	  completely stopping the thread before performing dangerous
	  mutations.

	* src/generic/immset.h:

	  Fix a silly error in the implementation of clone(): pass the
	  value to the wtree_node constructor in addition to the children.
	  Also fix constructor ordering in the set-from-a-node constructor
	  (needed for the set's clone()).

	* src/generic/problemresolver/solution.h:

	  Add support for cloning an entire solution.

	* src/resolver_manager.cc, src/resolver_manager.h:

	  Instead of providing a limited interface to just step around and
	  get the current solution, allow steps to be taken without
	  implicitly calculating a new solution, and allow any solution to
	  be queried (possibly generating a bunch in the process).

	* src/ui.cc:

	  When accessing resman in contexts where the apt cache might not
	  be loaded (hence the globals don't exist), check whether it's
	  NULL before accessing it.

	* src/generic/resolver_manager.cc:

	  In maybe_create_resolver, don't try to create a resolver unless
	  none exists (sometimes maybe_create_resolver is called
	  unnecessarily, because nothing actually changed and the resolver
	  wasn't discarded).

	* src/broken_indicator.cc, src/cmdline/cmdline_prompt.cc, src/cmdline/cmdline_resolver.cc, src/generic/aptcache.cc, src/generic/aptcache.h, src/generic/apt.cc, src/generic/apt.h, src/generic/Makefile.am, src/generic/resolver_manager.cc, src/generic/resolver_manager.h, src/solution_dialog.cc, src/solution_screen.cc, src/ui.cc:

	  Factor the resolver management functions of the cache file out
	  into a separate class.

	* src/generic/problemresolver/problemresolver.h:

	  includes is in namespace std, add a qualifier (why did this ever
	  compile?).

	* src/generic/problemresolver/Makefile.am:

	  Ugh: link threads.o and util.o into test.  In the future I need
	  to rearrange the files here and maybe use a less stupid build
	  system so that this isn't so fragile.

	* src/generic/problemresolver/problemresolver.h:

	  Add a missing #include <algorithm> to the resolver header.

	* src/generic/aptcache.cc, src/generic/aptcache.h:

	  Add a method to the backend cache which applies a given
	  solution, rather than just applying the currently selected
	  solution.

	* src/generic/aptcache.cc, src/generic/aptcache.h:

	  Add a new signal that gets called *before* the package states
	  change; this is needed to run the resolver in the background
	  (since it's a reader of the depcache, it has to be killed before
	  anything writes back to the depcache).

2005-09-13  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptcache.cc:

	  Don't even try to auto-keep packages that are unused due to an
	  upgrade.  It is possible that auto-keeping a package will lead
	  to broken dependencies even in a situation where nothing was
	  previously broken; I think it's worse to break the output of the
	  problem resolver than to do the "wrong" thing sometimes in a
	  broken situation, and I don't see a simple solution that retains
	  the auto-keep behavior, so I'm just backing it out.

	* src/download_list.cc:

	  Fix download cancellation: don't actually destroy the widget
	  managing the download until Complete is received (indicating
	  that the background task is finished); just store the
	  cancellation and report it on the next Pulse.

2005-09-12  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptcache.cc:

	  Only run mark-and-sweep after setting a candidate version if the
	  grouping level is 0.

	* src/generic/problemresolver/problemresolver.h:

	  I embarassingly forgot to initialize solver_cancelled and
	  solver_running; do so.

2005-09-10  Daniel Burrows  <dburrows@debian.org>

	* src/generic/problemresolver/exceptions.h, src/generic/problemresolver/problemresolver.h:

	  Add code to manage the resolver in the presence of threads; it
	  ensures that at most one find_next_solution call is running at
	  once, and allows a find_next_solution call to be cleanly
	  cancelled (throwing a special exception); it's guaranteed that
	  you can start the resolver back up after cancelling it.

2005-09-10 Jean-Luc Coulon  <jean-luc.coulon@wanadoo.fr>

	* update French translation
	
2005-09-09  Daniel Burrows  <dburrows@debian.org>

	* src/cmdline/cmdline_prompt.cc:

	  Add a missing #include.

	* src/generic/immset.h:

	  Add routines to create non-overlapping copies of trees (since
	  the overhead from locking the reference count of trees is too
	  high, this is the only way to safely pass set structures between
	  threads).

	* doc/en/aptitude.xml, src/cmdline/cmdline_prompt.cc:

	  By popular demand, add a configuration option to bypass the
	  trust check in command-line mode (apparently this is useful for
	  scripted installations and so on).

	* src/download_list.cc:

	  Eliminate all uses of vscreen_mainloop by using the continuation
	  callbacks instead.  (Closes: #136973)

	* src/download_thread.cc, src/download_thread.h:

	  Directly invoke the continuation-passing methods of
	  download_manager from the background thread.

	* src/download_manager.cc, src/download_manager.h, src/download_list.h, src/generic/acqprogress.cc, src/generic/acqprogress.h:

	  Write basic support for continuation-passing in the download
	  status callbacks; this will allow complete elimination of
	  vscreen_mainloop calls.

2005-09-07  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptitude_resolver_universe.h, src/generic/dense_setset.h, src/generic/problemresolver/problemresolver.h:

	  Add a 'dense' set-set class optimized for the case where the set
	  elements can be mapped to a dense domain of integers (i.e., use
	  an array instead of a hash table); yields a small but noticable
	  improvement in the code's performance.

2005-09-06  Daniel Burrows  <dburrows@debian.org>

	* src/download_list.cc:

	  Remove a bunch of no-longer-necessary tryupdate calls and don't
	  invoke vscreen_poll; only queue display updates if the download
	  list is visible..

	* src/ui.cc:

	  Move package downloads to a background thread.

	* src/generic/setset.h:

	  Significantly speed up the operation of find_subset by
	  preallocating space to store its hit counts.  This means that it
	  has to pass over the whole conflict set, but it appears that
	  it's better to do that than to allocate; I get a speedup of 2-3
	  times out of this change, which is fairly important when you
	  consider that find_subset is invoked almost a million times and
	  is where most of the time of the test case I'm considering is
	  spent.

	  Note that this makes find_subset NOT threadsafe.

	* doc/cs/aptitude.xml:

	  Correct several XML errors in the Czech documentation.

	* doc/en/aptitude.xml:

	  Apply Miroslav's corrections to fix some typos.

	* src/generic/problemresolver/problemresolver.h:

	  When a solution is encountered immediately after forcing a
	  dependency, actually produce it instead of silently discarding
	  it.

	* src/generic/solution.h:

	  Yes, I need to check that it compiles before I commit it.

	* src/generic/solution.h:

	  Actually factor in the full_solution_score when a new solution
	  will be broken-dep-less.

	* tests/test_resolver.cc:

	  Fix a stupidity in the test (infinity is expected to be
	  positive, not negative, when setting up the resolver).

	* tests/test_resolver.cc:

	  Add a basic test that the rejection system won't go nuts and
	  reject other versions of the same package.

	* tests/test_wtree.cc:

	  Strip out some useless debugging dumps and correct some thinkos
	  in the tests.

	* tests/test_wtree.cc:

	  Explicitly test commutativity of intersection.

	* src/generic/immset.h, tests/test_wtree.cc:

	  Fix a very dumb error when intersecting against an empty set.

	* src/generic/immset.h, tests/test_wtree.cc:

	  Generalize the intersection routine to only find intersections
	  matching a predicate; add hooks in the map class to test for
	  domain intersection, containing an identical element, and
	  general intersection.

	  Also, actually fail if the intersection test doesn't work
	  (oops); this turns up a mistake in the current implementation
	  (double oops).

	* src/generic/immset.h, tests/test_wtree.cc:

	  Write a set routine to test whether two sets intersect.

2005-09-05 Miroslav Kure <kurem@upcase.inf.upol.cz>

	* update Czech translation and Czech manual translation

2005-09-05 Miguel Figueiredo <elmig@debianpt.org>

	* update Portuguese translation
	
2005-09-04  Daniel Burrows  <dburrows@debian.org>

	* src/generic/problemresolver/problemresolver.h:

	  Fix a bug in contains_rejected: instead of returning true on
	  solutions that installed a rejected version, it was returning
	  true on solutions that installed a package with a rejected
	  version.

	* src/generic/problemresolver/problemresolver.h:

	  Add more debugging output for figuring out why deferrals occur.

	* src/cmdline/cmdline_do_action.cc, src/cmdline/cmdline_upgrade.cc, src/download.cc, src/download.h, src/ui.cc:

	  Split the download-and-install routines the same way that update
	  was split.  NB: both splits should be refined in the future by
	  creating classes that encapsulate the algorithms.

	  In the process of doing this, made the message about
	  installation failures a little less silly.  (Closes: #230188)

2005-09-04 Clytie Siddall <clytie@riverland.net.au>

	* Update vietnamese translation
	
2005-09-04 Rubén Porras <nahoo@inicia.es>

	* Update spanish translation

	* regenerate po/aptitude.pot and po files
	
2005-09-03  Daniel Burrows  <dburrows@debian.org>

	* src/cmdline/cmdline_update.cc, src/download.cc, src/download.h, src/download_thread.cc, src/download_thread.h, src/ui.cc:

	  Use the download_thread class to run list updates in the
	  background.

2005-09-02  Daniel Burrows  <dburrows@debian.org>

	* src/Makefile.am, src/download_thread.cc, src/download_thread.h:

	  Write harness code for running downloads in the background.

	* src/generic/threads.h:

	  Fix some silly compilation errors; make all broken-out box
	  functions inline so they don't cause link failures.

	* src/generic/threads.h:

	  Add a helper class to bootstrap noncopyable functors in threads,
	  and write an explicit specialization of threads::box for void
	  that acts as a "baton repository".

	* src/cmdline/cmdline_update.cc, src/download.cc, src/download.h:

	  Split the package-list updating code around the download
	  operation, so that the download itself can be pushed into a
	  separate thread eventually.

	* configure.ac, src/download_bar.cc, src/download.cc, src/download_list.cc, src/download_screen.cc, src/vscreen/Makefile.am, src/vscreen/curses++.cc, src/vscreen/vscreen.cc, src/vscreen/vscreen.h:

	  Explicitly support and use threading in the vscreen core.  The
	  design is relatively conservative: only the "main" thread is
	  permitted to access most vscreen stuff; other threads carry out
	  vscreen tasks by "posting" events to the main loop; the events
	  are run serially in the main loop.

	  The core vscreen loop has been split into a small main loop and
	  three auxillary threads that dispatch input, timeout, and
	  asynchronous signal events to the main loop.  The resulting code
	  should be a lot cleaner than what I had before, although there
	  are still some warts that could be taken care of.
	  Unfortunately, resizing seems to be slightly broken by this, or
	  at least broken in a different way than it was before; the
	  terminal sometimes displays incorrectly until you press a key.

	* src/generic/threads.h:

	  Support mutex attributes and add a recursive mutex type (for
	  static initialization).

2005-09-01  Daniel Burrows  <dburrows@debian.org>

	* src/generic/threads.h:

	  Bind pthread_cancel.

	* src/generic/threads.h:

	  Add a convenience box proxy that stores a pointer and deletes it
	  when destroyed (if it's full).

	* src/generic/event_queue.h, src/generic/threads.h, tests/test_threads.cc:

	  Add support for timed waits.

	* src/generic/event_queue.h, tests/test_threads.cc:

	  Write a simple event queue abstraction.

2005-08-31  Daniel Burrows  <dburrows@debian.org>

	* src/generic/threads.cc, src/generic/threads.h, test/test_threads.cc:

	  Add some generic code that wraps pthreads in a less error-prone
	  interface, based on boost::threads (didn't just use
	  boost::threads because of the unstable interface and the extra
	  dependency it would introduce).

	* src/generic/immset.h:

	  When extracting and removing the minimum element of a tree,
	  remember that while the minimum has (by definition) no *left*
	  children, it might have a *right* child.  Thus, instead of just
	  replacing the removed element with an empty tree, replace it
	  with its right child.

	* src/generic/immset.h, tests/interactive_set_test.cc:

	  Make the set dump a dump() routine instead of operator<<, since
	  it's not really suitable as a generic way of displaying a tree.

	* tests/test_wtree.cc:

	  Write a test targetted at the bug that showed up today in
	  imm::set.

	* tests/Makefile.am, tests/interactive_set_test.cc:

	  Add a simple interactive test for the set code.

	* src/generic/immset.h:

	  Yet another silly error from moving the code: use getRight, not
	  getLeft.

	* src/generic/immset.h:

	  Add missing #include of iostream.

	* src/generic/immset.h:

	  Right, don't crash on empty nodes (somehow that got lost when
	  pasting from the code in the staging area).

	* src/generic/immset.h:

	  Add operator<< implementations that show the structure of each
	  set/map.

2005-08-31 Sorin Batariuc <sorin@bonbon.net>

	* Update Romanian translation
	
2005-08-31  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptitude_resolver_universe.cc:

	  Don't skip packages that aren't InstBroken when searching for
	  broken packages; fixes the broken-list anomaly that recently
	  turned up.

	* tests/test_apt_universe.cc, tests/data/*:

	  Add an apt_universe test for the consistency of the broken list,
	  and update the data to my current system, where the consistency
	  check fails.  (TODO: support several data directories and test
	  all of 'em)

	* src/generic/aptitude_resolver_universe.cc:

	  Fix the self-dependency check in broken_iterator::operator++;
	  now the global list of broken packages in aptitude_universe
	  properly excludes self-conflicts.  Fixes an assert failure.

	* src/generic/problemresolver/dummy_universe.cc, src/generic/problemresolver/dummy_universe.h, src/generic/problemresolver/solution.h, src/generic/aptitude_resolver_universe.cc:

	  Canonicalize some of the debugging output of the resolver to
	  make it a bit easier to verify that it works properly.

	* src/generic/problemresolver/dummy_universe.cc:

	  Don't put commas in the dumped form of dummy dependencies.

	* src/generic/aptcache.cc:

	  Update the dump format to match the expected input format of the
	  resolver test.

	* src/generic/util.cc, src/generic/util.h, src/solution_fragment.cc:

	  Lift pkg_name_lt and ver_name_lt to generic code.

	* src/solution_fragment.cc:

	  Sort elements of a solution by name.

	* src/cmdline/cmdline_resolver.cc, src/cmdline/cmdline_util.cc, src/cmdline/cmdline_util.h, src/ui.cc, src/ui.h:

	  Let the user enter the visual interface from the resolver
	  prompt.

	* src/generic/aptcache.cc:

	  In mark_all_upgradable, only mark packages that are already
	  installed; don't flag uninstalled but stickily-to-be-installed
	  packages for installation.  (Closes: #317885)

	* src/generic/aptitude_resolver_universe.h, src/generic/apt.cc, src/generic/apt.h:

	  Pass the package cache into surrounding_or when calling it
	  before apt_cache_file is initialized, to avoid crashes.

	* src/generic/apt.h:

	  Add a const qualifier that might not matter but that certainly
	  can go in.

2005-08-30  Daniel Burrows  <dburrows@debian.org>

	* src/generic/tags.cc:

	  Optimize tag::operator++: testing for whitespace isn't strictly
	  necessary so don't waste time calling isspace.

	* src/main.cc:

	  Add a "nop" command, which might or might not be useful for
	  profiling the startup activities.

	* src/generic/setset.h:

	  Also use a hash table to represent the intermediate map object
	  used in find_subset.

	* src/generic/problemresolver/problemresolver.h, src/generic/setset.h, tests/test_setset.cc:

	  Use a hash table to represent the by-value indexing in a setset.
	  This appears to significantly speed up the setset structure --
	  by which I mean that finds go from being a major time sink (over
	  20% of the time in my test case) to taking negligible amounts of
	  time.

	* src/generic/setset.h:

	  Use a vector instead of a set to store the sets containing an
	  element.

	* src/generic/problemresolver/problemresolver.h:

	  Print a newline after the resolver statistics.

	* src/generic/immset.h:

	  Don't automatically split pairs in imm::map::for_each.

	* src/generic/util.h:

	  Also add project1st.

	* src/generic/util.h:

	  Add some missing functor classes that are in libstdc++ but
	  aren't standard.

	* src/generic/immset.h:

	  Add a missing const qualifier.

	* src/generic/immset.h:

	  Slightly optimize for_each and the other immset routines by
	  avoiding some wtree_node copies (hence avoiding reference-count
	  updates).

2005-08-30  Christian Perrier  <bubulle@debian.org>

	* po/fr.po: Completed by Jean-Luc Coulon and the French team

2005-08-30  Daniel Burrows  <dburrows@debian.org>

	* src/generic/problemresolver/problemresolver.h:

	  Make the conflict set a mapset instead of a std::set; use
	  setmap's special abilities to accelerate searches.

	* src/generic/setset.h:

	  Add a size() routine in setset and mapset.

	* src/generic/setset.h, tests/test_setset.cc:

	  Add a setset wrapper for sets of maps.

	* src/generic/immset.h, tests/test_wtree.cc:

	  Make imm::map::put update existing entries.

	* src/generic/immset.h:

	  Expose key_compare at the toplevel.

2005-08-29  Daniel Burrows  <dburrows@debian.org>

	* src/generic/setset.h, tests/test_setset.cc:

	  Make the necessary modifications to the 'setset' object to allow
	  extra relations on sets to be calculated (mainly to support
	  the subsumption relation as used to find conflicts).

	* src/generic/setset.h, tests/test_setset.cc:

	  Add a data structure that stores a set of sets, optimized for
	  searching for a superset or a subset of a given set without
	  using imm::set's slow operator++.

	* src/generic/immset.h:

	  Add missing const qualifier on wtree_node::for_each.

	* src/generic/problemresolver/problemresolver.h:

	  Fix compilation error in contains_rejected.

	* src/generic/immset.h:

	  Doh, fix for_each.

	* src/generic/immset.h:

	  Add a for_each operation that should be quicker for simple
	  iteration over trees.

	* src/generic/problemresolver/problemresolver.h:

	  Fix contains_rejected, which was not just slow (due to
	  imm::*::const_iterator), but was actually flat-out wrong.

	* src/broken_indicator.cc, src/cmdline/cmdline_resolver.cc, src/generic/aptcache.cc, src/generic/problemresolver/problemresolver.h, src/generic/problemresolver/solution.h, src/generic/problemresolver/test.cc, src/solution_fragment.cc, src/solution_screen.cc, tests/test_resolver.cc:

	  Use the new imm::* containers instead of std::*.  This makes
	  everything much slower...but on the upside, aptitude no longer
	  eats all my memory before giving up on a search.

	* src/generic/immset.h, tests/test_wtree.cc:

	  Add a 'node' member type to imm::map, and write comparison and
	  equality tests for wtrees.

	* tests/test_apt_universe.cc:

	  Actually load the local test data in the apt tests.

	* src/generic/problemresolver/problemresolver.h:

	  Eliminate the major bottleneck in the resolver code: rather than
	  constructing full solutions while searching for forcings and
	  unresolved dependencies, just construct as much of the solution
	  as is necessary.  In particular, the resolver now just
	  constructs a new actions map to search for conflicts.

	  With this change, the resolver goes from taking several minutes
	  to return a first result from 'dist-upgrade' to returning it
	  almost instantaneously.  The clue to finding this bottleneck was
	  the observation that the profiler reported a huge amount of time
	  being spent in broken_under, but that in fact hardly any time at
	  all was being spent in each individual call to that routine; the
	  problem was that it was being called millions of times to
	  construct the sets of broken dependencies for successor
	  solutions that were being discarded.

	* src/generic/problemresolver/solution.h:

	  Dereferencing a revdep_iterator is a bit expensive; cache the
	  result of doing so.

	* src/generic/immset.h:

	  Add a convenience routine to check if a value is in the domain
	  of a mapping.

2005-08-28  Daniel Burrows  <dburrows@debian.org>

	* src/generic/apt.cc:

	  Memoize surrounding_or: somewhat surprisingly, gprof reports
	  that aptitude's resolver is now (since the recent changes -- and
	  I suspect that the ones which caused this were *required* for
	  correctness' sake) spending 25% of its time in this routine!
	  The current change just memoizes the start of the OR group,
	  calculating the group's end directly from the start.

	* src/generic/immset.h:

	  Correct the corresponding thinko in the double left rotate.

	* tests/test_wtree.cc:

	  Write simple test cases for *all* the rotation operations.

	* tests/test_wtree.cc:

	  Correct a wrong test assertion.

	* src/generic/immset.h:

	  Correct a rather dumb thinko in the double right rotation that
	  caused segfaults.

	* src/generic/immset.h, tests/test_wtree.cc:

	  Rename wtree to set, and add a wrapper class to make it work as
	  a mapping.

2005-08-27  Daniel Burrows  <dburrows@debian.org>

	* src/generic/immset.h, tests/test_wtree.cc:

	  Add support for removing elements from a wtree and for finding a
	  particular element in the tree.

2005-08-26  Daniel Burrows  <dburrows@debian.org>

	* src/generic/immset.h, tests/Makefile.am, tests/test_wtree.h:

	  Write a basic framework for weight-based immutable trees.  These
	  trees explicitly share memory between different versions of a
	  tree (for instance, if a tree is updated by adding one element)
	  and I hope they'll help with some of the time and space issues
	  in the problem resolver.

	* src/generic/problemresolver/problemresolver.h:

	  Fix the generation of conflicts from forbiddings: if a -> b c
	  and a was removed, an attempt to install b would generate a
	  conflict against b rather than against a.

	* src/generic/problemresolver/problemresolver.h:

	  Fix an assertion failure: when re-processing a solution that's
	  been forced, remember that the iteration over dependencies
	  should be over the new solution's dependency set, not the old
	  one's.

2005-08-25  Daniel Burrows  <dburrows@debian.org>

	* tests/test_apt_universe.cc:

	  Add more diagnostic information to the connectivity tester.

	* src/generic/apt.cc:

	  Fix the behavior of is_interesting_dep on reverse dependencies:
	  they weren't being expanded to the surrounding OR, so the
	  subsumption relation was wrong.

	* tests/test_apt_universe.cc:

	  Provide more specific information in failure messages for the
	  connectivity test.

	* src/generic/aptitude_resolver_universe.cc:

	  Finally (I hope) fix the case of conflicts-through-provides in
	  solved_by().  It passes the test now.

	* tests/test_apt_universe.cc:

	  Discard apt errors rather than spewing them out (is this a good
	  idea?).

	* tests/test_apt_universe.cc:

	  Add a tester to verify that only interesting dependencies are
	  produced by the various dependency iterators.

	* src/generic/aptitude_resolver_universe.cc:

	  Give in and strictly conform to the providedness rule (i.e.,
	  dependencies that represent conflicts-through-provides are
	  exactly tuned to a single Provides relationship).  It's not
	  clear how to validate the reverse connectivity of the dependency
	  graph without this change.

	* src/generic/aptitude_resolver_universe.cc:

	  Set 'provides_open' to true before calling applicable(), so that
	  versioned reverse dependencies on a provided package are
	  correctly handled.  Also, remove a bunch of redundant
	  is_interesting_dep() calls.

	* src/generic/aptitude_resolver_universe.h:

	  When comparing dependencies, ignore the attached provides
	  iterator unless the dependency is a conflict.  This solves
	  problems caused by junk Provides iterators showing up when
	  revdep_iterators that passed through a Provides were
	  dereferenced.

	* tests/test_apt_universe.cc:

	  Fix the connectivity test to actually ignore stuff that fixes
	  the dependency under consideration (doh).

	* tests/test_apt_universe.cc:

	  Right, take sources into account in the other branch (this code
	  should probably be reorganized to be less brittle!).

	* tests/test_apt_universe.cc:

	  Instead of completely ceasing tests after a certain amount of
	  time, just test the rest of the archive less aggressively.

	* tests/test_apt_universe.cc:

	  Arbitrarily limit testSolves() so that it terminates in a
	  reasonable amount of time.

	* src/generic/aptitude_resolver_universe.cc:

	  Further fix handling of conflicts-through-provides in
	  solved_by(): claim that any version not providing the conflicted
	  package "solves" the conflict, for consistency with the
	  solver_iterator class.

	* src/generic/aptitude_resolver_universe.cc:

	  Fix handling of conflicts-through-provides.

	* src/generic/aptitude_resolver_universe.cc:

	  Follow Provides in solved_by().

2005-08-24  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptitude_resolver_universe.cc:

	  Don't crash when an UNINST version is passed to solved_by().

	* tests/test_apt_universe.cc:

	  Handle dependency sources correctly when testing the solver
	  graph.

	* tests/test_apt_universe.cc:

	  Generate more useful test failure messages.

	* tests/Makefile.am, tests/data:

	  Add some test data so I can have well-defined tests in the
	  future.

	* src/generic/aptitude_resolver.cc, src/generic/aptitude_resolver.h, src/generic/aptitude_resolver_universe.cc, src/generic/aptitude_resolver_universe.h, tests/test_apt_universe.cc:

	  Move the operator<< for aptitude_universe_dep objects to
	  aptitude_resolver_universe, so stuff that just uses the universe
	  (e.g., the test code) can avoid including the whole resolver.

	* tests/Makefile.am, tests/test_apt_universe.cc:

	  Add tests for the graph-structure of the apt universe
	  translation layer.

	* src/generic/problemresolver/solution.h, tests/test_resolver.h:

	  Avoid crashing in test code by making the tester a friend of the
	  solution and directly constructing solutions for the solution
	  test (bypassing the sanity-checking public constructors).

	* src/generic/problemresolver/problemresolver.h, src/generic/problemresolver/solution.h, tests/test_resolver.h:

	  Massive refactoring of the problem resolver.  The solution
	  abstraction is now much stronger: solutions can *only* be
	  constructed as either a root node or a successor to an existing
	  solution, and score calculation is handled in the constructor
	  (actually a static factory function).

	  Instead of trying hard to not actually build solution objects,
	  the main resolver now generates all solutions up-front; this
	  introduces some new inefficiencies while removing others, but it
	  does seem to have slightly slowed the program down.

	  Needless to say, separating solution generation from solution
	  processing makes everything so much cleaner that it's not even
	  funny.  Some errors may also been introduced that will need to
	  be dealt with; actual testing is probably a good idea here.

2005-08-23  Daniel Burrows  <dburrows@debian.org>

	* src/generic/problemresolver/problemresolver.h:

	  Fix several obvious errors and inconsistencies in calculating
	  solution scores.

	* src/generic/problemresolver/problemresolver.h:

	  Efficiency tweak: when comparing solutions by their contents,
	  don't do a full lexicographical compare unless the two solutions
	  have different sizes and different scores.  This moves
	  lexicographical_compare from second place with 18% of the
	  running time to ninth place with 2.47% of the running time.

2005-08-20  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptitude_resolver_universe.cc:

	  Fix the projection of conflicts-through-provides into the
	  abstract universe: the gateway test should check that the
	  current version provides the *target* of the Conflict, not the
	  *source*.

	* src/generic/problemresolver/problemresolver.h:

	  Fix a silly error: of course when populating a partial conflict
	  map, we shouldn't randomly stick the forbidden versions into it.

	* src/generic/matchers.cc:

	  Fix an uninitialized variable usage turned up by compiling with
	  -O2.

	* src/generic/problemresolver/problemresolver.h:

	  Don't spew quite so much in debug mode when checking for
	  conflicts, and add a note about how long the search took when it
	  fails.

	* src/generic/problemresolver/problemresolver.h:

	  When checking whether a solution is irrelevant, also check
	  whether it contains a known conflict.

	* src/generic/problemresolver/problemresolver.h:

	  Split the monstrosity of will_conflict into four routines.

	* src/generic/problemresolver/problemresolver.h:

	  Get everything compiling and sort of working.  Probably all
	  sorts of stuff needs to be fixed up, though :-/.

2005-08-19  Daniel Burrows  <dburrows@debian.org>

	* src/generic/problemresolver/problemresolver.h:

	  Fix will_conflict (the previous definition was obviously wrong).

	* src/generic/problemresolver/problemresolver.h, src/generic/problemresolver/solution.h:

	  Add preliminary support for tracking logical conflicts within
	  solutions.  This will eventually allow the elimination of some
	  cases where the resolver currently goes exponential.

	* src/generic/problemresolver/problemresolver.h:

	  Improve debugging output (used to catch the below bug) and add
	  early branching for user requests (should mean that if the user
	  requests something impossible, we tell them ASAP).

	* src/generic/aptitude_resolver_universe.cc:

	  Fix solved_by(): it was returning "true" for most non-virtual
	  Conflicts (whoops).

	* src/broken_indicator.cc:

	  Base the decision on whether to really update the broken
	  indicator both on the actual generated solution and on whether
	  the completed-state of the backend resolver changed.

	* src/generic/aptcache.cc:

	  Call selected_solution_changed() when we run out of solutions.

	* src/broken_indicator.cc:

	  When displaying the summary of the current number of broken
	  packages, always show how many solutions have been generated so
	  far; for instance, 1(2)/... .

	* src/generic/aptcache.cc, src/generic/aptcache.h:

	  Tell parties who are interested in the resolver that they should
	  update themselves even if we only might have changed the
	  open-endedness of the queue.

	* src/generic/problemresolver/problemresolver.h:

	  Always check the deferred queue before checking whether we've
	  run out of solutions.

	* src/cmdline/cmdline_resolver.cc:

	  Fix the messages displayed when accepting a version, and
	  actually accept it!

	* src/generic/aptitude_resolver_universe.cc, src/generic/aptitude_resolver_universe.h, src/generic/problemresolver/dummy_universe.cc, src/generic/problemresolver/dummy_universe.h, src/generic/problemresolver/problemresolver.h:

	  Redefine acceptedness of versions: instead of rejecting all
	  other versions of the package (which is wrong anyway), accepting
	  a version now discards any solution that *COULD* have picked
	  that version but didn't.

2005-08-18  Daniel Burrows  <dburrows@debian.org>

	* doc/en/aptitude.xml:

	  Extend the tutorial on managing packages with notes about broken
	  dependencies, and document the new styles corresponding to
	  solutions.  Needs more work (but I've realized that the code is
	  actually wrong now).

	* src/solution_fragment.cc:

	  Add a newline after each note about an unresolved
	  recommendation.

	* src/solution_screen.cc:

	  Fix the text displayed for a 'story' in the curses interface
	  when a package's removal is going to be cancelled.

	* doc/en/aptitude.xml:

	  Start updating the documentation for the next version: fix some
	  comments in the tutorial, and fix some keystroke documentation.

2005-08-17  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptcache.cc, src/generic/aptitude_resolver.cc, src/generic/aptitude_resolver.h:

	  Add support for adding an extra penalty to solutions that break
	  a user hold or install a forbidden package version.

	* src/vscreen/vs_tree.cc:

	  Fix the bug that caused the screen to scroll pointlessly at the
	  end of the list.

	* src/generic/problemresolver/problemresolver.h:

	  Check for unresolved hardened deps both when enqueuing solutions
	  and when dequeuing them.

	* src/generic/problemresolver/problemresolver.h:

	  Fix breaks_hardened() to actually work.

	* src/solutions_screen.cc:

	  Use the new hardening/force-breaking stuff to allow users to
	  manipulate solutions containing a broken recommendation.

	* src/generic/problemresolver/problemresolver.h:

	  Fix force_break() and unforce_break() to call reject_version()
	  and unreject_version() rather than reject() and unreject().
	  Fixes compilation.

	* src/generic/problemresolver/problemresolver.h, src/generic/aptcache.cc, src/generic/aptcache.h:

	  Add support for "hardening" soft dependencies; basically this
	  functions like a rejection of the decision to leave the
	  dependency unresolved.

	* src/solution_screen.cc:

	  Use an aptitude_universe::dep, not a pkgCache::DepIterator, to
	  track unresolved soft deps.

	* src/vscreen/transcode.h:

	  Remove format_arg specifiers, they don't work and break
	  compilation.

	* src/vscreen/transcode.h:

	  Add format_arg specifiers that are presently useless since gcc
	  doesn't know about wide strings.

	* src/aptitude.h:

	  Add a format_arg attribute to P_.

	* src/solution_screen.cc:

	  Fix a bad parameter type turned up by the ssprintf attribute.

	* src/generic/util.h:

	  Add a formatting __attribute__ specifier to ssprintf (can't add
	  one to swsprintf because gcc doesn't know about checking wide
	  strings).

	* src/generic/aptcache.cc:

	  Penalize broken soft deps less than removals, and add some
	  cautionary text about the danger of fiddling with the resolver
	  settings.

	* src/cmdline/cmdline_resolver.cc:

	  In the 'story', make sure to insert the dep_text with %ls, not
	  %s.

	* src/cmdline/cmdline_resolver.cc:

	  Add support for rejecting/accepting versions from the
	  command-line.

	* src/solution_fragment.cc:

	  Silly compilation fix.

	* src/solution_fragment.cc, src/solution_fragment.h, src/solution_screen.cc:

	  Move archives() to solution_fragment and call it
	  archives_text(); eliminate archives_fragment().  (probably this
	  whole collection of routines should be pushed down to generic/)

	* src/generic/problemresolver/problemresolver.h, src/generic/aptcache.cc, src/generic/aptcache.h, src/solution_screen.cc:

	  Push the mandatory-version handling down into the generic
	  problem resolver class.

	* doc/en/aptitude.xml:

	  Document SearchBack and that '\' is no longer ReSearch.

	* src/vscreen/vscreen.cc:

	  Fix the definition of ReSearch.

	* src/pkg_tree.cc:

	  Fix the initialization of last_search_backwards when incremental
	  search is enabled.

	* src/vscreen/vs_tree.cc:

	  When directly setting the selection to a new tree location, make
	  sure to expand the parents of the new selection first.

	* src/menu_redirect.h, src/pkg_tree.cc, src/pkg_tree.h, src/pkg_view.cc, src/ui.cc, src/ui.h, src/vscreen/vscreen.cc:

	  Add UI hooks to support reverse searching.  (Closes: #323239)

	* src/vscreen/vs_tree.cc, src/vscreen/vs_tree.h:

	  Add widget support (untested) for reverse searching.

	* src/solution_screen.cc:

	  Use the fragment subsystem to add text attributes to the story.

	* src/defaults.cc, src/solution_screen.cc:

	  Add support for switching between a 'solution' viewing mode and
	  a 'story' viewing mode.

	* src/vscreen/vs_tree.cc:

	  Clean up line_up and line_down (NB: it's not quite clear that
	  their behavior is identical) and rewrite set_selection so that
	  it adjusts the top of the screen correctly, at the cost of a
	  line_of call.

2005-08-16  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/vs_tree.cc:

	  Handle the case of the first element in a tree being
	  unselectable in line_up().

	* src/solution_screen.cc:

	  Add and activate support for displaying a "story" in the visual
	  interface (currently you can't switch between story and
	  non-story mode, though).

	* src/cmdline/cmdline_resolver.cc, src/solution_fragment.cc, src/solution_fragment.h:

	  Change dep_fragment to dep_text, returning a wstring, not a
	  fragment.

	* src/dep_item.cc, src/dep_item.h:

	  Expose the dep_item class to the world.

	* src/cmdline/cmdline_resolver.cc, src/generic/solution.h:

	  Move the by-id comparison functor to the solution class.

	* src/solution_screen.cc:

	  Add a class that describes an action instead of just presenting
	  its associated version.

	* src/generic/problemresolver/dump_universe.h:

	  Indent soft dependencies the same way as hard dependencies.

	* src/generic/apt.cc:

	  Uh, yeah, recommends-important defaults to true.

	* src/generic/apt.cc:

	  Make recommends interesting iff Recommends-Important is true.

	* src/generic/aptcache.cc:

	  Discard any extant resolver when Recommends-Important changes.

	* src/generic/aptcache.cc:

	  Connect the mark-and-sweep signal to keep-suggests, not
	  keep-important.

	* src/generic/apt.cc:

	  Fix the deletion of cached_deps_interesting on a cache reload,
	  and set it up to also be deleted+reset when the
	  Recommends-Important variable is modified.

	* src/generic/apt.cc:

	  Only treat currently satisfied recommendations as interesting if
	  they belong to the current package version OR they subsume/are
	  subsumed by a recommendation of the current version.

	* src/generic/apt.cc:

	  Fix subsumes(): when the first dependency used a >= comparison,
	  it was checking for (> | <= | =) instead of (> | >= | =).  This
	  resulted, unsurprisingly, in >= recommendations that hadn't even
	  changed appearing as soft dependencies to the resolver.

	* src/generic/apt.cc:

	  Fix or_group_subsumes to not enter an infinite loop.

	* src/generic/aptcache.cc, src/generic/aptitude_resolver.cc, src/generic/aptitude_resolver_universe.cc, src/generic/aptitude_resolver_universe.h:

	  Memoize calls to is_interesting_dep().  The major change caused
	  by this is that objects in the aptitude_universe store
	  backpointers to the universe, not the cache (because calls to
	  is_interesting_dep need to go through the universe).

	  NB: is_interesting_dep could also be a global function in
	  apt.cc; would it be useful there?

	* src/generic/aptitude_resolver_universe.cc:

	  Redefine is_interesting_dep in terms of "subsumption": a
	  recommendation is now considered "interesting" iff it covers
	  neither a subset nor a superset of the version space covered by
	  a recommendation of the current version.

	* src/generic/aptitude_resolver_universe.cc, src/generic/aptitude_resolver_universe.h:

	  Make the is_interesting_dep function really be a static member
	  of aptitude_universe, and move it into the .cc file.

	* src/generic/Makefile.am, src/generic/aptitude_resolver_universe.cc, src/generic/aptitude_resolver_universe.h:

	  Move most of the implementation of the resolver universe into a
	  .cc file.

	* src/solution_screen.cc:

	  View unresolved recomendations in the solution tree too.
	  Untested; I need to come up with a test case where recommends
	  can't be satisfied.

	* src/solution_fragment.cc, src/solution_fragment.h:

	  Rename dep_targets_fragment to dep_targets; now it just
	  generates a plain string (and is a candidate for being pushed
	  down into the generic layer).

	* src/generic/aptcache.cc:

	  Slightly *reward* longer solutions, rather than slightly
	  penalizing them.  Although this might produce lower-quality
	  solutions, it has the effect of encouraging the resolver to
	  focus on more "mature" lines of reasoning, rather than backing
	  up and looking at alternatives first.

	* src/cmdline/cmdline_resolver.cc, src/solution_fragment.cc, src/solution_fragment.h:

	  Move some code for formatting information relevant to solutions
	  into solution_fragment.cc, and use it to output a list of
	  unresolved soft dependencies.

	* src/generic/problemresolver/problemresolver.h:

	  When looking for forced deps, leave soft deps with exactly one
	  resolver alone instead of discarding them.

2005-08-15  Daniel Burrows  <dburrows@debian.org>

	* src/generic/problemresolver/problemresolver.h:

	  Add an assert to check that things remain sane.

	* src/generic/problemresolver/problemresolver.h:

	  Correct the calculation of the new score when choosing to leave
	  a soft dependency unfixed.

	* tests/test_resolver.cc:

	  Correct the comparison of s1 and s2 (they should be equivalent).

	* src/generic/problemresolver/solution.h:

	  Uh, yeah, let's construct the set of unresolved soft deps by
	  *inserting* elements instead of removing them, eh?

	* tests/test_resolver.cc:

	  Fix the solution test to not require an operator<.

	* src/generic/problemresolver/problemresolver.h:

	  Make the ResolverTest class a friend so it can test internals of
	  the resolver.

	* src/generic/problemresolver/solution.h:

	  Keep the compiler from automatically generating an operator< for
	  solutions (which fooled me on at least one occasion into using
	  solutions as if they had a meaningful operator<).

	* tests/test_resolver.cc:

	  Fix several outright crashes in the solution test.

	* src/generic/problemresolver/test1.txt, src/generic/problemresolver/test3.txt:

	  Fix the test cases for the new solution formats.

	* tests/test_resolver.cc:

	  Add a test case for solution comparison; add more test cases to
	  action comparison.

	* tests/Makefile.am, tests/test_resolver.cc:

	  Add a first iteration of a real test case for the resolver.

	* src/generic/problemresolver/dummy_universe.cc, src/generic/problemresolver/dummy_universe.h, src/generic/problemresolver/test.cc:

	  Move some of the universe parsing code to the dummy_universe
	  interface file.  More to be done here.

	* src/generic/problemresolver/dummy_universe.h:

	  Add an interface for changing the current version of a package
	  after the fact.

	* src/generic/problemresolver/Makefile.am, src/generic/problemresolver/dummy_universe.cc, src/generic/problemresolver/dummy_universe.h, src/generic/problemresolver/test.cc:

	  Split the dummy universe out of the resolver test program so
	  that it can be used by other code.

	* src/generic/Makefile.am:

	  Add exceptions.h to Makefile.am.

	* src/generic/problemresolver/exceptions.h:

	  Make the problem resolver exceptions variants of Exception.

	* src/generic/Makefile.am, src/generic/exception.h:

	  Move the Exception class to the generic layer.

	* src/generic/problemresolver/problemresolver.h:

	  Fix comparison-by-contents of solutions so that the set of
	  unresolved soft dependencies is taken into account; should fix
	  the bug where the option of leaving a soft dependency unresolved
	  was dismissed immediately.

	* src/generic/problemresolver/solution.h:

	  Write operator== and operator!= that obey the rule about action
	  identities being based on the version installed.

	* src/generic/problemresolver/problemresolver.h:

	  Add missing conditionalization (only dump information about soft
	  dependencies when debugging is enabled).

	* src/generic/problemresolver/solution.h:

	  Fix how unresolved soft dependencies are displayed when dumping
	  a solution.

	* src/generic/aptitude_resolver_universe.h:

	  Make all critical deps and all recommends interesting.

2005-08-15 Miroslav Kure <kurem@upcase.inf.upol.cz>

	* General Czech translation update
	
2005-08-12  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptcache.cc, src/generic/aptitude_resolver_universe.h, src/generic/aptitude_resolver.cc, src/generic/aptitude_resolver.h, src/generic/problemresolver/dump_universe.h, src/generic/problemresolver/problemresolver.h, src/generic/problemresolver/solution.h, src/generic/problemresolver/test.cc:

	  Add basic support for "soft dependencies" (i.e., recommends) to
	  the resolver.

	* src/generic/aptcache.cc:

	  Don't try so hard to avoid keeping or upgrading packages, try a
	  little harder to preserve manual selections.

	* src/generic/aptitude_resolver.cc:

	  Make changes to automatically installed, automatically
	  to-be-removed, or removed packages costless.  This fixes an
	  exponential blowup caused by one-step-forward-two-steps-back
	  tendencies in the resolver.

	* src/generic/problemresolver/problemresolver.h:

	  Add a counter to show (when debugging) how many steps the
	  resolver took to converge on a solution.

2005-08-11  Daniel Burrows  <dburrows@debian.org>

	* src/solution_screen.cc:

	  Advance to the next element after selecting/rejecting an element
	  in a solution.

	* src/generic/problemresolver/problemresolver.h, src/generic/aptcache.h, src/generic/aptcache.cc, src/solution_screen.cc:

	  The "I have too many forbids floating around" commit: change the
	  API that lets the user entirely forbid the resolver from
	  generating solutions containing a particular version so that it
	  instead talks about "rejecting" such solutions.

	* src/cmdline/cmdline_action.cc:

	  Honor the Auto-Install option in the command-line layer.

	* src/generic/aptitude_resolver.cc, src/generic/problemresolver/problemresolver.h:

	  Add an option to enable or disable the elimination of "stupid
	  pairs".

	* src/generic/problemresolver/problemresolver.h:

	  Only put destupidified solutions back on the open queue if they
	  dropped versions (otherwise we just discard them because they're
	  already on the closed queue).

	* src/generic/problemresolver/problemresolver.h:

	  Add a debug output line and an assert.

	* src/generic/problemresolver/problemresolver.h:

	  Drop stupid pairs that are eliminated from the table of stupid
	  pairs.

	* src/cmdline/cmdline_resolver.cc:

	  Add support for viewing a solution in "action order".

	* src/solution_fragment.h:

	  Export archives_fragment.

	* src/ui.cc:

	  Trim unnecessary #includes here too.

	* src/solution_screen.cc:

	  Trim unnecessary includes here too.

	* src/solution_fragment.cc:

	  Don't #include problemresolver.h from here either.

	* src/solution_dialog.cc:

	  Trim back #includes further.

	* src/cmdline/cmdline_resolver.cc:

	  Trim back #includes of problemresolver stuff.

	* src/cmdline/cmdline_dump_resolver.cc:

	  Trim back the #includes of problemresolver stuff.

	* src/cmdline/cmdline_do_action.cc:

	  Remove an unnecessary #include.

	* src/broken_indicator.cc:

	  Trim back the #includes of problemresolver stuff to just the
	  solution class.

	* src/generic/problemresolver/solution.h: 

	  Add #includes that are missing now that this file has been
	  lifted out of problemresolver.h.

	* src/main.cc:

	  Only #include exceptions.h, not problemresolver.h.

	* src/generic/problemresolver/Makefile.am, src/generic/problemresolver/exceptions.h, src/generic/problemresolver/problemresolver.h:

	  Move the exceptions generated by the resolver to a separate
	  file.

	* src/generic/problemresolver/Makefile.am, src/generic/problemresolver/problemresolver.h, src/generic/problemresolver/solution.h:

	  Move the solution class to a separate file.

	* src/generic/Makefile.am, src/generic/aptitude_resolver.h, src/generic/aptitude_resolver_universe.h:

	  Push the aptitude resolver "universe" into a separate file.

	* src/generic/problemresolver/problemresolver.h, src/generic/problemresolver/test.cc:

	  Add an initial implementation of the stupid pair elimination
	  algorithm.  This is a bit messy; some of the auxillary templated
	  classes I introduced look to me like candidates for elimination
	  or candidates to be moved to a more generic location.

2005-08-10  Daniel Burrows  <dburrows@debian.org>

	* src/generic/util.h, tests/test_misc.cc:

	  Add a generic routine to compare pairs without respect to order.

	* src/generic/problemresolver/model.tex:

	  Put both algorithms on one page.

	* src/generic/problemresolver/model.tex:

	  Fix LaTeX errors.

	* src/generic/problemresolver/model.tex:

	  Finish the correctness proof of the algorithm, start blathering
	  about efficiency.

	* src/generic/problemresolver/model.tex:

	  Start describing how to eliminate "stupid pairs" from solutions,
	  including a preliminary writeup of the algorithm to use.

2005-08-10  Clytie Siddall <clytie@riverland.net.au>

	* Update to Vietnamese translation. (Closes: #322276)
	
2005-08-09  Daniel Burrows  <dburrows@debian.org>

	* src/generic/problemresolver/problemresolver.h:

	  Add support for reading off dependencies and placing them in
	  "story order".

	* src/defaults.cc, src/solution_fragment.cc:

	  Use the new methods to allow the user to interactively narrow
	  the search for a solution.

	* src/generic/aptcache.cc, src/generic/aptcache.h:

	  Add hooks in the apt cache interface layer for manipulating
	  forbidden versions.

	* src/generic/problemresolver/problemresolver.h:

	  Add initial support for user-forbidden versions.

	* src/solution_screen.cc:

	  Fix item highlighting.

	* src/vscreen/vs_tree.cc:

	  Include the highlight status in the style passed to
	  vs_treeitem::paint().

	* src/solution_screen.cc:

	  Write a specialized treeitem class to represent the elements of
	  a solution.

	* src/Makefile.am, src/solution_screen.cc, src/solution_screen.h, src/ui.cc:

	  Initial work towards a top-level solution examination screen.

	* src/pkg_info_screen.cc:

	  Remove a #include of vs_staticitem.

	* src/vscreen/vs_staticitem.h:

	  Further adjustment to vs_staticitem: tag() and label()
	  should be non-const now.

	* src/vscreen/vs_staticitem.cc, src/vscreen/vs_staticitem.h:

	  Make vs_staticitem a concrete class.

	* src/vscreen/vscreen.cc:

	  When trapping KEY_RESIZE, check first that we have a
	  KEY_CODE_YES event.

	* src/ui.cc:

	  If su-to-root fails, load selections from the file that we saved
	  in order to become root (rather than immediately zapping it and
	  forgetting all stored selections). (Closes: #281232)

	* src/vs_progress.cc:

	  Hide the progress bar in Done *after* triggering a screen
	  update, and un-hide it in Update().  With this change, progress
	  bars will be displayed across multiple Done() calls, but will
	  hide themselves after the last Done() call.

2005-08-08  Daniel Burrows  <dburrows@debian.org>

	* src/ui.cc:

	  Redesign how the active preview and tree are handled: use the
	  active preview for everything but actually building the tree; it
	  particular, show and destroy it instead of the tree.  Fixes the
	  problem where the preview tree disappeared from the preview
	  screen, without crashing due to double-destroying the preview.

	* src/download_list.cc:

	  *Do* destroy the download list when the download is complete, so
	  it disappears (it's safe: the only other way to destroy it is
	  from the 'q' handler, which can't trigger once the list is
	  destroyed).

	* src/ui.cc:

	  Don't redundantly delete the preview tree; fixes a segfault.

	* src/generic/matchers.cc, doc/en/aptitude.xml:

	  Add a "downgrade" action for use with ~a.

	* Makefile.am:

	  Distribute README.SMART-POINTERS.

	* src/vscreen/vs_label.cc, src/vscreen/vs_label.h:

	  Restore the old behavior of setting the background of the whole
	  widget from the constructor of vs_label, not just the color of
	  the actual text.

	* src/ui.cc:

	  Use sw?sprintf rather than a local w?snprintf in several spots.

	* src/vscreen/vs_util.cc:

	  Change an implementation signature of vs_dialog_fileview to
	  match the corresponding interface signature (fixes an undefined
	  reference at link time).

	* src/vscreen/vs_table.cc, src/vscreen/vs_table.h:

	  Fill in the missing focus_widget_bare routine.

	* src/ui.cc:

	  Pre-emptively weaken a bound reference.

	* src/view_changelog.cc:

	  Update the changelog viewer for refcounting.

	* src/vscreen/vs_pager.h:

	  Restore the default value for the "encoding" argument of the
	  vs_file_pager constructors.

	* src/vscreen/vs_pager.h:

	  Make the vs_file_pager constructors protected, not private.

	* src/download_list.cc:

	  Fix the default second parameter to download_list::create.

	* src/ui.cc:

	  Many updates to ui.cc to bring it in line with the new
	  interfaces and conventions.

	* src/dep_item.h:

	  Update pkg_dep_screen for the reference-counting protocol.

	* src/download_manager.cc:

	  Doh, set_widget isn't a constructor, don't write it like one.

	* src/download_manager.cc, src/download_manager.h:

	  Implement the constructors and set_widget in the .cc to avoid
	  needing more includes.

	* src/vscreen/vscreen_widget.cc:

	  Go past silently doing nothing if a widget is destroyed twice;
	  actually abort the program if this occurs.

	* src/vscreen/vs_menubar.cc, src/vscreen/vs_minibuf.cc, src/vscree/vs_stacked.cc, src/vscreen/vs_table.cc:

	  Make sure that we explicitly zero out the "owner" field of
	  widgets that are removed from these containers.  This has the
	  useful side effect of causing the Curses windows to be
	  invalidated and hence making the assertion(!win) succeed.

	* src/vscreen/vs_radiogroup.cc:

	  Fix a thinko: when we're removing the last button in a radio
	  group, of course there should be exactly ONE button in the
	  group, not exactly ZERO.

	* src/vscreen/vs_table.cc:

	  Be more careful in handling iterators so that the table routines
	  don't crash when the last widget is removed.

	* src/vscreen/vs_bin.cc, src/vscreen/vscreen_widget.cc, src/vscreen/vscreen_widget.h, src/vscreen/vs_menubar.cc, src/vscreen/vs_minibuf_win.cc, src/vscreen/vs_multiplex.cc, src/vscreen/vs_stacked.cc, src/vscreen/vs_table.cc:

	  Make sure that all containers destroy their contents in their
	  own destroy() routines.  NB: since destroy() has a side effect
	  of "remove me from my parent", the actual form of these routines
	  may be a bit surprising!.

	* src/ui.cc, src/vscreen/testvscreen.cc, src/vscreen/vscreen.cc, src/vscreen/vscreen.h:

	  Update the handling of the top-level widget: you should now call
	  vscreen_shutdown() when shutting the program down instead of
	  rootwin.endwin(), which will destroy and drop the top-level
	  widget; and you can retrieve the old top-level when setting up a
	  new one (in fact, you must, in order to make sure that destroy()
	  is called before deleting the pointer).

	* src/vscreen/vscreen_widget.cc:

	  Don't call destroy() from the destructor, and don't bother
	  clearing out the signals in destroy() (the latter change could
	  be reversed if I made it a requirement for ALL derived classes
	  to clear ALL signal lists in destroy(), but I think that for the
	  time being, I'll settle for requiring the widget to be
	  disconnected from all events after destroy().

	  Incidentally, calling destroy() from the destructor was a truly
	  awful idea -- not only is it a complex member function, it's
	  virtual! [EDIT: doh, it wasn't being called from a destructor.
	  Please ignore my stupidity]

	* src/vscreen/vs_radiogroup.cc:

	  Handle the case of removing the last button in a radio group.

	* src/vscreen/testvscreen.cc:

	  Close a memory leak reported by valgrind.

	* src/vscreen/vs_bin.cc, src/vscreen/vs_bin.h, src/vscreen/vscreen_widget.cc, src/vscreen/vscreen_widget.h, src/vscreen/vs_menubar.cc, src/vscreen/vs_menubar.h, src/vscreen/vs_minibuf_win.cc, src/vscreen/vs_minibuf_win.h, src/vscreen/vs_multiplex.cc, src/vscreen/vs_multiplex.h, src/vscreen/vs_stacked.cc, src/vscreen/vs_stacked.h, src/vscreen/vs_table.cc, src/vscreen/vs_table.h:

	  Create a new protocol for destroying widgets: a widget should
	  destroy and disconnect all of its children immediately upon
	  receiving destroy(), but the actual deletion of its instance
	  might be deferred if strong references to it exist (for
	  instance, if some information needs to be retrieved from it).

	  The test program runs and exits without errors now.

	* src/vscreen/vscreen_widget.cc:

	  Only assert that we lost our window if we had an owner: owned
	  widgets are removed from their owners, which must invalidate the
	  window, but unowned widgets can be the top-level widget and
	  might still have a window when the program exits.

	* src/solution_dialog.cc, src/solution_dialog.h:

	  Update the solution dialog for refcounting.

	* src/pkg_view.cc, src/pkg_view.h:

	  Update the package view generation code for refcounting.

	* src/vscreen/ref_ptr.h:

	  Make the dynamic downcast take a target class, not a target
	  class pointer, as its template argument.

	* src/pkg_ver_item.cc, src/pkg_ver_item.h:

	  Update pkg_ver_item for refcounting.

	* src/pkg_info_screen.h:

	  Update the pkg_info_screen signature for refcounting.

	* src/pkg_tree.cc, src/pkg_tree.h:

	  Update pkg_tree for refcounting.

	* src/edit_pkg_hier.h:

	  Whoops, make ::create() static.

	* src/pkg_item.cc:

	  Update the pkg_item implementation for refcounting.

	* src/edit_pkg_hier.h:

	  Update the vs_hier_editor class for the refcounting protocol.

	* src/vs_progress.cc, src/vs_progress.h:

	  Update the vs_progress class for the refcounting protocol.

	* src/download_bar.cc, src/download_bar.h:

	  Add missing size request implementations so the bar compiles.

	* src/download_list.cc, src/download_list.h:

	  Update the download list for refcounting.

	* src/download_bar.cc:

	  Make the constructor protected.

	* src/download_bar.cc:

	  Fix the download bar for the refcounting protocol.

	* src/download.cc:

	  Fix the download code for the refcounting protocol.

	* src/broken_indicator.cc, src/broken_indicator.h:

	  Fix the broken_indicator class to work in the presence of
	  reference counting.

	* src/vscreen/vs_text_layout.h:

	  Constructors should be protected, not private.

	* src/apt_config_widgets.cc, src/apt_config_widgets.h, src/apt_options.cc, src/apt_options.h:

	  Convert the configuration <-> UI interface layer to use the
	  reference-counting protocol (and, while I'm at it, stop using
	  multiple inheritance here).

	* src/main.cc:

	  Use a counting reference for the initial progress bar.

	* README.SMART-POINTERS:

	  Add some documentation on the use of smart pointers in aptitude.

	* src/cmine/cmine.cc, src/cmine/cmine.h:

	  Fix the Minesweeper code for ref_ptrs.

	* src/ui.h:

	  Use ref_ptrs in interface routines.

	* src/vscreen/vs_editline.h:

	  Add missing "const" qualifier to a constructor reference
	  argument.

	* src/vscreen/vs_util.cc, src/vscreen/vs_util.h:

	  Further reduce header interdependencies by forward-declaring the
	  ref_ptr class.

	* src/vscreen/ref_ptr.h, src/vscreen/testvscreen.cc, src/vscreen/vs_bin.cc, src/vscreen/vs_bin.h, src/vscreen/vs_container.cc, src/vscreen/vs_container.h, src/vscreen/vs_frame.cc, src/vscreen/vs_menubar.cc, src/vscreen/vs_menubar.h, src/vscreen/vs_multiplex.cc, src/vscreen/vs_multiplex.h, src/vscreen/vs_radiogroup.cc, src/vscreen/vs_radiogroup.h, src/vscreen/vs_stacked.cc, src/vscreen/vs_stacked.h, src/vscreen/vs_table.cc, src/vscreen/vs_table.h, src/vscreen/vs_util.cc, src/vscreen/vs_util.h:

	  Binding references as slot arguments causes weird and painful
	  problems.  Instead, use sigc++ weak references (sigc::ref);
	  since I want to be able to easily connect signals to public
	  methods, adopt the convention of providing a (non-virtual) _bare
	  variant of methods that take a refcounted pointer as an
	  argument; the variant accepts a reference to the underlying type
	  and wraps it in a ref_ptr before handing it to the real method.

2005-08-06 Rubén Porras <nahoo@inicia.es>

	* updated po/es.po

	* fixed Last-Translator field in po/vi.po

	* regenerate po/aptitude.pot and po files.
	
2005-08-06 Erçin EKER <erc.caldera@gmx.net>

	* updated po/tr.po

	* new help-tr.txt
	
2005-08-06  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/fragment.cc:

	  Fix an access-past-end-of-string discovered by valgrind.

	* src/vscreen/testvscreen.cc, src/vscreen/vs_bin.cc, src/vscreen/vs_bin.h, src/vscreen/vs_button.h, src/vscreen/vs_center.cc, src/vscreen/vs_center.h, src/vscreen/vs_container.cc, src/vscreen/vs_container.h, src/vscreen/vscreen.cc, src/vscreen/vscreen.h, src/vscreen/vscreen_widget.cc, src/vscreen/vscreen_widget.h, src/vscreen/vs_editline.cc, src/vscreen/vs_editline.h, src/vscreen/vs_frame.cc, src/vscreen/vs_frame.h, src/vscreen/vs_label.cc, src/vscreen/vs_label.h, src/vscreen/vs_menubar.cc, src/vscreen/vs_menubar.h, src/vscreen/vs_menu.h, src/vscreen/vs_minibuf_win.cc, src/vscreen/vs_minibuf_win.h, src/vscreen/vs_multiplex.cc, src/vscreen/vs_multiplex.h, src/vscreen/vs_pager.h, src/vscreen/vs_passthrough.cc, src/vscreen/vs_passthrough.h, src/vscreen/vs_radiogroup.cc, src/vscreen/vs_radiogroup.h, src/vscreen/vs_scrollbar.h, src/vscreen/vs_size_box.cc, src/vscreen/vs_size_box.h, src/vscreen/vs_stacked.cc, src/vscreen/vs_stacked.h, src/vscreen/vs_statuschoice.h, src/vscreen/vs_table.cc, src/vscreen/vs_table.h, src/vscreen/vs_text_layout.h, src/vscreen/vs_togglebutton.h, src/vscreen/vs_transient.cc, src/vscreen/vs_transient.h, src/vscreen/vs_tree.h, src/vscreen/vs_util.cc, src/vscreen/vs_util.h, src/vscreen/ref_ptr.h:

	  Convert the vscreen code over to using reference-counted
	  pointers for inter-object references.  This is a sensible thing
	  to do since widgets form a tree -- normally you'll just see a
	  widget's owner holding onto references to it (but in special
	  cases some other references could exist).

	  This change breaks everything.  Whee!

	* src/vscreen/vscreen_widget.cc:

	  Fix a gaping bug and memory leak that only just came to my
	  attention.  Stuff that was destroyed wasn't being deleted!
	  Apparently I commented the code that did the deletion out while
	  debugging and never reinstated it.  Doh!

	* src/ui.cc:

	  Really set the global apt error dialog to NULL when it is
	  destroyed.  Should fix the problem where the apt error dialog
	  only appears once...not to mention any weird memory corruption
	  bugs caused by this.

	* src/pkg_tree.cc:

	  Fix the invocation of parse_pattern so it doesn't flag errors
	  (restoring the past behavior).

	* src/generic/matchers.cc:

	  Change the 'keep' matcher to detect ANY package that no action
	  is being performed on, including not-installed packages.

	* src/generic/matchers.cc:

	  Fix the behavior of NOT when match results are being stored.

	* src/generic/aptcache.cc:

	  Only write the target version if the user actually planned to
	  install it; only set up an installation if the user requested it
	  previously (i.e., the Upgrade field was written).

	* src/pkg_item.cc, src/pkg_ver_item.cc, src/ui.cc:

	  Always destroy progress bars when we're done with them, so they
	  don't leak and hang around taking up space (in the past they
	  just leaked silently, but now they also make stuff look bad!)

	* src/vscreen/vscreen.cc, src/vscreen/vscreen.h, src/vscreen/vscreen_widget.h:

	  Explicitly reset SIGCONT and SIGTSTP to SIG_DFL in
	  vscreen_suspend and restore them in vscreen_resume.  If you
	  don't want to reset the signals for some reason, you can use
	  vscreen_suspend_without_signals().  (Closes: #137311, #169479)

2005-08-05  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptcache.cc:

	  Always save the version to be installed, so long as it's a
	  change from the current version but not the same as the default
	  candidate version.  This should handle the problem that the
	  version to install isn't saved in a reasonably intuitive way.
	  (Closes: #158771)

	* src/ui.cc:

	  Add canned views to display a flat package list and to display a
	  debtags browser.

	* src/cmdline/cmdline_show.cc, src/desc_parse.cc, src/desc_parse.h, src/pkg_info_screen.cc, src/pkg_view.cc:

	  Show package tags right after the description everywhere that
	  it's appropriate.

	* src/load_grouppolicy.cc:

	  Parse empty policies without crashing.

	* doc/en/aptitude.xml, src/load_grouppolicy.cc, src/pkg_grouppolicy.cc, src/pkg_grouppolicy.h:

	  Add support for grouping packages using debtags information.

	* src/generic/tags.cc, src/generic/tags.h:

	  Add code to load in the tag vocabulary database.

	* src/download.cc:

	  Apply Michael Vogt's patch for apt status reporting.

2005-08-04  Daniel Burrows  <dburrows@debian.org>

	* doc/en/aptitude.xml, src/generic/matchers.cc, src/generic/matchers.h:

	  Make the matching language whitespace-insensitive: to include
	  literal whitespace, you must now place it between double quotes
	  or tilde-escape it.

	* src/generic/matchers.h, src/load_grouppolicy.cc, src/pkg_grouppolicy.h:

	  Total rewrite of the load_grouppolicy code, and a few interface
	  changes to accomodate it.  Instead of assuming a fully regular
	  syntax and splitting grouping declarations up-front,
	  load_grouppolicy now works by chaining parsers together, where
	  each parser implicitly pulls its text off as a side effect.
	  This will make nested policies feasible; it also means that the
	  pattern grouping policy should now work correctly even in the
	  presence of things like parentheses within the pattern.

	* src/generic/matchers.cc, src/generic/matchers.h:

	  Change the parse_pattern interface again (and make it less
	  efficient) in order to allow arbitrary (possibly
	  multi-character) strings to be used as terminators.  In
	  particular, this will mean I can get the patterns grouping
	  policy (with its "=>" delimiter) working properly without
	  comprimising on the syntax.

	* src/generic/util.cc, src/generic/util.h:

	  Write generic (inefficient) code to produce string objects
	  from formatting codes (like printf).

2005-08-02  Daniel Burrows  <dburrows@debian.org>

	* src/generic/matchers.cc, src/generic/matchers.h:

	  Make the parser more generic: you can pass in a set of
	  characters that should terminate the match if they are
	  encountered at the top syntactic level.  The loader will use
	  this (but doesn't yet) to safely split its arguments.

2005-07-27  Daniel Burrows  <dburrows@debian.org>

	* src/generic/matchers.cc, src/generic/matchers.h:

	  Change the external and internal interfaces to use iterators
	  rather than passing in a string and directly indexing into it.
	  The start iterator is modified as a side-effect, which should
	  eventually allow continuation-based parsing (i.e., just parse
	  the first thing that looks like a match term and then stop).  I
	  might need to think more about just how this will work, though.

2005-07-26  Daniel Burrows  <dburrows@debian.org>

	* tests/Makefile.am, tests/test_misc.cc:

	  Add a file for tests that don't belong elsewhere.

	* tests/Makefile.am, tests/test_tags.cc:

	  Update the source to compile with the lifted suites.

	* configure.ac, Makefile.am, src/generic/Makefile.am, src/generic/tests/, tests/:

	  Move the test suites up to the top level.

2005-07-25  Daniel Burrows  <dburrows@debian.org>

	* src/pkg_grouppolicy.cc:

	  In the custom pattern-based grouping policy, stop checking
	  patterns after the first match.

	* src/pkg_grouppolicy.cc:

	  In the custom pattern-based grouping policy, when creating a new
	  subtree of the current tree, make sure to actually add the
	  object that triggered the creation of the subtree to the new
	  subtree.

	* src/generic/tasks.cc:

	  For some reason, pkgTagSection.Scan() requires one more than the
	  length of the section to work properly.  Either that or GetRec
	  returns an inclusive range.  Either way, parsing tags from the
	  Packages file should work now.

	* src/generic/tags.cc, src/generic/tags.h, src/generic/tests/test_tags.cc:

	  Keep a local copy of the data for each tag and tag list.
	  Without this, all sorts of hell breaks loose due to stuff being
	  deleted at bad times (doh).

	* src/generic/tags.cc:

	  Fix the tag list parser so it doesn't routinely skip the first
	  tag out of a list of tags.  All tests pass now!

	* src/generic/tests/test_tags.cc:

	  Fix a reversed-sense test (we want to test a<b and b>a,
	  not a<b and a>b).

	* src/generic/tags.h:

	  Fix the breakage in the comparison operators.

	* src/generic/tests/test_tags.cc:

	  Add specialized test forms for comparison tests.

	* src/generic/tags.cc:

	  Fix an incorrect bounds-check (I tested an iterator on the
	  container "other" against the end() of "this").  Clears up
	  another failing test case. :-)

	* src/generic/tags.cc:

	  Strip whitespace from the front and back of tags upon
	  construction.

	* src/generic/tests/test_tags.cc:

	  Add an operator<< implementation to write tags directly
	  for debug messages.

	* src/generic/tests/test_tags.cc:

	  Use ASSERT_EQUAL instead of ASSERT for equality-based tests; I
	  hope that this prints more useful assertion-failure messages.

	* src/generic/tests/main.cc:

	  As I suspected, the return value of runner.run() was reversed;
	  fix it so the test harness actually reports errors to its
	  caller.

	* src/generic/tests/Makefile.am:

	  Run the tests on "make check".

	* src/generic/tests/test_tags.cc:

	  Test the tag parser more exhaustively.

	* doc/en/aptitude.xml, src/generic/matchers.cc:

	  Add a tag matcher, to match against the new Tags field.
	  Currently it's broken, but it's a start.
	  (Closes: #243830)

	* src/generic/tags.h:

	  Add a routine to retrieve the plain text of a single tag.

	* src/cmdline/cmdline_changelog.cc:

	  Add heuristics to guess where the changelog of a package that we
	  don't have direct information about /might/ be; i.e., to allow
	  fetching changelogs of packages that aren't referenced from
	  sources.list.

	* src/generic/pkg_changelog.cc:

	  It's no longer necessary to look up the source package in
	  pkg_changelog_form_source, so don't.

	* src/generic/pkg_changelog.cc:

	  Don't crash if an end version iterator is passed into
	  get_changelog.

	* doc/en/manpage.xml, src/cmdline/cmdline_changelog.cc, src/generic/pkg_changelog.cc, src/generic/pkg_changelog.h:

	  Let the user pass source packages as well as binary packages
	  into the "changelog" command-line action.

	* src/cmdline/cmdline_changelog.cc, src/generic/pkg_changelog.cc, src/generic/pkg_changelog.h:

	  Add the ability to find changelog based on the source package
	  name as well as an iterator to a binary package version.  Also
	  eliminated the hardcoded default for PulseInterval and changed
	  the invocation of pkg_changelog in cmdline_changelog.cc
	  accordingly.

	* src/pkg_grouppolicy.cc:

	  Patch up a memory leak in the matchers grouping policy.

	* doc/en/aptitude.xml, src/load_grouppolicy.cc, src/pkg_grouppolicy.cc, src/pkg_grouppolicy.h, src/pkg_tree.cc, src/ui.cc:

	  Do something like the "missing" filter in pkg_tree itself.
	  Handle patterns in the filter class now, but for backwards
	  compatibility, interpret the literal string "missing" as a NOP.

	* doc/en/aptitude.xml, src/load_grouppolicy.cc, src/pkg_grouppolicy.cc, src/pkg_grouppolicy.h, src/generic/Makefile.am, src/generic/util.cc, src/generic/util.h:

	  Add a "patterns" grouping policy and start a long-overdue
	  collection of generic utility routines to kill off some of my
	  duplication of code. (Closes: #156065)

	* src/generic/matchers.cc:

	  Match anything with an empty pattern.

2005-07-24 Clytie Siddall <clytie@riverland.net.au>

	* Updated Vietnamese translation
	  Closes: #319702

2005-07-24  Daniel Burrows  <dburrows@debian.org>

	* doc/en/aptitude.xml:

	  Fix the formatting of the %# documentation and change the
	  dangling secStyles reference to refer to secStyle.

2005-07-23  Daniel Burrows  <dburrows@debian.org>

	* doc/en/aptitude.xml, src/cmdline/cmdline_search.cc, src/pkg_columnizer.cc, src/pkg_item_width_subtree.h, src/vscreen/config/column_definitions.cc, src/vscreen/config/column_definitions.h:

	  Add support for parametric column formatting.

	* src/generic/matchers.cc, src/generic/matchers.h:

	  Move implementation of ~pkg_matcher to the .cc file,
	  mark get_match in pkg_matcher as abstract; give get_match
	  in pkg_task_matcher the correct signature to implement
	  the abstract interface.

	* src/generic/matchers.cc, src/generic/matchers.h:

	  Add support for retrieving a string corresponding to a match.

2005-07-22  Daniel Burrows  <dburrows@debian.org>

	* doc/en/aptitude.xml:

	  Fix the Python tribute (thanks to Andy G. Wood for pointing this
	  out).

2005-07-21  Daniel Burrows  <dburrows@debian.org>

	* configure.ac, src/generic/Makefile.am, src/generic/tests/Makefile.am, src/generic/tests/main.cc, src/generic/tests/test_tags.cc:

	  Add some basic magic to generate a unit tester with cppunit.

	* src/generic/Makefile.am, src/generic/apt.cc, src/generic/tags.cc, src/generic/tags.h:

	  Add backend support for parsing the new tag database.

	* src/generic/tasks.cc, src/generic/apt.h:

	  Lift the stuff to order versions by their file location
	  into apt.h so other modules can use it.

2005-07-12 Jean-Luc Coulon  <jean-luc.coulon@wanadoo.fr>

	* Completed French translation. Closes: #318906
	
2005-07-19 Sorin Batariuc <sorin@bonbon.net>

	* Updated romanian translation. Closes #318947 

2005-07-16 Rubén Porras <nahoo@inicia.es>

	* Fix po/aptitude.pot and po files. Last time I forgot to add
	  --keyword=P_ to xgettext.

	* Fix redundancy in displayed string. Thanks to Jacobo Tarrio
	  <jtarrio@trasno.net>. Closes #318396

2005-07-16 Morten Bo Johansen <mojo@gatsby.mbjnet.dk>
	
	* Updated danish translation. Closes #317824 
	
2005-07-15 Rubén Porras <nahoo@inicia.es>

	* Add comments for tranlators to src/pkg_ver_item.cc and
	  src/pkg_columnizer.cc

	* Regenerated po/aptitude.pot and all po files

	* Updated spanish translation

	* Now we need to add --add-comments=ForTranslators to xgettext
	  command line to generate the aptitude.pot with comments.
	  NOTE: the full command is 
	  xgettext --keyword=_ --keyword=P_ --keyword=N_ 
	  --add-comments=ForTranslators -o po/aptitude.pot -f po/POTFILES.in
	  

2005-07-13  Daniel Burrows  <dburrows@debian.org>

	* doc/en/aptitude.xml:

	  Remove an obsolete reference to Aptitude::UI::Colors.

	* doc/en/manpage.xml, src/cmdline/cmdline_do_action.cc, src/cmdline/cmdline_do_action.h, src/cmdline/cmdline_upgrade.cc, src/cmdline/cmdline_upgrade.h, src/main.cc:

	  Add basic support for writing commands to the selection database
	  without actually executing them.  (NB: this may do bad things in
	  corner cases, like selecting particular versions)

	  (Closes: #312249)

	* doc/en/aptitude.xml, src/cmdline/cmdline_do_action.cc, src/main.cc:

	  Add support for "keep" and "keep-all" commands; the former
	  cancels actions on a single package, while the latter cancels
	  all currently contemplated actions.  (Closes: #312923)

2005-07-12 Jean-Luc Coulon  <jean-luc.coulon@wanadoo.fr>

	* Updated French translation (sent through the French mailing list)
	
2005-07-11  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptitude_resolver.cc, src/generic/aptitude_resolver.h:

	  Remove some no-longer-necessary debug code.

	* src/generic/aptitude_resolver.h:

	  When leaving a Provides list while iterating over broken deps,
	  make sure to explicitly set the variable indicating whether the
	  list is open or not to "false" (oops!).  The other pieces of
	  code that use the prv_open pattern seem to handle it correctly.

	* src/pkg_grouppolicy.cc, src/pkg_grouppolicy.h:

	  Add missing virtual destructor for pkg_grouppolicy_factory.

	* src/generic/strhash.h:

	  Add a missing "template <>".

	* src/generic/problemresolver/problemresolver.h:

	  Remove a never-used method that referred to a nonexistant
	  variable.

2005-07-10  Daniel Burrows  <dburrows@debian.org>

	* src/generic/problemresolver/test.cc:

	  Disable dumping the world in the test code by default, but let
	  the user enable it with --dump.

	* doc/en/aptitude.xml:

	  Correct the documentation of the default binding of DumpResolver
	  (it was originally F6, which was a bad idea for obvious reasons,
	  but I apparently changed it to '*' and forgot to change the
	  docs).

2005-07-10 Clytie Siddall <clytie@riverland.net.au>

	* Updated Vietnamese translation
	  Closes: #317629
	
2005-07-07  Daniel Burrows  <dburrows@debian.org>

	* src/cmine.cc, src/ui.cc:

	  Use the new support to add search repetition capabilities to all
	  dialogs. (Closes: #270699)

	* src/vscreen/vs_util.cc, src/vscreen/vs_util.h:

	  Also add support for binding up a callback for the 'ReSearch'
	  keystroke.

	* src/reason_fragment.cc:

	  Remove a no longer necessary %S escape.

	* src/view_changelog.cc:

	  Add support for searching for text in the changelog viewer.

2005-07-05 Rubén Porras <nahoo@inicia.es>

	* New spanish help file help-es.txt
	
2005-07-07 Jean-Luc Coulon <jean-luc.coulon@wanadoo.fr>

	* Updated French translation (still to be completed)
	
2005-07-06  Daniel Burrows  <dburrows@debian.org>

	* src/ui.cc:

	  Delete a no-longer-needed reference to a style name.

	* src/vscreen/fragment.cc:

	  Actually recognize the %S escape.

	* src/vscreen/vs_pager.cc:

	  Fix a number of corner cases involving negative widths and
	  unprintable characters.  (Closes: #317115)

	* src/cmdline/cmdline_show.cc:

	  Fix output of wide characters. (Closes: #317115)

2005-07-05 Rubén Porras <nahoo@inicia.es>

	* Convert to UTF8 the following files:
	  help-zh_CN.txt
	  help-ja.txt
	  help-fi.txt
	  help-cs.txt
	  help-gl.txt
	  help-fr.txt
	  help-pl.txt
	  help-pt_BR.txt
	
2005-07-05 Jaakko Kangasharju <ashar@iki.fi>

	* Complete Finnish translation for Aptitude. After adding the
	  relevants patches from #316225 (the ones modifing debian'n dir
	  in aptitude-fi.patch.gz) we can close this bug.
	
2005-07-05 Clytie Siddall <clytie@riverland.net.au>

	* Updated Vietnamese translation
	  Closes: #316994
	
2005-07-05  Daniel Burrows  <dburrows@debian.org>

	* src/cmdline/cmdline_resolver.cc:

	  Display information about what went wrong when there's a problem
	  writing out a resolver dump.

	* src/generic/aptitude_resolver.h:

	  Don't abort when trying to dump a package that has only one
	  version.  (doh, 0 is a valid index!)

	* doc/en/aptitude.xml:

	  Fix several typos pointed out by Miroslav Kure.

	* src/cmdline/cmdline_progress.cc:

	  Calculate the screen width correctly: I suspect that there is an
	  off-by-one error in the progress bar that the
	  update_screen_width function originally compensated for.

	* src/cmdline/cmdline_search.cc:

	  Fix a minor race condition that could have resulted in "search"
	  not obeying the -w (width) option if the terminal was resized
	  during a search.

	* src/cmdline/cmdline_search.cc:

	  Fix "search" output. (Retroactively Closes: #317115)

2005-07-05 Rubén Porras <nahoo@inicia>
	
	* Updated spanish translation
	
2005-07-04  Daniel Burrows  <dburrows@debian.org>

	* NEWS, README, doc/en/aptitude.xml:

	  Bump version to 0.3.3.

	* doc/en/aptitude.xml:

	  Correct the documentation of several configuration options that
	  had been invalidated by changes to the program.

	* src/download.cc, src/view_changelog.cc:

	  Decrease the polling rate of downloads.  Again.

	* doc/aptitude.css:

	  Various tweaks to make the generated documentation a bit
	  nicer-looking (maybe too fancy in some places, though?).

	* doc/aptitude.css, doc/aptitude-common.xsl:

	  Update the stylesheets: shade.verbatim is deprecated, so I've
	  moved those configuration parameters into CSS.

	* doc/en/aptitude.xml:

	  Replace the documentation dealing with color configuration with
	  documentation addressing style configuration.

	* src/load_config.cc:

	  Pass Value to parse_color, not Tag; setting colors in the
	  configuration file now works.

	* src/load_config.cc:

	  Don't go into an infinite loop trying to parse text attributes.

2005-07-03  Daniel Burrows  <dburrows@debian.org>

	* src/generic/pkg_changelog.cc, src/generic/pkg_changelog.h, src/view_changelog.cc:

	  Update more frequently when downloading changelogs, too.

	* doc/en/aptitude.xml, src/download.cc:

	  Drop the frequency of screen updates by an order of magnitude,
	  to quit hogging the CPU.

	* src/mine/cmine.cc:

	  Add and use support for adjusting the coloration of uncovered
	  squares according to how many bombs adjoin them.  Make detonated
	  mines bright red too.

	* src/mine/cmine.cc:

	  In the new-game dialog, connect the Confirm binding with
	  connect_key_post so that it doesn't override pressing Enter on
	  the Cancel button.

	* src/mine/cmine.cc:

	  Fix the location of the right-hand border, and add some more
	  color customization possibilities.

	* src/main.cc:

	  Don't complain loudly about invalid encodings; just generate
	  output with the offending characters replaced by '?'.

	* src/vscreen/vs_pager.cc:

	  Actually support wide characters in the pager: calculate
	  widths correctly and use wide character output routines
	  (so characters don't get randomly degraded to ASCII..oops!)

	* README.i18n:

	  Document the existence of encoding translations.

	* src/mine/cmine.cc:

	  Allow the encoding of mine-help.txt to be specified, and
	  be robust against it missing.

	* src/ui.cc:

	  Also allow the encoding of README to be specified.

	* po/Makefile.in.in:

	  Rebuild po/Makefile if po/Makevars changes.

	* po/Makevars:

	  Recognize P_() as a gettext marker.

	* src/ui.cc:

	  Fix various places in the ui glue code to handle the new pager
	  API.

	* src/vscreen/vs_pager.cc, src/vscreen/vs_pager.h:

	  Allow the encoding to be specified when a vs_pager is created
	  with a pre-loaded file (oops).

	* src/vscreen/vs_util.cc, src/vscreen/vs_util.h:

	  Allow the user to specify the encoding of the file to be loaded
	  in a vs_dialog_fileview.

	* src/aptitude.h:

	  Whoops, need to #include <string.h> for strchr.

	* src/aptitude.h, README.i18n:

	  Add a routine 'P_()' which strips off everything up to the first
	  pipe symbol in the string.

	* src/vscreen/transcode.cc:

	  When coding errors are encountered, replace the offending
	  characters with '?' and continue attempting to decode the rest
	  of the string.

	* src/vscreen/vs_pager.cc, src/vscreen/vs_pager.h:

	  Use wide characters in the vs_pager, and transcode the input
	  text from a (optionally specified) encoding.

	* src/vscreen/transcode.cc, src/vscreen/transcode.h:

	  Add transcode-with-punted-errors variants that read directly
	  from a character buffer.

2005-07-02  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptitude_resolver.h:

	  Add some safety code to make sure that the resolver compiles
	  even when the compiler is being ultra-strict.

	* po/POTFILES.in:

	  Remove another reference to strhash.h.

	* src/Makefile.am:

	  Remove reference to strhash.h.

	* src/download.cc:

	  Try greatly increasing the resolution of pulses, to make the UI
	  more responsive during a download.

	* src/ui.cc:

	  Force the broken indicator to start out hidden.

	* src/vscreen/columnify.cc:

	  Fix the algorithm that "renders" column-formatted text:
	  due to a logic error, nothing at all was being produced.

	* src/ui.cc:

	  Instead of trying to pass a NULL string to pkg_tree::pkg_tree,
	  just don't pass the third argument.  Fixes a SIGABRT.

	* src/ui.cc:

	  Implement the wstring variant of show_message.

	* src/main.cc:

	  Add default transcoding error handlers that push an error on the
	  apt error stack.

	* src/vs_progress.cc:

	  Update the core progress bar for wide characters.

	* src/ui.cc:

	  Update ui.cc to use wide characters internally.

	* src/apt_info_tree.cc, src/apt_info_tree.h:

	  Update copyright info.

	* src/apt_info_tree.cc, src/apt_info_tree.h:

	  Make the desc_signal of apt_info_trees accept a wide string.

	* src/solution_fragment.cc:

	  Pass a wchar_t* to join_fragment instead of a char*.

	* src/reason_fragment.cc:

	  Pass a wchar_t* to join_fragment instead of a char*.

	* src/pkg_view.cc:

	  Update the pkg_view code for wide characters and new interfaces.

	* src/pkg_info_screen.cc:

	  Fix the pkg_info_screen code to pass a wstring to desc_parse.

	* src/cmdline/cmdline_show.cc:

	  Fix the 'show' command to pass a wstring to desc_parse.

	* src/desc_parse.cc, src/desc_parse.h:

	  Update the description parser to take a wide string as input.

	* src/mine/cmine.cc, src/mine/cmine.h:

	  Update cmine for the new prompt_string signature.

	* src/vscreen/vs_tree.h, src/vscreen/vs_treeitem.h:

	  Explicitly make searches take wide character strings as input.

	* src/pkg_tree.cc, src/pkg_tree.h:

	  Wide-character conversion of pkg_tree.

	* src/ui.h:

	  Make the string callbacks take wstrings.

	* src/ui.h:

	  Add wstring variants of some interface functions.

	* src/pkg_sortpolicy.h:

	  Make operator() non-const; the new sort policy protocol
	  requires this.

	* src/pkg_sortpolicy.cc:

	  Fix the sorting policy to work with the new internal interfaces.

	* src/vscreen/vs_multiplex.cc, src/vscreen/vs_multiplex.h:

	  Update the display of the multiplex's tabs for wide characters.

	* src/pkg_grouppolicy.cc, src/pkg_grouppolicy.h:

	  Update pkg_grouppolicy for wide characters.

	* src/pkg_item.cc, src/pkg_item.h:

	  Update the pkg_item code for wide characters.

	* src/ui.h:

	  Undo that last change: most of the code passes statically
	  translated strings into those routines, so it will be a lot
	  simpler to do the transcoding in ui.cc.

	* src/ui.h:

	  Use wstrings in the UI's external interface.

	* src/pkg_info_screen.cc:

	  Update pkg_info_screen for wide characters.

	* src/load_grouppolicy.cc:

	  Update the #include of strhash to use the correct copy, not the
	  old one that I removed.

	* src/load_config.cc:

	  Update the configuration loader for wide characters.

	* src/download_list.cc, src/download_screen.cc:

	  Allow the user to cancel a media change.  Although I can't
	  really test it, this hopefully Closes: #315885.

	* src/generic/Makefile.am, src/generic/mut_fun.h:

	  Add a functor class that assigns its argument to a fixed
	  variable.

	* src/download_screen.cc, src/download_screen.h:

	  Update the download-screen class for wide characters.

	* src/download_item.cc, src/download_item.h:

	  Update the download-item class for wide characters.

	* src/vscreen/vs_subtree.h:

	  Update the current display column properly in vs_subtree::paint.
	  Fixes the bug where the current line's highlight "overflowed" to
	  the next line.

	* src/edit_pkg_hier.cc:

	  Update the package hierarchy editor for wide characters
	  (slightly hackily?)

	* src/download_bar.cc:

	  Update the download-bar to use the new signature of
	  show_string_as_progbar.

	* src/dep_item.cc:

	  Make dep_item.cc work with wide characters.

	* src/pkg_item_with_subtree.h:

	  Convert the package-item-plus-subtree class to wide characters.

	* src/pkg_subtree.cc, src/pkg_subtree.h:

	  Convert the pkg_subtree class to wide characters.

	* src/pkg_node.cc, src/pkg_node.h:

	  Convert the core package node class to wide characters.

	* src/pkg_item_with_subtree.h, src/pkg_item.h, src/pkg_ver_item.cc, src/pkg_ver_item.h:

	  Fix some more tree items, to the point that pkg_ver_item now
	  compiles.

	* src/pkg_ver_item.cc, src/pkg_ver_item.h:

	  Update the pkg_ver_item to reflect the changes in the vscreen
	  API.

	* src/vscreen/vs_layout_item.cc:

	  Make vs_layout_item less absurdly inefficient by really caching
	  all of its contents up-front, rather than calling layout() once
	  for EVERY LINE IN THE ITEM.

	* src/vscreen/vs_layout_item.cc, src/vscreen/vs_layout_item.h:

	  Avoid several copies when displaying a vs_layout_item.

	* src/vscreen/testvscreen.cc, src/vscreen/vs_layout_item.cc, src/vscreen/vs_layout_item.h, src/vscreen/vs_staticitem.h, src/vscreen/vs_subtree.h, src/vscreen/vs_tree.cc, src/vscreen/vs_treeitem.cc, src/vscreen/vs_treeitem.h:

	  Adjust the treeitem interface to use wide characters; while I'm
	  at it, I removed a bunch of const qualifiers that looked
	  dangerous (const qualifiers on a virtual method are potentially
	  problematic).

	* src/edit_pkg_hier.cc, src/edit_pkg_hier.h:

	  Update the package hierarchy editor for wide characters.

	* src/download_list.cc, src/download_list.h:

	  Update the download_list for wide characters.

2005-07-01  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/curses++.cc, src/vscreen/curses++.h, src/vscreen/vscreen_widget.h:

	  While I'm at it...pass strings by reference, not value.

	* src/vscreen/curses++.cc, src/vscreen/curses++.h, src/vscreen/vscreen_widget.h:

	  Update show_string_as_progbar for wide characters.

	* src/download_bar.cc, src/download_bar.h:

	  Fix the download bar for wide characters.

	* src/defaults.cc:

	  Change the default setting initializations to use the new
	  wide-character interfaces.

	* src/broken_indicator.cc:

	  Convert the broken indicator to handle wide characters.

	* src/apt_config_widgets.cc, src/apt_config_widgets.h:

	  Convert the apt config widgets to support wide characters.

2005-06-30  Daniel Burrows  <dburrows@debian.org>

	* src/mine/cmine.cc, src/mine/cmine.h:

	  Update the mine code for wide characters.  Sort of, anyway.
	  At least, it should work.

2005-06-31 Tim Dijkstra <tim@famdijkstra.org>

	* Updated minor corrections to nl.po
	  Closes: #316279

2005-06-29  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/curses++.cc, src/vscreen/curses++.h, src/vscreen/vscreen_widget.h:

	  Update display_header and display_status to handle wide
	  characters.

	* src/vscreen/vs_button.cc, src/vscreen/vs_scrollbar.cc:

	  Convert all uses of ACS_* to WACS_*.

	* src/vscreen/vs_statuschoice.cc, src/vscreen/vs_statuschoice.h:

	  Convert vs_statuschoice to handle wide characters.

	* src/vscreen/vs_menubar.cc, src/vscreen/vs_menubar.h, src/vscreen/testvscreen.cc:

	  Convert vs_menubar to handle wide characters.

	* src/vscreen/vscreen.cc:

	  Use A_REVERSE on HighlightedMenuEntry -- this gives a more
	  brilliant white background than the non-reversed version (ew).

	* src/vscreen/vs_menu.cc, src/vscreen/vs_menu.h:

	  Don't bother caching the width for now (this is much more
	  obviously correct; width caching can be reinstated without
	  losing correctness if speed ever becomes an issue).

	* src/vscreen/vs_menu.cc, src/vscreen/vs_menu.h:

	  Rewrote vs_menu to properly handle wide characters.

	* src/vscreen/curses++.h, src/vscreen/vscreen_widget.h:

	  Get rid of the attribute argument, it seems to cause unexpected
	  behavior.  Add variants to pass in pregenerated cchar_t strings.

	* src/vscreen/curses++.h, src/vscreen/vscreen_widget.h:

	  Expose the add_wch and wadd_wch functions.

2005-06-28  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/vs_editline.cc:

	  Correct several errors in how normalize_cursor works.

	* src/vscreen/vs_editline.cc:

	  Fix get_char() to produce correct results (oops).

	* src/vscreen/config/colors.cc:

	  Don't make the cursor invisible, at the cost of losing
	  black-on-black text.

	* src/vscreen/vs_editline.cc, src/vscreen/vs_editline.h:

	  Fix the line editor widget to support wide characters properly
	  (it now honors wide character widths).

	* src/vscreen/curses++.h:

	  #undef the *add_wch functions for future use.

2005-06-27  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/fragment.cc:

	  Initialize the current line's width to 0 in clipbox::layout
	  rather than using random uninitialized values.

	* src/vscreen/fragment.cc:

	  Fix a segfault in clipbox::layout due to an insufficiently
	  bounded loop.

	* src/vscreen/testvscreen.cc:

	  Add some actual wide characters to test the formatting code.

	* src/vscreen/fragment.cc:

	  Add a long string escape to fragf (for printing out stuff that's
	  already been transcoded).

	* src/vscreen/testvscreen.cc:

	  Use setlocale() to actually enter the current locale (so UTF-8
	  locales actually work now!).

	* src/vscreen/config/keybindings.cc:

	  Fix the definition of KEY_CTRL and keyname to be slightly more
	  sane (as sane as is possible given how control keys are
	  handled).

2005-06-27 Håvard Korsvoll <korsvoll@skulelinux.no>

	* Updated Norwegian nynorsk translation
	  Closes: #315988

2005-06-23 Miguel Figueiredo <elmig@debianpt.org>

	* Updated Portuguese translation
	  Closes: #315486

2005-06-27  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/testvscreen.cc:

	  Update the testvscreen code for the new keybindings magic.

	* src/vscreen/vs_subtree.h src/vscreen/vs_tree.cc src/vscreen/vs_treeitem.h:

	  Convert various dispatch_char routines to dispatch_key. (DANGER:
	  forgetting to do this will result in a silently broken widget at
	  the moment)

	* src/vscreen/vs_tree.cc, src/vscreen/vs_tree.h:

	  Convert vs_tree::handle_char to vs_tree::handle_key.

	* src/vscreen/vs_table.cc, src/vscreen/vs_table.h:

	  Convert vs_table::handle_char to vs_table::handle_key.

	* src/vscreen/vs_text_layout.cc, src/vscreen/vs_text_layout.h:

	  Convert vs_text_layout::handle_char to
	  vs_text_layout::handle_key.

	* src/vscreen/vs_statuschoice.h:

	  Convert vs_statuschoice::handle_char to
	  vs_statuschoice::handle_key.

	* src/vscreen/vs_passthrough.cc, src/vscreen/vs_passthrough.h:

	  Convert vs_passthrough::handle_char to
	  vs_passthrough::handle_key.

	* src/vscreen/vs_pager.cc, src/vscreen/vs_pager.h:

	  Convert vs_pager::handle_char to vs_pager::handle_key.

	* src/vscreen/vs_menubar.cc, src/vscreen/vs_menubar.h:

	  Convert vs_menubar::handle_char to vs_menubar::handle_key.

	* src/vscreen/vs_menu.cc, src/vscreen/vs_menu.h:

	  Convert vs_menu::handle_char to vs_editline::handle_key.

	* src/vscreen/vs_editline.cc, src/vscreen/vs_editline.h:

	  Convert vs_editline::handle_char to vs_editline::handle_key.

	* src/vscreen/vs_button.cc, src/vscreen/vs_button.h:

	  Convert vs_button::handle_char to vs_button::handle_key.

	* src/vscreen/vscreen_widget.cc:

	  Name change update: handle_char -> handle_key.

	* src/vscreen/vscreen.cc, src/vscreen/vscreen.h:

	  Fix compilation problems from the new keybindings stuff.

	* src/vscreen/vscreen.cc:

	  Use the function-key information from get_wch() to decide what
	  sort of key event to generate, and call the new names of the
	  key-handling methods.

	* src/vscreen/vscreen_widget.cc, src/vscreen/vscreen_widget.h:

	  Make the key-handling methods take keys instead of wint_ts.

	* src/vscreen/config/keybindings.cc, src/vscreen/config/keybindings.h:

	  First crack at revising the keybinding routines to handle
	  Unicode input.  In particular, the "key" type now includes a
	  flag to indicate function-key-ness (this is useful since we need
	  to distinguish function keys (KEY_*) from other keys now --
	  curses uses a special return value from get_wch to indicate
	  them, and I think it's because they might overlap real
	  codepoints).

	  This probably breaks everything again.

2005-06-26  Daniel Burrows  <dburrows@debian.org>

	* src/strhash.h:

	  This copy of strhash is obsolete and broken, remove it to avoid
	  confusion.

	* src/vscreen/vscreen.cc:

	  Update the other place where input is read to handle wide
	  characters (oops).

	* src/vscreen/testvscreen.cc:

	  Update the test program for the new vscreen interfaces.

	* src/vscreen/vs_pager.cc, src/vscreen/vs_pager.h:

	  Use const string &'s in the vs_file_pager interface.

	* src/vscreen/vs_pager.cc:

	  Allow wide character strings to be used for the filename of a
	  vs_file_pager, to make it easy to bind the vs_editline's
	  "entered" signal to vs_file_pager::load_file.  Is this a hack?
	  (and for that matter, why is vs_file_pager still separate from
	  vs_pager?)

	* src/vscreen/columnify.cc:

	  Use the new transcoder, so transcoding errors can be reported at
	  a higher level.

	* src/vscreen/transcode.cc, src/vscreen/transcode.h:

	  Implement the new transcoder, and fix some types in the
	  header (oops).

	* src/vscreen/vs_util.cc:

	  Add explicit transcoding in the fallback routines.

	* src/vscreen/vs_label.cc, src/vscreen/vs_label.h:

	  Add initializers for wstrings.

	* src/vscreen/transcode.h:

	  Add a kinder, gentler transcoding interface for when error
	  detection isn't important.

	* src/vscreen/vs_editline.cc, src/vscreen/vs_editline.h:

	  Convert the public interface of the line-editor to wide
	  characters.  (this is important since it's the main interface
	  for string input at the moment)

	* src/vscreen/transcode.h:

	  Add inline convenience functions to "directly" go from
	  strings to strings.

	* src/vscreen/vs_button.cc, src/vscreen/vs_button.h:

	  Change the argument type of handle_char() so it gets correctly
	  overridden.

	* src/vscreen/config/keybindings.cc, src/vscreen/config/keybindings.h:

	  Make the keybinding lookup tables take wide character values.

	* src/vscreen/vscreen_widget.cc, src/vscreen/vscreen_widget.h:

	  Modify the prototypes of dispatch_char and handle_char to
	  take wint_t values.

	* src/vscreen/vs_button.h:

	  Doh, actually overload vs_button::vs_button.

	* src/vscreen/vscreen.cc:

	  Use get_wch() instead of getch() -- this will need to be
	  propagated into the vscreen_widget hierarchy.

	* src/vscreen/curses++.h:

	  Doh, make it compile (forgot to #undef the macros and dropped
	  some paramters from mvget_wch).

	* src/vscreen/curses++.h:

	  Expose wget_wch and mvwget_wch as methods on cwindow.

	* src/vscreen/vs_button.cc, src/vscreen/vs_button.h:

	  Add a variant constructor for wstrings.

	* src/vscreen/transcode.cc, src/vscreen/transcode.h:

	  Add a transcode variant that changes strings from wide character
	  codings to multibyte codings.

	* src/pkg_view.cc:

	  When altering the column format of a view, transcode the input
	  column template.

	* src/vscreen/vs_label.cc, src/vscreen/vs_label.h:

	  Add an overloading of set_text that accepts wstrings.

	* src/pkg_ver_item.cc:

	  Store the output of the columnizer in a wstring.

	* src/Makefile.am, src/pkg_item_with_subtree.cc, src/pkg_item_with_subtree.h:

	  Doh, of course since pkg_i_w_s is templated, all its method
	  implementations have to go in the .h (ew).

	* src/pkg_item.cc:

	  Store the output of the columnizer in the right type.

	* src/pkg_columnizer.cc:

	  Oops, missing std::.

	* src/pkg_columnizer.cc, src/pkg_columnizer.h:

	  Make the column name formatter return a wstring.

	* src/pkg_columnizer.cc:

	  Transcode column definitions before parsing.

	* src/pkg_columnizer.cc:

	  Mark an overlooked string for translation.

	* src/vscreen/columnify.cc, src/vscreen/columnify.h:

	  Add an implicit transcoding constructor for column_disposition.

2005-06-25  Daniel Burrows  <dburrows@debian.org>

	* src/load_pkgview.cc:

	  When parsing column information, transcode it to a wide
	  character set first.

	* src/Makefile.am, src/pkg_item_with_subtree.cc, src/pkg_item_with_subtree.h:

	  Transcode the package name to force it into the wide character
	  set; move the column-generation function for the
	  item-with-subtree class into a .cc file to avoid polluting other
	  headers with too much junk.

	* src/vscreen/curses++.h, src/vscreen/vscreen_widget.h:

	  Expose the addwstr family of functions.

	* src/broken_indicator.cc:

	  Fix two calls to join_fragments().

	* src/cmdline/cmdline_show.cc:

	  Fix a number of calls to join_fragments() to use wide joining
	  strings, and extract the character text using ().ch, not
	  ()&A_CHARTEXT.

	* src/cmdline/cmdline_search.cc:

	  Transcode the format string specified by the user for displaying
	  search results.

	* src/vscreen/fragment.cc:

	  Rewrite the clipbox for wide characters.

	* src/vscreen/fragment.cc:

	  Fix the fill algorithm to compile, and rewrite the hard-wrapping
	  algorithm to handle wide characters.

	* src/vscreen/fragment.cc:

	  Rewrite the fill algorithm to handle wide characters.

	* src/vscreen/fragment.cc:

	  Rewrite the main flow algorithm to handle wide characters (i.e.,
	  separate the concepts of "visible width" and "character count").

	* src/vscreen/columnify.cc, src/vscren/columnify.h, src/vscreen/config/column_definition.cc, src/vscreen/config/column_definition.h:

	  Rewrite the columnification code to handle wide characters
	  properly: you can include literal wide characters in the
	  configuration, and multi-column wide characters are accounted
	  for in calculating widths.

	* src/vscreen/transcode.cc:

	  Get rid of the use of auto_ptr and new[], they aren't really
	  appropriate here.  Use good old malloc/realloc/free calls to
	  manage our dynamic store.

	* src/vscreen/transcode.cc:

	  Use nl_langinfo(), not localeset(), to find out what the current
	  charset is when transcoding.

	* src/vscreen/curses++.cc:

	  Fix the generation of attributes+wide characters to preserve
	  color information.

	* src/vscreen/transcode.cc:

	  Doh, correct the actual name of the transcoding function.
	  Everything links now.

	* src/vscreen/vs_button.cc, src/vscreen/vs_layout_item.cc, src/vscreen/vs_layout_item.h:

	  Update places where chstring was explicitly used to call on
	  fragment_line instead; factor some common code in
	  vs_layout_item::paint and vs_layout_item::vs_layout_line::paint
	  into vs_layout_item::paint_line.

	* src/vscreen/vscreen_widget.h:

	  Mirror the new cwindow addstr routines in vscreen_widget.

	* src/vscreen/fragment.cc, src/vscreen/fragment.h:

	  Instead of requiring a separate function to be called for
	  transcoding, just overload text_fragment (NB: is this wise?).

	* src/vscreen/fragment.cc, src/vscreen/fragment.h, src/vscreen/fragment_contents.h:

	  Use wide character strings internally to format text fragments,
	  and require explicit conversion of std::strings.

	* src/vscreen/curses++.h:

	  Add a convenience constructor to build a wchstring by repeating
	  a wchar_t.

	* src/vscreen/curses++.cc, src/vscreen/curses++.h:

	  Add a preliminary, very hacky, routine to output wide-character
	  strings.

	* src/vscreen/Makefile.am, src/vscreen/transcode.cc, src/vscreen/transcode.h:

	  Add support code to wrap iconv in a simpler (less efficient)
	  interface.

	* src/vscreen/curses++.h:

	  Fix formatting errors in a comment.

2005-06-22  Daniel Burrows  <dburrows@debian.org>

	* src/pkg_tree.cc:

	  Make the package tree progress bar actually move (I forgot to
	  increment its progress!  Oops).

	* src/vs_progress.cc:

	  Done() just indicates that a suboperation completed, not that
	  everything completed.  Don't hide() the widget in Done()
	  (anyway, it'll get hidden when it's destroyed).

	* src/generic/aptcache.cc:

	  Disable auto-installation of dependencies when restoring package
	  states, to make sure we reproduce the state the user expects and
	  to avoid ordering bugs (my goodness, how did this big gaping
	  monster manage to avoid detection for so long?).
	  Closes: #315359

2005-06-22 Luk Claes <luk@debian.org>

	* Updated Dutch translation
	  Closes: #315376

2005-06-22 Michal Politowski <mpol@charybda.icm.edu.pl>

	* Updated Polish translation
	  Closes: #315338
	
2005-06-21 Dennis Stampfer  <seppy@debian.org>

	* Small German translation update by Jens Seidel

2005-06-18  Darius Zitkevicius  <skystis@splius.lt>

	* Updated Lituanian translation
	  Closes: #314643

2005-06-16  Miroslav Kure  <kurem@upcase.inf.upol.cz>

	* Updated Czech translation
	  Closes: #314328

2005-06-15  Yongtao Yang  <yongtao.yang@telia.com>

	* Updated Simplified Chinese translation
	  Closes: #314330

2005-06-15  Daniel Burrows  <dburrows@debian.org>

	* src/broken_indicator.cc:

	Fix the generation of the solution summary: due to a logic error,
	cancelled installations were being counted as installations rather
	than keeps.

	* src/vscreen/curses++.cc, src/vscreen/curses++.h:

	Fix the missing reference to operator=(wstring&) in wchstring by
	removing it and just writing it into the constructor where it was
	used.

	* src/vscreen/config/style.h, src/vscreen/curses++.cc, src/vscreen/curses++.h:

	Add definitions of a chstring-analogue for wide-characters (it
	stores wide characters combined with attributes).  Currently this
	isn't used anywhere; that's the next step of UTF8ization.

2005-06-15  Jens Seidel  <jensseidel@users.sf.net>

	* Spellcheck German translation
	  Closes: #313663

2005-06-15  Yuri Kozlov  <yuray@id.ru>

	* Update Russian translation
	  Closes: #313619

2005-06-15  dooteo <dooteo@euskalgnu.org>

	* Update Basque translation

2005-06-13  BjÃ¸rn Steensrud  <bjornst@powertech.no>

	* Update Norwegian Bokmal translation
	  Closes: #313459

2005-06-13  Ruben Porras  <nahoo82@telefonica.net>

	* Update Spanish translation (still incomplete)
	  Closes: #313412

2005-06-13  Jaakko Kangasharju  <ashar@iki.fi>

	* Complete Finnish translation
	  Closes: #313450

2005-06-13  Stanislav ValÃ¡Å¡ek  <valasek@fastmail.fm>

	* Complete Slovak translation. Closes: #309824

2005-06-13  Christian Perrier  <bubulle@debian.org>

	* src/cmdline/cmdline_prompt.cc: Corrected typo : "modifaction"
	  Closes: #313322

2005-06-13  Clytie Siddall  <clytie@riverland.net.au>

	* Completed Vietnamese translation. Closes: #313321

2005-06-13  Daniel Burrows  <dburrows@debian.org>

	* src/generic/apt.cc:

	Make the read-only-ness warning more explicit (Closes: #313417)

2005-06-08  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/config/colors.cc, src/vscreen/config/colors.h, src/vscreen/curses++.cc:

	Call init_colors() from init_curses(), and don't call it from the
	color-handling routines.  This makes it safe to perform 'dummy'
	color mixing when Curses isn't initialized (for instance, when
	formatting text from the command-line).

	* src/cmdline/cmdline_show.cc, src/solution_fragment.cc:

	Fix several places where aptitude could crash because I forgot
	that PkgFileIterator::Archive can return a NULL pointer.
	(Closes: #312553)

2005-06-08 Christian Perrier  <bubulle@debian.org>

	* po/fi.po: Overtranslation corrected. Closes: #312311

2005-06-07 Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/vs_util.cc:

	Implement the file viewer as a specialized OK dialog.

	* src/vscreen/vscreen.cc:

	Force edit-line widgets to always appear white-on-black, even in
	A_REVERSE environments.

	* src/generic/matchers.cc, src/generic/matchers.h:

	Add an option to parse_matcher that causes the matchers generated
	for plain strings to match both names and descriptions.

	* src/vscreen/fragment.cc:

	Take the style of an indentbox's formatting from the surrounding
	context.

	* src/ui.cc:

	Use %N in one appropriate place.

	* src/vscreen/fragment.cc, src/vscreen/fragment.h:

	Add a %N escape that resets the current style to the empty style.

	* src/ui.cc:

	Remove several uses of %C or replace them with %S.

	* src/load_config.h, src/ui.cc:

	Call load_styles from ui.cc, not load_colors.

	* src/view_changelog.cc:

	Update the changelog viewer for the new display code.

	* src/ui.cc:

	Fix compilation by deleting a stray parenthesis.

	* src/vscreen/vs_statuschoice.cc, src/vscreen/vs_statuschoice.h:

	Update the statuschoice widget for styles.

	* src/vs_progress.cc, src/vs_progress.h:

	Update the vs_progress code for styles.

	* src/ui.cc, src/ui.h:

	Update the core UI code for styles.

	* src/trust.cc:

	Update the trust dialog for styles.

	* src/solution_dialog.cc:

	Update the solution dialog for styles.

	* src/defaults.cc:

	Make bullets 'transparent' (the style now only changes the
	foreground color).

	* src/reason_fragment.cc:

	Update the generation of 'reason' fragments for styles.

	* src/vscreen/fragment.cc:

	Fix the composition of styles by style_fragments: instead of
	composing our style with the enclosing style, compose the
	enclosing style with our style (remember, composition is
	noncommutative).

	* src/vscreen/fragment.cc, src/vscreen/fragment.h:

	When generating a text fragment from a string and a style,
	actually wrap it in a style fragment.  (maybe I should just
	include a style in every text fragment, to increase locality?
	Probably doesn't really matter, though, and a lot of text
	fragments don't need styles) This makes it easy to generate styled
	text that does the right thing (i.e., where the style overrides
	any outer styles rather than vice versa).

	Also stopped using chstrings for text_fragments: they are almost
	guaranteed to do the wrong thing anyway.

	* src/pkg_view.cc:

	Adjust the remaining bits of pkg_view to handle styles properly:
	change paint()'s signature, and use set_bg_style instead of
	set_bg.

	* src/pkg_item.cc, src/pkg_item.h:

	Extend the signature of pkg_item::paint() to properly override its
	abstract ancestor, and adjust the code that sets the attributes of
	a package item to be style-based.

	* src/load_pkgview.cc, src/pkg_view.h:

	Adjust the package view loading code to use styles rather than
	colors, and change the package view structure to store a style
	rather than a color.

	* src/load_config.cc:

	Change load_colors to load_styles.

	* src/edit_pkg_hier.cc, src/edit_pkg_hier.h:

	Update for the new display protocols; add missing copyright
	boilerplate.

	* src/download_screen.cc:

	Use get_style instead of get_color.

	* src/download_screen.h:

	Extend the signature of download_tree::paint, so that it
	implements the virtual method as expected.

	* src/download_list.cc:

	Adjust the download list code for styles.

2005-06-06  Daniel Burrows  <dburrows@debian.org>

	* src/download_item.cc:

	Update the download item code to use styles instead of colors.

	* src/download_bar.cc:

	Update to use styles.

	* src/dep_item.cc:

	Fix the signature of pkg_depitem::paint().

	* src/pkg_subtree.cc, src/pkg_subtree.h:

	Adjust method signatures so all abstract methods are implemented.

	* src/dep_item.cc, src/dep_item.h:

	Change pkg_depitem::get_normal_attr to pkg_depitem::get_normal_style.

	* src/pkg_ver_item.cc, src/pkg_ver_item.h:

	Fix some confusion over the return type of pkg_ver_item::get_normal_style.

	* src/pkg_item_with_subtree.h:

	Change the signature of paint() to match its new signature in
	vs_subtree.

	* src/pkg_ver_item.cc, src/pkg_ver_item.h:

	Adjust the attribute-selection methods to work with styles instead
	of colors.

	* src/pkg_ver_item.h:

	Also fill in the virtual "paint" method of pkg_vertree_generic.

	* src/pkg_ver_item.cc, src/pkg_ver_item.h:

	Fill in the virtual method "paint" of pkg_ver_item.

	* src/defaults.cc:

	Change the assignment of default colors to an assignment of
	default styles.

	* src/broken_indicator.cc:

	Update for styles.

	* src/apt_options.cc:

	Update the option dialog generation to use styles.

	* src/apt_config_widgets.cc:

	Don't bother setting the color of apt_bool_widget; this shouldn't
	be necessary any more.

	* src/desc_parse.cc:

	Update the description parser for styles.

	* src/mine/cmine.cc, src/mine/cmine.h:

	Fix the minesweeper game for the new display system.

	* src/cmdline/cmdline_prompt.cc, src/cmdline/cmdline_resolver.cc, src/cmdline/cmdline_show.cc:

	Adjust the command-line code to work properly with the new
	fragment API (note: arguably a better approach is to add a routine
	that does the layout and output of a fragment in one step).

	* src/vscreen/vscreen_widget.cc:

	Change both the widget's attributes and its background in
	apply_style.  I don't for the life of me know why this should be
	necessary, but without it, buttons in dialog boxes don't display
	properly.

	* src/vscreen/vscreen.cc:

	Fix the color of highlighted multiplexer tabs, and get rid of
	unnecessary reverse attributes.

	* src/vscreen/testvscreen.cc:

	Also make sure that the scrollbar fills its vertical space. (this
	change is needed to compensate for past adjustments in vs_table's
	behavior)

	* src/vscreen/testvscreen.cc:

	Fix the creation of the main test screen so that the scrollbar is
	visible again.

	* src/vscreen/testvscreen.cc:

	Get rid of no-longer-necessary uses of the removed %C escape.

	* src/vscreen/vs_button.cc:

	Don't drop character attributes from the enclosed text -- this is
	safe now that we have cascading styles.  This means that button
	labels can have (for instance) highlighted characters.

	* src/vscreen/vs_minibuf_win.cc:

	Fix the minibuf window to set the basic style of its header and
	status labels from the corrent style (use Status instead of
	ScreenStatusColor).

	* src/vscreen/config/colors.cc:

	Correct color updating: use PAIR_NUMBER to retrieve the old pair
	number (since color is now an attribute set, not a pair number).

	* src/vscreen/vscreen.cc:

	Fix menu coloration by putting full style information into each
	menu style, rather than implicitly expecting the menu code to
	inherit from the "Menu" style (which it doesn't).

	* src/vscreen/config/colors.cc, src/vscreen/config/colors.h, src/vscreen/config/style.h:

	Further fixes to how styles and colors are applied to characters.
	mix_color now operates on attribute values and returns an
	attribute value, and the appropriate bits of code have been
	updated to reflect this change.

	* src/vscreen/vscreen.cc:

	Remove some uses of the NOP style_attrs_on(0).

	* src/vscreen/config/style.h:

	Fix the composition of styles by including information from both
	styles, not just the last one (doh).

	* src/vscreen/config/style.h:

	Fix part of the problem with compositing styles: previously,
	colors only got overwritten if they were *currently*
	nontransparent (correct behavior would be to only use
	nontransparent colors to overwrite the existing colors).

	* src/vscreen/vscreen_widget.cc:

	Initialize pre_display_erase to 'true' in the constructor.

	* src/vscreen/vscreen.cc:

	Fix some style definitions.

	* src/vscreen/vs_label.cc:

	Fix an infinite recursion in vs_label::set_text.

	* src/vscreen/curses++.cc:

	Add a missing definition of chstring::chstring.

	* src/vscreen/testvscreen.cc:

	Update the test program to use styles instead of attributes.

	* src/vscreen/vs_editline.cc, src/vscreen/vs_editline.h:

	Update the line-editor widget for the new display protocol.

	* src/vscreen/vs_pager.cc:

	Update the pager for the new display protocol.

	* src/vscreen/vs_util.cc, src/vscreen/vs_util.h:

	Update the vscreen dialog utilities to use styles instead of
	attributes.

	* src/vscreen/vs_scrollbar.cc, src/vscreen/vs_scrollbar.h:

	Update the scrollbar widget to the new display protocol.

	* src/vscreen/vs_text_layout.h:

	D'oh, update the signature of freshen_contents() and make lastst
	non-const.

	* src/vscreen/vs_text_layout.cc, src/vscreen/vs_text_layout.h:

	Finish updating the text_layout widget: include style information
	in its cache and handle the enclosing style environment in
	paint().

	* src/vscreen/vscreen_widget.cc:

	Always set the display attributes of a widget to its basic style,
	even if it's non-opaque.  No change to current behavior as all
	existing transparent widgets are also invisible except for their
	subwidgets.

	* src/vscreen/vs_table.cc, src/vscreen/vs_table.h:

	Update the vs_table widget for the new display protocol.

	* src/vscreen/vs_togglebutton.cc:

	Update the vs_togglebutton widget for the new display protocol.

	* src/vscreen/vs_text_layout.cc:

	Update the text layout widget to use the new display protocol.

	* src/vscreen/vs_stacked.cc, src/vscreen/vs_stacked.h:

	Update the stacked widget to use the new display protocol.

	* src/vscreen/vs_size_box.cc:

	Update the size-box to use set_opaque() instead of set_bg().

	* src/vscreen/vs_minibuf_win.cc, src/vscreen/vs_minibuf_win.:h:

	Update the minibuf-win for the new display protocol.

	* src/vscreen/vs_multiplex.cc, src/vscreen/vs_multiplex.h:

	Update the multiplexer for the new display protocol.

	* src/vscreen/vs_menubar.cc, src/vscreen/vs_menubar.h:

	Update the menubar for the new display protocol.

2005-06-04  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/vs_menu.cc, src/vscreen/vs_menu.h:

	Update menus for the new display protocol.

	* src/vscreen/vs_layout_item.cc, src/vscreen/vs_layout_item.h:

	Handle the new display protocol.

	* src/vscreen/vs_subtree.h:

	Update a few minor things in vs_subtree (particularly
	added code to avoid string copies).

	* src/vscreen/vs_tree.cc, src/vscreen/vs_tree.h, src/vscreen/vs_treeitem.cc, src/vscreen/vs_treeitem.h:

	Update the core tree code to the new display protocol.

	* src/vscreen/vs_label.cc, src/vscreen/vs_label.h:

	Update the label widget to the new display protocol.

	* src/vscreen/vs_editline.cc:

	Update the edit-line widget to the new display protocol.

	* src/vscreen/vs_frame.cc, src/vscreen/vs_frame.h:

	Update the frame widget to the new display protocol.

	* src/vscreen/vs_center.cc:

	Update the center widget to the new display protocol.

	* src/vscreen/vs_bin.cc, src/vscreen/vs_bin.h:

	Update the bin widget to the new display protocol.

	* src/vscreen/fragment.h:

	Add a note clarifying the guarantees provided by layout().

	* src/vscreen/vs_button.cc, src/vscreen/vs_button.h:

	Fix the vs_button class for the new display protocol.

	* src/vscreen/vscreen_widget.cc:

	Properly pass style information into the paint() call.

	* src/vscreen/config/style.h:

	Make several operators const that should be and weren't.

	* src/vscreen/vscreen_widget.cc, src/vscreen/vscreen_widget.h:

	Remove the stack of styles, it's the Wrong Way to do things.  (if
	this were Lisp, a with-style macro would be appropriate, but it's
	not so it isn't) Instead, just let the user directly set the
	current text attributes based on a full style.

2005-06-02  Tetralet  <tetralet@pchome.com.tw>

	* po/zh_TW.po: Updated from sarge branch. Closes: #311587

2005-05-26  Ruben Porras  <nahoo@inicia.es>

	* po/es.po: Various updates

2005-05-26  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/vscreen_widget.cc, src/vscreen/vscreen_widget.h:

	Fix some compilation problems with the new stuff.

	* src/vscreen/vscreen_widget.h:

	Add in a per-widget stack of styles to be used when drawing the
	widget.

	* src/vscreen/config/style.h:

	Take the color data into account when generating attrs from a
	style.

2005-05-26  Christian Perrier  <bubulle@debian.org>

	* po/fr.po: Typo corrections from sarge branch

2005-05-20  Stanislav ValÃ¡Å¡e k <valasek@fastmail.fm>

	* po/sk.po: Updated. Closes: #309824

2005-05-10  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/fragment_cache.cc:

	Fix the compilation errors in fragment_cache.  Note: the cache now
	updates itself based on its last known style; would it make any
	sense to keep a map of styles for fragments whose formatting
	changes?

	* src/vscreen/config/style.h:

	Write operator== and operator!=.

	* src/vscreen/fragment.cc:

	Fix compile errors.

	* src/vscreen/curses++.cc, src/vscreen/curses++.h:

	Add some new constructors to chstring that will be needed later;
	remove direct attribute manipulation and replace it with style
	adjustment.

	* src/vscreen/config/colors.cc:

	Fix a silly compile error.

	* src/vscreen/config/style.h:

	Add an interface to apply a style to a chtype value.

	* src/vscreen/config/colors.cc, src/vscreen/config/colors.h:

	Add an interface to 'mix' colors.

2005-05-08  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/fragment.cc, src/vscreen/fragment.h:

	Rewrite the fragment code to handle styles.

	* src/vscreen/vscreen.cc, src/vscreen/vs_minibuf_win.h, src/vscreen/vs_treeitem.h:

	Make vscreen.cc compile, and change some 'get the color' routines
	to 'get the style'.  Note that 'normal' colors now just correspond
	to an empty style!

	* src/vscreen/config/style.h:

	Oops, use attrs_on, not attr_on.

	* src/vscreen/config/style.cc, src/vscreen/config/style.h:

	Cancel that; instead, just return a 'null' style.  I'd like to
	have unknown styles blow up, but that has other problems
	(especially when the user is allowed to create screen regions and
	specify their styles).

	* src/vscreen/config/style.cc, src/vscreen/config/style.h:

	Throw an exception if a style is missing, rather than just
	silently creating a new style.

	* src/vscreen/config/style.h:

	Add factory routines to make it easy to generate canned styles.

2005-05-07  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/config/colors.cc, src/vscreen/config/colors.h:

	Change the color database to allow orthogonal selection of fg/bg
	colors.  Now nothing compiles.  Whee!

	* src/vscreen/config/Makefile.am, src/vscreen/config/styles.cc, src/vscreen/config/styles.h:

	Add basic support for styles that allow you to override the
	surrounding character attributes orthogonally.

2005-05-05  Daniel Burrows  <dburrows@debian.org>

	* src/main.cc:

	Make it compile without them.

	* src/main.cc:

	Remove the utf8 guards in main.

	* configure.ac, src/vscreen/curses++.h:

	Start using ncursesw instead of straight curses.

2005-05-04  Daniel Burrows  <dburrows@debian.org>

	* src/generic/problemresolver/model.tex:

	More Stuff[tm] -- wrote up some comments on Recommends, added a
	Future Work section.

	* src/generic/problemresolver/model.tex:

	Edit a bunch of stuff in the document, and write up that second proof.

2005-05-01  Daniel Burrows  <dburrows@debian.org>

	* doc/en/aptitude.xml:

	Document the change to StepLimit.

	* src/generic/aptcache.cc:

	Live dangerously: bump the default StepLimit to 5000.  It seems
	from empirical tests that the various changes to the problem
	resolver -- especially the 'forbidden' version tests, forced
	installations, and the reduction of the branching factor -- have
	made longer searches feasible; also, some interesting test cases
	(like 'aptitude -s -t experimental dist-upgrade') need more steps
	to complete.

	* src/cmdline/cmdline_resolver.cc:

	Give up, don't loop forever, if the user asks to terminate a
	search.

	* src/generic/aptcache.cc:

	Bump the default StepLimit to 500, to deal with the fact that some
	interesting problems are a bit too hard for 100.

	* src/generic/aptitude_resolver.h:

	Fix reversed logic in checking whether a Conflicts is broken.

	* src/generic/aptitude_resolver.h, src/generic/problemresolver/problemresolver.h, src/generic/problemresolver/test.cc:

	Fix a mistake in how successors are generated -- of course we have
	to test the dependencies of the new version being installed as
	well!

	* src/solution_fragment.cc:

	Fix a silly thinko that caused segfaults when trying to display
	problem solutions.

	* src/generic/problemresolver/Makefile.am:

	Uh, yeah, also distribute the problem resolver's header file.

	* src/generic/problemresolver/Makefile.am:

	Distribute more problemresolver-related stuff, including the TeX
	file explaining how it all works.

	* po/*.po, po/aptitude.pot:

	Ran "make dist" and update-po.

	* src/generic/Makefile.am:

	Add problemresolver to the "official" source tree as seen by
	automake.

	* NEWS, configure.ac, doc/en/aptitude.xml:

	Bump version to 0.3.2.

	* doc/en/manpage.xml:

	Oops, fix a link target to actually work.

	* src/cmdline/cmdline_action.cc:

	Actually support keeping packages from the command-line prompt, as
	advertised.

	* po/*.po, po/aptitude.pot:

	Run update-po again.

	* doc/en/manpage.xml:

	Further correct the manual page to adjust for the new stuff in
	0.3.2.

	* configure.ac:

	Add vi to ALL_LINGUAS (it was left out..oops).

	* Everything:

	Merge with the stable branch up to r3238.  In order to keep from
	going nuts, though, I held out most of the .po changes (they seem
	to be impossible to automatically merge).

	* doc/en/manpage.xml:

	Minor tweaks to more accurately reflect the way the world works
	now.

--------------- END MERGE FROM 0.2.x ---------------

2005-04-28  Carlos Z.F. Liu  <carlosliu@users.sourceforge.net>

	* Correct both Chinese translations for "DL size".
	  Closes: #306361

2005-04-27  Clytie Siddall  <clytie@riverland.net.au>

	* Added Vietnamese translation.

2005-04-24  Inaki Larranaga Murgotio  <dooteo@euskalgnu.org>

	* Complete Basque translation. Closes: #275704

2005-04-20  Daniel Burrows  <dburrows@debian.org>

	* doc/en/manpage.xml:

	  Document dist-upgrade (with prodding from Branden).
	  Closes: #268697.

2005-04-17  Sorin Batariuc  <sorin@bonbon.net>

	* Complete Romanian translation. Closes: #305282

2005-04-17  Danilo Piazzalunga  <danilopiazza@libero.it>

	* Complete Italian translation. Closes: #304906

2005-04-11  Luk Claes  <Luk.Claes@UGent.be>

	* Complete Dutch translation. Closes: #304210

2005-04-06  Daniel Burrows  <dburrows@debian.org>

	* doc/en/aptitude.xml, doc/cs/aptitude.xml, doc/fr/aptitude.xml, doc/de/aptitude.xml, doc/fi/aptitude.xml:
	  Just to be completely safe, use DocBook 4.2 for now
	  (not 4.3, which is also available).

	* doc/en/aptitude.xml, doc/cs/aptitude.xml, doc/fr/aptitude.xml, doc/de/aptitude.xml, doc/fi/aptitude.xml:

	  Make sure to use file: URLs, not http: URLs, for retrieving
	  the DTD.

2005-04-04  Konstantinos Margaritis  <markos@debian.org>

	* Complete Greek translation. Closes: #302851

2005-04-02  Olivier Trichet  <trichet.olivier@ec-lille.fr>

	* Make French documentation consistent with the program
	  translation

2005-03-29  Miroslav kure  <kurem@upcase.inf.upol.cz>

	* Complete Czech translation. Closes: #302107

2005-03-29  Ryan Escarez  <rescarez@gmail.com>

	* First Tagalog translation. Closes: #302085

2005-03-29  Luk Claes  <luk.claes@ugent.be>

	* Really completed Dutch translation. Closes: #301809

2005-03-28  Miguel Figuereido  <elmig@debianpt.org>

	* Completed Portuguese translation. Closes: #301830

2005-03-28  Luk Claes  <luk.claes@ugent.be>

	* Completed Dutch translation. Closes: #301809

2005-03-28  Daniel Burrows  <dburrows@debian.org>

	* po/*.po:

	  Ran update-po.

	* src/cmdline/cmdline_prompt.cc:

	  Use a more formal wording for the security prompt.

2005-03-28  Christian Perrier  <bubulle@debian.org>

	* Completed French translation (to be proofread)

2005-03-26  Daniel Burrows  <dburrows@debian.org>

	* po/*.po:

	  Re-run update-po again.

	* po/lt.po:

	  Update the Lithuanian translation (same bug).

	* src/cmdline/cmdline_prompt.cc:

	  Use "Yes"/"No", not "yes"/"no" to make translations work better.

	* doc/fr/Makefile.am:

	  Oops, distribute the mysterious "fixman" program.

	* configure.ac, doc/cs/aptitude.xml, doc/de/aptitude.xml, doc/en/aptitude.xml, doc/fi/aptitude.xml, doc/fr/aptitude.xml:

	  Bump the version to 0.2.15.9.

	* po/*:

	  Run update-po.

	* po/POTFILES.in:

	  Add trust.cc and trust.h.

	* doc/fr/Makefile.am:

	  Make the French documentation compile instead of blowing up.

	* configure.ac:

	  Same for doc/fr/images/Makefile.

	* configure.ac:

	  Actually generate doc/fr/Makefile.

	* src/pkg_columnizer.cc:

	  Make sure it compiles against the older apt version.

	* src/pkg_columnizer.cc, src/pkg_columnizer.h, src/pkg_ver_item.cc:

	  Backport the column display of untrusted packages.

	* src/defaults.cc:

	  Backport a default color for TrustWarning.

	* src/Makefile.am, src/pkg_info_screen.cc, src/pkg_view.cc, src/trust.cc, src/trust.h:

	  Backport the display of trust info in the package information
	  displays.

	* src/cmdline/cmdline_prompt.cc:

	  Add a security warning prompt to the command-line mode.

	* src/generic/apt.cc, src/generic/apt.h, src/ui.cc:

	  Backport the apt 0.6 support (compiled out by default, unless
	  you compile aptitude on a system with apt 0.6).

	* src/download_item.cc:

	  Fix the compile failure with apt 0.6 (use conditional
	  compilation to compile the right version of the code depending
	  on the version of apt that's in use).

	* NEWS:

	  Start preparing a new release (mostly translations).

2005-02-16  Daniel Burrows  <dburrows@debian.org>

	* doc/en/aptitude.xml:

	  Correct a major oversight in the documentation of Delete-Unused:
	  the documentation stated that packages matching it would be the
	  only things deleted, whereas it's packages that DON'T match it
	  that will be the only things deleted.

	  Probably this was originally a coding error, but in the stable
	  branch I won't change the name or behavior of the option, so the
	  documentation is getting fixed instead.

	  Thanks to Michael Vogt for pointing this out.

2005-02-02  Dennis Stampfer <seppy@debian.org>

	* Correcting German shortcut for cleaning cache
	  in de.po: Closes: #293127

2005-01-28  Christian Perrier <bubulle@debian.org>

	* Corrected Lithuanian translation by
	  Darius Zitkevicius
	  Closes: #280049

2005-01-19  Christian Perrier <bubulle@debian.org>

	* Corrected Traditional Chinese translation
	  and help file. Closes: #290284

2005-01-05  Christian Perrier <bubulle@debian.org>

	* Corrected Dutch translation. Closes: #288815

  ----------------- BEGIN MERGE FROM 0.2.x --------------------

2005-05-01  Daniel Burrows  <dburrows@debian.org>

	* src/generic/problemresolver/test.cc:

	  Fix dummy_universe::broken_under (it was returning false for all
	  dependencies except totally unsatisfiable ones (i.e., deps with
	  no solvers whatsoever).

	* src/generic/problemresolver/test.cc:

	  Always enable debugging.

	* src/generic/problemresolver/test.cc:

	  Fix a refcounting error.

	* src/generic/aptcache.cc:

	  Fix the dumper to conform to the test input format.

	* src/generic/problemresolver/test.cc:

	  Remove a now-unnecessary try/catch pair, reindent a lot of stuff
	  as a result.

	* src/generic/problemresolver/test.cc:

	  Fix a crash that occured when an error was encountered in
	  parsing a test file: the resolver copied the universe, which had
	  references to the package objects, and hence the packages got
	  double-deleted.  Now universes are reference-counted and it's
	  the references that are copied around, so the problem should go
	  away.

	* src/generic/problemresolver/problemresolver.h:

	  When dumping version scores, actually write the scores instead
	  of just writing which versions have non-zero scores.

	* src/cmdline/cmdline_resolver.cc:

	  Add support for dumping the resolver state from the
	  command-line. (enter a tilde)

	* doc/en/aptitude.xml, src/defaults.cc, src/ui.cc:

	  Add support for dumping the resolver state to a file from the
	  visual interface.

	* doc/en/aptitude.xml:

	  Add a brief overview of the command-line resolver interface to
	  the documentation, and fix a minor typo.

	* src/cmdline/cmdline_prompt.cc:

	  Before, if the list of actions had not been modified by the time
	  they were displayed, the prompt would be skipped even if some
	  packages were broken.  Now, if packages are broken, we always
	  continue to the prompt (including the resolver).

	* doc/en/aptitude.xml:

	  Finish documenting the new configuration options.

	* src/generic/aptitude_resolver.cc:

	  When tweaking scores based on priority, don't tweak the score of
	  the not-installed version.

2005-04-30  Daniel Burrows  <dburrows@debian.org>

	* doc/en/aptitude.xml:

	  Start documenting the new configuration options.

	* doc/en/aptitude.xml, doc/en/images/views-tab-bar.png:

	  Document the business with having tab-bars at the top of the
	  display.

	* doc/en/aptitude.xml:

	  Document the new keybindings.

	* doc/en/aptitude.xml:

	  Move a tip around to a place where it will make more sense soon.

	* doc/en/aptitude.xml:

	  Update the tutorial on broken dependencies to discuss the new
	  dependency resolver.

	* src/generic/problemresolver/model.tex:

	  Further description of the algorithm.

	* src/generic/aptcache.cc:

	  Make packages installed/removed by the resolver get marked as
	  "automatic" (using a new changed_reason value).

	* src/solution_dialog.cc:

	  Make the top row of the dialog shrinkable, so the buttons never
	  disappear -- even if it gets too tall.

	* src/solution_dialog.cc:

	  Fix up the layout options in the solution dialog.  The most
	  important change is that the button box is now shrinkable, which
	  in turn means that the scrollbar will always be visible (because
	  the first column of the table will be preferentially shrunk).

	* src/cmdline/cmdline_prompt.cc:

	  After running the resolver, always fall out to the main loop, so
	  that a new preview gets displayed before the prompt is shown
	  again.

	* src/cmdline/cmdline_download.cc, src/cmdline/cmdline_progress.cc, src/cmdline/cmdline_prompt.cc, src/cmdline/cmdline_resolver.cc, src/cmdline/cmdline_search.cc, src/cmdline/cmdline_show.cc, src/main.cc:

	  Quit running update_screen_width all over the place in
	  command-line mode; instead, set up a SIGWINCH handler and read
	  the screen width for the first time in main.

	* src/cmdline/cmdline_do_action.cc:

	  Get rid of the separate resolve step prior to prompting, which
	  should make the command-line interaction a bit nicer.

	* src/cmdline/cmdline_prompt.cc:

	  Display the prompt help using fragments, so it gets properly
	  flowed.

	* src/cmdline/cmdline_resolver.cc:

	  Remove an unneeded flowbox, make indentation work correctly
	  (remember: indentboxes go *outside* flowboxes).

	* src/cmdline/cmdline_do_action.cc:

	  Support the new action flags and stuff in the name-mangling
	  code.

	* src/cmdline/cmdline_action.cc, src/cmdline/cmdline_common.h, src/cmdline/cmdline_prompt.cc, src/cmdline/cmdline_resolver.h:

	  Add support for manipulating the automatic flag from the
	  command-line prompt.

	* src/cmdline/cmdline_resolver.cc:

	  Add a space after the resolver prompt string.

	* src/cmdline/cmdline_action.cc, src/cmdline/cmdline_common.h, src/cmdline/cmdline_do_action.cc, src/cmdline/cmdline_prompt.cc, src/cmdline/cmdline_resolver.cc:

	  Add a 'keep' action (invoked via ':') to the command-line
	  prompts.

	* src/cmdline/cmdline_action.cc, src/cmdline/cmdline_action.h, src/cmdline/cmdline_do_action.cc, src/cmdline/cmdline_prompt.cc, src/cmdline/cmdline_resolver.cc, src/cmdline/cmdline_resolver.h:

	  Add support for modifying package states from the resolver
	  prompt; in the process, moved the routine responsible for doing
	  this from cmdline_prompt.cc to cmdline_action.cc.

	* src/cmdline/cmdline_resolver.cc:

	  Fix some of the formatting problems with the resolver help text.
	  Introduce help for not-yet-extant commands.

	* src/generic/aptcache.cc, src/generic/aptcache.h, src/generic/problemresolver/problemresolver.h:

	  Add support in the cache abstraction for dumping the resolver
	  state (including, importantly, the current set of version
	  scores).

	* src/generic/problemresolver/test.cc, src/generic/problemresolver/test1.txt:

	  Fix the test code to work with the new problem resolver.

	* src/generic/aptitude_resolver.h:

	  Adjust the get_name() routine of versions to mangle versions
	  when several versions with the same name are available.

	* src/generic/aptcache.cc:

	  Default score tweaking: double the penalty for broken deps, make
	  infinity much larger, and only work with the first dependency
	  that generates successors, rather than generating all possible
	  successors; this is done in order to decrease the branching
	  factor.  In theory only looking at a single dep could generate
	  worse solutions overall, but it seems to work OK in my tests.

	  Also, only check up to 100 solutions before giving up!

	* src/generic/problemresolver/problemresolver.h:

	  Right, only spew if debug is enabled.

	* src/generic/problemresolver/problemresolver.h:

	  When generating the successors of a solution, detect "forced"
	  installs (i.e., installs which must be in any successor
	  solution, such as deps that have only one solver) and perform
	  them immediately.  In the process, refactored and complicatified
	  the problem resolver.

	* src/generic/problemresolver/problemresolver.h:

	  Actually drop attempts to install "forbidden" package versions.

	* src/generic/problemresolver/problemresolver.h:

	  Add basic support for maintaining a list of "forbidden" package
	  versions that varies by solution.

2005-04-29  Daniel Burrows  <dburrows@debian.org>

	* po/POTFILES.in, po/*.po:

	  Update POTFILES (oops, forgot to do that for a while) and run
	  'make update-po'.

	* src/cmdline/cmdline_resolver.cc:

	  Be less strict about obeying command-line instructions, to avoid
	  spending lots of time searching really bad solutions if the user
	  asks for something impossible.

	* src/cmdline/cmdline_resolver.cc:

	  Oops, iterate over the whole version list, not just the part of
	  it that follows the current version.

	* src/cmdline/cmdline_resolver.cc:

	  Uninvert the tweaking logic: now, instead of giving a bonus to
	  removal if the user *didn't* ask for a package to be removed, we
	  give a bonus to removal if the user *did* ask for a package to
	  be removed.

	* src/cmdline/cmdline_resolver.cc:

	  When tweaking scores, generate an end iterator (not an invalid
	  iterator) for the UNINST version.

	* src/generic/aptitude_resolver.h:

	  Add some asserts to cache situations that shouldn't happen.

	* src/generic/problemresolver/problemresolver.h:

	  Right, test subset-inclusion in the correct order...

	* src/ui.cc:

	  Fix some typos in various strings that were pointed out by the
	  Vietnamese translator.

2005-04-28  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptitude_resolver.h, src/generic/aptitude_resolver.cc, src/generic/problemresolver/problemresolver.h:

	  Fix a monumentally stupid decision (storing references to a
	  universe in the problem resolver), fixing the segfault caused by
	  the previous segfault's fix.

	* src/cmdline/cmdline_dump_resolver.cc, src/generic/aptcache.cc, src/generic/aptitude_resolver.cc, src/generic/aptitude_resolver.h:

	  Carry a backpointer to the cache around in all the resolver glue
	  code, to avoid segfaulting if apt_cache_file is uninitialized
	  when we're called (e.g., if packages are broken on startup).

	* src/cmdline/cmdline_resolver.cc:

	  Fix a very stupid infinite loop bug.

	* src/generic/problemresolver/problemresolver.h:

	  Ignore any solution that's a subset of another solution.

	* src/generic/problemresolver/problemresolver.h:

	  Write in a definition of operator!= for solutions -- I don't
	  know where the default was coming from, but it's wrong, wrong,
	  WRONG.

	* src/generic/problemresolver/problemresolver.h:

	  Fix an ugliness in the debugging output.

	* src/cmdline/cmdline_resolver.cc:

	  Use the new hooks to enable debugging based on the option
	  Aptitude::CmdLine::Resolver-Debug.

	* src/generic/aptcache.cc, src/generic/aptcache.h:

	  Add hooks for enabling resolver debugging.

	* src/cmdline/cmdline_resolver.cc:

	  Streamline the "reject solution" command.

	* src/cmdline/cmdline_resolver.cc:

	  Doh, C++ varargs have to be explicitly terminated; do that
	  instead of crashing.

	* src/main.cc:

	  Add debugging catches to trap unhandled exceptions.

	* src/cmdline/cmdline_action.cc, src/cmdline/cmdline_action.h, src/cmdline/cmdline_do_action.cc, src/cmdline/cmdline_prompt.cc, src/cmdline/cmdline_prompt.h, src/cmdline/cmdline_resolver.cc, src/cmdline/cmdline_resolver.h, src/cmdline/cmdline_show_broken.cc, src/cmdline/cmdline_show.cc, src/cmdline/cmdline_show.h, src/cmdline/cmdline_simulate.cc, src/cmdline/cmdline_simulate.h, src/cmdline/cmdline_upgrade.cc, src/cmdline/Makefile.am:

	  Start work on hooking the new resolver into the command-line.
	  The new approach works by having a sub-loop that gets entered if
	  broken dependencies are detected at the command-line prompt.

	* src/generic/aptcache.cc, src/generic/aptcache.h, src/generic/problemresolver/problemresolver.h:

	  Add provisions for adjusting package scores before running the
	  resolver.

2005-04-27  Daniel Burrows  <dburrows@debian.org>

	* src/main.cc:

	  Ignore -s when running in interactive mode. (Closes: #243192)

	* src/vscreen/vs_multiplex.cc:

	  Recognize mouse clicks on the "tabs".

	* src/download.cc, src/pkg_item.cc, src/pkg_ver_item.cc, src/ui.cc, src/ui.h, src/view_changelog.cc:

	  Use tabs for the main multiplex.

	* doc/en/aptitude.xml, src/vscreen/vscreen.cc:

	  Use less vomit-inducing default colors for multiplex tabs.

	* src/vscreen/vs_multiplex.cc:

	  Use the correct addstr() variant; the chstring variant is a bit
	  broken right now :( (and of course it doesn't preserve
	  attributes).

	* src/vscreen/testvscreen.cc:

	  Enable tabs in the test program.

	* src/vscreen/vs_multiplex.cc, src/vscreen/vs_multiplex.h:

	  Oh yeah, make it possible to actually turn on the tab support.

	* doc/en/aptitude.xml, src/vscreen/vs_multiplex.cc, src/vscreen/vs_multiplex.h, src/vscreen/vscreen.cc:

	  Add theoretical support for 'tabbed' multiplexes (untested as
	  yet).  In order to do this properly, I had to extend the
	  vs_multiplex API and rewrite its internals to represent each
	  child using an actual structure.

	* src/main.cc:

	  Hook the layer of indirection up to "dump errors to cerr" before
	  executing command-line requests.

	* src/generic/apt.cc, src/generic/apt.h, src/ui.cc:

	  Add a layer of indirection (a signal) between the request to
	  clear the error list and the clearing of the error list.  Among
	  other things, this means that the command-line no longer
	  segfaults when errors occur.

	* src/ui.cc:

	  Use the new support in vs_text_layout to not open tons of
	  extraneous error dialogs (instead we just reuse the existing
	  ones).

	* src/vscreen/vs_text_layout.cc, src/vscreen/vs_text_layout.h:

	  Add a way to append text to a vs_text_layout 'after the fact'.

	* src/generic/apt.cc:

	  Hackily avoid discarding the error list by instead asking the UI
	  to clear it out for us (making sure that errors don't get lost).
	  (Closes: #160418)

	* doc/en/aptitude.xml, src/generic/matchers.cc:

	  Make ~ahold find packages that are actually *held*.  ~akeep now
	  finds packages upon which no action is being taken; the old
	  meaning of ~ahold is available via "~U~akeep".
	  (Closes: #216730)

	* src/apt_info_tree.cc, src/apt_info_tree.h, src/ui.cc:

	  Apply a similar treatment to the various apt_info_trees: create
	  a method that explicitly re-issues the various signals, and tell
	  the user to invoke it after connecting said signals.

	* src/pkg_tree.cc, src/pkg_tree.h, src/ui.cc:

	  Don't implicitly build a pkg_tree when it's created.  Instead,
	  expect the caller to call build_tree() once the tree is fully
	  hooked up.  This avoids the inconsistencies caused by the tree's
	  signal getting emitted before it's connected to anything.

	* src/vscreen/vs_text_layout.cc:

	  Fix the caching of text layouts: the 'lastw' variable wasn't
	  being updated, so the layout always looked stale!

	* src/vscreen/vs_tree.cc:

	  Remove the grotesque hack of calling highlighted() in paint();
	  among other things, it was responsible for making everything
	  slow when the user was scrolling around the description area.

	* src/generic/aptcache.cc, src/generic/aptitude_resolver.cc, src/generic/aptitude_resolver.h, src/generic/problemresolver/problemresolver.h:

	  Put a cap on how many successors will be generated for any given
	  dep.  This is sufficient to generate all solutions (albiet
	  possibly in a bad order); for simple problems (where everything
	  worked already) it has no effect if the cap is large enough; and
	  it should produce reasonable results for complicated programs.

	* src/generic/aptcache.cc:

	  Penalize brokenness less again; placing too high a bounty on
	  fixing broken deps makes solutions turn up in the wrong order.

	* src/generic/aptcache.cc:

	  Make infinity smaller and penalize brokenness more.  Now if
	  aptitude goes nuts (although I should do more to stop this) it
	  at least won't eat all your virtual memory before figuring out
	  that no solutions exist.  This is a bit of a hack, though..

	* src/generic/problemresolver/problemresolver.h:

	  Incrementally calculate the new score, and abort as soon as it
	  drops below minimum_score.

	* src/generic/aptitude_resolver.h, src/generic/problemresolver/problemresolver.h:

	  Add a 'broken_under' method to the aptitude_resolver_dep class,
	  and use it in the problem resolver to (hopefully) speed up
	  checking whether dependencies are broken in a given solution.

	* src/generic/aptcache.cc, src/generic/aptitude_resolver.cc, src/generic/aptitude_resolver.h, src/generic/problemresolver/problemresolver.h:

	  Add basic support in the problem-resolver for specifying
	  "infinity" -- a boundary for solution badness beyond which all
	  solutions are dropped.

	* src/generic/aptcache.cc:

	  Decrease the default max_steps value so that hard-to-resolve
	  problems don't cause aptitude to lock up.  (not very successful
	  yet)

	* src/vscreen/config/keybindings.cc, src/vscreen/keybindings.h:

	  Make a global readable_keyname as well.

	* src/vscreen/config/keybindings.cc, src/vscreen/config/keybindings.h:

	  Oops, properly declare the new keyname function.

	* src/broken_indicator.cc, src/solution_dialog.cc, src/ui.cc, src/vscreen/testvscreen.cc, src/vscreen/vs_menu.cc:

	  Use the readable_keyname function as appropriate.

	* src/vscreen/config/keybindings.cc, src/vscreen/config/keybindings.h:

	  Add a 'readable_keyname' function, whose current useful feature
	  is that it maps ',' to ',' instead of 'comma'.

	* src/pkg_item.cc:

	  Reflow some manually wrapped messages.

	* src/vscreen/vs_util.cc, src/vscreen/vs_util.h:

	  Add a vs_dialog_string variant that allows raw fragments to be
	  passed.

	* src/download_bar.cc, src/download_list.cc:

	  Word the question less awkwardly.

	* src/download_bar.cc, src/download_list.cc:

	  Flow the other media-change question, and get rid of an
	  unnecessary newline in both media-change questions (since the
	  text is wrapped now, there's no need to break after the first
	  half).

2005-04-26  Daniel Burrows  <dburrows@debian.org>

	* src/download_bar.cc:

	  Flow the media-change question.

	* src/ui.cc:

	  Also flow the query regarding switching to the root account.

	* src/ui.cc:

	  Wrap the menu descriptions in the status area and eliminate some
	  literal newlines (need to get rid of other literal newlines
	  elsewhere in the program...)

	* src/vscreen/vs_label.cc:

	  Implement the fragment set_text and fix a memory leak.

	* src/vscreen/vs_label.cc:

	  When no attribute is provided, the widget's background is used
	  to set default text attributes.

	* src/vscreen/vs_util.cc:

	  Fix the canned dialogs to properly initialize the attributes of
	  their labels.

	* src/vscreen/testvscreen.cc:

	  Fix the label test.

	* src/vscreen/testvscreen.cc, src/vscreen/vs_minibuf_win.cc, src/vscreen/vs_label.cc, src/vscreen/vs_label.h:

	  Add a attribute-less set_text; fix various places where it needs
	  to not be used.

	* src/vscreen/vs_label.cc, src/vscreen/vs_label.h:

	  Make labels use fragments internally.  IMPORTANT: this means
	  that implicit interpretation of \n and \t no longer works...

	* src/apt_options.cc:

	  Use FILL appropriately so the buttons at the bottom of the
	  options dialogs get appropriately centered.

	* src/ui.cc:

	  Use FILL so that we get a display that actually works.

	* src/pkg_view.cc:

	  When setting up the description, insert all widgets with
	  EXPAND/FILL.

	* src/vscreen/testvscreen.cc:

	  Fix the test program's use of EXPAND/FILL.

	* src/vscreen/vs_table.cc:

	  Change the semantics of FILL/EXPAND: EXPAND only changes whether
	  a widget's row can be expanded; in order to expand the widget
	  itself you must also specify FILL.  For backwards compatibility
	  and ease of use, the non-opts add_widget sets FILL if EXPAND is
	  set.

	* src/apt_options.cc:

	  Put the Ok/Cancel button in a separate table.

	* src/apt_config_widgets.cc:

	  Flow the text in the configuration button labels.

	* src/vscreen/vs_togglebutton.cc, src/vscreen/vs_togglebutton.h:

	  For multiline toggles, make sure to put the cursor on the line
	  containing the toggle button.  Also, choose that line according
	  to the widget size, not the text layout size; if the widget is
	  smaller than the text layout, only step up to its height when
	  drawing.

	* src/vscreen/fragment_cache.cc, src/vscreen/fragment_cache.h, src/vscreen/vs_button.cc, src/vscreen/vs_button.h, src/vscreen/vs_togglebutton.cc:

	  Get the cache working, and use it to hold the fragments of
	  buttons.

	* src/vscreen/fragment_cache.cc, src/vscreen/fragment_cache.h:

	  Add a special intermediate fragment widget that caches the
	  output of its contents.

	* src/vscreen/vs_togglebutton.cc, src/vscreen/vs_togglebutton.h:

	  Fix the display of toggle buttons; in particular, make sure the
	  "check" gets lined up in the center of the button.

	* src/vscreen/testvscreen.cc:

	  In the button test screen, use different settings to insert the
	  various buttons; make sure the buttons are center-aligned.

	* src/vscreen/vs_button.cc:

	  Fix multi-line push-buttons.

	* src/vscreen/testvscreen.cc:

	  Test multi-line fragments.

	* src/vscreen/testvscreen.cc:

	  Test using actual fragments in button labels.

	* src/vscreen/vs_togglebutton.cc:

	  Make sure the right half of the toggle button's check gets
	  displayed.

	* src/vs_button.cc:

	  Don't go into infinite loops drawing buttons.

	* src/vscreen/vs_button.cc, src/vscreen/vs_button.h, src/vscreen/vs_togglebutton.cc, src/vscreen/vs_togglebutton.h:

	  Add basic support for using fragments as button labels.

	* src/vscreen/fragment_contents.h:

	  Make size() const.

	* src/ui.cc:

	  Oops, actually show a preview after auto-fixing.

	* src/solution_fragment.cc:

	  Don't require that the solution is a sensible solution right
	  this instant; this allows a fragment describing an
	  already-applied solution to be generated.

	* src/ui.cc:

	  Eliminate all uses of try_fix_broken() in the pre-installation
	  phase; in the process, factored out a bunch of common code from
	  some of the preview setup functions.

	* src/generic/aptcache.h:

	  Pack the extended state information more tightly using field
	  widths.

	* src/vscreen/fragment.cc:

	  For more correctness, tie the cache to the last seen
	  indentations.  (only the last values are preserved because I
	  expect them never to change; this is so that in case they do for
	  some odd reason, the results are still correct)

	* src/vscreen/fragment.cc:

	  Fix sequence_fragment::trailing_width to return the correct
	  value (previously, it would always return 0, due to an
	  accidental bool -> int conversion).

	* src/solution_dialog.cc:

	  Make the solution dialog disappear when the user presses the
	  apply key.

	* src/solution_fragment.cc:

	  Put parens around archives, don't uselessly translate format
	  strings.

	* src/vscreen/vs_table.cc:

	  Fix a memory leak -- vs_tables didn't delete their children.

	* src/vscreen/fragment.cc:

	  Slightly fix the way sequence fragments calculate their width.

	* src/solution_fragment.cc:

	  Fix some missing newlines in the solution fragment formatting.

	* src/cmdline/cmdline_show.cc, src/vscreen/fragment.cc, src/vscreen/fragment.h, src/vscreen/vs_layout_item.cc, src/vscreen/vs_text_layout.cc:

	  Make the text layout algorithm also take indentation into
	  account.

	* src/vscreen/fragment.cc, src/vscreen/fragment.h, src/vscreen/vs_text_layout.cc:

	  Adjust the fragment width calculation to properly take
	  indentation into account.

	* src/solution_dialog.cc:

	  Move the buttons into a separate "box" table, and add a
	  scrollbar to the solution dialog.

2005-04-25  Daniel Burrows  <dburrows@debian.org>

	* src/solution_dialog.cc:

	  Disable reverse-video for now, till I get proper support for
	  cascading video attributes (otherwise I lose the bold attribute
	  on the headers of the various sections, if that makes sense..)

	* src/vscreen/fragment.cc:

	  Make the max-width calculation more obviously correct.

	* src/vscreen/vs_text_layout.cc:

	  When the text layout's fragment changes, queue a full layout run
	  (not just an update).

	* src/solution_dialog:

	  Make the dialog "dialog colored" in the usual hacky way.

	* src/solution_dialog.cc, src/ui.cc, src/ui.h:

	  Add some pushable buttons to issue solution-viewing commands.

	* src/ui.cc:

	  Pop up an examination dialog when the user presses 'e'.

	* src/broken_indicator.cc, src/solution_dialog.cc, src/solution_dialog.h:

	  Add a start on a dynamically updating solution dialog.  The
	  change to broken_indicator just removes an unnecessary
	  translatable format string (now what's translated is an argument
	  to the format string).

2005-04-23  Daniel Burrows  <dburrows@debian.org>

	* src/broken_indicator.cc:

	  Actually indicate how many downgrades are needed.

	* src/generic/aptitude_resolver.h:

	  Fix a silly logic error in the revdep_iterator that caused
	  reverse dependencies through Provides: to not be considered.

	* src/generic/aptitude_resolver.h:

	  Don't generate inapplicable revdeps, even if they're the first
	  item in the list.

	* src/generic/problemresolver/problemresolver.h:

	  Fix the solution dumper to work properly on non-cout streams too
	  (it called cout instead of its parameter in a few places).

	* src/generic/aptcache.h:

	  Remove the need to include problemresolver.h from every single
	  source file by using the fact that templates can be forward
	  declared.

	* src/generic/aptcache.cc:

	  Deprioritize keeps relative to installs/upgrades: the user
	  rarely wants us to cancel his/her decisions! (removals are still
	  deep-sixed unless abolutely necessary, though) Also, greatly
	  *decrease* the bonus for preserving automatic packages.

	* src/ui.cc:

	  Put the broken indicator above the status area, not in it.

	* src/broken_indicator.cc:

	  Don't display the total number of calculated solutions unless
	  they've been exhausted (I think that's likely to be confusing).

	* src/broken_indicator.cc:

	  Capitalize the command names in the indicator, to match the
	  hints at the top of the screen, and make then i18nable.

	* src/broken_indicator.cc:

	  Make the whole broken indicator red, not just the text.

2005-04-22  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptcache.cc:

	  Avoid the dread assertion failure in a slightly hacky way.

	* src/cmdline/cmdline_do_action.cc, src/generic/aptcache.cc, src/generic/aptitude_resolver.cc, src/generic/aptitude_resolver.h, src/generic/problemresolver/problemresolver.h:

	  Instead of automatically floating complete solutions to the head
	  of the queue, apply a configurable bonus score to them (and in
	  fact it's set rather low by default).  This should avoid
	  situations where a really bad solution happens to appear before
	  a pretty good one.

	  Also, remove the now-useless debugging invocation of the
	  resolver.

	* src/solution_fragment.cc:

	  Display the score of the solution.

	* src/generic/aptcache.cc:

	  Tweak the default scores: be slightly less hostile to changing
	  the user's selections, and greatly increase the penalties for
	  broken deps and for removing packages.

	* src/generic/aptcache.cc:

	  Fix a reversed comparison in solutions_exhausted.

	* src/generic/problemresolver/problemresolver.h:

	  For more correctness, always throw NoMoreSolutions when we're
	  out of potential solutions, even if the last element of the open
	  queue is a solution.

	* src/broken_indicator.cc:

	  Incorporate the solution counts into the suggestion bar.

	* src/generic/aptcache.cc, src/generic/aptcache.h:

	  Add routines to extract more information about cached solutions
	  (to add to the suggestion bar).

	* src/generic/aptcache.cc:

	  In next_solution(), always advance to the newly created solution
	  after generating it, and signal that the selection changed.

	* src/solution_fragment.cc, src/solution_fragment.h, src/ui.cc:

	  Add preliminary code to display a solution, and hook it up in
	  the simplest possible way.

	* src/broken_indicator.cc:

	  Fix an assertion failure due to an incorrect assumption.

	* src/broken_indicator.cc:

	  Use the new signal to reset the broken indicator at appropriate
	  times.

	* src/generic/aptcache.cc:

	  Actually perform the function call so everything compiles.

	* src/generic/aptcache.cc, src/generic/aptcache.h:

	  Add a signal that gets called whenever the currently selected
	  solution is changed, and make sure to set selected_solution to 0
	  when we insert the first solution.

	* src/ui.cc:

	  In do_next_solution(), handle exceptional situations from the
	  problem resolver.

	* src/ui.cc:

	  Hook up the various solution-related commands to do *something*,
	  although some of them are still incomplete.

	* src/generic/aptcache.h:

	  Clarify the documentation of apply_current_solution.

	* src/generic/aptcache.cc, src/generic/aptcache.h:

	  Add an interface routine to easily apply the currently selected
	  solution.

	* src/defaults.cc:

	  Set up default key bindings for the problem resolver.

	* src/broken_indicator.cc:

	  Also display keeps, don't display ungrammatical text for
	  singular actions, and move the key hints to the next line.

	* src/pkg_view.cc, src/ui.cc:

	  Move the broken indicator into the status bar area.

	* src/broken_indicator.cc:

	  Hide an inactive indicator; correctly handle cache reloading.

	* src/generic/problemresolver/problemresolver.h:

	  Add a method on solutions to explicitly invalidate them.

	* src/broken_indicator.cc: 

	  Doh, fix a compile error.

	* src/generic/aptcache.cc:

	  Add yet one more missing call to package_state_changed (in
	  end_action_group).

	* src/broken_indicator.cc:

	  Add a sanity-check.

	* src/generic/aptcache.cc:

	  Also call the package-state-changed signal after an
	  installation.

	* src/broken_indicator.cc:

	  Use the new signal to update the broken indicator.

	* src/generic/aptcache.cc, src/generic/aptcache.h, src/main.cc:

	  Make "package_state_changed" an argumentless signal, and call it
	  whenever a package's install version changes.  Also added a
	  missing discard_resolver()/create_resolver() pair in
	  set_candidate_version.

	* src/generic/problemresolver/problemresolver.h:

	  Add a flag to enable or disable debugging; debugging is disabled
	  by default.

2005-04-21  Daniel Burrows  <dburrows@debian.org>

	* src/broken_indicator.cc:

	  Oops, blank the indicator by making it an empty fragment, not by
	  making it NULL.

	* src/broken_indicator.cc, src/pkg_view.cc:

	  Hook up the broken indicator to the package-view class, and do
	  some awful hacking to make it sort of update.  Needs work, such
	  as actually getting the package_state_changed signal or
	  something similar hooked up.

	  Also, fix the guard against a NULL cache so we don't crash on
	  startup (doh).

	* src/Makefile.am, src/broken_indicator.cc, src/broken_indicator.h, src/generic/aptitude_resolver.h:

	  Write a first draft of the widget to display information about
	  the current proposed solution.  Also made some methods const
	  that ought to be.  sleepy.

	* src/generic/aptcache.cc:

	  Look up BrokenCount on "this", not on the global apt_cache_file
	  variable (which might not be initialized yet).

	* src/pkg_view.cc:

	  Ignore both horizontal and vertical size requests for main
	  widgets/descriptions (should make vertical-split themes work --
	  I believe they were broken otherwise..)

	* src/generic/aptcache.cc, src/generic/aptcache.h:

	  Write rudimentary code for maintaining a set of known solutions
	  to any extant problems (expanded on demand).

	* src/generic/problemresolver/problemresolver.h:

	  Add a function that returns "true" if the open queue has been
	  exhausted.

	* src/generic/problemresolver/problemresolver.h:

	  Once a resolver examines all possible solutions, it now returns
	  "no more solutions" permanently until you call a "reset" method
	  (which clears out all scores and empties the open and closed
	  queues).

	* src/generic/problemresolver/problemresolver.h:

	  Lift the "solution" class out of the generic_problem_resolver
	  class so I can forward-declare it (and hence declare pointers
	  and references to it in aptcache.h).

	* src/generic/aptitude_resolver.h:

	  Make the glue code functions static.

2005-04-20  Daniel Burrows  <dburrows@debian.org>

	* src/desc_parse.cc:

	  Make sure bullet whitespace-stripping includes the space that
	  separates the bullet from the following text; position the
	  initial parse location appropriately.  Paragraphs in lists get
	  flowed now!

	* src/desc_parse.cc:

	  Base the *output* indent level of bulleted text on the number of
	  bullet levels, not the input indent level.

	* src/desc_parse.cc:

	  Allow bulleted lists that are indented more than 2 spaces.
	  Don't mangle lists and literal lines that immediately follow a
	  paragraph.

	* src/desc_parse.cc:

	  Fix a silly thinko in the generation of bullets that was causing
	  bullets to appear twice in the output.

	* src/desc_parse.cc:

	  Add a missing "break".

	* src/desc_parse.cc:

	  Initial implementation of automagic bullet detection.
	  Buggy.

	* src/desc_parse.cc:

	  Rework make_desc_fragment to add theoretical support for
	  indentation levels in the input description.  No change should
	  occur in the resulting text as a result of this modification.

	* src/desc_parse.cc:

	  Include comments on how lists ought to be handled, and hardwrap
	  preformatted lines as per Policy.

	* src/vscreen/fragment.cc, src/vscreen/fragment.h, src/vscreen/testvscreen.cc:

	  Add a "hardwrapbox" which wraps lines hard to the fragment's
	  width (rather than doing word-wrapping).

	* src/generic/problemresolver/model.tex:

	  Add some discussion of the theoretical basis for the new problem
	  resolver.

2005-04-10  Daniel Burrows  <dburrows@debian.org>

	* src/cmdline/cmdline_do_action.cc, src/generic/aptitude_resolver.cc, src/generic/aptitude_resolver.h:

	  Add and use a feature to easily apply heavy penalties to the
	  removal of Essential packages.

	* src/generic/problemresolver/problemresolver.h:

	  Add missing "const"s to some function prototypes, comment out
	  some non-generic debug code.

	* src/generic/aptitude_resolver.cc, src/generic/aptitude_resolver.h:

	  Rename add_scores -> add_actions_scores, and write
	  add_priority_scores (tweaks scores according to Priority).

	* src/generic/aptitude_resolver.h:

	  Always normalize solver_iterators.  This should fix the problem
	  where Conflicts would include the first version of the
	  conflicted package as a solver.

	* src/generic/aptitude_resolver.h:

	  Only iterate over critical revdeps (I was iterating over *all*
	  revdeps, which is what caused all the weirdness before).

	* src/generic/problemresolver/problemresolver.h:

	  Add more debugging, to make it easy to find out where
	  unresolvable deps are coming from.

	* src/generic/aptitude_resolver.h:

	  Add more accessors, the better to debug it with.

2005-04-09  Daniel Burrows  <dburrows@debian.org>

	* src/cmdline/cmdline_do_action.cc:

	  Penalize, don't reward, broken packages and long solutions.

	* src/generic/problemresolver/problemresolver.h:

	  Fix a big thinko: always enqueue solvers for *both* sides of a
	  depends!

	* src/generic/aptitude_resolver.h:

	  Fix the version sent to the problem resolver (should be
	  pkg->ID+VersionCount, not pkg->ID+PackageCount).

	* src/generic/aptitude_resolver.h:

	  Report the correct adjusted version count to the problem
	  resolver.

	* src/generic/problemresolver/problemresolver.h, src/generic/problemresolver/test.cc:

	  Add asserts in order to try and track down where the IDs that
	  are too large for the version array are coming from.

	* src/generic/problemresolver/problemresolver.h:

	  Use map's operator< to order solutions rather than hacking my
	  own.  Has the benefit of fixing one known and at least one
	  unknown bug in the ordering of solutions.  Closed solutions
	  actually get dropped now.

	* src/cmdline/cmdline_do_action.cc:

	  Summarize the proposed solutions as debug output.

	* src/generic/aptitude_resolver.h:

	  Fix an extremely stupid bug (== vs !=) in
	  aptitude_resolver_version::operator!=.

	* src/generic/problemresolver/problemresolver.h:

	  Add some more guards against doubly-changing packages.

	* src/generic/aptitude_resolver.h:

	  Fix some backwards logic that was used when finding broken deps
	  (it only found *non*-broken deps).

	* src/generic/aptitude_resolver.h:

	  Fix an infinite loop in the revdep_iterator.

	* src/generic/aptitude_resolver.cc, src/generic/aptitude_resolver.h:

	  Add spacing between the components of a depends list.

	* src/generic/aptitude_resolver.h:

	  Don't spin forever looking for broken deps.

	* src/generic/aptitude_resolver.h:

	  Fix a silly segfault by initializing a dep as I meant to do in
	  the first place.

	* src/generic/aptitude_resolver.cc:

	  Fix the operator<< on deps to be more useful.

	* src/generic/aptitude_resolver.h:

	  Fix an infinite recursion bug in the broken-dep iterator.

	* src/generic/aptitude_resolver.cc, src/generic/aptitude_resolver.h:

	  Fix some multiply-defined functions by making them inline and/or
	  moving them to the .cc file.

	* src/cmdline/cmdline_do_action.cc:

	  On dist-upgrade, etc, run the new resolver.  Its output is
	  discarded -- this is just to see how it works on real problems.

	* src/generic/aptitude_resolver.h, src/generic/problemresolver/problemresolver.h:

	  Further fixes for constness, typing problems.

	* src/generic/aptitude_resolver.h, src/generic/problemresolver/problemresolver.h:

	  Fix various errors in the code that cropped up while trying to
	  assemble everything.

	* src/generic/aptitude_resolver.h:

	  Use public inheritance from generic_problem_resolver (d'oh).

	* src/generic/aptitude_resolver.cc, src/generic/aptitude_resolver.h:

	  Add missing get_version_count(), fill in and fix the constructor
	  of aptitude_resolver.

	* src/cmdline/cmdline_dump_resolver.cc:

	  Update the #include of aptitude_resolver.h to point at the new
	  location.

	* src/generic/Makefile.am, src/generic/aptitude_resolver.cc, src/generic/aptitude_resolver.h, src/generic/problemresolver/problemresolver.h:

	  Write the body of add_scores(), fix some problems with the
	  generic resolver that came up in the process, and link it into
	  the Makefile.

	* src/generic/problemresolver/aptitude_resolver.h, src/generic/aptitude_resolver.h:

	  Move the aptitude_resolver file into generic/ so that
	  I can easily incorporate a .cc file into the main program.

	* src/generic/problemresolver/aptitude_resolver.h:

	  Write up a prototype for a super-duper-scoring-function.

	* src/generic/problemresolver/problemresolver.h:

	  When dumping the universe, include the syntactic sugar arrows so
	  that we can parse it back in.

	* src/generic/problemresolver/aptitude_resolver.h:

	  Make sure to never ever ever produce noncritical deps in a dump.

	* src/cmdline/cmdline_dump_resolver.cc:

	  Always return success after a dump.

	* src/generic/problemresolver/aptitude_resolver.h:

	  Make sure to use the correct solver_iterator constructor variant
	  for each appropriate case.

	  In dep_iterator's ++, make sure to call normalize in *all*
	  cases, not just the case of advancing the dep ptr.  For
	  Conflicts, always advance by exactly one step.

	* src/generic/problemresolver/aptitude_resolver.h:

	  When normalizing solver-iterators, include the code to advance
	  the dependency inside the loop that runs till we run out of deps
	  (so the program doesn't go into an infinite loop..oops..).

	* src/generic/problemresolver/aptitude_resolver.h:

	  Add code to drop self-conflicts.

	* src/generic/problemresolver/aptitude_resolver.h:

	  Drastically overhaul how Conflicts are handled.  Now each
	  Conflicts line generates a separate dependency for every listed
	  package *and* one dependency for each provider of every listed
	  package.  This is the only sensible way to handle Conflicts in
	  the presence of virtual deps.

	* src/generic/problemresolver/aptitude_resolver.h:

	  Actually, no need to test dep_lst.end() -- just correct
	  the erroneous test of the OR bit (I hate C++).

	* src/generic/problemresolver/aptitude_resolver.h:

	  Assert that dep_lst is non-end BEFORE possibly pushing it off
	  the end, make dep_lst's end-ness part of the end() condition for
	  solver_iterators, and test against end() instead of finished.

	* src/generic/problemresolver/aptitude_resolver.h:

	  Fix the dep_iterator to iterate over all dependencies instead of
	  none.

	* src/generic/problemresolver/test.cc:

	  Run dump_universe on input universes, both for diagnostics
	  and to test dump_universe.

	* src/generic/problemresolver/aptitude_resolver.h:

	  Fix the dep_iterator to not blow up.

	* src/generic/problemresolver/aptitude_resolver.h:

	  Make sure to include UNINST in version iteration (avoid
	  adding an extraneous bool by overloading pkg to track
	  end-ness).

	* src/generic/problemresolver/problemresolver.h:

	  Fix the dump output (again) to comply with the input spec.

	* src/main.cc, src/cmdline/Makefile.am, src/cmdline/cmdline_dump_resolver.cc, src/cmdline/cmdline_dump_resolver.h:

	  Add a debugging command to dump the resolver's state
	  (currently quite primitive).

	* src/generic/problemresolver/aptitude_resolver.h:

	  Fix some more missing stuff that turned up while trying to use
	  the aptitude resolver.

	* src/generic/problemresolver/aptitude_resolver.h:

	  Add a preliminary APT-based resolver universe (totally untested, but it
	  sort of compiles).

	* src/generic/problemresolver/problemresolver.h, src/generic/problemresolver/test.cc:

	  Make changes necessary to support apt universes in a simple way.
	  In particular, the exported iterators now support end() methods
	  and their containers only provide a _begin() method (this allows
	  the iterators to be built on standard APT iterators).

2005-04-08  Daniel Burrows  <dburrows@debian.org>

	* src/generic/problemresolver/problemresolver.h:

	  Use operator<, not get_id(), to compare versions; use the
	  fact that version comparisons include package comparisons.

	* src/generic/problemresolver/problemresolver.h:

	  Enable the closed queue, and fix solution_contents_compare to
	  not treat all solutions as equal to one another.

	* src/generic/problemresolver/test.cc:

	  Overhaul the test code to make the test fully controlled
	  by its input file -- including support for specifying
	  tests to run on the universe and the expected results.

	* src/generic/problemresolver/problemresolver.h, src/generic/problemresolver/test.cc:

	  Make dump_universe generic, move it to problemresolver.h, and
	  output exactly the information expected by the test parser.

2005-04-07  Daniel Burrows  <dburrows@debian.org>

	* src/generic/problemresolver/problemresolver.h:

	  Remove a bunch of uninteresting debugging output, set up
	  indentation to make it clearer what's happening.

	* src/generic/problemresolver/test.cc, src/generic/problemresolver/test1.txt:

	  Properly support conflicts in test files, make the simple test
	  more interesting.

	* src/generic/problemresolver/test.cc, src/generic/problemresolver/test1.txt:

	  The current version must now be given after the list of versions
	  (makes it easier to change the current version, hopefully).

	* src/generic/problemresolver/test.cc:

	  Fix a rather silly mistake that caused dummy_dep::broken()
	  to return incorrect answers.

	* src/generic/problemresolver/test.cc:

	  Fix the broken_dep_iter -- it would always claim the
	  first thing in the list was broken.

	* src/generic/problemresolver/problemresolver.h:

	  Add yet more debugging code.

	* src/generic/problemresolver/test.cc:

	  Add more debugging code; make dump() dump all info by default.

	* src/generic/problemresolver/problemresolver.h, src/generic/problemresolver/test.cc:

	  Make the broken dependency list a unique set (ow, big runtime
	  hit, but otherwise solutions where a single broken dependency is
	  listed many times will be de-prioritized, which shouldn't always
	  happen).

	* src/generic/problemresolver/test.cc:

	  Print out the solution when we find one.

	* src/generic/problemresolver/problemresolver.h, src/generic/problemresolver/test.cc:

	  Fix the assertion failure: when trying to nullify the LHS of a
	  depends, install everything *but* the depending version.  Also
	  touched up the debug output.

	* src/generic/problemresolver/problemresolver.h, src/generic/problemresolver/test.cc:

	  Fix the segfault by adding the missing "&", and tweak the output
	  code a bit.

	* src/generic/problemresolver/problemresolver.h, src/generic/problemresolver/test.cc:

	  Add some debugging code to try to track down the current
	  segfault.

	* src/generic/problemresolver/test.cc:

	  Fix the broken_dep_iterator to actually increment

	* src/generic/problemresolver/problemresolver.h:

	  Actually decrement the max_steps counter, and make it
	  signed to avoid accidents with -1==INT_MAX.

	* src/generic/problemresolver/problemresolver.h, src/generic/problemresolver/test.cc:

	  Finish writing the final method of the resolver, and
	  make the changes (in both files) necessary to hook it
	  up to the toy package system and get it to run.

	* src/generic/problemresolver/problemresolver.h, src/generic/problemresolver/test.cc:

	  Complete and compile the resolver ...... theoretically.
	  Now it's time to watch it run reallllly sloowwwly
	  and produce stoopid answers.

	* src/generic/problemresolver/problemresolver.h:

	  Start work on a currently broken problem resolver.

2005-04-06  Daniel Burrows  <dburrows@debian.org>

	* src/generic/problemresolver/test.cc:

	  It seems numerical IDs will be needed, add support
	  for them.

	* configure.ac, src/generic/problemresolver/test.cc, src/generic/problemresolver/test1.txt:

	  Start adding code to try out some ideas about resolving
	  dependency problems.

2005-03-09  Daniel Burrows  <dburrows@debian.org>

	* src/download_list.cc:

	  Make sure to run the message regarding failed downloads
	  through fragf. (Closes: #298713)

2005-03-03  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/vs_util.cc:

	  Fix a crashing bug caused by trying to cast a slotarg
	  instead of dereferencing it. (Closes: #293935)

2005-01-10  Daniel Burrows  <dburrows@debian.org>

	* doc/fr/Makefile.am:

	  Actually delete the generated manpage in the "clean" rule.

	* po/POTFILES.in:

	  Update with the current list of files in the source
	  distribution.

	* configure.ac, NEWS:

	  Bump version number to 0.3.1.

	* doc/en/aptitude.xml:

	  Update the version number to 0.3.1, and explicitly state which
	  version of libsigc++ is needed.

	* po/nl.po:

	  Merge up to r2879 (see entry below).

	* src/generic/apt.cc:

	  Whenever the cache is reloaded (with package states from the
	  global file), immediately try to write back changes to package
	  states (ie, dselect states).

	* src/generic/aptcache.cc:

	  Finally fix the notorious "aptitude removes stuff you installed
	  with other package managers" bug.  Maybe.  The problem is: when
	  dselect information was being read, aptitude would note changes
	  to the dselect state and record them...but it *would not flag
	  the cache as being dirty*.  As a result, when the user applied
	  the naive process to remove some files from the system:

	  (a) Mark the files for removal
	  (b) Execute the removal
	  (c) Quit aptitude

	  aptitude would quit thinking that dpkg still wanted to install
	  the files in question.  As a result, the next time aptitude
	  started, it would notice that the dselect state disagreed with
	  its own selection state -- but would then notice that the "old"
	  dselect state also called for the packages to be installed, and
	  assume that nothing changed.

	  The fix -- dirtying the cache -- isn't perfect: if the user ^Cs
	  aptitude after installing software but before aptitude saves the
	  new cache state, the bug will reappear.  However, at least the
	  common case works now.

	* src/ui.cc:

	  Make the About box fragment-based, and make its copyright notice
	  reflect the last 5 years.

	* src/ui.cc, src/pkg_item.cc, src/pkg_tree.cc, src/pkg_view.cc:

	  Lots of stuff to handle slot type conversions in appropriate
	  ways for sigc++ 2.0.  The program compiles and seems to work now.

	* src/vscreen/vs_menu.cc:

	  Apparently in sigc++ 2.0, you can cast a slot<bool> directly to
	  a slot<void> and vice versa (?!?!?!), so overloading a function
	  with both and hiding the slot<bool>'s return value is
	  unnecessary and leads to compiler errors.

	* src/vscreen/slotarg.h:

	  Use a conversion operator instead of a constructor to convert
	  between slotarg types.

	* src/pkg_item.cc:

	  Convert a use of slotarg.

	* src/edit_pkg_hier.cc:

	  Add missing include for bind.

	* src/download_list.cc:

	  Convert uses of slotarg, add dereferences.

	* src/vscreen/slotarg.h:

	  Also allow non-const dereferencing of slotarg.

2005-01-09  Daniel Burrows  <dburrows@debian.org>

	* src/mine/cmine.cc:

	  Really convert all explicit uses of Slot*Arg*.

	* src/download_bar.cc, src/download_list.cc, src/ui.cc, src/download_list.h, src/download.cc, src/ui.h, src/download_screen.cc:

	  Correct all explicit uses of Slot*Arg* to the new API.

	* src/vscreen/slotarg.h, src/vscreen/vs_util.h, src/vscreen/vs_menu.h, src/vscreen/testvscreen.cc, src/vscreen/vs_util.cc:

	  Overhaul the SlotArg system to (a) make the names fit in better
	  (no more StudlyCaps), and (b) make it easier to explicitly
	  create a slotarg (a simple overloaded "arg" routine does it)

	* src/download_list.cc, src/download_screen.cc:

	  More of the same.

	* src/download.cc, src/download_bar.cc:

	  Make some SlotArg instantiations explicit; fix a #include
	  directive for ptr_fun.

	* src/mine/cmine.cc:

	  Make two SlotArg instantiations explicit; fix an incorrect
	  argument order bug in a bind invocation.

	* src/apt_options.cc, src/cmdline/cmdline_progress.cc, src/pkg_view.cc, src/ui.cc:

	  Stop using sigc::ref here too.  Apparently it works on
	  references, not pointers, and changing the whole program to
	  references would be ridiculous.  When this causes a problem,
	  I'll worry about it.

	* src/vscreen/testvscreen.cc, src/vscreen/vs_bin.cc, src/vscreen/vs_menubar.cc, src/vscreen/vs_multiplex.cc, src/vscreen/vs_radiogroup.cc, src/vscreen/vs_stacked.cc, src/vscreen/vs_table.cc, src/vscreen/vs_util.cc:

	  Stop using sigc::ref, it causes weird problems that I don't
	  understand.  testvscreen compiles and starts now! (haven't
	  fully checked it out yet)

	* src/vscreen/testvscreen.cc:

	  Apparently Slot0Args have to be explicitly instantiated now :(.

	* src/vscreen/vs_tree.cc:

	  Correct a #include of ptr_fun.h.

	* src/vscreen/vs_util.cc:

	  Update to the explicit-dereference slotarg API.

	* src/vscreen/vs_size_box.cc:

	  Correct a #include of mem_fun.h.

	* src/vscreen/vs_radiogroup.h:

	  Add a missing #include of sigc++/connection.h.

	* src/vscreen/slotarg, src/vscreen/vs_menu.cc:

	  Require explicit dereferencing of slot-arguments, and convert
	  vs_menuto use it.

	* src/vscreen/vs_size_box.cc:

	  Correct the include of mem_fun.h

	* src/vscreen/vs_menu.cc:

	  #include retype_return.h, not hide.h, for the hide_return
	  adaptor.

	* aptcache.cc:

	  Explicitly type NULLs that are being bound so that the bind
	  adaptors is instantiated with the correct types.	  

	* src/generic/aptcache.cc, src/vscreen/vs_bin.h, src/vscreen/vs_minibuf_win.h, src/vscreen/vs_stacked.h, src/vscreen/vs_table.h:

	  #include sigc++/connection.h to use sigc::connection.

	* src/vscren/bool_accumulate.h:

	  Use structs, not classes.

	* src/ui.cc, src/ui.h, src/vscreen/bool_marshal.h, src/vscreen/bool_accumulate.h, src/vscreen/vs_menu.h, src/vscreen/Makefile.am:

	  Move from the old Marshal API to the new accumulator API.

	* src/generic/config_signal.cc:

	  Correct #include of <sigc++/functors/mem_fun.h>

	* src/generic/aptcache.cc:

	  Add missing #include <sigc++/adaptors/bind.h>

	* src/generic/acqprogress.cc, src/generic/acqprogress.h:

	  Give acqtextstatus an explicit virtual destructor.

	* src/menu_redirect.h, src/generic/aptcache.cc, src/edit_pkg_hier.h, src/download_screen.cc, src/vscreen/vs_bin.h, src/vscreen/vs_minibuf_win.h, src/vscreen/vs_radiogroup.h, src/vscreen/vs_stacked.cc, src/vscreen/vs_stacked.h, src/vscreen/vs_table.cc, src/vscreen/vs_table.h, src/vscreen/vs_menu.cc:

	  Remove various references to namespace SigC.

	* src/pkg_tree.cc:

	  Remove an unnecessary #include.

	* src/download_bar.cc, src/apt_options.cc, src/download_list.cc, src/mine/cmine.cc, src/ui.cc, src/main.cc, src/edit_pkg_hier.cc, src/download.cc, src/cmdline/cmdline_util.cc, src/cmdline/cmdline_progress.cc, src/generic/config_signal.h, src/generic/config_signal.cc, src/generic/aptcache.cc, src/pkg_tree.cc, src/view_changelog.cc, src/pkg_view.cc, src/pkg_grouppolicy.cc, src/apt_info_tree.cc, src/vscreen/vs_menubar.cc, src/vscreen/vs_editline.cc, src/vscreen/vs_minibuf_win.cc, src/vscreen/vs_togglebutton.h, src/vscreen/vs_center.cc, src/vscreen/vs_text_layout.cc, src/vscreen/vs_size_box.cc, src/vscreen/vs_passthrough.cc, src/vscreen/vs_button.cc, src/vscreen/vs_stacked.cc, src/vscreen/vs_frame.cc, src/vscreen/vs_tree.cc, src/vscreen/vs_multiplex.cc, src/vscreen/vs_table.cc, src/vscreen/testvscreen.cc, src/vscreen/vs_pager.cc, src/vscreen/vs_menu.cc, src/vscreen/vs_transient.cc, src/vscreen/vs_util.cc:

	  Replace calls to SigC::slot with calls to sigc::ptr_fun and
	  calls to sigc::mem_fun, as appropriate.

	* src/apt_options.cc, src/download_list.cc, src/mine/cmine.cc, src/ui.cc, src/edit_pkg_hier.cc, src/cmdline/cmdline_progress.cc, src/generic/config_signal.cc, src/generic/aptcache.cc, src/pkg_item.cc, src/pkg_tree.cc, src/pkg_view.cc, src/apt_info_tree.cc, src/vscreen/vs_menubar.cc, src/vscreen/vs_minibuf_win.cc, src/vscreen/vs_bin.cc, src/vscreen/vs_radiogroup.cc, src/vscreen/vs_stacked.cc, src/vscreen/vscreen_widget.cc, src/vscreen/vs_multiplex.cc, src/vscreen/vs_table.cc, src/vscreen/testvscreen.cc, src/vscreen/vs_menu.cc, src/vscreen/vs_util.cc

	  Replace uses of SigC::bind with sigc::bind, and start
	  converting slot creation.

2005-01-08  Daniel Burrows  <dburrows@debian.org>

	* src/download_list.cc, src/ui.cc, src/apt_info_tree.h, src/pkg_tree.h, src/download_manager.h, src/cmdline_parse.h, src/pkg_subtree.h, src/pkg_grouppolicy.h, src/pkg_item_with_subtree.h, src/generic/config_signal.h, src/generic/aptcache.h, src/generic/apt.h, src/generic/config_signal.cc, src/generic/aptcache.cc, src/generic/apt.cc, src/pkg_item.cc, src/pkg_item.h, src/ui.h, src/edit_pkg_hier.h, src/cmdline_parse.cc, src/pkg_grouppolicy.cc, src/vscreen/vscreen.cc, src/vscreen/vs_pager.h, src/vscreen/slotarg.h, src/vscreen/vs_togglebutton.h, src/vscreen/vscreen_widget.h, src/vscreen/vs_button.h, src/vscreen/vs_radiogroup.h, src/vscreen/vs_util.h, src/vscreen/vs_editline.h, src/vscreen/vscreen.h, src/vscreen/vscreen_widget.cc, src/vscreen/vs_statuschoice.h, src/vscreen/vs_menu.h, src/vscreen/vs_text_layout.h, src/vscreen/vs_scrollbar.h, src/vscreen/vs_menu.cc, src/vscreen/vs_util.cc:

	  Use sigc::signal* and sigc::slot* instead of SigC::Signal* and
	  SigC::Slot*.

	* src/apt_options.cc, src/cmdline_parse.h, src/edit_pkg_hier.cc, src/generic/acqprogress.h, src/generic/aptcache.h, src/generic/config_signal.h, src/menu_redirect.h, src/pkg_grouppolicy.cc, src/vscreen/vscreen_widget.h, src/vscreen/vs_radiogroup.h:

	  Use sigc::trackable instead of SigC::Object.

	* configure.ac:

	  Use sigc++-2.0, not sigc++-1.2.  This breaks EVERYTHING.

	* src/ui.cc:

	  Since fragments are now used to render messages, remove the
	  newlines.

	* src/ui.cc:

	  Work around what appears to be a compiler bug: if
	  my_cleaner::my_cleaner is implemented inline, it never gets
	  executed, but if I implement it outside the class definition, it
	  works fine.  (this makes the count of how much stuff was
	  autocleaned reliable again, hopefully)

	* src/ui.cc, src/ui.h:

	  Make show_message deal in fragments.

	* src/vscreen/vs_transient.cc:

	  Implement the vs_transient constructor.

	* src/vscreen/Makefile.am, src/vscreen/vs_transient.cc, src/vscreen/vs_transient.h:

	  Add a "transient" widget that wraps a real widget but disappears
	  at the press of a button.  This generalizes and obsoletes
	  vs_transientlabel.

	* src/cmdline/cmdline_clean.cc, src/ui.cc:

	  After cleaning obsolete files, display (approximately) how much
	  disk space was freed.

	* doc/en/manpage.xml:

	  Display segmented lists more clearly, clarify a few points in
	  the manpage, and remove a gripe that may be obsolete (not sure).

2004-12-22  Daniel Burrows  <dburrows@debian.org>

	* src/download_list.cc:

	  Fix some silly typos in the code that decides whether to show a
	  summary, so that it works as advertised.

	  When constructing the summary message, newlines go at the front
	  of the second chunk of text, not at the end of the first (avoids
	  unnecessary dialog expansion).

	  Mark the download as "failed" only when an error message would
	  be shown.

	* src/apt_config_widgets.cc, src/apt_config_widgets.h, src/apt_options.cc:

	  Add support for multiple-choice options (using radio buttons),
	  and use this support to fix the display of the "pause after
	  download" option.

	* src/vscreen/vs_radiogroup.cc, src/vscreen/vs_radiogroup.h:

	  Enhance the vs_radiogroup API so that I can use it in the main
	  program.

	* src/download_list.cc:

	  Use a fragment to display the success/failure dialog, and add a
	  comment indicating that some files couldn't be downloaded if an
	  item failed to be downloaded.

	* src/download_list.cc, src/download_list.h:

	  Make the pause-after-download option tristate; by default,
	  aptitude will now pause only if some part of the download
	  failed.

	* NEWS, configure.ac, doc/en/aptitude.xml:

	  Bump version to 0.3.0.  Obsolete documentation has not been
	  bumped, to indicate that it still documents the old version of
	  the program.

	* doc/en/aptitude.xml, doc/en/images/trust-snapshot.png:

	  Proofread, complete the security section.

2004-12-21  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/vs_util.cc:

	  Destroy widgets before executing the commands in a slot, so they
	  aren't visible if a sub-main-loop is spawned.  (maybe it would
	  be better to just hide them to avoid the possibility of some
	  nasty memory bug?)

	* src/ui.cc:

	  Use more sensible labels for the "really screw your computer?"
	  prompt.

	* src/vscreen/vs_util.cc:

	  Make yes/no buttons X-shrinkable to avoid the table layout bug.

2004-12-06  Daniel Burrows  <dburrows@debian.org>

	* src/ui.cc:

	  Don't install/remove packages until the user answers the
	  "untrusted packages" warning.

	* src/pkg_view.cc:

	  Avoid crashing in pkg_description_widget: apparently ver.end()
	  crashes if pkg.end() is true, so check pkg.end() first.

	* src/vscreen/vs_util.cc:

	  Remove some (theoretically) unnecessary centering widgets.  The
	  correct button now receives focus when the dialog is created.

	* src/ui.cc:

	  Print a nasty warning if trust violations occur.

	* src/vscreen/fragment.cc:

	  Be more specific when generating errors about format codes.

	* src/vscreen/vs_frame.cc:

	  Make sure, when generating a height_request, to give the correct
	  width to the subwidget (subtract the width of our border).

	* src/vscreen/vs_table.cc:

	  Instrument the table code for debugging.

	* src/vscreen/testvscreen.cc, src/vscreen/vs_util.cc, src/vscreen/vs_util.h:

	  Add support for formatting yesno dialog box messages using
	  fragments.

2005-01-05  Christian Perrier <bubulle@debian.org>

	* Corrected Dutch translation. Closes: #288815

2004-12-05  Daniel Burrows  <dburrows@debian.org>

	* configure.ac, doc/fr/Makefile.am:

	  List doc/fr/Makefile and doc/fr/images/Makefile, and fix
	  doc/fr/Makefile.am so that builds no longer fail.

	* src/vscreen/vs_table.h:

	  Make widgets shrinkable by default.

	* src/vscreen/vs_util.cc:

	  Set the background of the layout widget and scrollbar when
	  creating a stock Ok dialog, and make sure that the main widget
	  is shrinkable (so the Ok button doesn't disappear).

	* src/pkg_view.cc:

	  Always ignore the vertical size of every main widget and package
	  description, to get about the same behavior as previous
	  versions.

	* src/vscreen/vs_table.cc, src/vscreen/vs_table.h:

	  Create another table flag that causes the widget's size request
	  to be ignored and (0,0) assumed.  This is useful (really!) to
	  force a widget to only take up as much space as it can be
	  expanded into.  (think about the aptitude main screen, for
	  instance..)

	* src/vscreen/vs_util.cc:

	  Use add_widget_opts to add the "cancel" button.  Using plain
	  add_widget was causing weird problems where Cancel got shoved to
	  the right of the dialog box.  [merge up to r2801]

	* src/vscreen/vs_table.cc:

	  When expanding columns, check for expandability in the X
	  direction, not the Y direction.

	* src/ui.cc:

	  Remove some old cruft.

	* src/pkg_view.cc, src/ui.cc:

	  Make all the widgets in the main view that are expandable also
	  shrinkable (arguably this is a bug in the table layout, but I
	  can work around it like this for now).  Now the scrollbars won't
	  randomly disappear...

	* src/pkg_view.cc:

	  Use more explicit table options for scrollbars.

	* src/vscreen/vs_util.cc:

	  Make sure that scrollbars in stock Ok dialogs expand vertically
	  but not horizontally.

	* src/ui.cc:

	  Use the new fragf to make apt_error_fragment() much more
	  legible.

	* src/vscreen/fragment.cc, src/vscreen/fragment.h, src/vscreen/testvscreen.cc:

	  Add %A and %C escapes to fragf that directly set the attributes
	  of following text.  %A sets the attributes directly using the
	  next argument; %C takes the next argument to be a color name,
	  looks it up, and sets the attributes to the color that it finds.

	* src/ui.cc:

	  Make sure the apt error has the correct color.

	* src/download_list.cc, src/download_list.h:

	  Split download_list::size_request.

	* src/vs_progress.cc, src/vs_progress.h:

	  Split vs_progress::size_request.

	* src/mine/cmine.cc, src/mine/cmine.h:

	  Split cmine::size_request.

	* src/ui.cc:

	  Fix several compile errors.  In particular, use the
	  new vs_dialog_ok instead of apt_error_pager.

	* src/vscreen/vs_util.cc, src/vscreen_vs_util.h:

	  Add a parameter to vs_dialog_ok on fragments that causes a
	  scrollbar to be added.

	* src/vscreen/vs_util.cc, src/vscreen_vs_util.h:

	  Use labels by default to render OK dialog boxes based on text,
	  and add a variant of vs_dialog_ok that lets you pass in the main
	  widget of the dialog box.

	* src/vscreen/vs_table.cc:

	  Fix a stupid thinko that was causing table layout to be
	  seriously screwed up.

	* src/vscreen/vs_util.cc:

	  Word-wrap Ok dialog boxes, and make sure that the correct
	  background attributes are used for the layout widget.

	* src/vscreen/vs_table.cc:
	
	  Initialize num_rows and num_cols to 0 when the table is
	  constructed.

	* src/vscreen/fragment.cc, src/vscreen/vs_center.cc, src/vscreen/vs_label.cc, src/vscreen/vs_menubar.cc, src/vscreen/vs_menubar.h, src/vscreen/vs_minibuf_win.cc, src/vscreen/vs_size_box.cc, src/vscreen/vs_text_layout.cc:

	  Fix various other typos that prevented the vscreen layer from
	  compiling.

	* src/vscreen/vs_table.cc, src/vscreen/vs_table.h:

	  Fix a whole bunch of typos and compile errors.

	* src/vscreen/vs_tree.cc:

	  Split vs_tree::size_request.

	* src/vscreen/vs_table.cc, src/vscreen/vs_table.h:

	  Massively refactor the table layout algorithm.  It's now split
	  into about half a dozen shorter functions that are actually
	  almost readable.  Oh, and it supports two-shot layout.

2004-12-04  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/vs_statuschoice.cc, src/vscreen/vs_statuschoice.h:

	  Convert the statuschoice widget to the new algorithm.

	* src/vscreen/vs_menubar.cc, src/vscreen/vs_minibuf_win.cc, src/vscreen/vs_minibuf_win.h, src/vscreen/vs_pager.cc, src/vscreen/vs_pager.h, src/vscreen/vs_scrollbar.cc, src/vscreen/vs_scrollbar.h, src/vscreen/vs_size_box.cc, src/vscreen/vs_size_box.h, src/vscreen/vs_stacked.cc, src/vscreen/vs_stacked.h:

	  More widgets converted to the two-shot algorithm.


	* src/vscreen/fragment.cc, src/vscreen/fragment.h, src/vscreen/vs_frame.cc, src/vscreen/vs_frame.h, src/vscreen/vs_label.cc, src/vscreen/vs_label.h, src/vscreen/vs_menu.cc, src/vscreen/vs_menu.h, src/vscreen/vs_text_layout.cc, src/vscreen/vs_text_layout.h:

	  More widgets converted to the new layout mechanism.

	* src/vscreen/vscreen_widget.h:

	  Clarify the assumptions that a widget can make about layout.

	* src/vscreen/vs_button.cc, src/vscreen/vs_button.h, src/vscreen/vs_center.cc, src/vscreen/vs_center.h, src/vscreen/vs_editline.h, src/vscreen/vs_editline.cc, src/vscreen/vs_multiplex.cc, src/vscreen/vs_multiplex.h:

	  Rewrite the layout mechanisms for a bunch of widgets to work
	  with the two-shot algorithm.

	* src/vscreen/vscreen_widget.h:

	  Make the changes to vscreen_widget that are necessary to
	  implement two-stage layout.  This breaks everything (fun!).

	* src/vscreen/vs_util.cc, src/vscreen/vs_util.h:

	  Overhaul the ok dialog to use text_layouts.

	* src/ui.cc:

	  Write a routine to check the trust state of packages and warn as
	  appropriate (unfinished).

	* src/generic/apt.cc:

	  It appears that packages with NULL index files are exactly those
	  which are already installed, so they should be trusted.  Now
	  aptitude doesn't mark every package on the system as
	  "untrusted"...

2004-12-03  Daniel Burrows  <dburrows@debian.org>

	* src/Makefile.am, src/desc_parse.cc, src/desc_parse.h, src/pkg_info_screen.cc, src/pkg_view.cc, src/trust.cc, src/trust.h:

	  Display the same big fat warning in the extended description
	  area of untrusted packages.  (yes, aptitude is now officially
	  paranoid)

	* doc/en/aptitude.xml:

	  Document the untrusted flag and write a brief section on apt's
	  trust model (may not quite be accurate; needs to be edited again
	  before release).

	* src/defaults.cc, src/pkg_info_screen.cc:

	  Add a very strongly worded warning message that is included in
	  the information screen for an untrusted package.

	* src/generic/apt.cc, src/pkg_columnizer.cc, src/pkg_columnizer.h, src/pkg_ver_item.cc:

	  Create an extra column, visible by default, that flags untrusted
	  packages.

	* po/pt_BR.po:

	  Automagic changes, don't look at me.

	* src/generic/apt.h, src/generic/matchers.cc, src/generic/tasks.cc, src/pkg_columnizer.cc, src/pkg_info_screen.cc, src/pkg_ver_item.cc, src/pkg_view.cc:
	  Remove some totally unnecessary #includes in apt.h.

	* src/generic/apt.h, src/generic/apt.cc:

	  Add a "package_trusted" function that checks a package version's
	  trust state.  In order to support this non-wastefully, a global
	  source-list variable is now available, updated whenever the
	  package lists are re-read.

	* src/download_item.cc:

	  Port to apt 0.6 by handling AuthError in addition to Error
	  status.

	* configure.ac:

	  Remove "he" from ALL_LINGUAS and add "sk" and "tr" so that
	  configure works again.

2004-12-01  Dennis Stampfer <seppy@debian.org>

	* Corrected German translation de.po. Closes: #283546

2004-11-16  Christian Perrier <bubulle@debian.org>

	* Added Romanian translation. Closes: #281531

2004-11-08  Christian Perrier <bubulle@debian.org>

	* Update Slovak translation. Really Closes: #279559

2004-11-07  Christian Perrier <bubulle@debian.org>

	* Added Turkish translation. Closes: #280009
	* Update Lithuanian translation. Closes: #280049

2004-11-05  Christian Perrier <bubulle@debian.org>

	* Updated Arabic translation from Arabeyes CVS
	* Added Slovak translation. Closes: #279559

2004-10-12  Christian Perrier <bubulle@debian.org>

	* Added french translation of the documentation
	  Sent directly my Olivier Trichet

2004-10-11  Christian Perrier <bubulle@debian.org>

	* Update Simplified Chinese translation
	* Update Finnish translation

2004-10-10  Christian Perrier <bubulle@debian.org>

	* Update Norwegian Bokmal translation.

2004-10-09  Christian Perrier <bubulle@debian.org>

	* Update Polish translation. Closes: #265481
	* Update Spanish translation.
	* Update Basque translation. Closes: #275704

2004-10-07  Christian Perrier <bubulle@debian.org>

	* Added preliminary Arabic translation from Arabeyes
	* Added preliminary Hebrew translation. Closes: #275266

2004-10-06  Dennis Stampfer <seppy@debian.org>

	* Update Brazilian Portuguese translation by Goedson Teixeira Paixao
	  Closes: #275220

2004-10-05  Christian Perrier <bubulle@debian.org>

	* Minor update to French translation (Y/N keys)
	  Closes: #274953

2004-10-03  Christian Perrier <bubulle@debian.org>

	* Update Danish translation

2004-10-02  Christian Perrier <bubulle@debian.org>

	* Update Czech translation and manual

2004-09-29  Christian Perrier <bubulle@debian.org>

	* Update Traditional Chinese translation and help file
	  Closes: #274268

2004-09-28  Daniel Burrows  <dburrows@debian.org>
	* NEWS, configure.ac, doc/cs/aptitude.xml, doc/de/aptitude.xml, doc/en/aptitude.xml, doc/fi/aptitude.xml:
	  Bump version to 0.2.15.8.

	* src/mine/board.cc, src/mine/board.h, src/mine/cmine.cc, src/mine/mine-help.txt:
	  Apply some trivial fixes (avoiding uninitialized values,
	  sanity-checks) to minesweeper.  (Closes: #179533)

2004-09-27  Christian Perrier <bubulle@debian.org>

	* Update Russian translation after IRC talk with Nikolai

2004-09-26  Daniel Burrows  <dburrows@debian.org>

	* src/main.cc:
	  Patch from Konstantinos Margaritis to revert the locale to C
	  if UTF-8 is detected.

2004-09-26  Christian Perrier <bubulle@debian.org>

	* Re-update Japanese translation. Closes: #272454
	* Fixes to French translation. Closes: #272824

2004-09-25  Daniel Burrows  <dburrows@debian.org>

	* src/generic/apt.cc:
	  Only include suggested packages in the "packages suggested by
	  other packages" tree.  (Closes: #270667)

2004-09-20  Christian Perrier <bubulle@debian.org>

	* Update Japanese translation. Closes: #272454

2004-09-18  Christian Perrier <bubulle@debian.org>

	* Update Italian translation. Closes: #265243

2004-09-17  Daniel Burrows  <dburrows@debian.org>

	* doc/fi/Makefile.am:
	  Add fixmans to EXTRA_DIST.

	* NEWS, configure.ac, doc/cs/aptitude.xml, doc/en/aptitude.xml:
	  Bump version to 0.2.15.7.

	* doc/en/aptitude.xml:
	  Add a credit for the Norwegian translation.

	* doc/en/manpage.xml:
	  Be a little clearer about what --visual-preview does.
	  (Closes: #269100)

	* doc/en/aptitude.xml:
	  Add an example to ~A documentation.

	* doc/en/manpage.xml:
	  Eh, mention where the package cache is by default.  (Closes: #269102)

	* NEWS:
	  Write years with 4 digits.

	* Update French manpage.  Closes: #270713.

2004-09-13  Christian Perrier <bubulle@debian.org>

	* Update Brazilian portuguese translation. Closes: #271411

2004-09-11  Christian Perrier <bubulle@debian.org>

	* Update all translations according to latest aptitude.pot
	* (few hours later) Revert aptitude.pot to r2712
	  and update PO files accordingly

2004-09-10  Christian Perrier <bubulle@debian.org>

	* po/fi.po and help-fi.txt updated. Closes: #263313
	* po/ca.po updated. Closes: #270917

2004-09-05  Daniel Burrows  <dburrows@debian.org>

	* src/pkg_columnizer.cc:
	  Fix crash when viewing virtual packages while using the
	  reverse-depends-count. (Closes: #270057)

	* src/vscreen/vs_table.cc:
	  Fix several places where "focus" was dereferenced without
	  checking whether it was valid.

2004-09-04  Christian Perrier <bubulle@debian.org>

	* Finnish updates:
	  - PO files completed
          - build the doc file in XML
	  - Finnish doc files
	  Closes: #263313
	
2004-09-04  Daniel Burrows  <dburrows@debian.org>

	* po/nn.po:
	  Updated Norwegian translation from
	  Hå¶¡rd Korsvoll <korsvoll@skulelinux.no> (Closes: #269976).

2004-08-31  Daniel Burrows  <dburrows@debian.org>

	* po/es.po:
	  Fix Spanish l10n of yes/no shortcuts (Closes: #269311).

2004-08-27  Christian Perrier <bubulle@debian.org>

	* Update all translation according to aptitude.pot
	* Italian translation updated. Closes: #268263

2004-08-17  Christian Perrier <bubulle@debian.org>

	* Update Russian translation. Closes: #266294
	* Update Dutch translation

2004-08-15  Christian Perrier <bubulle@debian.org>

	* Update French translation.
	* Update Czech translation (seems that Dennis commit was wrong)

2004-08-11  Daniel Burrows  <dburrows@debian.org>

	* po/el.po:
	  Update Greek translation (Closes: #265006).

2004-08-10  Daniel Burrows  <dburrows@debian.org>

	* po/ja.po:
	  Update Japanese translation (Closes: #264867).

	* src/generic/matchers.cc, doc/en/aptitude.xml:
	  Do priority matching by priority type (based on the input string)
	  rather than by string.  This will make searches by priority
	  somewhat faster, as well as making them reliable regardless of
	  locale.

2004-08-09  Daniel Burrows  <dburrows@debian.org>

	* src/cmdline/cmdline_action.cc (cmdline_applyaction):
	  Adjust which version is used to check for matches against patterns
	  on the command line: for "install", "hold", and "forbid-version"
	  actions, the candidate version is used; for "remove" and "purge"
	  actions, the current version is used; for other actions, the
	  install version is used.  This fix is needed for debian-boot in
	  sarge.

2004-08-06  Daniel Burrows  <dburrows@debian.org>

	* doc/cs/Makefile.am, doc/de/Makefile.am:
	  Argh, really fix installation of XML manpages.

	* NEWS, configure.ac, doc/cs/aptitude.xml, doc/en/aptitude.xml:
	  Bump version to 0.2.15.6.

	* doc/en/aptitude.xml:
	  Add some more language credits.

	* help-fi.txt, po/fi.po:
	  Update Finnish translation.  (Debian bug #263313)

	* doc/Makefile.am:
	  Alphabetize.

	* doc/cs/Makefile.am, doc/de/Makefile.am:
	  Really fix the installation of manpages (tested this time!).

	* Makefile.am, aptitude.de.8:
	  The German manpage doesn't belong here any more.  Remove it.

	* Makefile.am:
	  Make sure to actually install the non-XMLified manpages.

	* doc/cs/Makefile.am, doc/de/Makefile.am:
	  Adjust how manpages are built and installed: the makefiles for
	  localized manpages are more consistent now and actually install
	  the manpages.

	* configure.ac, doc/Makefile.am, doc/de/Makefile.am, doc/de/aptitude.xml, doc/de/manpage.xml, doc/de/fixquote, help-de.txt:
	  Apply the rest of the German translation from #262534.

2004-08-05  Daniel Burrows  <dburrows@debian.org>

	* src/pkg_ver_item.cc:
	  Unreverse the logic for displaying the size change due to a
	  particular version.

2004-08-01  Dennis Stampfer <seppy@debian.org>

	* Update German translation from Debian-Bug #262534
	  (This does *not* close #262534)
	* Update Czech translation by Miroslav Kure.
	  Closes Debian-Bug #262524
	* Update Danish translation by Morten Bo Johansen
	  Closes Debian-Bug #262129

2004-07-29  Dennis Stampfer <seppy@debian.org>

	* Update Dutch translation by Luk Claes
	  (Closes Debian Bug #262000)

2004-07-28  Dennis Stampfer <seppy@debian.org>

	* Update Italian program translation by Danilo Piazzalunga
	  (Closes Debian Bug #261819)

2004-07-24  Christian Perrier <bubulle@debian.org>

	* Update Portuguese translation.
	  (Closes Debian Bug #261502)

2004-07-25  Daniel Burrows  <dburrows@debian.org>

	* doc/en/aptitude.xml, src/ui.cc:
	  Added an option to disable the "nothing to be done" warning
	  when there are upgradable packages. (Debian bug #260590)

	* do/aptitude.xml, po/pt.po:
	  Updated Porugtuese translation. (Debian bug #261425)

	* doc/en/aptitude.xml, src/pkg_columnizer.cc, src/pkg_columnizer.h, src/pkg_ver_item.cc, src/vscreen/vscreen.cc:
	  Add a format code for policy information (Debian bug #240423).

2004-07-24  Dennis Stampfer <seppy@debian.org>

	* Update Brazilian translation.
	  (Closes Debian Bug #260953)

2004-07-24  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/vscreen.cc:
	  Use portable pthreads code. (Debian bug #260259)

	* src/generic/apt.cc:
	  Check the whole surrounding dependency when looking at recommends
	  and suggests.

2004-07-21  Christian Perrier <bubulle@debian.org>

	* Update Dutch translation. Antwerp dialect joke removed
	  (Debian bug #260632)
	* Update Brazilian translation. 
	  (Debian bug #260953)
	* Update Italian translation. 
	  (Debian bug #261017)
	* Update Greek translation. 
	  (Debian bug #261029)
	* Update Catalan translation. 
	  (Debian bug #261095)
	* Update German translation. 

2004-07-21  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/vs_pager.cc:
	  Scroll by the screen height, not the screen width.  Thanks to
	  Neil Moore.  (Debian bug #260713)

2004-07-21  Christian Perrier <bubulle@debian.org>

	* Rebuild aptitude.pot      yet another time
	* Update French translation  "     "      "
	* Update Spanish translation  "     "      "

2004-07-20  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptcache.cc:
	  Make it possible to undo a "forget new" command again.

	* src/cmdline/cmdline_changelog.cc, src/view_changelog.cc, po/:
	  Detect attempts at viewing changelogs for packages that trivially
	  have no changelogs available, and warn the user instead of blindly
	  trying to fetch the changelog.  (Debian bug #260477)

	* src/download.cc, doc/en/aptitude.xml: 
	  Support multiple log destinations. (Debian bug #259714)

2004-07-20  Christian Perrier <bubulle@debian.org>

	* Updated German translation

2004-07-19  Daniel Burrows  <dburrows@debian.org>

	* src/pkg_tree.cc:
	  Treat an empty limit string as "no limit". (Debian bug #260244)

2004-07-19  Christian Perrier <bubulle@debian.org>

	* Updated French translation
	* Updated Spanish translation

2004-07-18  Daniel Burrows  <dburrows@debian.org>

	* src/cmdline/cmdline_moo.cc:
	  Don't insult the user.

2004-07-17  Daniel Burrows  <dburrows@debian.org>

	* doc/cs/aptitude.xml, doc/cs/images/*, help-cs.txt, po/cs.po:
	  Updated Czech translation from Miroslav Kure. (Debian bug #259966)

2004-07-15  Daniel Burrows  <dburrows@debian.org>

	* src/cmdline/cmdline_download.cc:
	  Make the error message when a package is not downloadable a little
	  clearer.

	* src/cmdline/cmdline_changelog.cc, src/cmdline/cmdline_changelog.h, src/cmdline/cmdline_prompt.cc:
	  Support viewing changelogs from the command-line prompt.

	* src/generic/matches.cc, doc/en/aptitude.xml:
	  Enhance the "provides" matcher to support full subterms;
	  extend ~D to support any dependency class; change ~R to
	  implicitly check predepends with depends; close some memory
	  leaks; document the user-visible changes.

	* help.txt, src/defaults.cc, src/pkg_tree.cc, src/ui.cc, doc/en/aptitude.xml:
	  Bind the new command to 'b', document it, and fix some incorrect
	  entity references in the documentation.

	* src/menu_redirect.h, src/pkg_tree.cc, src/pkg_tree.h, src/pkg_view.cc, src/ui.cc, src/ui.h:
	  Add a very visible command to search for '~b' (the next broken
	  package).  (Debian bug #162474)

	* src/cmdline.cc:
	  Mention that a package is 'new' in "aptitude show"; don't show
	  information about whether it is automatically installed unless
	  it's installed.

	* doc/en/aptitude.xml:
	  Document the new menu commands.

	* src/vscreen/vs_menu.cc:
	  Don't disable bold after printing an explicitly bold character in
	  a menu label, in case the underlying color is also bolded.

	* src/menu_redirect.h, src/pkg_tree.cc, src/pkg_tree.h, src/pkg_view.cc, src/ui.cc, src/ui.h, src/vscreen/vs_menu.cc, src/vscreen/vs_menu.h:
	  Use bool as the return value for menu item signals, and use
	  OrMarshal to marshal them.  This means that a menu item's
	  emission will, presuming all goes well, stop as soon as
	  something handles it.  This avoids the infinite recursive
	  add_main_widget death that was occuring after the last commit.

2004-07-14  Daniel Burrows  <dburrows@debian.org>

	* src/menu_redirect.h, src/pkg_item.cc, src/pkg_item.h, src/pkg_tree.cc, src/pkg_tree.h, src/pkg_ver_item.cc, src/pkg_ver_item.h, src/pkg_view.cc, src/ui.cc, src/ui.h:
	  Add items to the package menu to examine some package information.
	  Currently buggy, will be fixed.


	* src/menu_redirect.h, src/pkg_node.h, src/pkg_tree.cc, src/pkg_view.cc, src/ui.cc, src/ui.h:
	  Add items to the package menu to adjust a package's state.

	* src/cmdline/cmdline_show.cc:
	  Fix upgrade/downgrade confusion.

	* src/main.cc:
	  Add a 'usage' string for -o.

	* doc/en/manpage.xml, src/cmdline/cmdline_download.cc:
	  Allow the user to select which version of a package should be
	  downloaded; print an error message if the package can't be
	  downloaded.

	  (Debian bug #160145)

	* doc/en/manpage.xml, src/main.cc, src/cmdline/Makefile.am, src/cmdline/cmdline_changelog.cc, src/cmdline/cmdline_changelog.h:
	  Add support for downloading changelogs from the command-line.

	* src/cmdline/cmdline_util.cc:
	  Fix the common function to initialize all its out parameters and
	  to not fall off the end of the function.

	* src/cmdline/cmdline_util.cc:
	  Complain loudly in cmdline_find_ver if there's no candidate
	  version available.  (Closes: #213106)

	* src/cmdline/cmdline_progress.cc:
	  Delete the progress bar when we're done with it.

	* src/cmdline/cmdline_action.cc, src/cmdline/cmdline_action.h, src/cmdline/cmdline_util.cc, src/cmdline/cmdline_util.h:
	  Split the source/archive parsing code into a small common function;
	  modified applyaction and find_ver to adjust for the new interface.

	* po/POTFILES.in:
	  Update POTFILES.in.

	* src/cmdline/cmdline_show.cc:
	  Display information about the package's aptitude state.

	* src/generic/apt.cc:
	  When testing if a package is suggested/recommeded, only
	  return true if the suggestion/recommendation is unfulfilled.

	* src/generic/aptcache.cc, doc/en/aptitude.xml:
	  Reinstate Suggests-Important for the purpose of finding unused
	  packages, so people don't get rudely surprised by the new behavior.
	  (Debian bug #259387)

2004-07-13  Daniel Burrows  <dburrows@debian.org>

	* configure.ac, src/Makefile.am, src/cmdline.h, src/cmdline.cc, src/download.cc, src/main.cc, src/cmdline/*:
	  Finally bite the bullet and split cmdline.cc into a gajillion
	  tractably-sized modules.

	* src/generic/infer_reason.cc:
	  Filter out all Conflicts in which the only *to-be-installed*
	  package providing the Conflicted name is the package containing
	  the Conflict.

	* src/reason_fragment.cc:
	  Remove the no-longer-necessary display of the size change
	  due to a package.

	* src/cmdline.cc, src/pkg_grouppolicy.cc:
	  Display recommended packages in both the command-line preview
	  and the visual preview.

	* src/generic/apt.cc, src/generic/apt.h:
	  Add a "pkg_recommended" function -- similar to "pkg_suggested",
	  but triggers if the suggester is going to be installed OR upgraded.

	* src/generic/rev_dep_iterator.h:
	  Make it compile *oops*.

	* src/generic/rev_dep_iterator.h:
	  When iterating a package's reverse dependencies, include
	  dependencies through a virtual package.

	* Makefile.am:
	  Add basic support for disabling compilation and/or documentation.

	* src/ui.cc:
	  Fix stupid thinko when handling fallback for translated docs.

	* doc/cs/Makefile.am:
	  Don't build the text version of the Czech manual, as it's
	  currently useless.

	* doc/en/Makefile.am:
	  Force automake, kicking and screaming, to not dump the generated
	  README in the distributed tarball.

	* src/cmdline.cc:
	  Doh, actually make sure it compiles.

	* src/cmdline.cc:
	  Only display annoying "not doing anything because it was already
	  done" messages if verbose>0. (Debian bug #258913)

	* README:
	  automake wants a README; add one that explains how to generate
	  the real README.

	* Makefile.am, README, aptitude.8, aptitude.cs.8:
	  Purge autogenerated files.

	* doc/Makefile.am, doc/cs/Makefile.am, doc/en/Makefile.am:
	  Move the distribution command for the stylesheets to doc/ from
	  doc/{en,cs}.

	* doc/cs/Makefile.am:
	  Build the Czech manual page under the right name (aptitude.cs.8)
	  but don't install it automatically, since automake does the
	  Wrong Thing here.

	* configure.ac, doc/en/aptitude.xml, doc/cs/aptitude.xml, NEWS:
	  Bump version to 0.2.15.3.

	* doc/en/Makefile.am, doc/en/manpage.xml:
	  Fix some formatting issues, fix the dependencies for generating
	  the documentation (all forms should depend on manpage.xml).

	* doc/en/Makefile.am, doc/en/aptitude.xml, doc/en/manpage.xml:
	  Split the English manpage into a separate XML file.
	  (Debian bug #259089)

	* po/fr.po:
	  Correct what I believe is an accidental error in the French
	  translation: "yes" and "no" were being bound to upper-case
	  keys by default.

	* po/cs.po:
	  Localize README in the Czech variant.

	* src/ui.cc:
	  When documentation is translated, fall back to the
	  English-language version if the translated docs are missing.

	* doc/en/Makefile.am, doc/cs/Makefile.am:
	  Install the HTML documentation in localized directories.
	  Install the resulting READMEs under README and README.cs.

	* doc/Makefile.am:
	  Still build the en documentation (it was carelessly removed).

	* configure.ac, doc/Makefile.am, doc/cs/Makefile.am, doc/cs/aptitude.xml, doc/cs/images:
	  Add Miroslav's Czech translation to the source tree.

	* doc/aptitude-txt.style, doc/en/Makefile.am, doc/en/aptitude-txt.style:
	  Move the text stylesheet to the common directory.

	* doc/en/Makefile.am:
	  Fix the "clean" rule.

	* doc/en/Makefile.am, doc/en/, doc/:
	  Move the XSL and CSS stylesheets from doc/en/ to doc/.

	* doc/en/*, doc/*, configure.ac:
	  Add the beginnings of support for localization of the full
	  manual.

	* po/cs.po:
	  Translation updates from Miroslav Kure.

	* doc/aptitude.xml:
	  Fixes from Miroslav Kure.

	* README.i18n:
	  Describe how key translations work.

2004-07-12  Daniel Burrows  <dburrows@debian.org>

	* src/reason_fragment.cc:
	  Further adjust the display of brokenness reasons for
	  self-conflicts: only really pointless self-conflicts (where
	  the only thing providing the conflicted name is the package
	  itself) are dropped; when displaying provided packages,
	  the package which is the source of the dependency is excluded
	  from the list of packages providing the target.

	* src/ui.cc:
	  Really make the menubar properly hide on startup.

	* src/generic/aptcache.cc:

	  Make the automatic package tracking smarter about versions: if
	  upgrading a package causes it to become unused, it will be held
	  (eg, upgrading foo-data without foo); if a package will be
	  removed because it is unused, it will be restored to the
	  candidate version or the current version (whichever satisfies
	  the dep).

	* src/generic/apt_undo_group.cc, src/generic/apt_undo_group.h, src/generic/aptcache.cc, src/generic/Makefile.am, src/pkg_item.cc, src/pkg_node.cc, src/pkg_node.h, src/pkg_tree.cc, src/pkg_ver_item.cc, src/ui.cc:
	  Overhaul how upgrades, garbage collection, and undos are handled.
	  This fixes the problems with undoing an "upgrade" command, and
	  probably several other unreported but obnoxious bugs.

	  The major change is that upgrades are handled as an action group
	  and that mark_and_sweep uses an internal action group (to avoid
	  calling cleanup_after_change too many times).

2004-07-12  Christian Perrier <bubulle@debian.org>

	* Regenerate aptitude.pot and update po files
	* Updated French and Brazilian translations
	* Updated Greek translation. #258805

2004-07-11  Daniel Burrows  <dburrows@debian.org>

	* src/generic/infer_reason.cc:
	  Filter self-conflicts when walking in the forward direction
	  as well.  (Debian bug #258533)

	* src/ui.cc, src/vscreen/vscreen.cc:
	  Make the default for the Yes and No keys the first character
	  of the translation of "yes_key" and "no_key".  This will give
	  more flexibility to translators (the first characters of Yes
	  and No are not always appropriate..)

	* src/ui.cc:
	  Er, make it compile again by fixing the translation tweak (oops).

	* src/tasks.cc:
	  Change the handling of keys so that tasks without keys
	  won't be hidden.

	* src/ui.cc:
	  Make sure that the menu bar is properly hidden on startup if the
	  user requested it (Debian bug #258688).

2004-07-11  Christian Perrier <bubulle@debian.org>

	* Updated Brazilian translation. #258667
	* Updated Greek translation. #258805

2004-07-09  Daniel Burrows  <dburrows@debian.org>

	* src/ui.cc: 
	  Make another yes/no prompt (when minibuf prompting is on)
	  translated.

	* src/vscreen/vscreen.cc, doc/aptitude.xml:
	  Make the Yes and No keybindings translatable, and document their
	  existence.  (Debian bug #258409)

	* src/pkg_item.cc:
	  Make the visible version more stable and useful (now that
	  packages are often not upgraded): return the candidate
	  version if there is one; return the current version if
	  possible; otherwise return the to-be-installed version.

2004-07-07  Christian Perrier <bubulle@debian.org>

	* Regenerate aptitude.pot and update po files
	* Updated French translation

2004-07-08  Daniel Burrows  <dburrows@debian.org>

	* src/dep_item.cc, src/reason_fragment.cc:
	  When displaying reasons, flag unavailable packages.

	* po/es.po:
	  Spanish translation update from Ruben Porras.
	  (Debian bug #258243)

2004-07-07  Daniel Burrows  <dburrows@debian.org>

	* NEWS, configure.ac, doc/aptitude.xml:
	  Bump version to 0.2.15.2.

2004-07-07  Christian Perrier <bubulle@debian.org>

	* Regenerate aptitude.pot and update po files
	* Updated French translation

2004-07-07  Daniel Burrows  <dburrows@debian.org>

	* aptitude-defaults:
	  Hide version numbers in the Vertical-Split theme.

2004-07-06  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptcache.cc, src/generic/config_signal.cc, src/generic/config_signal.h, src/load_pkgview.cc, src/pkg_tree.cc, src/pkg_tree.h, src/pkg_view.cc, src/pkg_view.h, src/ui.cc:
	  Don't pass the "current value" into configuration signals.  This
	  is somewhat less convenient...but doesn't present false information
	  when a value is unset (ie, it forces the user to supply a correct
	  default value :-/ ).  Actually, more bindings were discarding
	  the current value than using it, so this is only a minor problem.

	  Among other things, this manages to fix reverting some settings,
	  such as menubar-autohide.

	* src/generic/apt.cc, src/generic/config_signal.cc, src/generic/config_signal.h:
	  Make sure that reverting the options returns to the initial
	  options.  Signal emission is still messed up.

	* src/apt_config_widgets.cc, src/apt_config_widgets.h, src/cmdline.cc, src/generic/apt.cc, src/generic/config_signal.cc, src/generic/config_signal.h, src/main.cc:
	  First steps towards a (slightly hacky) separation between user and

	  system configuration.  In an apparently working system, the
	  user's configuration is only saved to ~/.aptitude/config if
	  it was changed at some point from the system default.  Reversion
	  is not handled quite right, but apparently it wasn't handled quite
	  right anyway.  (Debian bug #175409)

	* src/generic/aptcache.cc, src/generic/aptcache.h, doc/aptitude.xml:
	  Apparently some people were using Suggests-Important for its
	  side-effect of keeping automatically installed packages on the
	  system as long as something Suggested them.  The new
	  configuration option Keep-Suggests does just that, without
	  causing Suggested packages to be installed.  Also, the gc
	  code has been slightly optimized by lifting configuration Find
	  commands out of loops.

	* doc/aptitude.xml:
	  Fix the synopsis of forbid-version (it was forbid-upgrade).
	  (Debian bug #257901)

2004-07-04  Christian Perrier  <bubulle@debian.org>

	* Updated Finnish translations. Closes: #257902
	* Updated Italian translations. Closes: #257710

2004-07-04  Daniel Burrows  <dburrows@debian.org>

	* doc/aptitude.xml:
	  Remove an accidental accent from mine-snapshot5.png.

	* doc/images/Makefile.am:
	  Fix the list of stuff to distribute.

	* NEWS, configure.ac, doc/aptitude.xml:
	  Bump version to 0.2.15.1.

	* doc/images/Makefile.am:
	  Doh, actually distribute the screenshot images!

2004-07-03  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptcache.cc:
	  Systematically use *this to access *this, not *apt_cache_file.
	One stray case of the latter was left, and that code path seems
	to trigger in unknown circumstances when *apt_cache_file is
	invalid. (Debian bug #257420)

2004-07-01  Daniel Burrows  <dburrows@debian.org>

	* NEWS:
	  More missing Debian bugs.

	* src/main.cc, NEWS:
	  Make -r and -R work.  (Debian bug #243289)

	* NEWS:
	  Add missing notes about Debian bugs. (oops)

	* doc/Makefile.am:
	  Add the documentation to EXTRA_DIST so it gets distributed too
	  (double oops).

	* src/vscreen/Makefile.am:
	  Add bool_marshal.h to SOURCES so it gets distributed (oops).

	* configure.ac:
	  Bumped the version to 0.2.15.

	* doc/aptitude.xml:
	  Add a "see also" section.

	* doc/Makefile.am:
	  Really install the manual page.

	* Makefile.am, aptitude.1, aptitude.cs.1, aptitude.de.1, aptitude.fi.1, aptitude.fr.1, aptitude.gl.1, aptitude.it.1, aptitude.pl.1, aptitude.8, aptitude.cs.8, aptitude.de.8, aptitude.fi.8, aptitude.fr.8, aptitude.gl.8, aptitude.it.8, aptitude.pl.8:
	  Move the manual pages to section 8.

	* src/view_changelog.cc, src/vscreen/testvscreen.cc, src/vscreen/vs_pager.cc, src/vscreen/vs_pager.h, src/vscreen/vs_util.cc:
	  Fix a bug in the pager by completely rewriting it; it no longer
	  tries to be ridiculously efficient, which means the code is
	  much cleaner and less buggy.  (for instance, the mmap is only
	  used when reading a file off the disk; once it's in memory it's
	  stored as a vector of strings)

	* doc/aptitude.xml:
	  Add a missing question to the FAQ.

	* Makefile.am, doc/Makefile.am:
	  Don't install the old README; install the new README and manpage.

	* doc/aptitude.xml:
	  Rip an overused platitude to head up the tutorial.

	* src/generic/matchers.cc:
	  Fix the virtual matcher: previously it matched anything that
	  happened to pass in an "end" version; now it matches only true
	  pure virtual packages.

	* doc/Makefile.am, doc/aptitude-txt.xsl:
	  Use both hooks and crooks to eliminate entities from the
	  generated README.

	* Makefile.am, doc/Makefile.am:
	  Install the README, and make sure installation succeeds even if
	  /var/lib doesn't exist.

	* NEWS:
	  Update for 0.2.15.

	* doc/aptitude.xml:
	  Document --visual-preview.

	* doc/aptitude.xml:
	  Write the beginnings of a Credits chapter -- maybe enough for
	  the time being?

	* doc/aptitude.xml:
	  Correct the documentation of #.

2004-06-30  Daniel Burrows  <dburrows@debian.org>

	* doc/Makefile.am, doc/aptitude.xml, doc/aptitude-man.xsl:
	  Finish up the reference section of the documentation, and
	  generate a manpage from it.

	* src/cmdline.cc:
	  Fix the "show" command.

	* src/pkg_columnizer.cc, src/pkg_columnizer.h, src/pkg_ver_item.cc, doc/aptitude.xml, doc/images/install-snapshot.png, doc/broken-snapshot.png, doc/preview-snapshot.png:
	  Add support for a %Z escape that shows the size change between
	  versions, make it part of the default theme, and update the
	  documentation accordingly.

	* doc/aptitude.xml:
	  Fix the name of a Minesweeper screenshot: s/shapshot/snapshot/.

	* doc/aptitude.xml:
	  Add a quotation for the FAQ.

	* doc/aptitude.xml:
	  Document how to play Minesweeper.

	* doc/Makefile.am:
	  Copy, don't link, the CSS file into place (avoids problems
	  caused by accidentally cloning the link).

	* doc/aptitude.xml:
	  Eliminate dangling references and other errors by fixing element
	  ids, removing references to sections that won't be written before
	  the next release, and changing xrefs to links where appropriate.

	* doc/aptitude.xml:
	  Document the configuration file.

	* src/ui.cc:
	  When the user reverts their options to the defaults, save
	  immediately (so the reversion takes effect next time they
	  run aptitude).

	* src/generic/aptcache.cc:
	  Correct a place where the value of Auto-Install was read instead
	  of the value of Aptitude::Auto-Install.

2004-06-29  Daniel Burrows  <dburrows@debian.org>

	* doc/aptitude.xml, doc/images/colors-snapshot.png:
	  Add a slightly eye-watering display of how you can customize
	  aptitude's colors.

	* doc/Makefile.am, doc/aptitude-txt.style, doc/aptitude-txt.xsl, doc/aptitude.xml:
	  Use textobjects as the primary content of screenshots when generating
	  text output, don't indent <PRE> tags in the text output, and
	  wrap at 80 columns in the text output.

	* doc/aptitude.xml:
	  Fix a number of dangling cross-references; s/"/'/g.

	* doc/aptitude.xml, doc/images/dselect-theme.png, doc/images/vertical-split-theme.png:
	  Document how themes work.

	* doc/aptitude.xml:
	  Document how to customize the display layout.

2004-06-29  Christian Perrier <bubulle@debian.org>

	* Updated Japanese translation
	* Update Japanese help file

2004-06-29  Daniel Burrows  <dburrows@debian.org>

	* src/load_pkgview.cc:
	  Use "top" and "bottom" for vertical alignment, not "left"
	  and "right".

	* doc/aptitude.xml, doc/images/become-root-snapshot.png, doc/images/broken-snapshot.png, doc/images/expand-once-snapshot.png, doc/images/expand-thrice-snapshot.png, doc/images/expand-twice-snapshot.png, doc/images/info-snapshot.png, doc/images/install-snapshot.png, doc/images/limit-result-snapshot.png, doc/images/limit-snapshot.png, doc/images/menu-snapshot.png, doc/images/preview-snapshot.png, doc/images/search-snapshot.png, doc/images/start-snapshot.png, doc/images/update-snapshot.png:
	  Update the screenshots to reflect the new appearance of aptitude;
	  made some minor editorial changes at the same time.

	* src/pkg_columnizer.cc:
	  Add a space between the two versions in the package display
	  format.

	* doc/aptitude.xml:
	  Quote rationalization: changed all double-quotes in the text
	  to <quote>...</quote>, and changed all double-quotes in tags
	  to single-quotes (except where doing so was impossible).

2004-06-25  Christian Perrier <bubulle@debian.org>

	* Regenerate aptitude.pot and update po files
	* Updated French translation
	* Updated Dutch translation
	* Updated Czech translation. Closes: #256326

2004-06-24  Daniel Burrows  <dburrows@debian.org>

	* doc/aptitude.css:
	  Shade <cmdsynopsis> elements.

	* doc/aptitude.xml:
	  Document how to customize the program's colors.

	* src/mine/cmine.cc, src/vscreen/vscreen.cc, src/vscreen/vs_minibuf_win.h:
	  Expunge remaining references to ScreenBackgroundColor.

	* doc/aptitude.xml:
	  Document a few more useful command-line actions in the tutorial
	  section.

	* doc/aptitude.xml:
	  Make sure that all sections and chapters (that are written) have
	  introductory text, so we don't have bare tables of contents sitting
	  around.  Changed the enumeration of basic aptitude command-line
	  actions from an ordered list to a variable list.

	* doc/aptitude-html.xsl:
	  Chunk even more aggressively, and generate more local
	  tables of contents.

	* doc/aptitude-common.xsl, doc/aptitude-html.xsl:
	  Chunk the documentation more aggressively, so the individual
	  pages don't get so huge.

	* doc/aptitude.xml:
	  Add entries for a number of missing keys; editorially change
	  a preposition in the description of grouping policies; move
	  the Minesweeper seection to the toplevel and give it an ID;
	  add a section to document display layout customization.

	* src/mine/cmine.cc:
	  Change the default load/save bindings to S and L (so they
	  don't collide with the directional bindings).

	* src/download_bar.cc:
	  Expunge references to ExitScreen.

	* src/download_screen.cc, src/vscreen/vscreen.cc:
	  Expunge references to AbortScreen.

2004-06-23  Daniel Burrows  <dburrows@debian.org>

	* doc/aptitude.xml:
	  Exhaustively document menu commands.

	* doc/aptitude.xml:
	  Add cross-references from the list of bindings to the list
	  of package commands.  Add Purge to the list of bindings.

	* doc/aptitude.xml:
	  Add a <thead> to the list of package commands.

	* doc/aptitude.css:
	  Add some subtle background shading to admonitions.

	* doc/aptitude.xml:
	  Document how to configure keybindings.

	* src/vscreen/config/keybindings.cc:
	  Add a hack for binding to commas, since the frontend parsing
	  doesn't handle them cleanly and I can't easily fix it.

	* src/ui.cc, src/pkg_node.cc, src/vscreen/vscreen.cc, src/vscreen/config/keybindings.h, src/vscreen/vs_text_layout.cc, src/vscreen/vs_table.cc, src/vscreen/vs_menubar.cc:
	  Fix a number of incorrect initializations of keybindings objects
	  (they were using "new keybindings(global_bindings)" instead of
	   "new keybindings(&global_bindings)"), make the copy constructor
	  of keybindings private so it doesn't accidentally get invoked,
	  and make sure that *all* the keybinding domains get loaded.

	* src/vscreen.cc, src/vscreen/vs_text_layout.cc, src/vscreen/vs_text_layout.h:
	  Add a keybinding domain for the vs_text_layout widget.

2004-06-16  Christian Perrier <bubulle@debian.org>

	* Updated Italian translation
	* Updated Basque translation #244858
		  
2004-06-21  Daniel Burrows  <dburrows@debian.org>

	* doc/aptitude.xml:
	  Use <keycombo> for the Control-u "undo" shortcut.

	* doc/aptitude.xml:
	  Document sorting policies.

	* doc/Makefile.am, doc/aptitude-txt.sed:
	  sed is the wrong way to handle "bad" entities; don't use it
	  for now.

	* doc/Makefile.am, doc/aptitude-txt.style, doc/aptitude-txt.sed:
	  Use html2text, not links, to generate the text output.

2004-06-16  Christian Perrier <bubulle@debian.org>

	* Updated German translation. #255396
		  
2004-06-20  Daniel Burrows  <dburrows@debian.org>

	* doc/aptitude.css, doc/aptitude-html.xsl, doc/Makefile.am:
	  Added a basic CSS stylesheet (the initial values are partly
	  borrowed from Subversion).  The current stylesheet just puts
	  borders around "tip" et al, and stripes alternate rows of
	  tables.

	* doc/aptitude-txt.xsl, doc/Makefile.am:
	  Added some basic magick to output a text version of the
	  documentation.  Unfortunately, the DocBook people seem to
	  believe that it should be as difficult as possible to get
	  a sensible text version of your document. :-(

	* doc/aptitude.xsl, doc/aptitude-html.xsl, doc/Makefile.am:
	  Rename aptitude.xsl to aptitude-html.xsl.

	* doc/aptitude.xsl, doc/aptitude-common.xsl:
	  Add a common stylesheet, holding variables for all stylesheets.

	* doc/aptitude.xml:
	  Add a legalnotice with the GPL boilerplate text after
	  s/program/manual/.

	* doc/aptitude.xml:
	  Clarify that %n outputs the version of the program, not just
	  0.2.15.

	* doc/aptitude.xml:
	  Add a link to a tutorial on regular expressions.

	* doc/aptitude.xsl:
	  Display segmentedlists as tables.

	* doc/aptitude.xml:
	  Document the display formatting system, change the version
	  of the vprogram as given in the internal subset, add a basic
	  copyright notice, and move some lists of stuff into figures
	  for cross-referencing.

	* src/pkg_columnizer.cc:
	  Remove an unnecessary, and probably harmful, # in the default
	  format string.

	* src/ui.cc:
	  Menus in aptitude are now exactly the minimum size.

	* src/vscreen/vs_menu.cc:
	  Really fix the calculation of minimum menu size.

	* src/vscreen/testvscreen.cc:
	  Menus in the test program are now exactly as large as necessary.

	* src/vscreen/vs_menubar.cc:
	  Handle placing menus in narrow screens more gracefully.

	* src/vscreen/vs_menu.cc:
	  Make sure that menus are always wide enough to display shortcuts.

	* doc/aptitude.xml:
	  Write the section on search patterns, start an FAQ, and add some
	  missing cross-references.

	* po/zh_TW.po:
	  Fix two msgstrs that didn't match the formatting of the
	  corresponding msgid (Taiwanese people are probably very
	  confused about why their aptitudes are going to use or
	  free huge amounts of disk space, and why it's always
	  given in bytes...)

	* po/fi.po:
	  Somehow this didn't have a Language-Team header, which caused
	  'make' to fail (but not until after the last commit?!).
	  Added one.

	* doc/Makefile.am:
	  Fix installation of documentation.

	* intl/ m4/ po/remove-potcdate.sin po/quot.sed po/Rules-quot po/insert-header.sin po/Makevars po/en@quot.header po/en@boldquot.header po/boldquot.sed src/mine/Makefile.am src/generic/Makefile.am src/vscreen/config/Makefile.am src/vscreen/Makefile.am src/Makefile.am configure.ac ABOUT-NLS:
	  Re-run gettextize, largely to fix the fact that 'make install'
	  is broken.

2004-06-19  Daniel Burrows  <dburrows@debian.org>

	* doc/aptitude.xml:
	  First crack at documentation of how automatically installed
	  packages work.

2004-06-18  Daniel Burrows  <dburrows@debian.org>

	* doc/aptitude.xml:
	  More documentation work...getting closer...

	* src/reason_fragment.cc:
	  Be more aggressive about showing Providing packages: for a
	  Conflicts, show any package that is currently installed or will be
	  installed; for a Depends, show all packages.

2004-06-16  Christian Perrier <bubulle@debian.org>

	* Re-Updated Lithuanian translation
	* Updated Japanese translation
		  
2004-06-16  Daniel Burrows  <dburrows@debian.org>

	* doc/aptitude.xml:
	  And it's <guimenuitem>, not <menuitem> (why didn't nxml catch these?)

	* doc/aptitude.xml:
	  Whoops, it's <replaceable>, not <replacable>.

	* doc/aptitude.xml:
	  Document that you can create a view with the "categorical browser"
	  option, and only say that aptitude explains why brokenness
	  occurs (not that it suggests a solution).

	* src/ui.cc:
	  Just disable use of the non-hierarchical view for now; it's too
	  broken. (Debian bugs #120978, #144079, #144083, #151437, #242397)

	* doc/aptitude.xml:
	  Write more sections.

	* src/cmdline.cc:
`	  Show ORed dependencies properly in "aptitude show"
	  (Debian bug #254740).

	* doc/aptitude.xml:
	  Editing, and write another section.

2004-06-16  Christian Perrier <bubulle@debian.org>

	* Updated Simplified Chinese translation
	* Updated Lithuanian translation
		  
2004-06-15  Daniel Burrows  <dburrows@debian.org>

	* doc/aptitude.xml:
	  Write an introduction for the Reference Guide.

	* doc/aptitude.xsl:
	  Really chunk sections separately.

	* doc/Makefile.am, doc/aptitude.xsl:
	  Really enable the navigation images.

	* doc/aptitude.xml:
	  Make sure that <screen> and </screen> tags are flush against
	  the verbatim stuff, so that stray newlines don't creep into
	  the documentation.

	* doc/Makefile.am, doc/aptitude.xsl:
	  Add an XSL stylesheet for the documentation.

2004-06-15  Christian Perrier <bubulle@debian.org>

	* Regenerate aptitude.pot and update po files
	* Updated french translation
	* Updated spanish translation
	* Updated dutch translation
		  
2004-06-14  Daniel Burrows  <dburrows@debian.org>

	* src/aptitude.h, src/pkg_grouppolicy.cc, src/generic/tasks.cc:
	  Apply (with small modifications) patch from Denis Barbier to
	  translate task descriptions.  It doesn't seem to cause
	  regressions for English; I can't test the translation, but I
	  assume it works.  (Debian bug #203725)

	* configure.ac:
	  Tell configure about bs so aptitude compiles.

	* src/cmdline.cc, src/cmdline.h, src/main.cc:
	  Add a --visual-preview option, which pops into the visual
	  interface in the preview step. (Debian bug #253335)

	* src/cmdline.cc:
	  Don't display the Essential warning/prompt if the user cancelled
	  the removal. (Debian bug #254422)

2004-06-14  Christian Perrier <bubulle@debian.org>

	* Dutch translation update
	* Basque translation update
		  
2004-06-13  Christian Perrier <bubulle@debian.org>

	* Polish translation update
	* Brazilian Portuguese translation update
	* Partial Bosnian translation added
	* Updated German translation, help page and man page
	* Updated Makefile to install German translations
	* Italiann translation updated
		  
2004-06-10  Christian Perrier <bubulle@debian.org>

	* Czech translation update
		  
2004-06-09  Christian Perrier <bubulle@debian.org>

	* Regenerate aptitude.pot and update po files
	* Updated french translation
		  
2004-06-11  Daniel Burrows  <dburrows@debian.org>

	* src/cmdline.cc:
	  When mentioning packages that contain a string, don't show pure
	  virtual packages unless something Provides them.

	* src/ui.cc:
	  Disable the Next/Previous View commands if no other views
	  are visible.  Disable Close if no view is visible.

	* src/ui.cc:
	  Disable the Undo command if no undos are available.

	* src/ui.cc:
	  Move the Undo menu left several slots.

2004-06-09  Daniel Burrows  <dburrows@debian.org>

	* src/ui.cc:
	  Disable the "become root" menu item if the user is already root.

	* src/vscreen/vs_menu.cc:
	  Don't crash if the first item in the menu is disabled.

	* src/ui.cc:
	  Disable the update/install menu items if an update or install
	  is already taking place.

	* src/ui.cc:
	  Disable the "forget new packages" menu item if no packages are new.

	* src/generic/aptcache.cc:
	  Don't count pure virtual packages as "new".

	* src/generic/aptcache.cc, src/generic/aptcache.h:
	  Add support for counting the number of "new" packages.

	* src/vscreen/vs_menu.cc:
	  Only respond to mouse presses when a selectable (enabled) menu
	  item is clicked on.

	* src/pkg_tree.cc, src/pkg_tree.h:
	  In package lists, allow the user to limit the display.

	* src/vscreen/vs_menu.cc:
	  Fix the movement commands in a menu to more correctly handle
	  menus that mix enabled and non-enabled items.

	* src/menu_redirect.h, src/pkg_tree.cc, src/pkg_tree.h, src/pkg_view.cc, src/ui.cc, src/ui.h:
	  Add signals, methods, and connections to make the search menu
	  command functional.

	* src/ui.cc:
	  Hopefully fix compilation problems on ia64. (Debian bug #243932)

	* src/ui.cc:
	  Add a menu that allows the user to search for a package or to
	  limit the displayed packages.

	* src/pkg_tree.cc, src/pkg_ver_item.h:
	  Allow searches to match package version nodes.

	* src/apt_info_tree, src/pkg_tree.cc, src/pkg_tree.h:
	  Move all searching functionality into the pkg_menu_tree.

	* src/menu_redirect.h, src/pkg_tree.cc, src/pkg_tree.h, src/pkg_view.cc:
	  Hook up the package menu items other than Install.

2004-06-09  Christian Perrier <bubulle@debian.org>

	* Regenerate aptitude.pot and update po files
	* Updated french and dutch translations
		  
2004-06-08  Daniel Burrows  <dburrows@debian.org>

	* src/download.cc, src/ui.cc, src/ui.h, src/view_changelog.cc:
	  Make sure that all menu items have a description.

	* src/ui.cc:
	  Sanitize menu item descriptions: no menu item description should
	  end with a period. (Debian bug #244676)

	* src/Makefile.am, src/apt_info_tree.h, src/menu_redirect.h, src/pkg_node.cc, src/pkg_tree.cc, src/pkg_tree.h, src/pkg_view.cc, src/pkg_view.h, src/ui.cc, src/ui.h:
	  Connect the package menu to the package view; it works now!

	* src/cmdline.cc:
	  Remove an extraneous space from the display of Essential
	  information (it has now migrated to the translated string
	  instead of the format string).

	* src/vscreen/vscreen_widget.h:
	  Make vscreen_widget derive virtually from Object, to allow
	  multiple inheritance later on.

2004-06-08  Christian Perrier <bubulle@debian.org>

        * Added a missing space in the former "Essential:" string
	  Unfuzzied translations as well
	* Regenerate aptitude.pot and update po files
	  Complete french translation
		  
2004-06-07  Daniel Burrows  <dburrows@debian.org>

	* src/ui.cc, src/ui.h:
	  Add hooks for a "Package" menu, currently always disabled.

	* src/vscreen/vs_menu.cc:
	  Call the highlighted signal when the menu is first displayed.

	* src/vscreen/vs_menu.cc:
	  Make it possible to select menu items with Enter again.

	* src/vscreen/vs_menubar.cc:
	  Correctly determine whether the cursor should be visible.

	* src/vscreen/vscreen.cc, src/vscreen/vs_menu.cc, src/vscreen/vs_menu.h:
	  Use a menu item's enabled status to control how it is drawn and
	  whether it is selected.

	* src/vscreen/bool_marshal.h:
	  Make the marshallers usable by making default_value() static.

	* src/vscreen/vs_menu.cc, src/vscreen/vs_menu.h:
	  Add support for storing information on whether a menu item is
	  enabled.

	* src/vscreen/bool_marshal.h:
	  Fix the header to compile.

	* src/vscreen/bool_marshal.h:
	  Add marshallers that are more appropriate for Boolean return values.

2004-06-07  Christian Perrier <bubulle@debian.org>

	* Re-make aptitude.pot and update translations
	* French translation update

2004-06-06  Daniel Burrows  <dburrows@debian.org>

	* src/cmdline.cc:
	  "aptitude show" now prints whether a package is Essential: yes.

2004-06-04  Christian Perrier <bubulle@debian.org>

	* Updated Norwegian Bokmal and Nynorsk translations
	  Bug #252507

2004-05-30  Daniel Burrows  <dburrows@debian.org>

	* doc/aptitude.xml:
	  Use the correct screenshot to illustrate the info screen, and
	  slightly expand the explanation of it.

	* src/generic/aptcache.cc:
	  Always properly undo forbidden-version setting; previously it
	  would only work if some other part of the package's state changed
	  as a result.

	* doc/aptitude.xml:
	  Describe the action flag.

	* doc/aptitude.xml:
	  Move the "User's Guide" quote to the "Reference" section.

	* src/generic/aptcache.cc:
	  When cleaning up package states after a change: if a package is
	  being kept in its current state, only set its state to Install if
	  it is already installed; if it was going to be installed, set its
	  state to Purge or DeInstall as appropriate.

	* src/generic/aptcache.cc:
	  When keeping a package back, only reset its installation reason
	  to "manual" if it was actually being removed due to being unused.

2004-05-29  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptcache.cc:
	  Always run a garbage collection after loading the cache.
	  This was done previously, but only if packages were being
	  upgraded on startup; now it is done consistently (this makes
	  the behavior more sensible).

	* src/pkg_subtree.cc:
	  Don't hold the whole subtree, keep it back.

	* help.txt, src/defaults.cc, src/pkg_item.cc, src/pkg_item.h, src/pkg_node.cc, src/pkg_node.h, src/pkg_subtree.cc, src/pkg_subtree.h, src/pkg_ver_item.cc, src/pkg_ver_item.h:
	  Add a command to keep a package back without holding it (':'
	  by default)

	* src/cmdline.cc, src/generic/aptcache.cc, src/generic/aptcache.h:
	  Add an option to all_upgrade which can be used to enable
	  auto-installation of dependencies.

	* doc/aptitude.xml:
	  - Created the structure for the rest of the documentation.
	  - Wrote the section on the package synopsis.
	  - Wrote the section on the package info screen, with a
	    screenshot.

2004-05-27  Christian Perrier <bubulle@debian.org>

	* Updated Danish translation
	  Bug #244539
	* Added Catalan translation
	  Bug #248764
	* Added Traditional Chinese translation and help text
	  Bug #244359
	* Updated Portuguese translation
	  Bugs #244850, #245699

2004-05-24  Christian Perrier <bubulle@debian.org>

	* Added Russian and Norwegian Bokmal translations
	  Bug #250498 and #250500

2004-05-17  Christian Perrier <bubulle@debian.org>

	* Update Japanese translation and help text
	  Bug #250023

2004-05-20  Daniel Burrows  <daniel@jester>

	* configure.ac:
	  Add the toplevel Makefile back to configure.ac (oops!).

2004-05-18  Daniel Burrows  <daniel@jester>

	* doc/aptitude.xml:
	  Write a somewhat shorter tutorial on the command line of
	  aptitude.

2004-05-17  Christian Perrier <bubulle@debian.org>

	* Include Dutch translation by Dutch team
	  Bug #249405
	* Include Basque translation and help text
	  Bug #244858
	* Update Italian translation, man page and help text
	  Bug #244679

2004-05-16  Daniel Burrows  <daniel@jester>

	* doc/aptitude.xml:
	  More or less finish the section of the tutorial on how to
	  use aptitude interactively.

2004-05-15  Christian Perrier <bubulle@debian.org>

	* Include all Czech translation updates by Miroslav Kure
	  Bug #243728

2004-05-14  Daniel Burrows  <daniel@jester>

	* src/download_screen.h, src/dep_item.h, src/dep_item.cc:
	  Further g++ 3.4 fixes.  It now reportedly compiles with g++ 3.4.

	* doc/aptitude.xml: Incorporate several suggestions from kh to
	  improve the already-written portion of the documentation.

2004-05-13  Daniel Burrows  <daniel@jester>

	* src/pkg_item_with_subtree.h: 
	  Work around a C++ language bug that's more "correctly" implemented
	  in g++ 3.4.

	* src/generic/matchers.cc, src/vscreen/curses++.h, src/vscreen/vs_layout_item.h:
	  More g++ 3.4 fixes.

	* src/strhash.h:
	  Fix a C++ error that causes compile failures on g++ 3.4, reported
	  by Josep Febrer.

2004-05-09  Daniel Burrows  <daniel@jester>

	* doc/aptitude.xml:
	  Various edits, and extended the tutorial to cover the most
	  basic tree manipulations.

2004-05-03  Daniel Burrows  <daniel@jester>

	* doc/aptitude.xml:
	  Finish up the Introduction section, hopefully.

	* doc/aptitude.xml:
	  Finish the basic introduction to the aptitude UI, start the
	  part of the tutorial that discusses the list of packages.

2004-04-28  Christian Perrier <bubulle@debian.org>

	* po/*:
	  Updated aptitude.pot and all PO files
	  French translation update

2004-04-23  Daniel Burrows  <daniel@jester>

	* src/cmdline.cc:
	  Add an "i" command in the command-line mode prompt, which allows
	  you to show information about a package.

2004-04-22  Daniel Burrows  <daniel@jester>

	* src/cmdline.cc:
	  Require only one -v, not two.

	* src/generic/infer_reason.cc, src/generic/rev_dep_iterator.h:
	  Correct the logic in some usages of the new rev_dep_iterator
	  so that, among other things, the program doesn't crash.
	  (hopefully)

	* src/generic/infer_reason.cc, src/generic/rev_dep_iterator.cc:
	  Provide the right versions to rev_dep_iterator, and don't
	  crash in it if a NULL version is provided.

	* src/cmdline.cc:
	  If -v is given to an installation command, display Suggested
	  packages in the preview.

	* src/pkg_grouppolicy.cc, src/generic/apt.cc, src/generic/apt.h:
	  Split out the package_suggested routine into generic code.

	* README, aptitude.1, src/apt_options.cc, src/main.cc, src/generic/aptcache.cc, src/generic/aptitudepolicy.cc, src/generic/infer_reason.cc:
	  Remove all traces of Suggests-Important. (Debian bug #245410)

	* src/pkg_tree.cc, src/pkg_tree.h:
	  When a limit doesn't match any packages, print an explanatory
	  message instead of giving the user a blank screen.

	* src/generic/Makefile.am, src/generic/infer_reason.cc, src/generic/rev_dep_iterator.h:
	  Create a class to iterate over all reverse dependencies of
	  a package, including those via Provided packages.  Use this
	  in infer_reason (Debian bug #244817).

	* src/generic/infer_reason.cc:
	  Break out some common code from several cases in the
	  infer_reason function.

	* src/generic/matchers.cc:
	  Greatly improve the matchers for reverse dependencies, and add
	  matchers for reverse and forward provides.  Too sleepy to write
	  documentation or to debug the problem that this was created to
	  help debug.

2004-04-21  Daniel Burrows  <daniel@jester>

	* src/generic/matchers.cc:
	  When using a dep_matcher, check unversioned dependencies too.

2004-04-19  Daniel Burrows  <daniel@jester>

	* src/ui.cc:
	  Fix wrapping of errors -- successive errors were running together
	instead of being placed on separate lines.

2004-04-17  Daniel Burrows  <daniel@jester>

	* src/defaults.cc, src/pkg_item.cc, src/pkg_ver_item.cc:
	  Add a convenient keybinding for reporting a bug.

2004-04-09 Christian Perrier
        * update po files fter typo correction
	* re-created POT file

2004-04-08  Daniel Burrows  <daniel@jester>

	* configure.ac, doc/Makefile.am, doc/aptitude.xml, doc/images/start-snapshot.png:
	  More documentation updates, including a screenshot.

	* doc/aptitude.xml:
	  Better indentation and filling of text.

	* doc/aptitude.xml:
	  Improve some wording in the description of package managers.

	* doc/aptitude.xml:
	  Correct invalid XML.

	* doc/aptitude.xml:
	  docbookide is deprecated, remove the docbook-mode marking.

	* po/pt.po:
	  Translation update from Nuno Sé®©ca (Debian bug #242372)

	* src/generic/infer_reason.cc:
	  Correctly detect the end of OR groups (oops), so they are properly
	  displayed. (Debian bug #242663)

	* po/lt.po:
	  Translation update from Darius ?itkevicius. (Debian bug #242815)

2004-04-07  Christian Perrier <bubulle>

	* po/fr.po:
	French update by Jean-Luc Coulon

2004-04-05  Daniel Burrows  <daniel@jester>

	* po/pt_BR.po:
	Translation updates from Andre Luis Lopes.  (Debian bug #242332)

	* po/pt.po:
	Translation updates from Nuno Sé®©ca.  (Debian bug #242309)

	* aptitude.de.1, help-de.txt, po/de.po, src/mine/mine-help-de.txt:
	Further German translation updates. (same)

	* po/de.po:
	Further updates to the German translation (Debian bug #233917).

	* aptitude.1:
	Patch from Sebastian Kapfer (Debian bug #242304).

2004-04-04  Daniel Burrows  <daniel@jester>

	* doc/aptitude.xml:
	Write some preliminary text.

	* Makefile.am, configure.ac, doc/Makefile.am, doc/aptitude.xml:
	Add skeletal support for a docbook-xsl-based user's manual.

	* src/generic/aptcache.cc:
	Use *this, not *apt_cache_file, in is_held, so we don't crash when
	apt_cache_file hasn't been initialized yet.

	* po/es.po:
	Spanish update from Ruben Porras.

	* src/pkg_grouppolicy.cc:
	Don't talk about Perl when describing the Python section.

2004-04-03  Daniel Burrows  <daniel@jester>

	* NEWS, README, configure.ac:
	Updates for 0.2.14.1.

	* src/cmdline.cc:
	When verbosity is requested, display archive information
	for packages in 'aptitude show'.  If extra verbosity is
	requested, display every version file as a separate record.

	* src/pkg_info_screen.cc:
	Add a tree in the info screen for virtual packages.
	(Debian bug #121979)

	* src/cmdline.cc:
	Display information about provided and providing packages in
	"aptitude show", even for pure virtual packages.

	* src/vscreen/fragment.cc:
	Always initialize indentattr to 0.

	* src/vscreen/fragment.cc:
	Make the indentation of an indentbox obey attributes set via
	set_attr().  This makes the error dialog look right.

	* src/ui.cc:
	Add a slightly hacky method for calculating the correct number of
	lines when requesting a size for an error pager.

	* src/ui.cc:
	Use fragments to display apt error messages (still needs some work).
	This means that error messages wrap (Debian bug #233923).

	* src/vscreen/vs_text_layout.cc, src/vscreen/vs_text_layout.h:
	Add a vs_text_layout method which calculates the desired height
	of the widget given a width.

	* src/vscreen/Makefile.am, src/vscreen/testvscreen.cc, src/vscreen/vs_bin.h, src/vscreen/vs_bin.cc, src/vscreen/vs_center.h, src/vscreen/vs_center.cc, src/vscreen/vs_size_box.h, src/vscreen/vs_size_box.cc:
	Add a 'vs_size_box', a layout widget that enforces a minimum size
	on its contents.

2004-04-03  Christian Perrier  <bubulle@debian.org>

	* Portuguese program translation. Closes: #239171
	* Italian translation update. Closes: #239915
	* Czech translation update. Closes: #240604
	* Lituanian translation update. Closes: #240683
	* Simplified Chinese translation update. Closes: #240739
	* Norwegian Nynorsk translation update. Closes: #241104
	* Japanese translation update. Closes: #239242

2004-04-03  Daniel Burrows  <daniel@jester>

	* src/ui.cc:
	Un-reverse logic in the use of is_held, so the warning dialog
	about "maybe you didn't select packages for upgrade" is displayed
	appropriately.

2004-04-02  Daniel Burrows  <daniel@jester>

	* README, src/pkg_columnizer.cc, src/pkg_columnizer.h, src/pkg_ver_item.cc:
	Patch from Darren Salt and David Caldwell to add support for an
	Archive column (%t).  (Debian bug #113354)

	* README, aptitude.1, src/cmdline.cc, src/main.cc:
	Add a "reinstall" command-line action. (Debian bug #240225)

	* src/generic/aptcache.cc, src/generic/tasks.cc:
	Make sure to call Done() on the progress object to avoid spurious
	problems later.

	* src/ui.cc:
	Fix an overlooked build error.

	* Retroactive note:
	Christian fixed Debian bugs #239171, #239915, #240604, #240683,
	#240739, and #241104 in the massive update below, but forgot
	to include ChangeLog notes for them.  Adding one so they don't
	get forgotten.

	* src/apt_options.cc:
	Remove a pointless second line in an option description.
	(Debian bug #233528)

	* src/ui.cc, src/reason_fragment.cc:
	Use is_held in several more appropriate places.

	* src/generic/aptcache.cc:
	is_held now returns true only if the package in question is
	actually installed.

	* src/generic/aptcache.cc:
	Use is_held internally to the apt-cache; among other things,
	this makes "aptitude upgrade" behave correctly around forbidden
	versions.

	* src/cmdline.cc:
	Oops, add a missing break statement so the program doesn't abort
	when given the forbid-version command.

	* src/main.cc:
	Teach main about forbid-version so I can actually test it.

	* src/cmdline.cc, src/generic/aptcache.cc, src/generic/aptcache.h: 
	Added a generic way to test whether aptitude should hold packages.

	* README:
	Remove a comment about an apt bug that has now been fixed.

	* README:
	s/interactive/visual/g

	* README, ChangeLog:
	Document "F".

	* help.txt:
	Document "F".

	* src/ui.cc:
	Instead of displaying an unhelpful blank screen, print a very
	visible warning message if the user tries to do an install run
	when there's nothing to	install, remove, or upgrade.  An exception
	is made in the case when all upgradable packages have been
	explicitly held back, but maybe it shouldn't be.  If it looks like
	the user forgot to press "U", print a gentle reminder about the
	command.

	* src/pkg_columnizer, src/pkg_ver_item.cc:
	Add support for the "forbidden" state in the long form of the
	column output.

	* README, aptitude.1, src/cmdline.cc, src/main.cc:
	Create and document a "forbid-version" command-line action.

	* src/ui.cc:
	Most of the screen real estate on the dep and version screens is
	wasted, so the information area might as well be visible in them.

	* po/zh_CN.po:
	Add some missing newlines that were causing "make" to bomb out.

	* configure.ac:
	Add "lt", "nn", and "pt" to ALL_LINGUAS so "make" works again.

	* aptitude.1:
	Updates and proofreading from Danilo Piazzalunga:

	General review: updated Options and Interactive Usage sections,
	minor cosmetic fixes here and there. Corrected section for apt-get
	reference, document -t option (Debian bugs #198891, #225053).

2004-03-22  Christian Perrier  <bubulle@debian.org>

	* Added po/aptitude.pot generated by 
	  "xgettext -f po/POTFILES.in -k_ -kN_ -o po/aptitude.pot"
	  Will make translators work easier
	* Updated po/fr.po

2004-03-21  Christian Perrier  <bubulle@debian.org>

	* Brazilian Portuguese program translation update. Closes: #237866, #199306
	* Danish program translation update. Closes: #230642, #234805
	* German program translation update. Closes: #233917
	* Spanish program translation update. Closes: #234537
	* French program translation update. Closes: #237501
	  French help file updated
	  French minesweeper help file added
	* Finnish program translation update. Closes: #238188
	  Finnish help file updated
	  Finnish man page updated
	* Japanese program translation update. Closes: #235256
	   Japanese help file added
	* Partial Traditional Chinese program translation update. Closes: #230893
	* Partial Greek program translation added. Closes: #237808
	  ALL_LINGUAS updated accordingly in configure.ac

2004-03-18  Daniel Burrows  <daniel@jester>

	* src/ui.cc:
	Only quit abruptly if there are 0 main widgets left, not if there's
	only 1 left.

	* src/main.cc, src/pkg_tree.cc, src/pkg_tree.h, src/ui.cc, src/ui.h:
	Display a progress bar while building package trees.

	* src/main.cc:
	Remove some very obsolete code which has been #ifdef'd out for years.

	* src/generic/aptcache.cc, src/generic/apt.cc, src/generic/tasks.cc, src/generic/tasks.h:
	Make progress calls for more operations.

	* src/vs_progress.cc:
	Update progress bars more frequently (4 times a second).

	* src/ui.cc:
	When the last main widget is destroyed, quit immediately (without
	prompting).  This handles the case where the last widget is a
	download widget. (Debian bug #233783)

	* src/generic/aptcache.cc, src/generic/aptcache.h:
	Remember whether each package was to be upgraded.

	* src/pkg_grouppolicy.cc:
	Place security updates in a separate top-level tree.

	* README:
	Replace the reference to the Sourceforge repository with a
	reference to SVN on Alioth.

	* src/generic/pkg_changelog.cc:
	Fix viewing changelogs of contrib/non-free packages.
	(Debian bug #233855)

	* src/pkg_grouppolicy.cc:
	Add section descriptions for embedded, gnome, kde,
	libdevel, perl, and python. (Debian bug #233913)

	* src/main.cc:
	Add a missing \n in usage().  (Debian bug #233920)

	* src/download.cc, src/ui.cc, src/ui.h, src/view_changelog.cc:
	Fix the titles given to download views. (Debian bug #234041)

	* src/generic/pkg_changelog.cc:
	Handle epoched versions correctly (Debian bug #237340).

2004-02-24  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptcache.cc:
	When a package that is being removed due to being unused is marked,
	mark it for installation.

	* src/generic/aptcache.cc, src/generic/aptcache.h: 
	Use the signals in the configuration to run a mark and sweep whenever
	the value of Recommends-Important or Suggests-Important changes.

2004-02-21  Daniel Burrows  <dburrows@debian.org>

	* src/reason_fragment.cc:
	Teach reason-fragments (sort of) about forbidden versions.

	* src/pkg_ver_item.cc:
	Display "F" as the "action" for versions that are forbidden.

	* src/pkg_columnizer.cc:
	Display "F" as the "action" for packages that are kept because the
	upgrade is forbidden.

	* src/generic/aptcache.cc:
	Write out *nonempty* forbidver tags, not empty ones.

	* src/generic/aptcache.cc:
	Add support for reading in forbidden versions stored in the state
	cache.

	* src/generic/aptcache.cc:
	Fix segfaults in the forbidden-version code when no candidate
	version is available.

	* src/generic/aptcache.h:
	Decorate some classes with doccomments.

	* sec/generic/aptcache.cc, src/generic/aptcache.h:
	Add basic support for a "forbidden version" flag: a version that
	will not be upgraded too.  (inspired by the XF86 DRI breakage)

2004-02-19  Daniel Burrows  <dburrows@debian.org>

	* src/ui.cc:
	Patch from Travis Crump <pretzalz@techhouse.org> to handle
	situations where there are no views available but the UI is
	supposed to exit when the last view closes. (Debian bug #233783)

	Note that this situation *should* never occur, and it is a bug
	that it is occuring at all.

2004-02-15  Daniel Burrows  <dburrows@debian.org>

	* src/pkg_grouppolicy.cc, src/generic/tasks.cc, src/generic/tasks.h:
	Add support for the Key attribute of tasks. (Debian bug #202871)

	* NEWS, README, configure.ac:
	Bump version to 0.2.14.

	* src/generic/apt.cc:
	Always initialize the package system, even if opening the
	configuration file failed. (Debian bug #220732 again).

	* src/cmdline.cc:
	After every invocation of apt_init, immediately check for errors
	and abort if any occured.  This fixes a lot of crashes with
	a missing sources.list (Debian bug #220732).

	* po/cs.po:
	Fix the translation of a format string, which was causing crashes
	in some cases.

2004-02-14  Daniel Burrows  <dburrows@debian.org>

	* po/it.po:
	Update the Italian translation (Danilo Piazzalunga).

	* configure.ac:
	Use AS_HELP_STRING to format help strings.

	* Makefile.am, aptitude.it.1:
	Italian translation of the manpage from Danilo Piazzalunga.

	* src/generic/infer_reason.cc:
	Don't follow reverse dependencies on provided packages if they
	have a version component.

2004-02-13  Daniel Burrows  <dburrows@debian.org>

	* src/generic/infer_reason.cc:
	More correct handling of conflicts: don't throw out reverse
	dependencies on a package unless they are really from that
	same package.

	* NEWS, README, configure.ac:
	Bump version to 0.2.13.9999.3.

	* po/cs.po, po/da.po, po/de.po, po/es.po, po/fi.po, po/fr.po, po/gl.po, po/it.po, po/ja.po, po/pl.po, po/pt_BR.po, po/zh_CN.po:
	Ran "make update-po".

	* configure.ac, src/download_screen.h, src/pkg_item.cc, src/generic/config_signal.h, src/generic/pkg_hier.cc, src/generic/pkg_hier.h, src/generic/strhash.h, src/vscreen/curses++.h, src/vscreen/config/keybindings.h:
	Fix things so that aptitude can be configured and compiled on
	slightly older g++ versions (anything >= 3.0 should work).  g++ 2.95
	and below have hideously broken basic_string definitions, and
	won't work.

	* src/reason_fragment.cc:
	Remove an unused variable declaration.

	* po/es.po:
	Translation update from Ruben Porras. (Debian bug #224966)

2004-02-12  Daniel Burrows  <dburrows@debian.org>

	* src/reason_fragment.cc:
	Un-reverse the sense of the disk space usage/free message (it
	was displaying used for free, and vice versa)

	* aptitude.cs.1, help-cs.txt, po/cs.po:
	Updated cs translation from Miroslav Kure.

2004-02-11  Daniel Burrows  <dburrows@debian.org>

	* po/de.po:
	German update from Sebastian Kapfer.

	* src/reason_fragment.cc:
	Add a description in the reason fragment of how much disk space will
	be used.

2004-02-10  Daniel Burrows  <dburrows@debian.org>

	* Makefile.am, help-it.txt, po/it.po, src/cmine/Makefile.am, src/cmine/mine-help-it.txt:
	Italian translation updates from Danilo Piazzalunga.

	* src/desc_parse.cc, src/reason_fragment.cc, src/ui.cc, src/ui.h: 
	Disable the fillboxing of description information by default,
	but allow it to be re-enabled via Aptitude::UI::Fill-Text.
	This option isn't accessible from the UI.

2004-02-09  Daniel Burrows  <dburrows@debian.org>

	* src/vscreen/vs_text_layout.cc:
	Always report that a text_layout is able to be focussed
	if its starting line is not 0 (meaning that it's possible
	to scroll up).

	* src/vscreen/vscreen.cc:
	Never call dispatch_char on KEY_RESIZE.

	* src/desc_parse.cc, src/reason_fragment.cc:
	Experimentally eplace most flowboxes with fillboxes.

	* src/vscreen/fragment.cc:
	Fix an off-by-one error which moved words in a fillbox to
	the next line if they would occupy the last character on a
	line.

	* src/vscreen/fragment.cc, src/vscreen/fragment.h, src/vscreen/testvscreen.cc:
	Add experimental support for a "fillbox", which generates
	text that is flush left and right with its edges.  This
	can look rather dreadful in a fixed-width font, but
	I'm including it in the source tree anyway to see how
	it holds up.

2004-02-08  Daniel Burrows  <dburrows@debian.org>

	* Makefile.am:
	Oops, actually include FAQ in the distribution.

	* NEWS, README, configure.ac:
	Bump version to 0.2.13.9999.2.

	* Makefile.am, src/ui.cc:
	Add support for viewing the FAQ from within aptitude.

	* src/generic/aptcache.cc:
	Turn auto-install ON when marking upgradable packages.

	* po/pt_BR.po:
	Updated translation from Andre Luis Lopes.

	* aptitude.1, README, src/cmdline.cc, src/cmdling.h, src/main.cc:
	Add an "aptitude show" command. (Debian bug #226501)

	* src/vscreen/fragment.cc:
	Fix join_fragment (oops).

	* help.txt:
	Document "C" again.

	* src/generic/aptcache.cc:
	When a package which is to be removed is instead automatically
	installed to satisfy a dependency, mark it as autoinstalled.
	Similarly, if a package which is to be removed is automatically
	*kept* to satisfy a dependency, mark it as autoinstalled.

	In addition, make sure to update the selection state of autokept
	packages to "Install".

	* src/generic/aptcache.cc:
	Don't mark packages which are automatically kept as *held*;
	keeping packages back is simply a choice not to upgrade them,
	while holding them is a user action.  This fixes undoing of
	"mark upgradable", and may have implications for Debian bug
	#149161.

	* src/reason_fragment.cc:
	For dependencies involving packages not in main, print their
	section next to the package.  (if the package being displayed
	is the one which is not in main, this is suppressed; presumably
	the viewer already knows that it's not in main)

	* src/apt_options.cc, src/pkg_view.cc:
	Add an option to disable the autoswitchery.

	* src/pkg_view.cc:
	Enhance the autoswitchery support to automatically switch back
	if the package is fixed, and to switch to the reason view
	whenever a broken package is viewed, even if it just starts out
	broken.

	* src/pkg_node.cc, src/pkg_view.cc, src/ui.cc, src/ui.h:
	Add a signal that can be caught to detect that the states of
	packages might have changed.  Use it to fix the bug which caused
	the reason area to appear blank the first time it automatically
	switched.

	* src/pkg_view.cc:
	If a change to a package causes new "interesting" breakage,
	display the reason view for that package.

	* src/reason_fragment.cc, src/reason_fragment.h:
	Add an optional return parameter to tell whether any
	"interesting" breakage is included in the reason.

	* src/vscreen/vs_table.cc:
	If a vs_table can't change the focus in response to a keypress,
	it no longer swallows the character.  (this means
	tables-inside-tables where the inner table has only one
	focusable widget work properly)

	* src/pkg_view.cc:
	Add scroll-back-to-the-top behavior for packageless descriptions
	as well.

	* po/POTFILES.in:
	Update POTFILES.in.

	* src/pkg_view.cc:
	When the package being viewed in the description area changes,
	scroll to the top.

	* src/pkg_view.cc:
	Connect the set_package and set_description signals through the
	meta-info-area.

	* src/view_changelog.cc:
	Shrink the pager, if necessary, to fit the scrollbar in.

	* src/pkg_ver_item.cc:
	Add support for viewing the changelog of a particular version.

	* src/pkg_item.cc, src/view_changelog.cc, src/view_changelog.h:
	Add a utility routine to display the changelog of a package.

	* src/pkg_item.cc:
	HACK: trigger do_signal manually to force the scrollbar to
	be updated.

	* src/pkg_item.cc:
	Add a scrollbar to the package changelog display.

	The changelog display now works.  (Debian bugs #103455, #208041)

	* src/generic/pkg_changelog.cc:
	If the source package name starts with "lib", the hash tag
	should be the first 4 characters, not just the first character.

	* src/generic/pkg_changelog.h:
	Add missing std:: markers (not sure why this even compiled).

	* src/generic/pkg_changelog.cc:
	Use the source package name to fetch a changelog, not the
	binary package name.

	* src/generic/pkg_changelog.cc:
	Fix the changelog URL.  Fetching changelogs now works at a
	basic level!

	* src/generic/pkg_changelog.cc:
	Add support for displaying an error when fetching the changelog
	failed.

	* README, src/pkg_item.cc, src/generic/pkg_changelog.cc, src/generic/pkg_changelog.h:
	Add support for the new-style packages.debian.org changelogs.
	Presently this can't be parameterized; removed the suggestion
	that it can from the README.

	* src/ui.cc:
	When displaying apt errors, hook up the scrollbar's signal
	to the pager's slot.

	* src/vscreen/vs_util.cc:
	In the fileview dialog, hook up the scrollbar's interaction signal
	to the pager's slot.

	* src/vscreen/vs_pager.cc, src/vscreen/vs_pager.h, src/vscreen/testvscreen.cc:
	Do the same for the pager.

	* src/vscreen/vs_text_layout.cc, src/vscreen/vs_text_layout.h, src/vscreen/testvscreen.cc:
	Add a utility method to vs_text_layout which makes it easy to
	hook up a scrollbar's signal.

	* src/vscreen/vs_scrollbar.cc, src/vscreen/vs_scrollbar.h:
	Add basic mousing support for the scrollbar.

	* src/vscreen/vs_text_layout.cc, src/vscreen/vs_text_layout.h:
	Add support for the standard navigation commands (page
	up/down; move to beginning/end)

	* src/vscreen/vs_text_layout.cc:
	Don't reset the starting line to the beginning of the widget
	when the fragment changes.  In fact, only update it in the
	paint routine.

	* src/cmdline.cc:
	Add error checking for the return value of parse_pattern() to
	avoid segmentation faults on NULL pointers. (Debian bug #214245)

	* src/download.cc:
	Patch from Danilo Piazzalunga to log downgrades.
	(Debian bug #222583)

	* aptitude.cs.1, Makefile.am:
	Add Czech manpage from Miroslav.

	* src/download_list.cc:
	Add localization to some strings.

2004-02-07  Daniel Burrows  <dburrows@debian.org>

	* po/POTFILES.in:
	Regenerate.

	* src/pkg_view.cc:
	Explicitly wrap the multiplexer with code that knows about the
	three subwidgets and dispatches line_up()/line_down() appropriately.
	This is a little gross but not *too* bad.

2004-02-06  Daniel Burrows  <dburrows@debian.org>

	* configure.ac, src/dep_item.cc, src/download.cc, src/download_manager.h, src/pkg_columnizer.cc, src/pkg_grouppolicy.cc, src/pkg_ver_item.cc, src/pkg_ver_item.h, src/generic/apt.cc, src/generic/aptcache.cc, src/generic/aptcache.h, src/generic/aptitudepolicy.cc, src/generic/aptitudepolicy.h, src/generic/pkg_hier.cc, src/generic/tasks.cc:
	Remove all references to HAVE_LIBAPT_PKG3: that's a very old
	version of apt, and aptitude won't compile against it anyway
	right now.

	* src/generic/aptcache.cc:
	If a package is deleted because it is unused AND the user tries
	to install it, mark it as manually installed.  Similarly, if
	a package is deleted because it is unused and the user tries to
	hold it, mark it as manually installed.

	* src/Makefile.am, src/pkg_view.cc, src/reason_fragment.cc, src/reason_fragment.h:
	Split the code for generating a text fragment from a reason
	into its own file.

	* src/vscreen/fragment.cc, src/vscreen/testvscreen.cc:
	Fix the case where fragf is called with nothing but strings as
	arguments, and actually (oops) fix the test case.

	* src/vscreen/testvscreen.cc:
	Add another fragment test case, for fragf("%s %s",...)

	* src/pkg_view.cc:
	Try to be more accurate in displaying a description about why there
	are problems with a package that is being upgraded.

	* src/generic/infer_reason.cc:
	When detecting broken reverse deps, ignore self-conflicts, such
	as lynx Conflicting with lynx-ssl (provided by lynx).

	* src/cmdline.cc, src/pkg_view.cc, src/generic/infer_reason.cc, src/generic/infer_reason.h:
	Changed the infer_reason code to use sets, not vectors.  Changed
	infer_reverse_reason to follow reverse dependencies on virtual
	packages (the main reason for the sets; it makes it easy and
	efficient to exclude dependencies that occur twice; eg, in
	"emacs21|emacsen")

	* src/pkg_view.cc:
	Hopefully improved the display of Provided packages in the
	"reason window".

	* src/vscreen/fragment.cc, src/vscreen/fragment.h:
	Fix a fundamental flaw in join_fragment: it used the same fragment
	several times in a sequence.  (note to self: would it be worthwhile
	to dodge this problem by using reference-counting or cloning or
	somesuch?)

	* src/vscreen/fragment.cc, src/vscreen/fragment.h:
	Add a utility routine to join fragments into a single fragment,
	placing a fragment or string between them.

2004-02-05  Daniel Burrows  <dburrows@debian.org>

	* src/pkg_item.cc:
	Fix coloration of version numbers to reflect reality more closely --
	the old approach was broken in the presence of ORed dependencies.

	* src/pkg_item.cc:
	Detect and suppress multiple occurances of a single ORed dependency.

	* src/pkg_item.cc:
	Add support for some cases of virtual packages (but more support
	is needed).

	* src/pkg_item.cc:
	Display virtual packages as 'to be installed' or 'to be removed'
	in the appropriate cases.

	* src/pkg_view.cc:
	Handle ORed dependencies.

	* src/generic/apt.cc:
	Fix surrounding_or to correctly detect OR groups (oops).

	* src/generic/apt.cc:
	Fix surrounding_or to actually compile.

	* Makefile.am, help-zh_CN.txt, po/zh_CN.po:
	Added a translation of help.txt into zh_CN, also from Carlos.

	* src/generic/apt.cc, src/generic/apt.h:
	Add a utility routine to find the surrounding OR group of a
	dependency (useful for finding the OR context of a reverse dep).

	* src/generic/infer_reason.cc:
	When checking reverse breakage, exclude dependencies whose
	parent package is going to be installed at a different version.

	* src/pkg_view.cc:
	Display the version component of dependencies in the info display.
	This is colorized, but not using the pkg_ver_item's colorization
	support.

	* src/pkg_ver_item.cc, src/pkg_ver_item.h:
	Expose coloration of particular versions.

	* src/pkg_view.cc:
	Experimentally use the package's coloration to show its name in the
	information display.

	* src/pkg_item.cc, src/pkg_item.h:
	Get the code to actually compile.

	* src/pkg_item.cc, src/pkg_item.h:
	Add a static method pkg_attr to pkg_item, to make it easy to reuse
	the calculations that choose attributes for displaying a package.

	* src/pkg_view.cc:
	Rename deptype_frag to depfrag.

2004-02-04  Daniel Burrows  <dburrows@debian.org>

	* src/ui.cc:
	Add a missing vscreen_update(), so marking upgradable packages
	will behave (more) correctly.

	* src/generic/infer_reason.cc, src/generic/infer_reason.h, src/pkg_view.cc:
	Add support for displaying broken reverse dependencies in the
	information area.

	* src/vscreen/vs_util.cc:
	#include <aptitude.h>, needed by the gettext markings.

	* src/apt_options.cc, src/download_list.cc, src/mine/cmine.cc, src/vscreen/vs_util.cc:
	Add missing gettext markings, pointed out by Miroslav Kure.

2004-02-03  Daniel Burrows  <dburrows@debian.org>

	* Makefile.am:
	Add help-cs.txt to EXTRA_DIST and pkgdata_DATA.

	* NEWS:
	Update for 0.2.13.9999.

	* po/*.po:
	Ran "make update-po".

	* ChangeLog, README:
	Bump version to 0.2.13.9999.

	* README.i18n
	Added information for translators.

	* FAQ:
	Add a FAQ.

	* src/pkg_grouppolicy.cc:
	Use the Relevance tag to sort tasks. (Debian Bug #203726)

	* src/generic/tasks.cc, src/generic/tasks.h:
	Add support for the Relevance task tag.

	* po/zh_CN.po, configure.ac:
	Chinese translation from Carlos Z.F. Liu (Debian bug #230893).

	* src/cmdline.cc:
	Eliminate annoying warnings when setting a package's state if the
	resulting action is "Keep" but the current action is not "Keep".

	* src/cmdline.cc:
	Fixed the "first" variable in the prompting code -- presently its
	sole purpose in life seems to be to cause
	Debian Bugs #141925, 141720, and 222907.

	I think it was MEANT to say "only drop out of the repl automatically
	the first time around", which means its use was reversed from the
	intended meaning.  Fixed by adding a bang.

	* src/pkg_view.cc:
	Many changes to the messages shown in the package information area:
	make more extensive use of fragf, make the formatting and wording more
	consistent, fix some corner cases.

	* src/generic/apt.cc:
	Flag any package with the InstBroken property as broken,
	and only those packages. (this should encompass NowBroken&&!Install()
	packages, though, since those will also be InstBroken)

	* ChangeLog:
	Retroactively create an entry for the upgrading packages keybinding.

	* src/pkg_view.cc, src/generic/infer_reason.cc, src/generic/infer_reason.h:
	Add support for inferring why a package is broken.

	In addition, adjusted the display of brokenness to handle conflicts
	properly (so we don't see things like "foo conflicts with foo").

	* README, help.txt, src/defaults.cc, src/ui.cc:
	Add a keybinding for upgrading packages.

	* src/apt_options.cc:
	Sync the value of Auto-Upgrade with aptcache.cc

	* ChangeLog:
	Retroactively added a Debian bug markup.

	* src/generic/aptcache.cc:
	Don't upgrade packages by default.

	* README, ChangeLog:
	Update the documentation to describe the package information area,
	at least a little bit.

	* README:
	I give in; use "command-line interface" instead of "non-interactive"
	and "visual" instead of "interactive".

	* src/apt_options.cc:
	Add padding between the columns of option dialogs.

	* src/vscreen/vs_table.cc:
	Swap nrows/ncols so that they appear in the correct calculations
	of column separation; this gets the colsep stuff working.

	* src/vscreen/testvscreen.cc:
	Add reverse-cycling support in addition to forward-cycling.

	* src/vscreen/vs_table.cc, src/vscreen/vs_table.h, src/vscreen/testvscreen.cc:
	Add rudimentary support for padding between rows and columns of tables.

	* src/vscreen/testvscreen.cc:
	Correct the same misuse of vs_table (add_widget instead of
	add_widget_opts) in the table test in testvscreen.

	* src/pkg_view.cc:
	Correct a more egregious misuse of vs_table.

	* src/pkg_view.cc, src/vscreen/testvscreen.cc:
	Correct a slight misuse of vs_table (which shouldn't have affected
	the output, though)

	* src/pkg_view.cc:
	Actually hook up the scrollbar to the description area.

	* src/pkg_view.cc:
	Add a scrollbar to the package description/reason areas.

	* Changelog:
	The following entry is for src/pkg_item.*, not src/vscreen/pkg_item.*

	* src/pkg_item.cc, src/pkg_item.h:
	Undo an error that slipped in between yesterday and today:
	I accidentally (how??) deleted the initializer for info_signal,
	causing the long descriptions of packages to not be displayed (and
	probably eventually leading to a crash)

	In the process, moved the implementation of pkg_item from its .h
	file to its .cc file.

	* src/vscreen/vs_text_layout.cc:
	Reset the layout position to the beginning when a new fragment is
	loaded.

	* src/vscreen/vs_text_layout.cc:
	Fix the scrollbar position in some corner cases.

	* src/vscreen/vs_scrollbar.cc:
	Fix the scrollbar to display the thumb correctly when val==max.

	* src/vscreen/testvscreen.cc:
	Test the scrollbarification of the text layout.

	* src/vscreen/vs_text_layout.cc:
	Actually write the do_signal method (oops).

	* src/vscreen/vs_text_layout.cc:
	Added preliminary support for a signal that tracks the current
	location of the view within the text (eg, for a scrollbar).

	Also added a call to freshen_contents() in line_up (oops!).

2004-02-02  Daniel Burrows  <dburrows@debian.org>

	* src/Makefile.am, src/pkg_description_treeitem.cc, src/pkg_description_treeitem.h, src/pkg_info_screen.cc, src/pkg_item.cc, src/ver_item.cc, po/POTFILES.in:
	Eliminate pkg_description_treeitem.  Deleted the mostly-useless
	"description" action from pkg_items and ver_items at the same time.

	* src/vscreen/fragment.cc:
	Preserve blank lines in a flowbox.

	* src/vscreen/fragment.cc, src/vscreen/fragment.h, src/vscreen/testvscreen.cc:
	Add a formatting code to insert newline fragments.

	* src/vscreen/fragment.cc, src/vscreen/fragment.h, src/vscreen/testvscreen.cc:
	Add a formatting code to insert character strings directly.	

	* src/vscreen/fragment.cc, src/vscreen/fragment.h, src/vscreen/testvscreen.cc:
	Add formatting codes to control some aspects of the character
	attributes; optimize text fragment generation.

	* src/vscreen/vs_layout_item.cc, src/vsceen/vs_layout_item.h, src/vscreen/testvscreen.cc:
	Clean up the pkg_description_treeitem code, and push it down into
	the generic vscreen stuff as a general way of embedding fragments
	in trees.

	* src/desc_parse.cc, src/desc_parse.h, src/pkg_view.cc, src/pkg_description_treeitem.h, src/pkg_description_treeitem.cc:
	Use the next layout code to correctly display and wrap descriptions
	in info screens.

2004-02-01  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptcache.cc:
	Always use Last-Change to store whether a package was
	automatically installed; the problem is that otherwise,
	running an older version of aptitude can irretreivably
	wipe out your automaticity selections.

	However, a new name is supported for input; a future version will
	use Install-Reason in output as well as input of state files.

	* src/pkg_grouppolicy.cc:
	Create a tree in previews for uninstalled packages which are
	suggested by other packages which are being installed.

	* src/generic/infer_reason.cc:
	Fix a crash introduced by the previous change.

	* src/pkg_view.cc, src/generic/infer_reason.cc, src/generic/infer_reason.cc:
	Add code to display packages which are being installed and which
	suggest a package that isn't being installed in the latter
	package's "state info screen".

	* src/pkg_view.cc:
	For groups with built-in descriptions, display their description
	instead of a generic comment.

	* src/pkg_view.h, src/pkg_view.cc, src/ui.cc:
	Display the informational display on the reasons that a package's
	state is being modified by default in the preview tree.

	* src/generic/infer_reason.cc:
	Fix the logic of opertor< to make it actually be an ordering.
	This means that reasons will now be displayed ina more sensible
	order.

	* src/pkg_view.cc:
	If a package isn't initially selected, display the
	"no package selected" note.

	* src/pkg_view.cc:
	Use fragf to generate information about a package's state,
	which will make life easier for translators (I hope).

	* src/vscreen/fragment.cc, src/vscreen/fragment.h, src/vscreen/testvscreen.cc:
	Add a printf-alike for fragments.

	* src/vscreen/fragment.cc:
	Fix reversed logic which prevented the indentbox from working in
	the first place.

	* src/vscreen/testvscreen.cc:
	Add a test for the indentbox.

	* src/vscreen/fragment.cc, src/vscreen/fragment.h:
	Give indentbox two arguments, to allow the indentation of the
	first line to be separate fromt he indentation of the remaining
	lines. (so that, eg, bulletted lists work properly)

	* src/default.cc, src/pkg_view.cc:
	Use the layout code to display reasons about why a package is
	being upgraded.  Adds colors "ToDep", "FromDep", and "Bullet".

	* src/vscreen/fragment.h, src/vscreen/fragment.cc:
	Reverse the order of arguments for indentbox.

	* src/vscreen/fragment.h:
	Add a variant of text_fragment for const char *.

	* src/pkg_view.cc:
	Use the text-layout code to show descriptions.

	* src/vscreen/vs_text_layout.cc, src/vscreen/vs_text_layout.h:
	Implement the default constructor and add a method to change the
	active fragment.

	* src/vscreen/testvscreen.cc:
	Test embedding a sequence in a flowbox.

	* src/vscreen/fragment.cc, src/vscreen/fragment.h:
	Add a varargs overloading for sequence_fragment.

	* src/vscreen/vs_text_layout.cc:
	Hook up the line_down/line_up signals and get them working.

	* src/vscreen/fragment.cc, src/vscreen/fragment.h, src/vscreen/testvscreen.cc:
	Add a "newline_fragment", which just produces a newline wherever it
	occurs.

	* src/vscreen/fragment.cc:
	Fix a silly thinko in the sequence fragment: of course rval.back()
	aborts when rval is empty!

	* src/vscreen/fragment.cc:
	Fix the flowbox to not put whitespace at the beginning of a line,
	and to not chop off the last word of its argument.

	* src/vscreen/vs_text_layout.cc:
	Apparently addchnstr will run off the end of a string if you ask
	it to, but not the end of the window; adjust how I call it to take
	this into account.

	* src/vscreen/testvscreen.cc:
	Use a more minimal test case.

	* src/vscreen/vs_text_layout.cc:
	Initialize lastw.

	* src/vscreen/fragment_contents.h:
	Add operator= to the iterators.

	* src/vscreen/vs_text_layout.cc, src/vscreen/vs_text_layout.h:
	Actually catch resizes of the layout widget.

	* curses++.cc, curses++.h, fragment.cc:
	Changed textfragment and sequencefragment to have the correct
	signatures, and added a constructor for chstring that sets an
	attribute for the whole string.  It now links but is untested.

	* src/vscreen/Makefile.am, src/vscreen/curses++.h, src/vscreen/fragment.cc, src/vscreen/fragment.h, src/vscreen/fragment_contents.h, src/vscreen/testvscreen, src/vscreen/vs_text_layout.cc, src/vscreen/vs_text_layout.h:
	Add the layout code to the sources-which-shohuld-be-compiled,
	and add a simple test of it to the test program.  It compiles but
	doesn't link.

	* po/POTFILES.in, src/vscreen/fragment.cc, src/vscreen/fragment.h, src/vscreen/fragment_contents.h, src/vscreen/vs_text_layout.cc, src/vscreen/vs_text_layout.h:
	Add basic infrastructure for a much more intelligent
	text-layout widget.

	* src/vscreen/curses++.h, src/vscreen/curses++.cc:
	Add an operator= which can convert from a std::string to a chstring.

	* src/mine/cmine.cc:
	Mark more strings for i18n.

	* configure.ac:
	Add cs to ALL_LINGUAS, and move ja to be in its proper
	alphabetical place.

	* po/cs.po, help-cs.txt, src/mine/help-mine-cs.txt:
	Czech translation from Miroslav Kure.

	* po/da.po:
	Updates to da.po from Morten Bo Johansen.

	* src/vscreen/curses++.h, src/vscreen/curses++.cc:
	Add a parameterization of basic_string on chtype, and some methods
	which support writing such a string to a cwindow.  (this ended up
	being nastier than expected, because it involves specializing
	char_traits and all sorts of grossness)

	* src/pkg_view.cc:
	Remove some code that is old, buggy, obsoleted, and has been commented
	out for ages.

2004-01-31  Daniel Burrows  <dburrows@debian.org>

	* src/pkg_view.cc:
	Add a view to the "description" area which shows an explanation
	of the current package's state.

	* src/vscreen/vs_pager.h:
	Initialize the superclass with the correct values (use the
	argument, which is valid, rather than the not-yet-initialized
	field of *this)

	* src/vscreen/vs_pager.h:
	Add a missing "public:". (oops)

	* src/vscreen/vs_pager.h:
	Right, add a set_text based on a std::string to that class.

	* src/vscreen/vs_pager.h:
	Add support for a pager based on a std::string (basically to
	handle memory more sanely).

	* src/defaults.cc, src/pkg_view.cc:
	Change "i" so that it cycles the multiplexer for the
	"description area".

	* src/ui.cc:
	Use PACKAGE as the base config directory, not Aptitude, in several
	places (comes to the same thing usually, this is for consistency).

	* src/cmdline.cc, src/generic/infer_reason.cc, src/generic/infer_reason.h:
	Split the code to infer *why* a package changed state into a
	separate file, the better to invoke it from more places than
	just cmdline.cc.

	* src/cmdline.cc:
	Cut out some unnecessary arguments to cmdline_show_instreason.

	* src/pkg_columnizer.cc, src/generic/apt.cc, src/generic/aptcache.h, src/generic/aptcache.cc, src/generic/matchers.cc:
	Split "auto" information into information about installations
	and information about removals.  Changed logic in setting
	install/remove reasons so that only the initial installation of
	a package causes it to be marked "auto" (meaning that you can now
	easily unhold a package without clearing its auto flag).

	Debian bug #159582.

	* src/generic/matchers.cc:
	Fix a call to pkg_name_matcher::init, which was left wrong by the
	removal of ~e (oops, why didn't I catch this?).

2004-01-30  Daniel Burrows  <dburrows@debian.org>

	* src/generic/matchers.cc, README:
	Excise the exact_match code; it is buggy, inelegant, and
	superseded by regexps.

	You can get the effect of ~epattern with ^pattern$.
	(Debian bug #196447)

	* src/ui.cc:
	Fix several untranslatable strings pointed out by Jean-Luc Coulon.
	(Debian bug #230060)

2004-01-29  Daniel Burrows  <dburrows@debian.org>

	* src/cmdline.cc:
	Only test the candidate version when searching, and don't go
	through the time-consuming process of reading the dselect selections.

	* src/download.cc:
	Fix a typo that was introduced in translation updates.

	* src/vscreen/vscreen.cc:
	Include aptitude.h to pick up the definition of _() (oops).

	* src/pkg_item.cc, src/cmdline.cc, src/download.cc, src/mine/cmine.cc, src/vscreen/vscreen.cc, src/vscreen/curses++.cc:
	Miroslav Kure pointed out that many more strings were not marked for
	i18n; trawled through the source to try to find and mark them.

	In the process, killed a useless printf in resize().

2004-01-26  Daniel Burrows  <dburrows@debian.org>

	* src/download.cc, src/vscreen/vscreen.h, src/vscreen/vscreen.cc:
	  Fix issue brought up by Cristoph Heine: libapt clobbers some
	  signals when running dpkg, and so the aptitude handlers need
	  to be restored after dpkg is run.

	* src/download.cc, src/load_grouppolicy.cc, src/main.cc, src/pkg_grouppolicy.cc:
	  Several typo fixes and editorial corrections from Miroslav Kure.

	* src/ui.cc:
	  Apply i18n to the "Become Root" and "Don't Become Root" dialog
	  buttons so that people can translate them. (thanks to Miroslav
	  Kure for pointing this out)

	* src/apt_options.cc:
	  Remove the idempotency option from the UI options dialog -- its
	  description is obscure and it can be set from the config file for
	  the few people who care.

2004-01-22  Daniel Burrows  <dburrows@debian.org>

	* po/POTFILES.in:
	  Update the list of source files to generate .pos from, thanks
	  to a nudge from Danilo Piazzalunga.

	* po/it.po:
	  Add an Italian translation, thanks to 
	  Danilo Piazzalunga <danilopiazza@libero.it>.

2004-01-21  Daniel Burrows  <dburrows@debian.org>

	* configure.in, configure.ac, acconfig.h:
	  Update configure script for 2.5.  This resulted in a much less
	  readable script, since newlines are more significant than they
	  used to be :-(

2004-01-10  Daniel Burrows  <dburrows@debian.org>

	* src/apt_options.cc:
	  When saving options, don't rely on the order in which libsigc++
	  happens to call slots.  This fixes the problem where the
	  configuration was saved before it was updated with changes,
	  leading to the appearence that it wasn't being saved at all.
	  (Debian bug #216268)

	* src/cmdline.cc:
	  Only return one match for each package (Debian bug #221289).

	* po/pt_BR.po:
	  Translation updates from Gustavo Silva (Debian bug #214116 again).

2003-10-24  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptcache.cc, src/cmdline.cc, src/cmdline_parse.cc:
	  Check for errors with _error->PendingError(), not
	  _error->empty().  Among other things, this means we no
	  longer terminate abruptly if an entry is added to sources.list.
	  (Debian bug #143732, among others)

	* Makefile.am:
	  Actually distribute help-pt_BR.txt in source distributions, and
	  install it from install-data.

2003-10-05  Daniel Burrows  <dburrows@debian.org>

	* po/pt_BR.po, help-pt_BR.txt:
	  Add pt_BR translation of help.txt, from
	Andre Luis Lopes <andrelop@debian.org>.  (Debian bug #214116)

2003-10-04  Daniel Burrows  <dburrows@debian.org>

	* po/de.po:
	Apply patch from Sebastian Kapfe to fix the German translation
	of the "limit" command's dialog box. (Debian bug #214021)

2003-10-02  Daniel Burrows  <dburrows@debian.org>

	* src/apt_options.cc:
	Fix the bug where entering the Preferences dialog for the first time
	caused Suggested packages to be installed automatically.

2003-06-09  Daniel Burrows  <dburrows@debian.org>

	* configure.in, NEWS, README:
	Bump version to 0.2.13

2003-06-02  Daniel Burrows  <dburrows@debian.org>

	* configure.in:
	Add an option --disable-werror, and build with sigc++-1.2 instead
	of sigc++-1.0.

	* src/Makefile.am, src/generic/Makefile.am, src/mine/Makefile.am, src/vscreen/Makefile.am, src/vscreen/config/Makefile.am:
	Use the WERROR variable to decide whether to use -Werror.

	* src/apt_config_widgets.h, src/apt_info_tree.cc, src/apt_options.cc, src/cmdline.cc, src/cmdline_parse.h, src/download.cc, src/download_list.cc, src/download_manager.h, src/edit_pkg_hier.cc, src/main.cc, src/pkg_grouppolicy.cc, src/pkg_grouppolicy.h, src/pkg_item.cc, src/pkg_item.h, src/pkg_subtree.cc, src/pkg_tree.cc, src/pkg_view.cc, src/ui.cc, src/ui.h, src/generic/aptcache.h, src/generic/config_signal.cc, src/generic/config_signal.h, src/mine/cmine.cc, src/vscreen/testvscreen.cc, src/vscreen/vs_bin.cc, src/vscreen/vs_button.cc, src/vscreen/vs_center.cc, src/vscreen/vs_editline.cc, src/vscreen/vs_frame.cc, src/vscreen/vs_menu.cc, src/vscreen/vs_menubar.cc, src/vscreen/vs_minibuf_win.cc, src/vscreen/vs_multiplex.cc, src/vscreen/vs_passthrough.cc, src/vscreen/vs_radiogroup.cc, src/vscreen/vs_radiogroup.h, src/vscreen/vs_stacked.cc, src/vscreen/vs_table.cc, src/vscreen/vs_togglebutton.h, src/vscreen/vs_util.cc, src/vscreen/vscreen.h, src/vscreen/vscreen_widget.cc, src/vscreen/vscreen_widget.h:
	Port to sigc++-1.2.  Many changes, mostly minor.  A partial summary:
	  - Fix include file names.
	  - Object slots now need a reference as the first argument, not
	    a pointer.
	  - Emitting a signal now passes the arguments by reference, which
	    is significant if the argument could be modified during the
	    execution of the signal.  Fixed some possible occurances of
	    this (there are probably more)
	  - Slots have to be passed by value, not argument, now.
	  - Calling a slot is done by operation(), not ::call().

2003-06-01  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptcache.cc, src/generic/matchers.cc, src/generic/tasks.cc, src/vscreen/curses++.h, src/vscreen/config/column_definition.h, src/vscreen/columnify.h:
	  Add missing #includes for assert.h (Debian bugs #195514, #194424)

	* po/pt_BR.po:
	  Merge updates from Andre Luis Lopes. (Debian bug #195755)

2003-05-11  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptcache.cc:
	  Don't memcpy() structures containing std::strings (oops!)
	Thanks to Peter Lundkvist and Sami Liedes for pointing this out.
	  (Debian bug #192073, and maybe 109420)

	* src/pkg_grouppolicy.cc:
	  Fix a memory leak in pkg_grouppolicy_status.

	* src/vscreen/vs_menu.cc:
	  Always initialize cursorloc to 0.

	* src/apt_info_screen.cc:
	  Don't exit abruptly if the user reloads the cache while an info
	widget is active, and the version of the package that was being viewed
	is no longer in the archive.  (I don't think this has broader
	implications)  Peter Lundkvist gets credit for this and the above two
	fixes.

2003-03-05  Daniel Burrows  <dburrows@debian.org>

	* src/pkg_columnizer.cc, src/pkg_ver_item.cc:
	  Finally fix the problem that caused the first letter of the
	description to sometimes appear as a flag character.  Evidently I
	overlooked an accidental fall-through in a switch statement.  Kudos
	to Seneca <seneca-cunningham@rogers.com> for finding this nasty.
	(Debian bug #183462)

	  All cases in the switch statements in the columnizer should now
	have a terminal break (except for a few which are completely
	trivial; ie, the only thing in the case is a "return"), which will
	make this bug trigger an error if it occurs again.

2003-02-10  Daniel Burrows  <dburrows@debian.org>

	* NEWS, README, configure.in:
	  version bumped to 0.2.12

	* src/vscreen.cc:
	  Re-enabled asynchronous resizing.

	* src/main.cc:
	  Add a -t argument, like apt's.  (Debian bug #151583)

	* src/cmdline.cc:
	  "aptitude install task-name" does what you might think.
	  (Debian bug #165624)

	* src/cmdline.cc:
	  Signal an error if any of a group of packages fails.

	* src/vscreen/vs_table.cc:
	  Re-apply the fix for the vs_table memory leak, which was wiped
	  out in the massive reversion below.

	* src/cmdline.cc, src/main.cc:
	  Finish the work on customized sorting of search output.

	* README:
	  Document (maybe not very clearly -- rewrite this section?)
	that regular expressions are valid in search terms.

	* src/generic/aptcache.cc:
	  If, in GainLock(), we fail and have to delete Lock, make sure
	  to NULL it out for safety's sake.

2003-02-09  Daniel Burrows  <dburrows@debian.org>

	* po/fr.po:
	  Set Content-Type=iso-8859-1 (Debian bug #156616)

	* src/dep_item.cc:
	  Implement Clifton Wood's suggestion to indicate that
	  dependencies don't even have an available version.
	  (Debian bug #157950)

	* src/ui.cc:
	  Display "Download/Install/Remove" packages for "g" in the
	  quick-help bar.  (Debian bug #158966)

	* README:
	  Correctly state that logging is on by default.

	* help.txt:
	  Document M/m.  (Debian bug #160936, #154000)

	* po/pt_BR.po:
	  Updates from Andre Luis Lopes <andrelop@ig.com.br>.
	  (Debian bug #162512)

	* src/generic/aptcache.cc:
	  Don't save or load reinstall state.  Better than having it
	  stick around ad nauseum.
	  (Debian bugs #167237, 121346)

	* src/load_config.cc, src/vscreen/config/colors.cc:
	  Properly support bold colors in the configuration file.
	  (Debian bug #168287)
	  Note that bold colors may not actually WORK, but that's
	  a separate problem.

	* po/da.po:
	  Updates from Morten Bo Johansen <mojo@image.dk>.
	  (Debian bug #171903)

	* src/download_list.cc:
	  Fix integer overflow problem (Debian bug #175123)

	* src/generic/config_signal.h, src/generic/pkg_hier.cc, src/generic/pkg_hier.h, src/generic/strhash.h, src/mine/cmine.cc, src/vscreen/config/colors.cc, src/vscreen/config/keybindings.h, src/vscreen/config/keybindings.cc, src/vscreen/curses++.h, src/vscreen/curses++.cc, src/vscreen/curses++.h, src/vscreen/testvscreen.cc, src/vscreen/vs_multiplex.h, src/vscreen/vs_subtree.h, src/vscreen/vs_table.cc, src/vscreen/vs_treeitem.cc, src/vscreen/vs_util.cc, src/vscreen/vscreen.cc, src/vscreen/vscreen_widget.cc, src/vscreen/vscreen_widget.h, src/dep_item.cc, src/download_screen.h, src/edit_pkg_hier.cc, src/pkg_grouppolicy.cc, src/ui.cc, po/es.po, po/fr.po, po/gl.po, po/ja.po, po/pt_BR.po:
	  Back out the WINDOW * workaround -- libncurses is fixed now, and my
	window emulation was buggy.
	  Update to g++-3.2.

2002-10-27  Daniel Burrows  <dburrows@debian.org>

	* help.txt, help-fi.txt, help-fr.txt, help-gl.txt, help-pl.txt:
	  Remove reference to "x" keystroke (Debian bug #166571)

2002-09-09  Daniel Burrows  <dburrows@brown.edu>

	* src/generic/matchers.cc:
	  Update the matcher parsing code to allow ()|!|~ to be tilde-escaped
	within a word.  Without this, entering complex regular expressions is
	well-nigh impossible.
	  Remaining issue: if your expression has (eg) a trailing hyphen,
	the command-line mode will treat it as a command to REMOVE all
	the packages matched, even if you're trying to (eg) mark them as
	having been automatically installed.

2002-07-31  Daniel Burrows  <dburrows@brown.edu>

	* src/download.cc:
	  Redid the outputting of size changes in the log file, negative
	sizes are now shown correctly and sizes are converted to a
	human-readable format. (Debian bug #154924)

	* README, src/main.cc, src/cmdline.cc:
	  -Z command-line option to show size deltas when performing actions
	from the command-line.

2002-07-12  Daniel Burrows  <dburrows@brown.edu>

	* src/generic/aptcache.cc:
	  Fix the aptitude-wants-to-remove-dpkg problem (Debian bug #151701)
	  Essentially, aptitude was ignoring pre-depends when marking packages
	in the garbage-collector, resulting in conflicting information (it
	wanted to automatically install dselect to satisfy the pre-depends,
	but then wanted to automatically remove it because nothing depended
	on it)

2002-05-09  Daniel Burrows  <dburrows@debian.org>

	* src/generic/aptcache.cc:
	  Wrapped the initial marking of packages in an action group
	declaration.  When there were a lot of packages to be marked, the
	mark_and_sweep code was getting called for *every single package*,
	with disastrous results as you can no doubt imagine.

2002-05-09  Daniel Burrows  <dburrows@brown.edu>

	* src/cmdline.cc, src/cmdling.h, src/main.cc:
	  Added hooks to allow sorting from the command line (not yet used)

2002-05-05  Daniel Burrows  <dburrows@brown.edu>

	* src/vscreen/curses++.h:
	  Remember to initialize the background settings of cwindows.

	* src/vscreen/vscreen.cc:
	  Use refresh() instead of wnoutrefresh(); [set cursor]; doupdate() --
	this eliminates the problem where the cursor randomly jumps to the edge
	of the screen.

	* src/vscreen/vs_table.cc:
	  Delete row_expandable and col_expandable at the end of vs_table.cc.
	(this was leaking memory)

	* po/de.po:
	  Fix README/LIESMICH problem.  (Debian bug #145897)

	* src/ui.cc:
	  Really make aptitude compile.

	* src/vscreen/vscreen.cc:
	  Make resizing work asynchronously again.

	* src/mine/cmine.cc:
	  Removed an if(get_win()) test to make things compile again.

	* src/vscreen/vscreen.cc:
	  Hide the cursor as appropriate again.

	* src/vscreen/vscreen.cc:
	  Partly fix cursor-location-display (it still doesn't hide
	correctly, though)

	* src/vscreen/vscreen_widget.cc:
	  Allow setting the owner window to NULL.

	* src/vscreen/curses++.cc:
	  Call ::bkgdset *before* ::attrset since the former seems to
	"override" the latter (yay undocumented behavior!)

2002-05-04  Daniel Burrows  <dburrows@brown.edu>

	* curses++.h:
	  Don't call ::move from move -- update our internal data structures
	instead (doh!)

	* src/vscreen/curses++.h, src/vscreen/curses++.cc, src/vscreen/vscreen.cc, src/vscreen/vscreen_widget.h, src/vscreen/vscreen_width.cc, src/vscreen/vs_multiplex.h, src/vscreen/vs_table.cc:
	  The vscreen code no longer creates a curses WINDOW * for each
	widget.  I hope to eventually fix all the crashes on resize (and some
	other weird behavior) by doing this; for now, though, everything is
	broken.

2002-04-27  Daniel Burrows  <dburrows@brown.edu>

	* src/pkg_view.cc:
	  Fix the parsing of paragraphs so that multi-line paragraphs are
	really merged after all.

2002-04-24  Daniel Burrows  <dburrows@brown.edu>

	* src/generic/matchers.cc:
	  Use POSIX regular expressions to match (instead of pure strings)
	  (Debian bug #142450)

2002-04-22  Daniel Burrows  <dburrows@brown.edu>

	* src/ui.cc, src/vscreen/vs_util.cc, src/vscreen/vs_util.h:
	  Minimal support for searching in text pagers (finally)

	* function_pkgs:
	  Merge changes from Nov. 22 (oops)

	* src/cmdline.h, src/cmdline.cc, main.cc:
	  Honor -S foo on the command-line.

2002-04-21  Daniel Burrows  <dburrows@brown.edu>

	* configure.in, NEWS, README:
	  Version bumped to 0.2.11.1.

	* po/fi.po:
	  Finnish updates from Jaakko Kangasharju <ashar@iki.fi>

	* aptitude.1.pl, help-pl.txt, po/pl.po:
	  Polish updates from Michal Politowski <mpol@charybda.icm.edu.pl>
	  (Debian bug #143051)

	* aptitude.1:
	  Fix the reference to SEARCHING from the manpage. (Debian bug #142651)

	* README:
	  Include information on where to get CVS (Debian bug #141371)

	* src/cmdline.cc:
	  Comment out the above code -- it doesn't work and while it seems
	to be harmless, I want to put another minor release out for woody.

2002-04-18  Daniel Burrows  <dburrows@brown.edu>

	* src/cmdline.cc:
	  Show why BROKEN packages are BROKEN.

2002-04-07  Daniel Burrows  <dburrows@brown.edu>

	* src/cmdline.cc:
	  Fixed compilation errors that only showed up when optimization
	was enabled.  (oops)

	* NEWS:
	  A few more updates and tweaks: added a Debian bug number, named
	the release.

	* src/pkg_view.cc:
	  Only allow the description widget to be focussed if it is scrollable.

2002-04-06  Daniel Burrows  <dburrows@brown.edu>

	* src/pkg_view.cc:
	  Fixed two minor formatting bugs: bulleted lists no longer
	have an extraneous space in front of them, and the first item
	of a bulleted list is no longer indented one square too few (when
	it follows a wrapped paragraph, that is)

	* src/pkg_view.cc:
	  Rewrote the description formatting code completely.  It is no
	longer a hairball, and is much more simpler and more understandable.
	This should clear up current bugs and avoid future ones.
	  (Debian bug #137783)

	* README, configure.in, NEWS:
	  Update for version 0.2.11.

	* README:
	  Document the Reinstall keybinding, and correct the documentation
	of Install, Remove, and Hold.

	* src/pkg_columnizer.cc:
	  Give the "Tasks" tree a description.

	* src/cmdline.cc:
	  Correct some bad logic in the prompting code which suppressed many
	prompts, and handle essential prompting better.

	* src/pkg_columnizer.cc:
	  Add a %H display escape, which expands to the current
	computer's hostname. (Debian bug #137754)

	* src/pkg_grouppolicy.cc:
	  The same, for preview screens.

	* src/pkg_grouppolicy.cc:
	  Add description functionality to the "main" grouping level.

	* src/pkg_view.cc:
	  Don't allow the user to focus the "description" area unless there's
	an actual description there.

	* src/pkg_columnizer.cc:
	  Don't show an "available" version for obsolete/local packages.
	  (Debian bug #120872)

	* src/pkg_grouppolicy.cc, src/generic/apt.h, src/generic/apt.cc:
	  Moved the obsolete test into shared generic code.

	* README, aptitude.1, src/main.cc:
	  You can now set command-line parameters in the config file.
	  This might be useful for, eg, -V.

	* aptitude.1:
	  Document -P

	* README, src/apt_options.cc, src/pkg_item.cc:
	  Aptitude::UI::New-Package-Commands now defaults to true.

	* src/pkg_grouppolicy.cc:
	  Display the section short description next to the section again.

	* src/pkg_grouppolicy.cc:
	  For sections like "contrib/admin", show the description of the last
	element.

	* src/pkg_grouppolicy.cc:
	  Write descriptions (however stupid) for all sections.

	* src/cmdline.cc:
	  Don't suppress the preview when using always-prompt.

	* src/main.cc, src/cmdline.cc:
	  Added a -P option which forces the display of a prompt.

	* src/main.cc:
	  Add support for --version (Debian bug #141296)

	* src/vscreen/vs_table.cc:
	  Call get_focus() in layout_me() -- layout_me() is called when
	widgets change their focussability, and so we may need to update
	our focus location.

	* src/vscreen/vs_table.cc:
	  When changing the focus in get_focus(), notify the child widgets.

2002-04-03  Daniel Burrows  <dburrows@brown.edu>

	* src/cmdline.cc:
	  Don't interpret trailing +/-/_/= characters if keeping that
	character in the string gives us the name of an existing package.
	  (Debian bug #140933)

2002-03-28  Daniel Burrows  <dburrows@brown.edu>

	* src/pkg_view.cc:
	  Don't crash if pkg_description_widget::get_lines(false) is called
	while the widget is hidden (getmaxy()==0)
	  In particular, don't crash when the user tries to press a or z
	while the description is popped down.  (Debian bug #140361)

	* src/cmdline.cc:
	  Don't crash when displaying why a package was removed if another
	package conflicted with it.  We now check conflicts against the
	currently installed version (which IMO makes the most sense)

	* src/cmdline.cc:
	  instreason-display now works for auto-held packages.  However (oops)
	auto-held packages aren't found properly.  Needs to be fixed:)

2002-03-24  Daniel Burrows  <dburrows@brown.edu>

	* src/cmdline.cc:
	  Onve we've entered an interactive repl, don't abort even if we
	reach a state in which the prompt would have been skipped originally.

	* src/cmdline.cc:
	  Wrote some code to try to figure out why auto_held packages were
	held.  More work here as well.

	* src/pkg_grouppolicy.cc:
	  Wrote more long descriptions.  There's still work to do here.

	* src/pkg_grouppolicy.cc:
	  Use the task long descriptions.

	* src/apt_info_tree.cc, src/apt_info_tree.h, src/pkg_view.cc, src/pkg_view.h, src/ui.cc:
	  Activate the code to show long descriptions for subtrees.
	  Currently this only affects the "long description area" -- it
	should work for short descriptions in the future!

	* src/pkg_grouppolicy.cc, src/pkg_subtree.cc, src/pkg_subtree.h, src/pkg_tree.cc, src/pkg_tree.h:
	  More work to implement this feature.  Trees now have a signal for
	this, and pkg_subtrees can call on it.

	* src/dep_item.cc, src/dep_item.h, src/pkg_info_screen.cc, src/pkg_grouppolicy.cc, src/pkg_grouppolicy.h, src/pkg_ver_item.cc, src/pkg_ver_item.h:
	  Preliminary support for overloading the description field for
	non-packages.

	* src/cmdline.cc, src/main.cc:
	  Add support for an "unhold" command-line option.
	  (Debian bug #137770)

	* src/cmdline.cc:
	  Show x -> y version numbers for downgraded packages as well.

	* src/cmdline.cc:
	  Package entry in command-line mode now supports versions
	and archives.

	* src/cmdline.cc:
	  You can now toggle display of version info, toggle display of
	dependency info, and get help from the installation prompt.

	* src/cmdline.cc:
	  'e' at the prompt now enters the full UI.  I'm not sure whether
	the fact that this was a 10-line hack is wonderful or frightening.

	* src/cmdline.cc:
	  Only show "reasons" when showing a group of packages which was
	automatically selected/deselected/held.

	* src/cmdline.cc:
	  Detects "reasons" for packages removed due to unusedness.

2002-03-23  Daniel Burrows  <dburrows@brown.edu>

	* src/cmdline.cc:
	  You can now give additional commands at the prompt.
	  Eg, after "aptitude install xemacs21" selects xemacs21-mule,
	do "- xemacs21-mule + xemacs21-nomule" to fix it.

	* src/cmdline.cc:
	  Fix the cmdline stuff so it actually works again.

	* src/cmdline.cc:
	  Split cmdline_pkgaction in preparation for future enhancements.

	* src/cmdline.cc, src/download.cc, src/download.h:
	  Report exit status according to success/failure. (Debian bug #139615)
	  Needs testing.

	* src/cmdline.cc:
	  Use action_states to decide whether to show dependency
	information.  This makes it work properly with dist-upgrades.

	* src/cmdline.cc:
	  Filter duplicates when printing dependencies.

	* src/cmdline.cc, src/cmdline.h, main.cc:
	  -D for showing dependencies, -V for showing versions, only
	show the extra simulation stuff with -v.

	* src/cmdline.cc:
	  Do something sane when the user tries to install a virtual package.

	* src/cmdline.cc:
	  Fix the dependency-checking code -- it was checking versioned
	dependencies using the version of the package declaring them (oops)

2002-03-21  Daniel Burrows  <dburrows@brown.edu>
	* src/cmdline.cc:
	  Extend the dependency checking to removed packages.  (need
	to test this more)

	* src/cmdline.cc, src/cmdline.h:
	  Use verbosity for something.  With -v, display version numbers of
	intended installations; with -vv, also display dependency information.
	(should these be orthoganol?)

	* src/cmdline.cc, src/cmdline.h:
	  Moo.

	* src/main.cc:
	  Introduce support for verbosity.

2002-03-20  Daniel Burrows  <dburrows@brown.edu>

	* src/cmdline.cc:
	  Don't segfault in some cases when displaying dependencies,
	and suppress unnecessary dependency indications when upgrading.
	("install" with no arguments still displays too much stuff)

	* src/cmdline.cc:
	  The start of better previewing (showing information about why
	packages were installed/removed/etc)

	* src/main.cc:
	  Document "download" in the --help output.  (Debian bug #138150)

	* README, help.txt, src/apt_options.cc:
	  Remove references to allow-reinstall, and document the "L" key (bad
	keybinding)

	* src/dep_item.cc, src/dep_item.h, src/pkg_item.cc, src/pkg_item.h, src/pkg_node.cc, src/pkg_node.h, src/pkg_subtree.cc, src/pkg_subtree.h, src/pkg_ver_item.cc, src/pkg_ver_item.h: 
	  Separate reinstallation from +/-/_/=.  (Debian bug #138122)

	* src/generic/apt.cc:
	  Reinstate the stuff necessary to detect reinstalled packages.
	  It was accidently removed in the last version.
	  (Debian bug #138120)

	* src/download.cc:
	  Reload the cache if an update is aborted.  (Debian bug #138070)

2002-03-19  Daniel Burrows  <dburrows@brown.edu>

	* src/vscreen/vs_bin.cc, src/vscreen/vs_menubar.cc, src/vscreen/vs_minibuf_win.cc, src/vscreen/vs_passthrough.cc, src/vscreen/vs_passthrough.h, src/vscreen/vs_stacked.cc, src/vscreen/vscreen.cc:
	  Many updates to the way focus is handled.  It should be more
	"correct" now.  Probably this should be tested quite a bit.

2002-03-17  Daniel Burrows  <dburrows@brown.edu>

	* src/generic/tasks.cc:
	  #include <ctype.h> explicitly before any STL stuff.  g++-3 didn't
	like compiling the new code without this change (stupid)

	* src/download.cc, src/apt_options.cc:
	  Fine, fine, autoclean defaults to false.  (Debian bug #138685)

2002-03-15  Daniel Burrows  <dburrows@brown.edu>

	* src/vscreen/vscreen.cc:
	  Focus the toplevel widget when it is assigned.

	* src/vscreen/vs_stacked.cc:
	  Similarly, give focus to newly added widgets.

	* src/vscreen/vs_menubar.cc:
	  Give focus to the subwidget as necessary.

	* src/vscreen/vs_bin.cc:
	  Focus widgets added to the bin.

	* src/vscreen/vs_multiplex.cc:
	  Correctly delegate "focused" state to subwidgets.

	* src/vscreen/vs_table.cc:
	  Only give or remove focus from the current subwidget if we
	have focus ourselves.

	* src/vscreen/vs_tree.cc:
	  Hide the highlight if the tree is not focussed.

	* src/vscreen/vs_table.cc:
	  Call vscreen_update() after focussing a table's subwidget so that
	cursor locations are adjusted.

	* src/vscreen/vs_tree.cc:
	  Don't run off the end of the list and blow up when the user starts
	a search from the last item in a list. (Debian bug #136967)

	* src/vscreen/vs_subtree.h:
	  Use ++realitem and --realitem rather than the post-versions.
	  Guard dereferencing of list items with an assertion.

	* src/pkg_tree.cc:
	  Set doing_incsearch to false when rebuilding the tree.

2002-03-13  Daniel Burrows  <dburrows@brown.edu>

	* src/pkg_grouppolicy.cc:
	  s/Adminitrative/Administrative/

2002-03-11  Daniel Burrows  <dburrows@brown.edu>

	* src/cmdline.cc:
	  Don't print the "Reading ..." messages from the "search" command
	 (Debian bug #136873)

	* src/download_list.cc:
	  Print "stalled" when the download is stalled. (Debian bug #136520)

	* src/cmdline.cc:
	  Don't prompt on upgrade when nothing is to be done.
	  (Debian bug #137302)

	* src/cmdline.cc:
	  Basic support for SIGWINCH (Debian bug #137945)

2002-03-08  Daniel Burrows  <dburrows@brown.edu>
	* po/de.po:
	  Massive update to the German translation by
	Erich Schubert <erich@debian.org>

2002-03-03  Daniel Burrows  <dburrows@brown.edu>

	* src/pkg_grouppolicy.cc:
	  Added a description for "alien" (Debian bug #136684)

	* src/generic/tasks.cc:
	  aptitude got confused by Tasks lines like "Tasks: a, b" and
	started looking for a task named " b".  Fixed.  (Debian bug #136684)

2002-03-02  Daniel Burrows  <dburrows@brown.edu>

	* src/cmdline.cc:
	  Fix some more "argh g++ screws up on return tracing" bugs.
	  Note to self: remember to send a bug report!

	* src/download.cc:
	  The "deleting obsolete downloaded files" thing was missing a \n;
	fixed.

	* NEWS, README, configure.in:
	  Version bumped to 0.2.10

	* README:
	  Update the documentation about ~r and ~g.

	* src/main.cc, aptitude.1:
	  Document -f.

	* src/download_list.cc:
	  Don't add "s" after the time units. (Debian bug #135567)

	* README:
	  Minor formatting fixes.

	* src/generic/matchers.cc:
	  Resurrect the old revdep matcher (Debian bug #135571) and make a
	'garbage matcher' (~g) which matches stuff that would be garbage
	collected.

	* src/generic/aptcache.cc:
	  Set the "garbage" flag on anything unmarked to "true" -- not just
	on installed packages.

	* src/generic/aptcache.cc:
	  Handle the "never remove these" matchers by adding such packages
	to the rootset, not by hacking them into not being removed.
	(otherwise, their dependants would be marked for removal as well)

	* aptitude.1:
	  Update the email address to dburrows@debian.org

	* src/cmdline.cc, src/cmdline.h, src/main.cc:
	  None of your business. :)

	* src/main.cc:
	  Update the usage documentation and link it to the "help" command.

	* aptitude.1:
	  Document -w/--width.

	* README, aptitude.1:
	  Added a large quantity of documentation on the new command-line
	actions.  Also, removed the INSTALLATION section that Joey objected
	to from the manual.  (Debian bug #136478, sort of)

	* src/main.cc:
	  Make the long option --display-format synonymous to -F, not -f.

	* src/cmdline.cc, src/cmdline.h, src/main.cc:
	  Added a "download" command which downloads deb files.

	* src/generic/pkg_acqfile.h, src/generic/pkg_acqfile.cc, src/generic/pkg_changelog.cc:
	  Tweaked the changelog downloader to be generic, and added a
	hacked routine to download a .deb file quickly.  All workarounds
	for apt-pkg's limitations :(

	* src/generic/aptcache.cc:
	  Don't mark things as having changed automatically if they changed
	automatically to a state that matches their aptitude state.

	  After much intrepid hacking, I found the reason for the
	"aptitude sometimes ignores actions from the command-line" to be
	the following:
	  (A) If a package was already marked for installation, the
	    change from "keep" to "install" was being flagged as automatic.
	  (B) This caused the package and all its dependencies to be marked
	    as auto-installed;
	  (C) Therefore, aptitude helpfully cancelled their selected status.
	    (thanks, aptitude)

	* src/cmdline.cc:
	  Added a missing '\n' to the "you must provide at least one
	search term" error message.

	* src/generic/aptcache.cc, src/generic/aptcache.h, src/cmdline.cc:
	  try_fix_broken can now accept a problem-resolver; if one is passed,
	it is used instead of the "resolve everything at once" -- this lets
	the aptitude state keep track of what a customized resolver did.

	* src/cmdline.cc:
	  If the user requested actions on particular packages, use a problem
	resolver which is geared towards making those actions happen, rather
	than the global optimization done by try_fix_broken.  Among other
	things, this means that "remove" now does the Right Thing[tm].

	* src/cmdline.cc:
	  Better error message for unmet dependencies.

	* src/cmdline.cc:
	  Added basic support for being obnoxious about removing essential
	packages.

2002-03-01  Daniel Burrows  <dburrows@brown.edu>

	* src/cmdline.cc, src/cmdline.h, src/download.cc, src/download.h, src/main.cc, src/ui.cc:
	  Implemented -d and -y.

2002-02-28  Daniel Burrows  <dburrows@brown.edu>

	* src/cmdline.cc:
	  If the user enters a non-existant package, show a list of possible
	choices for it.

2002-02-27  Daniel Burrows  <dburrows@brown.edu>

	* src/generic/aptcache.cc:
	  Only follow Recommends and Suggests if the appropriate
	configuration option is set.  (Debian bug #135956)

2002-02-26  Daniel Burrows  <dburrows@brown.edu>

	* src/cmdline.cc:
	  Fix the broken package displayer to be somewhat sensible.

	* src/cmdline.cc, src/main.cc:
	  Added "markauto" and "unmarkauto" package actions.  These are
	handled in cmdline_pkgaction, so they will automatically remove
	suddenly removable packages, and you can select packages to
	be installed if you for some reason want to.

	* src/cmdline.cc, src/cmdline.h, src/main.cc:
	  Added a "forget new packages" command.

	* src/generic/matchers.cc, README:
	  Add matchers for upgradable and new packages.

	* src/cmdline.cc:
	  If packages are broken, the error display is now more helpful.

	* src/cmdline.cc, src/cmdline.h, src/main.cc:
	  Added a parameter to cmdline_pkgaction indicating whether to fix
	broken packages (off by default!)

2002-02-25  Daniel Burrows  <dburrows@brown.edu>

	* src/cmdline.cc:
	  Added a missing \n in the -s message for clean.

	* src/cmdline.cc:
	  Fix a typo in the preview messages (folowing..upgraded -> following)

	* src/cmdline.cc:
	  Don't use sticky states for dist-upgrade.

	* src/main.cc:
	  The default display format for "search" now includes state
	information.

	* src/generic/aptcache.cc:
	  Only call mark_all_upgradable from aptitudeDepCache::Init if
	do_initselections is set.

	* src/generic/aptcache.cc:
	  Even if do_initselections is false, set the selections of
	unknown packages appropriately.  This helps mark_all_upgradable
	do something sensible.

2002-02-24  Daniel Burrows  <dburrows@brown.edu>

	* src/generic/matchers.cc:
	  ~M now marks to-be-installed automatically installed packages
	as well as currently installed automatically installed packages.

	* src/generic/aptcache.cc:
	  mark_all_upgradable now calls mark_and_sweep and duplicate_cache.

	* src/main.cc:
	  Added --with[out]-{recommends,suggests} to toggle the handling
	of these from the command-line.

	* src/generic/aptcache.cc:
	  Use mark_all_install to set install states (a bit wasteful of CPU
	cycles, but it "should" be "fairly" cheap)
	  Rationale: we need to tell when stuff is dragged in because of
	dependencies of upgraded packages.

	* src/cmdline.cc:
	  Fix the "dangling newline" input bug with the Y/n prompts.

	* src/generic/aptcache.cc, src/generic/aptcache.h, cmdline.cc, ui.cc:
	  Kill the extra argument to try_fix_broken -- it's not really needed
	now, and it makes things hairier.

	* src/cmdline.cc:
	  Use mark_all_upgradable in dist-upgrade rather than hacking
	auto-upgrade.

	* src/cmdline.cc:
	  Renamed cmdline_preview_show_pkglist to cmdline_show_pkglist.

	* src/generic/aptcache.cc, src/cmdline.cc:
	  Broke down yet again; this time, I rewrote all_upgrade to
	just reimplement pkgAllUpgrade in my own code.  How annoying.
	  (on the other hand....it works! yay!  I don't understand WHY
	   it works, but never mind that..)

	* src/cmdline.cc:
	  When doing searches, open the cache with sticky states enabled.

	* src/cmdline.cc:
	  Allow non-root users to run simulations of upgrades/installs.

	* src/generic/aptcache.cc:
	  Don't condition on Auto-Upgrade in mark_all_install.

	* src/generic/aptcache.cc, src/generic/aptcache.h, src/cmdline.cc, src/ui.cc:
	  Don't use auto-install when marking upgradable packages.

	* src/cmdline.cc:
	  ok, don't do that, Daniel; use mark_all_upgradable and then
	try_fix_broken.  (I'll get there eventually)

	* src/generic/aptcache.h, src/generic/aptcache.cc, src/cmdline.cc:
	  Added an "all_upgrade" method to the cache; it's just
	a wrapper for pkgAllUpgrade.  (gave up trying to emulate
	pkgAllUpgrade -- even when I make exactly the same calls as
	it, stuff doesn't work right)

	* src/cmdline.cc:
	  Always prompt on upgrades.

	* src/generic/aptcache.cc, src/generic/aptcache.h:
	  Changed try_fix_broken so that it behaves more like
	pkgAllUpgrade when without_extra is true.

	* src/cmdline.cc:
	  Abort if the fixer fails.

	* src/cmdline.cc, src/cmdline.h, src/main.cc:
	  Added support for -s as "simulate".

	* src/cmdline.cc:
	  Doh!  strcmp doesn't return -1 if a<b, it returns some random
	value smaller than 0.
	  Corrected code that made the above assumption; previews are
	now displayed in sorted order for real.

	* src/cmdline.cc:
	  Added a hack -- dist-upgrade is no longer quite a synonym for
	"install".  If auto-upgrade is not normally true, only
	dist-upgrade will mark things for upgrade by default.

	* src/cmdline.cc:
	  upgrade no longer tries to mark every single package for
	installation. (oops!)

	* src/cmdline.cc:
	  Use action groups around the loops that set package states, so
	that the various long-running algorithms in aptitude's cache
	logic aren't run on every single package.

	* src/cmdline.cc:
	  Added an "X packages upgraded, X packages installed,..."
	message in the preview.  (copied pretty much directly from apt-get)

	* src/cmdline.cc:
	  "upgrade" honors holds.

	* src/cmdline.cc, src/main.cc:
	  "dist-upgrade" is now a synonym for "install".

	* src/cmdline.cc, src/cmdline.h, src/main.cc:
	  Added an "upgrade" command (like apt-get upgrade)

	* src/generic/aptcache.cc, src/generic/aptcache.h, src/cmdline.cc, src/ui.cc:
	  aptitudeDepCache::try_fix_broken now takes an argument indicating
	whether to behave like dist-upgrade (use removals) or like upgrade
	(don't use removals)

	* src/main.cc, src/cmdline.h, src/cmdline.cc:
	  Added support for arbitrary widths in the output of "search".

	* src/main.cc:
	  Fix option parsing.  Don't add "--" in front of long options in
	the opts structure; check optind to find the first non-option.

	* src/cmdline_parse.cc, src/cmdline_parse.h:
	  Added skeletal code for a super-duper option parser to work
	around limitations in getopt -- then read the getopt info page
	and realized that the limitations didn't exist!  Adding the code
	anyway, in case it turns out to be useful; it's not compiled.

	* src/main.cc, src/cmdline.h, src/cmdline.cc:
	  Added preliminary support for redefined output columnification.
	  Still TODO: (a) fix the option parsing with this (oops);
	(b) deal with the fact that it should allow running off the edge of
	the screen; (c) handle the visible-version stuff more cleanly.

2002-02-23  Daniel Burrows  <dburrows@brown.edu>

	* src/apt_options.cc, src/download.cc:
	  aptitude now defaults to logging in /var/log/aptitude, and
	has a configuration option for it.

	* src/cmdline.cc:
	  The preview now displays the download size and the expected amount
	of disk usage.

	* src/cmdline.cc:
	  Added a proper preview and pause before downloading (like apt-get)

	* src/generic/apt.cc, src/generic/apt.h, src/pkg_grouppolicy.cc:
	  Added support for listing DOWNGRADED packages in the preview.

	* src/download.cc:
	  Kill the "press return to continue" prompt when downloading
	packages in text mode.

	* src/cmdline.cc:
	  Unreverse tests so that actions are parsed properly (oops)

	* ChangeLog: add a bunch of missing "src/"s to filenames

	* src/cmdline.cc, src/cmdline.h, src/download.cc, src/download.h, src/main.cc, src/ui.cc:
	  Added very crude support for "apt-get install"-style stuff.

	* src/cmdline.cc, src/cmdline.h, src/main.cc:
	  Added a "search" command (like apt-cache, more or less)

	* src/cmdline.cc, src/cmdline.h, src/main.cc: 
	  Added an "autoclean" command.

	* src/main.cc:
	  Added a \n to the end of the "unknown command" message.

	* src/cmdline.cc, src/cmdline.h, src/main.cc:
	  Added a "clean" command.

	* src/generic/acqprogress.cc:
	  Replace the commented-out settings of Update with manager.set_update.

	* src/download_manager.h:
	  Support setting the Update field.

	* src/cmdline.cc:
	  So, here's the deal.  AcqTextStatus stores ScreenWidth as a
	**reference** to an integer.  Although this is disgusting at first
	glance, there's a sticky problem of what to do on window resizes.
	I may handle this in a better place eventually, but for now I'm
	going to make it a global (ick) variable in cmdline.cc.

2002-02-22  Daniel Burrows  <dburrows@brown.edu>
	* src/Makefile.am, src/cmdline.h, src/cmdline.cc, src/download.cc, src/download.h, src/generic/acqprogress.cc, src/generic/acqprogress.h:
	  Added a command-line-based "update" routine, like apt-get's only
	with aptitude's logic.  Tweaked the download stuff to work with
	text-mode download.  Added the apt-get acqprogress thingy to the
	source tree.  (acqprogress is now a descendent of SigC::Object, so
	connecting signals to it works)

	* src/ui.cc:
	  Add a menu item to mark all upgradable and not manually held
	packages for upgrade.

	* src/generic/aptcache.cc, src/generic/aptcache.h, src/generic/apt.cc, src/generic/apt.h, src/ui.cc, src/main.cc, src/download.cc, src/pkg_item.cc:
	  Add code to not automatically do all sorts of marking of packages
	on startup, and to mark the upgradable packages later.

	* help-fi.txt, aptitude.fi.1, src/mine/mine-help-fi.txt, po/fi.po:
	  Updated Finnish translations from Jaakko Kangasharju <ashar@iki.fi>

	* src/pkg_item.cc, src/pkg_columnizer.cc, src/pkg_ver_item.cc:
	  Only show packages as held if they are actually held.  That is,
	upgradable packages which are NOT going to be upgraded because (eg)
	auto-upgrades are off will be displayed as "ii".

2002-02-21  Daniel Burrows  <dburrows@brown.edu>

	* aptitude.1, aptitude.fr.1, aptitude.fi.1, aptitude.pl.1, aptitude.gl.1:
	  s/README.gz/README

	* README:
	  Document the "p" state flag.
	  (Debian bug #135112)

2002-02-17  Daniel Burrows  <dburrows@brown.edu>
	* Makefile.am:
	  Distribute .todo in tarballs.

	* src/download_list.cc:
	  Kill the evil floating-point exception on alpha.  This deserves
	a new "real" release.  (Debian bug #122064)

	* src/download.cc:
	  Make forget-new-on-update actually do that.  (Debian bug #134226)

2002-02-10  Daniel Burrows  <dburrows@brown.edu>
	* README, NEWS, configure.in:
	  Version bumped to 0.2.9.3.

	* po/pl.po:
	  Updates from Michal Politowski.

	* src/main.cc, src/vscreen/vscreen.cc: 
	  Guard the _GNU_SOURCE definitions with #ifndef _GNU_SOURCE, just
	in case.  (evidently g++-3 automatically #defines this)

2002-02-09  Daniel Burrows  <dburrows@brown.edu>

	* Makefile.am:
	  Really distribute aptitude.pl.1.

	* src/generic/matchers.cc:
	  Really fix ~ahold.

	* NEWS, README, configure.in:
	  Version bumped to 0.2.9.2.

	* NEWS, README, configure.in:
	  Version bumped to 0.2.9.1.

	* src/generic/aptcache.cc (mark_auto_installed):
	  D'oh, since we're marking and sweeping when the user sets a
	package to "auto-installed", we have to cleanup_after_change as
	well.  Same goes for mark_keep.
	  This merits a quick new release.

	* NEWS, README, configure.in:
	  Version bumped to 0.2.9.

	* README:
	  Major adjustments to the README, incorporating some user
	feedback.  (Debian bug #126492)

	* src/generic/aptcache.cc:
	  You can now set a match expression which will limit which packages
	are automatically removed.  eg, if it is "~slibs", only packages
	in the "libs" section will be automatically removed.
	  The option is PACKAGE::Delete-Unused-Pattern.

	* src/generic/aptcache.cc, src/generic/aptcache.h, src/generic/matchers.cc:
	  The garbage collector now records which packages it would delete
	automatically, and you can search/limit on that value via ~r.
	(FIXME: use this to store unused-deletion information?)

2002-02-08  Daniel Burrows  <dburrows@brown.edu>

	* src/vscreen/vs_subtree.h:
	  Fix a minor bug: the vs_subtree tried to use addch(' ') to clear
	the remainder of the line after it finished -- but if it had just
	filled a line completely, the "y" position would have been advanced,
	and it would end up painting over the whole next line (oops)
	  (Debian bug #123652)

	* src/generic/aptcache.cc:
	  Caught an insidious bug: changes to the automatically-installed
	status of a package would only be saved in the undo stack when they
	were accompanied by another change (eg, removal of the package)
	  This was due to the fact that rather then testing the current
	state against the backed-up state, I was testing it against itself.
	  D'oh!

	* src/apt_options.cc:
	  Add an option to disable auto-removal of unused packages.

	* src/generic/aptcache.cc:
	  It is necessary for internal_mark_delete to call
	cleanup_after_change now (since it might trigger additional actions)

	* src/generic/aptcache.h, src/generic/aptcache.cc:
	  So there was a problem due to the fact that mark_install,
	mark_delete, etc, were triggering a mark and sweep all the time.
	Normally this would be right, but when undoing a group of
	actions, a mark_and_sweep would be performed in the middle of the
	group -- at which point the cache was in an indeterminate state
	and weird stuff happened.
	  Instead of fixing this the right way (whatever that is), I
	have created internal_mark_*, which take a boolean parameter
	specifying whether a mark_and_sweep operation is desired.  The
	standard functions are just wrappers that hardcode that to true.

	* src/generic/aptcache.cc:
	  Added a hack to make it obvious that undoing a forget-new command
	actually works.  (rebuild package trees when this is done)

	* src/defaults.cc:
	  Oops, lower-case a conflicts with other things.  Use
	lower-case m instead.

	* src/generic/aptcache.h, src/generic/aptcache.cc, src/pkg_item.cc, src/pkg_item.h, src/pkg_ver_item.h, src/pkg_ver_item.cc, src/pkg_subtree.h, src/pkg_subtree.cc, src/defaults.cc:
	  Renamed lastchange to installremove_reason to make it clear
	that it doesn't apply to holds.  Added and removed code to really
	prevent it from applying to holds (sane transient holds would be
	nice, but that's for the future)

	  Added code to allow packages to be quickly marked as
	manually installed (keybinding: lower-case a)

	  mark_and_sweep is no longer called in the middle of an action
	group -- it's always called at the end, now.  Should speed some
	operations up.

	* src/pkg_item.cc:
	  NowBroken is a bad reason to visually flag things as broken.

2002-02-04  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/pkg_columnizer.cc:
	  Add %M to the default package display.

	* src/generic/apt.cc:
	  Hmm.  Packages which were automatically installed, and are
	now being upgraded, are no longer shown as "packages
	automatically installed".  This is unfortunate in the sense
	that packages which *were* automatically upgraded are lost.
	  Future versions should fix this, but I don't expect it to be
	a major issue *crosses fingers*.

	* src/pkg_item.cc:
	  The su-to-root logic in pkg_item.cc is more robust now.
	  (Debian bug #130423)

	* src/generic/matchers.cc:
	  ~ahold matches any held package, I think.  (Debian bug #126800)

2002-02-03  Daniel Burrows  <Daniel_Burrows@brown.edu>
	* src/ui.cc:
	  Call pkg_columnizer::setup_columns() in ui_init() -- why wasn't I
	doing this before?  Doh indeed.
	  (Debian bug #114401, and I tested it for real this time!)

	* src/download.cc:
	  Change [NOT USED] to [REMOVE, NOT USED] in the log
	output.

	* src/pkg_columnizer.cc:
	  Fixed the translated widths so they work properly again with
	the new column types (hm, this is a good debugging device for
	the translated-widths problem :) )

	* src/generic/matchers.cc:
	  Added a matcher for automatically-installed packages.

	* src/pkg_item_with_subtree.h:
	  Un-reverse the new expanded/collapsed display so it's right.

	* src/pkg_ver_item.cc:
	  Oops.  The fallback rule in pkg_ver_columnizer::setup_columns
	was calling pkg_ver_columnizer::setup_columns again => infinite
	recursion => crash.
	  It now correctly calls pkg_columnizer::setup_columns when it
	needs to punt.

	* src/generic/aptcache.cc:
	  Call mark_and_sweep after setting a package's "auto" flag.

	* src/generic/aptcache.cc:
	  Don't use apt_cache_file to get a reference to our package
	cache -- use GetCache().  (apt_cache_file could be uninitialized)

	* src/generic/apt.cc
	  Don't classify not-installed and not to-be-installed packages
	as having been held back.  (check state.Status==1 rather than
	state.Status>0)

	* src/generic/aptcache.cc:
	  Don't mark packages which aren't installed as having been
	automatically deleted, even if nothing depends on them.

2002-02-02  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/generic/aptcache.cc:
	  Add Essential packages to the root-set. (this is important :) )

	* src/pkg_grouppolicy.cc:
	  Oops, added a missing "," which was causing two entries in the
	child_names table to be collapsed into a single entry.

	* src/generic/aptcache.cc:
	  Don't auto-delete packages which are already being deleted (thus
	changing their "auto" flag)

	* src/generic/apt.cc:
	  find_pkg_state: Report unchanged packages as being unchanged, not as
	being reinstalled.

	* src/download.cc:
	  Store the time of the package run in the log file.
	  (Debian bug #120874)

	* src/generic/aptcache.cc:
	  Do mark_and_sweep inside an action group.

	* src/generic/aptcache.cc: 
	  Don't go into an infinite loop when the user does anything.
	(mark_and_sweep was calling mark_delete, which was calling
	 mark_and_sweep..... -- solution: only call mark_and_sweep
	 if it's a manual deletion rather than a mark_and_sweep one.
	 yes, it's a hack)


	* src/pkg_node.cc, src/defaults.cc:
	  Add a keybinding for setting a package as auto-installed ('A')

	* src/generic/aptcache.h, src/generic/aptcache.cc, src/pkg_item.cc, src/pkg_ver_item.cc, src/download.cc:
	  Actually write code to find automatically installed and not
	depended on packages.  Currently this uses a mark-and-sweep algorithm;
	this is not as efficient as it could be, but it is correct.
	(refcounting would be faster in this case, but when Recommends
	are taken into account, the dependency graph tends to have cycles)

	* src/generic/apt.cc, src/generic/apt.h, src/pkg_grouppolicy.cc:
	  Updated the "find out why a package changed" code to make use
	of the lastchange field.

2002-02-01  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/pkg_columnizer.h, src/pkg_columnizer.cc, src/generic/aptcache.h:
	  Added stubs for flagging and tagging.

	* src/pkg_ver_item.cc, src/pkg_ver_item.h, src/pkg_item.cc, src/pkg_item.h, src/pkg_subtree.cc, src/pkg_subtree.h, src/pkg_node.h, src/pkg_columnizer.h, src/pkg_columnizer.cc:
	  Added preliminary support for viewing auto-install states.

	* src/generic/aptcache.cc, src/generic/aptcache.h:
	  Added basic support for tracking whether a package's last
	selection was automagic.

2002-01-23  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/vscreen/vs_editline.cc:
	  Start the cursor at the beginning of a line to be edited rather
	than the end (I'm not sure if this is an improvement :P )

	  (Debian bug #120890)

	* src/apt_options.cc:
	  Corrected a misspelling (Debian bug #120887)

2002-01-10  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/pkg_item.cc:
	  Added "idempotent" alternatives for some package manipulation
	commands.  The idea is to make the behavior of '+','-', etc more
	predictable, so that operations on large numbers of packages behave
	sensibly.  This is currently off by default while I test it.

	* src/pkg_item.cc:
	  The source was unnecessarily setting the package state to
	Install in pkg_item::remove when the package was to be reinstalled.
 	It no longer does.

	* README: Many edits and rewordings, inspired by Rainer Dorsch.

	  - Rewrote bits of the intro.
	  - Explained much more about trees and opening/closing.
	  Consistently refer to trees as "items"/"subitems" and
	Hopefully experienced users are not insulted.

2002-01-06  Daniel Burrows  <dburrows@brown.edu>

	* src/generic/aptcache.cc:
	  When setting up the initial states, iterate over the package list
	twice, only setting AutoInstall the second time.  This decreases
	startup time, but allows more sane initial selections of packages.
	  The following explanation is given in the source:

    // A reason for this is the following scenario:
    //
    // Packages A and B are installed at 1.0.  Package C is not installed.
    // Version 2.0 of each package is available.
    //
    // Version 2.0 of A depends on "C (= 2.0) | B (= 2.0)".
    //
    // Upgrading A if B is not upgraded will cause this dependency to
    // break.  Auto-install will then cheerfully fulfill it by installing
    // C.
    //
    // A real-life example of this is xemacs21, xemacs21-mule, and
    // xemacs21-nomule; aptitude would keep trying to install the mule
    // version on upgrades.

	(Debian bug #108379)

        * Experimentally changed the display of closed/opened
	trees.

	* Corrected a missing \n in da.po.

2001-12-12  Daniel Burrows <dburrows@brown.edu>
	* po/da.po
	  Updates from Morten Brix Pedersen <morten@wtf.dk>
	* src/ui.cc
	  Made the top information bar translatable, patch from Morten.

2001-12-10  Daniel Burrows <dburrows@brown.edu>
	* README, Makefile.am:
	  Correct several stale references to /var/state.  Oops.
	  Re-releasing 0.2.8.1, which never made it off my machine yesterday.

2001-12-09  Daniel Burrows  <dburrows@brown.edu>
	* NEWS, README, configure.in:
	  Version bumped to 0.2.8.1

	* src/generic/aptcache.cc, configure.in, acconfig.h:
	  The location used for the state information now depends on
	$sharedstatedir.  (Debian bug #122334)

	* po/pt_BR.po:
	  Updated pofile with data from Andre Luis Lopes <andrelop@ig.com.br>.
	  This appears to add %s escapes to a number of places they were
	  missing, and fix some untranslated messages.  (Debian bug #122251)

	* help.txt, help-fi.txt, help-pl.txt, help-fr.txt
	  "j" and "k" were reversed in the help text when I initially
	  wrote in.  (oops)  Fixed.  (Debian bug #122061)

	* src/pkg_grouppolicy.cc:
	  Rewrote the description of the "comm" section to make it clear
	that it includes things other than faxmodems.  (Debian bug #121951)

	* configure.in, po/da.po:
	  Added Danish translation from Morten Brix Pedersen <morten@wtf.dk>

	* src/load_config.cc, src/pkg_description_treeitem.cc, src/vscreen/vs_statuschoice.cc:
	  Applied Falk Hueffner's patch for not crashing on alpha.

	* src/apt_options.cc, src/download_list.cc, README:
	  Added an option which determines whether to display the
	continue/cancel dialog after downloading.  (Debian bug #120873)

2001-12-06  Daniel Burrows  <dburrows@brown.edu>

	* README:
	  Document the new matcher.

	* src/generic/matchers.cc:
	  Added a matcher for reverse dependencies (Debian bug #122726)
	  This doesn't fully solve the 'need debfoster capability' wishlist,
	but is easy to implement than the full solution, and helps out.

2001-11-25  Daniel Burrows  <dburrows@brown.edu>

	* po/es_ES.po, po/es.po, configure.in:
	  Renamed es_ES.po to es.po, at the suggestion of Jordi Malloch.
	  He speaks Spanish, so I presume he knows what he is talking
	about :-)

2001-11-23  Daniel Burrows  <dburrows@brown.edu>

	* src/pkg_item.cc:
	  Add a separate case for not-installed packages in visible_version(),
	so that it, well, works.  (InstVerIter may be an end-iterator
	for these)

	* src/pkg_item.cc, src/pkg_item.h, src/pkg_columnizer.cc:
	  Make the display behavior of package items more logical:
	held packages are flagged as "broken" if they will be broken
	after the proposed install run.
	  This involved changing NowBroken to InstBroken in the code that
	decided whether to display a package as "held".

	  In addition, querying a displayed package for information will
	display information about the current version if it is held.  This
	makes it easier (hopefully) to get information about what dependency
	broke for a held package.

2001-11-22  Daniel Burrows  <dburrows@brown.edu>

	* src/pkg_tree.cc:
	  Tweak the incsearch behavior: if it has an invalid (eg, null)
	match string, it now returns to the starting location.  I find this to
	be more logical.

	* README, NEWS, configure.in:
	  Version bumped to 0.2.8

	* README:
	  Document ~C.

	* src/generic/matchers.cc:
	  Add an additional match type for conflicts.

	* src/pkg_tree.cc, src/pkg_tree.h, src/apt_options.cc:
	  Incremental search is now an option, defaulting to ON.

	* src/generic/config_signal.h:
	  Add a std:: that should've been there anyway.

	* src/generic/matchers.cc:
	  The dep-matcher doesn't crash on virtual packages any more.

	* README:
	  Documented the dependency-matcher, and alphabetized the
	documentation of match types.

	* src/generic/matchers.cc:
	  Added a package matcher for dependencies.  This matcher
	takes *another matcher* as an argument..have fun :)

	* src/vscreen/vs_util.cc, src/ui.cc:
	  Check slots before connecting to them, to avoid segfaults.

2001-11-21  Daniel Burrows  <dburrows@brown.edu>

	* help.txt, README:
	  Document the default behavior of '/'-searching better.  (it
	was actually sort of documented in the README, but not very
	clearly)  (Debian bug #120592)
	  Attn translators: 

	* NEWS, README, configure.in:
	  Version number bumped to 0.2.7.999

	* src/pkg_ver_item.cc:
	  Package views now setup the column information before calling
	columnify, which (among other things) should make translations
	behave properly.  (Debian bug #114401)

	* src/pkg_grouppolicy.cc, src/generic/tasks.cc:
	  Gracefully handle failure to parse the task descriptions.
	  (can be due to, eg, tasksel not being present) (Debian bug #120578)

	* src/generic/matchers.cc, src/generic/matchers.h, src/pkg_tree.cc:
	  Make the reporting of errors in match strings optional.  Needed
	for incsearch because some partially typed strings will be invalid
	and we don't want to report spurious errors on them.

	* src/pkg_tree.cc:
	  Don't crash if the user reloads during an incsearch.

	* src/pkg_tree.cc:
	  Incsearch now does not interfere with normal search.  (ie, pressing
	"return" after incsearch does the Right Thing[tm])

	* src/pkg_tree.cc:
	  Killed off a small memory leak.

	* src/pkg_tree.cc:
	  Added an (experimental) incremental search function.

	* src/mine/cmine.cc, src/pkg_tree.cc, src/vscreen/vs_editline.cc, src/vscreen/vs_editline.h, src/vscreen/vs_util.cc, src/vscreen/vs_util.h, src/pkg_item.cc, src/ui.cc:
	Added a hook to accept a slot to be called when the prompt is cancelled.

	* src/mine/cmine.cc, src/pkg_tree.cc, src/vscreen/vs_editline.cc, src/vscreen/vs_editline.h, src/vscreen/vs_util.cc, src/vscreen/vs_util.h, src/pkg_item.cc, src/ui.cc:
	  Added a hook in the prompting routines to accept a slot to
	be called when the text is edited.  (will be used for incsearch)

2001-11-20  Daniel Burrows  <dburrows@brown.edu>

	* README, NEWS, configure.in:
	  Version number bumped to 0.2.7.3

	* po/pl.po, help-pl.txt, aptitude.1.pl:
	  (finally) merged Mikhal's new pl translation.  (Debian bug #114396)

	* function_pkgs:
	  Many updates for new packages in the archive.

	* README:
	  Fix ~a vs ~A confusion. (Debian bug #116695)

	* README, NEWS, configure.in:
	  Version number bumped to 0.2.7.2.

	* src/ui.cc, configure.in:
	  The menu command to reload the cache is now a compile-time
	option, defaulting to off.
	
	* src/generic/tasks.cc, src/generic/tasks.h, src/generic/matchers.cc, src/pkg_grouppolicy.cc:
	  Redid the task code again, this time to (hopefully) make it more
	efficient.  Specifically, it now precalculates a list of tasks for
	each package, and accesses version files in disk order when doing
	so (this will hopefully improve speed greatly on slow systems; eg,
	bug #116750)

	* src/ui.cc:
	  Added a menu item to reload the cache on demand (useful for
	debugging)
	  Note: make this a configure option defaulting to off before
	release!

2001-11-19  Daniel Burrows  <dburrows@brown.edu>

	* src/mine/mine-help.txt:
	  Mention the "f" key.  (Debian Bug #120251)

2001-11-14  Daniel Burrows <dburrows@brown.edu>

	* src/vscreen/vs_tree.cc:
	  Fix the problem where pageup doesn't unhighlight/highlight the
	new item.

2001-10-01  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* configure.in, README, NEWS:
	  Version number bumped to 0.2.7.1

	* src/generic/matchers.cc, src/generic/tasks.cc:
	  Fixes for g++-3.  (oops)

	* configure.in, README, NEWS:
	  Version number bumped to 0.2.7

	* Makefile.am:
	  Moved some comments out of rules; I was getting complaints from
	automake about them.

2001-09-29  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/ui.cc:
	  The default grouping policy now includes a task component.

	* README:
	  Documented the task grouping policy.

	* src/pkg_grouppolicy.cc:
	  Task groupings now have a passthrough behavior.  Tasks are placed
	under the "tasks" subtree, and other stuff is put in the root.
	(this is a hack)

	* src/pkg_view.cc:
	  Prepared for the ability to sec the description area to some
	text directly (rather than via set_package)

	* src/generic/tasks.cc:
	  No longer track a list of all packages in a given task; it's
	counter to how aptitude builds its trees.  (the new pkg_grouppolicy
	is the Right Way to do this)

	* src/pkg_grouppolicy.cc, src/pkg_grouppolicy.h, src/load_grouppolicy.cc:
	  Added a "task" grouping policy.

	* src/generic/tasks.h, src/generic/tasks.cc, src/generic/apt.cc:
	  Added code to load the task descriptions/sections.  This will
	shortly be used to add a list of tasks to the UI.

	* src/pkg_columnizer.cc, src/generic/matchers.cc, src/generic/tasks.cc, src/generic/tasks.h:
	  Renamed get_task to get_tasks; it now returns a list of tasks.
	  Other code adjusted accordingly; "task" column type removed because
	it's stoopid.

	* src/gneric/matchers.cc:
	  Added a match type for tasks.

	* src/generic/Makefile.am, src/generic/tasks.h, src/generic/tasks.cc:
	  Added the beginnings of support for tasks 'n stuff.

2001-09-22  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* NEWS, README, configure.in:
	  Bumped the version to 0.2.6.4

	* src/edit_pkg_hier.h, src/load_grouppolicy.cc:
	  Work around a g++ bug on arm by #including pkg_hier.h before
	certain other files.  (yes, I should find the actual bug, but I
	need aptitude to compile *now*)

2001-09-15  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/generic/config_signal.cc:
	  Fixed the "revert options" command to handle not-yet-set-at-all
	options correctly.  (FIXME: what about options that were set but
	aren't now?)

	* configure.in, README, NEWS:
	  Bumped the version to 0.2.6.4

	* src/ui.cc:
	  Really fixed the loading of keybindings from the theme.

	* README:
	  Edited the list of available keybindings to bring it into line with
	reality.

	* src/load_config.h, src/load_config.cc, src/ui.cc, src/generic/config_signal.h:
	  Fix the problems which were breaking keybindings.  (incorrectly
	generated config strings, and problems with themes versus actual
	configurations)  -- Debian bug #112306

	* src/ui.cc:
	  Fix the location from which the 'theme bindings' are loaded.

2001-09-14  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* configure.in, README, NEWS:
	  Bumped version to 0.2.6.3

	* src/vscreen/vs_tree.cc:
	  Added a hack to avoid the "hall of mirrors"-like effect with the
	non-hierarchical tree mode.

	* src/vscreen/vs_treeitem.h:
	  move_forward_level now correctly refuses to fall over the edge
	of the world.  This fixes the segfault reported in #112267.

	* src/edit_pkg_hier.cc:
	  Fix a nasty segfault with the edit-hier code -- I was dereferencing
	packages for which pkg.end() was true to get their names to save
	for later.  Why this didn't crash with -O2, I don't know.

2001-09-13  Daniel Burrows  <Daniel_Burrows@brown.edu>
	* configure.in, README, NEWS:
	  Bumped version to 0.2.6.2.

	* function_hier:
	  Updated for new packages.

	* src/edit_pkg_hier.h, src/edit_pkg_hier.cc:
	  When postponing the loading of the hierarchy, use strings instead
	of pointers to potentially-not-available-later packages.

	* src/vscreen/vs_editline.cc:
	  Fixed a silly crashing bug in the new editline stuff.

	* configure.in, README, NEWS:
	  Bumped version to 0.2.6.1.

	* configure.in:
	  Moved ALL_LINGUAS to before AM_GNU_GETTEXT (Debian bug #111904)

	* src/vscreen/vs_editline.cc, src/vscreen_vseditline.h:
	  Made the scrolling behavior of edit-lines more friendly (they
	scroll by single characters with padding at the edge, instead of
	scrolling with huge blind jumps)

	* src/ui.h, src/ui.cc, src/apt_options.cc:
	  Added an options-dialog slot for the default grouping string.

	* src/generic/config_signal.h, src/generic/config_signal.cc, src/generic/apt.cc:
	  Killed the Bug of Doom by using two configuration classes as
	per Jason's suggestion.  (the "system" configuration shadows the
	"theme" configuration)

	* src/ui.cc:
	  Uncomment one of the static items that had been commented out for
	debugging purposes.  (oops)

2001-09-08 Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/pkg_view.h:
	  Remember to really initialize all the important fields in
	pkg_view's constructor.  (in particular, name and popupdownlinked
	were not being initialized at all, which was causing strange problems
	with g++-3)

	* src/load_pkgview.cc: 
	  Fall back to the default values for static items using the
	STATUS or HEADER fields.

	* NEWS:
	  Added a note that this won't compile on potato anymore.

	* configure.in:
	  Moved AM_GNU_GETTEXT to before AM_PATH_SIGC; the gettext
	macro tries to compile some code that breaks on g++-3 if sigc
	was already called.  (why did this work before??)

	* src/edit_pkg_hier.cc, src/edit_pkg_hier.h:
	  Don't update the hierarchy editor from the underlying hierarchy
	unless and until it's visible.  This is necessary for the
	"lazy loading" of the hierarchy to work.

	* README, AUTHORS:
	  Changed the email address to @debian.org

	* README:
	  Added a cursory (could-be-improved) description of the hierarchy
	and categorization.

	* src/pkg_view.cc:
	  Make the popdownlinked stuff implemented below actually work.

	* src/vscreen/vs_tree.cc:
	  Fixed the bug that caused highlight/unhighlight notifications
	to not be properly sent out when dealing with non-hierarchical
	trees (hitting "back" would not send an 'unhighlighted' notification)

	* src/vscreen/vs_subtree.h:
	  Fixed a bug that caused subtree names to be clipped one character
	away from the edge of the window.

	* src/load_grouppolicy.cc, src/pkg_hier_editor, src/generic/apt.h, src/generic/apt.cc: 
	  Load the package hierarchy lazily, so the user doesn't have
	to wait for it if he/she isn't using it.

	* src/load_pkgview.cc, src/pkg_view.h, src/pkg_view.cc, aptitude-defaults:
	  Allow the shown/hidden status of an interface element to be linked
	to that of another interface element, which allows me to fix the
	inconsistencies with the vertical-split layout.

2001-09-07  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/pkg_grouppolicy.cc, src/pkg_grouppolicy.h:
	  Started adding a "task" grouping policy (to replace tasksel ;-) )
	but quit when it became obvious that apt-pkg doesn't have the
	necessary functionality.  Filed bug #111654.

	* function_pkgs:
	  Classified a number of new packages.

	* aptitude-defaults:
	  Added a "dselect" theme.

	* src/pkg_columnizer.h, src/pkg_columnizer.cc, src/pkg_ver_item.cc, README:
	  Added a "short priority" column type (needed for dselect-like
	mode)

	* README: Document Aptitude::UI::Package-Header-Format.

2001-09-06  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/generic/matchers.cc (parse_atom): When handling action-based
	matchers, don't require reinstalled and held packages to be purged.
	(d'oh!)  Note: there are still some subtleties with broken packages..

2001-09-01  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/vscreen/vs_tree.cc:
	  In non-hierarchical mode, display paths as
	"First::Second::Third" instead of "/First/Second/Third".

	* src/vscreen/vs_tree.cc:
	  In non-hierarchical mode, the various page up/down and scrolling
	functions work properly (rather than being off-by-one)

2001-08-31  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/generic/apt.cc:
	  Be more careful when saving a new configuration (save to config.new
	  and use rename(2) )

	* src/generic/apt.cc:
	  Don't save anything under "PACKAGE::Themes" (this avoids saving lots
	of global theme configuration stuff)

	* src/generic/apt.cc, aptitude-defaults:
	  Added a file which stores default configuration data for aptitude
	(eg, themes)

	* src/generic/aptcfg.h, src/generic/aptcfg.cc, src/ui.cc, src/load_config.cc, README:
	  Implemented basic theme support.  Before shipping the new aptitude,
	  I'll make some sample themes (eg, vertical-split for my
	  cute "vertical-split" configuration; dselect for the Face of Evil,
	  etc)

	* README:
	  Brought the COLORS section up-to-date.  Also, renamed the
	  colors in cmine.cc to be more consistent with the rest of the
	  program (they use WordsSeparatedByCaps instead of
	  words_separated_by_underscores now)

	* src/vscreen/config/colors.cc AND MANY OTHERS:
	  If colors are defined in apt.conf with a "bold" tag at the front
	  of their specification, they will be boldface wherever they are
	  used.  Many manual usages of A_BOLD were dropped to support
	  this new convention, and several colors (screen_status_color,
	  screen_header_color, etc) were made boldface by default.  (there
	  are still a few explicit uses of A_BOLD; eg, for hotkeys in menus)

	* src/vscreen/vs_tree.cc:
	  Finally added support for diplaying the current location in the
	  hierarchy at the top of a tree in "flat" mode.

	* src/vscreen/vs_tree.cc:
	  Backed out support for changing hierarchical mode without the
	  root selected.  This code really needs a redesign to support
	  that, and aptitude doesn't need it.  (ie: I couldn't get it to
	  stop crashing, and I don't care about this feature that much.

	* src/vscreen/vs_tree.cc:
	  vs_tree now does the "right thing" in the following situations
	  when non-hierarchical mode is turned on:
	    - If non-hierarchical mode is activated while something other than
	      the root is selected, the Right Thing[tm] is done.
	    - Line-numbers are calculated correctly.
	    - Searches don't leave the current screen.  I'm not sure about
	      this, but I think the alternative is too confusing.

	* src/edit_pkg_hier.cc:
	  The package-hierarchy editor behaves better when no package is
	available to edit: it hides the cursor and handles "Q" and "N"
	appropriately. (should I perhaps just move the cursor to (1,1)
	instead?)

2001-08-30  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/download.cc:
	  Fixed the autoclean-on-update bug.

	* src/vscreen/vscreen_widget.cc:
	  Removed the code that guards against multiply deleted widgets; it's
	a hack and was breaking on ia64.

2001-08-27  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/vscreen/vscreen.cc
	  When a deadly signal (TERM/ABRT/SIGV/QUIT) is caught,
	the program will catch and report it, shut curses down cleanly,
	and then re-raise it to trigger a core dump and/or set the exit
	status properly.

2001-08-26  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* function_pkgs:
	  Finally finished classifying all packages from 'a' to 'z'.
	(the "BWAHAHAHAHA!! I AM ALL POWERFUL!!" CVS commit)
	  All packages which fall relatively neatly into one of my categories
	(and some that don't) have now been assigned a package.  Now I have
	to edit and rationalize the categories, as well as classifying the
	remaining packages.  However, I will do this later, when my brain
	is not fried from reading several hundred package descriptions
	in the space of an hour.

	* README:
	  Corrected the comment about the old "Save Options" menu command
	to describe the new auto-save-options behavior.  (thanks to
	Steve Greenland for pointing this out)

2001-08-25  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/vscreen/vscreen.cc:
	  Added a handler for TERM, SEGV, ABRT, and QUIT which
	shuts curses down before quitting (so the terminal doesn't get
	all screwy)

	* function_pkgs, function_groups, Makefile.am, src/generic/apt.cc:
	  Added my current "package class" state to CVS for safekeeping
	and renamed hier_groups to function_groups.  Also
	renamed ~/.aptitude/pkgclass to ~/.aptitude/function_pkgs.

	* src/edit_pkg_hier.cc:
	  Saved package class information is now sorted.  This should make it
	possible to meaningfully use diff and patch on these files (and to
	keep them in CVS without too much trouble)

	* src/generic/pkg_hier_dump.cc:
	  Several useful improvements to the test hierarchy program.

	* src/pkg_grouppolicy.cc:
	  pkg_grouppolicy_hier_factory will only delete its hierarchy if
	it is told to (so we can use a global hierarchy without too much
	fuss)

	* src/generic/pkg_hier.cc (clear):
	  When clearing a pkg_hier's information, don't forget to reset the
	max_group_id!

	* src/pkg_grouppolicy.cc, src/generic/pkg_hier.h:
	  Clear all node data when the cache is reloaded (some stale pointers
	to subtrees and so on were causing problems)

	* src/vscreen/vs_tree.cc:
	  When the root of a tree is swapped, delete its "history stack".

	* src/generic/apt.cc, src/generic/apt.h, src/pkg_grouppolicy.cc, src/edit_pkg_hier.cc:
	  Added a hier_reloaded signal that gets called before cache_reloaded.
	  Hopefully this will kill some of the ultra-repeatable segfaults I've
	been seeing.

2001-08-24  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/vscreen/vs_table.cc (find_best_focus): 
	  Never focus an invisible widget!

	* src/ui.cc:
	  Added a menu item to create "categorical" trees: trees that view
	the "by function" hierarchy I'm building.

	* src/pkg_item_with_subtree.h and many others: 
	  Fixed the signatures of the various classes to conform to the newly
	required stuff.  (how vague can you get?)

	* src/vscreen/vs_tree.cc, src/vscreen/vs_tree.h, src/vscreen/testvscreen.cc:
	  Added the code necessary to support a "flat" view mode for trees.
	(it probably could be better, but it'll do for a start)

2001-08-19  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/vscreen/vs_label.cc: Queue a layout when a label's text
	changes, since it might very well have altered its size.  (maybe
	only queue a layout if its requested size has changed?)

	* src/pkg_view.cc: pkg_handling_labels request a size of (1,1).
	Since they are columnified, they can adapt to any size they want,
	and reporting the dynamically-calculated size of the vs_label was
	causing problems.  Specifically, the label kept reporting that its
	minimum desired size was as large as possible.  (oops!)

	* src/vscreen/vs_table.cc: When expanding widgets, the vs_table now
	gives priority to columns/rows which already contain an expandable
	widget which is smaller in the given direction.  This makes it DTRT
	in many more cases.

2001-08-17  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/pkg_view.cc (make_package_view):
	  I was initializing the column-span of widgets with their height and
	the row-span with their width.  D'oh!  Fixed.

2001-08-16  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/load_pkgview.cc src/load_pkgview.h src/ui.cc:
	  Added code to allow a fairly crude customization of the display
	layout.

	* src/pkg_view.h (struct package_view_item):
	  Deleted the "src" member from package_view_item, it's not
	necessary and not even used.

2001-08-14  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/edit_pkg_hier.cc:
	  Handle reloads correctly in the edit_pkg_hier class.

2001-08-12  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/edit_pkg_hier.cc (save_hier):
	  Only save items with at least one parent.  (saving other items
	is pointless atm -- note: it will become non-pointless if these
	settings override system settings...)

	* src/edit_pkg_hier.h:
	  Don't reset the editable list to the top when the user moves to
	another item, and allow the user to commit changes and advance to
	the next package without leaving the editor.

	* src/edit_pkg_hier.cc (set_package):
	  Only rebuild the editable list if the package is different from the
	current package.

	* src/vscreen/vs_tree.cc (paint):
	  Explained why there's an apparently gratuitous invocation of
	selected->highlighted in vs_tree::paint.

	* Makefile.am:
	  Install the "groups" part of function_hier in pkgdatadir.

	* src/edit_pkg_hier.cc, src/edit_pkg_hier.h, src/pkg_view.cc:
	  Wrote a simple hierarchy editor, which should be easier to use
	than the "edit it by hand" method I've been using until now.
	It hooks into the "description window"; press E to activate it.

2001-08-11  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/generic/pkg_hier.cc (realize):
	  Don't complain about multiple occurances of a package or group;
	just use them to further populate the graph.

	* src/generic/pkg_hier.h, src/generic/pkg_hier.cc, src/generic/pkg_hier_dump.cc:
	  Auxilliary information about nodes is now stored in the
	realizer.  This allows the pkg_hier class to be static and
	reusable, rather than crashing if it is used to instantiate two
	different hierarchies.  It also should fix the problems with the
	hierarchy grouping policy.

	* src/ui.cc (do_show_preview):
	  Never use Aptitude::UI::Default-Grouping to set the grouping of
	a preview screen.

2001-08-10  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/generic/pkg_hier.cc:
	  Fixed the use of FindFlag (pass 1 as the flag argument) so that
	global settings work.

	* README (Aptitude):
	  Document Aptitude::UI::Default-Grouping with the other
	configuration options.

	* src/pkg_grouppolicy.h, src/pkg_grouppolicy.cc, src/load_grouppolicy.cc: 
	  Added theoretical support for a hier-based grouping policy.  It
	is not yes tested!

	* src/generic/pkg_hier.h, src/generic/pkg_hier.cc (class pkg_hier):
	  The package hierarchies can now be generated iteratively and
	bottom-up, by specifying a series of packages; each package will
	cause the tree structure necessary for that particular leaf to be
	generated.

2001-08-09  Daniel Burrows  <Daniel_Burrows@brown.edu>

	* src/generic/pkg_hier.cc, src/generic/pkg_hier.h, src/generic/README.hier:
	  Added the basic code needed to support external package hierarchy
	descriptions.

2001-08-06  Daniel Burrows  <daniel@torrent>

	* configure.in, README, NEWS
	  Bumped version number to 0.2.5.3.

	* Makefile.am, ChangeLog
	  The source ChangeLog is now maintained by hand.  All entries
	beginning with this one are lovingly hand-crafted by yours truly.

	* /cvsroot/aptitude/aptitude/src/mine/board.h:
	difftime and time are in time.h, especially on the Hurd

	* /cvsroot/aptitude/aptitude/src/main.cc:
	getopt_long returns an int, not a char.  Fixed main to compile on ppc

2001-07-27  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Bump version number to 0.2.5.2

	* /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.cc:
	Fix a nasty endianness issue for alpha

2001-07-26  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	Instead of detecting virtual packages by checking that they have
	zero-length section names in the section grouper, just check
	whether they have no versions (the correct thing to do)  I don't
	know why I did it the other way (or why that worked), but this
	fixes a bizarre bug that caused '1-1' to be used as the section
	for virtual packages on this computer.

2001-07-24  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Bump the version number to 0.2.5.1

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.cc:
	Oops -- the code to check for duplicated history entries was causing
	the program to segfault if the history was empty!  Fixed.

2001-07-23  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.cc:
	Bump version number to 0.2.5

	* /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/POTFILES.in:
	Remove the action_tree stuff from POTFILES.in

	* /cvsroot/aptitude/aptitude/src/download.cc:
	Include init.h in download.cc so we have the apt library version available

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Fix the binding of Escape to Cancel, hackily (use ^[ as a synonym for it)

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	Making state_restorer inline confuses some older g++'s and isn't really
	that important, so don't do it.

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	Fix the GainLock routine for the old apt code so it
	compiles (there was an argumentless return where it didn't
	belong)

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h:
	Add basic mouse support in pkg_item: double-clicking a package displays its
	info screen.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_subtree.h:
	Subtrees now can be expanded by double-clicking on them.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h:
	vs_tree::move_selection was an obsolete NOP, removed it.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_treeitem.h:
	Trees now handle mouse events by highlighting the clicked item and
	sending it a mouse event.  This adds a new overridable method in
	vs_treeitem, dispatch_mouse.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.h:
	Added simple mousing support to the edit-line.

2001-07-22  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_button.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Buttons now respond to release events /or/ click events, and tables give
	the focus to clicked-upon widgets.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc:
	The menu bar now responds to press, release, and click events instead
	of just clicks

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc:
	Menus now handle button presses and releases more elegantly: pressing
	the mouse highlights the item under the cursor; releasing it selects
	the item.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc:
	The button masking was using && instead of &; fixed

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_button.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_button.h:
	Buttons now accept mouse presses

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h:
	vscreen_widget::enclose now uses its own calculation with window-relative
	coordinates rather than calling wenclose.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h:
	Menus now accept mouse clicks

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_passthrough.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_passthrough.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_stacked.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_stacked.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.h:
	  Added basic support for mousing to the codebase.  Currently only vs_menubar
	supports it (even the menus don't!), but expect that to change soon.

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	Moving left and right in the download display now works when the
	'download completed' dialog is displayed.  Note that this is
	potentially problematic, since those keys previously could be
	used to cancel a download..

	* /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/download_list.h:
	Don't let the download screen be scrolled farther than
	the end of the longest line

	* /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/download_list.h:
	Added preliminary support for scrolling the download screen to the right

	* /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h:
	While a download is in progress, all keys pressed between UI updates are
	processed in a given UI update.

	* /cvsroot/aptitude/aptitude/src/apt_options.cc, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h:
	The "help bar" can now be switched on and off.

	* /cvsroot/aptitude/aptitude/src/mine/cmine.cc, /cvsroot/aptitude/aptitude/src/mine/cmine.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.h:
	  The history stuff has been hooked into all string prompts in the program
	(with the exception of the "do you understand that you are doing something
	very dangerous?" prompt for removing Essential packages)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.cc:
	add_to_history is now a NOP on editlines that do not have a history

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.h:
	Update the utility string dialogs to allow history lists

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.h:
	Many tweaks to the edit-line history: the current edit is preserved while
	searching the history, the history keys are always eaten if a history
	is being used (even if it is empty), and kill the signedness issues.

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Make C-u the primary keybinding for Undo (the one that gets displayed
	in the menu)

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.h:
	Added preliminary support for edit-line histories.  This has some problems
	still, most notably bindings and signedness issues.

2001-07-21  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/aptitude.1, /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	Killed the welcome dialog and related stuff (-w, etc)

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Added a bar at the top of the screen with short descriptions
	of the most useful keybindings, especially the menu and help.
	Hopefully this will remove the need for the welcome dialog.

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	  If the user selects the "Install/Remove packages" menu item while a preview
	is visible, the installation will begin.  (previously, there was a weird
	discrepency where pressing "g" and selecting the menu item would do different
	things)

	* /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/mine/cmine.cc:
	Hopefully fix the Minesweeper help for real (needs testing)

	* /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h:
	Made the minor modification that made multi-CD installs actually work (yay!) --
	it seems I had to shut down the fetcher, re-get the archives, and reacquire
	the lock.  This commit also adds a mechanism for reacquiring the lock without
	restarting the program.

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	Clear the list of messages when starting a new download

	* /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/download_list.h, /cvsroot/aptitude/aptitude/src/download_manager.cc, /cvsroot/aptitude/aptitude/src/download_manager.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	  Implemented the (tortuous!) logic necessary to allow installs spread across
	more than one CD to work.  I almost feel like I understand the Acquire system
	now!
	  The general idea is that we do one package-manager invocation per CD.  No,
	this isn't documented anywhere.  (well, I guess now it is)  So the main
	fetch is run from a big loop, which I slant-copied from apt-get (slant-copied:
	a copy of the basic framework but with modifications)  The main internal API
	change is that we now call Complete on the download_manager when /everything/
	is done (because Stop can be called multiple times)

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	Experimentally copy some code from the apt-get downloader to see if it
	helps the situation with multiple CD-ROMs

2001-07-20  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_action_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_action_tree.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/ui.cc:
	Setting the group now provides the previous setting as a default.  (this
	isn't done Right[tm], but I'm tired)

	Also, pkg_action_tree has been removed.  It was obsolete and
	didn't need to be there.

2001-07-19  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Bump version number to 0.2.4

	* /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/pl.po:
	Ran update-po

	* /cvsroot/aptitude/aptitude/src/generic/apt.cc:
	Remove an unneeded comment

	* /cvsroot/aptitude/aptitude/src/download_screen.h, /cvsroot/aptitude/aptitude/src/generic/config_signal.h, /cvsroot/aptitude/aptitude/src/generic/strhash.h, /cvsroot/aptitude/aptitude/src/strhash.h, /cvsroot/aptitude/aptitude/src/vscreen/config/keybindings.cc:
	Conditionalization in the header requires that config.h be included, or
	really bad[tm] stuff happens.  In this case, different versions of
	the hash map were being used in some files from in others.  Not
	good!

	* /cvsroot/aptitude/aptitude/src/download.cc:
	Fixed some thinkos in the conditionalization for pkgAcquire::Item*, so
	download.cc compiles against earlier apts again.

	* /cvsroot/aptitude/aptitude/acconfig.h, /cvsroot/aptitude/aptitude/src/apt_config_widgets.h, /cvsroot/aptitude/aptitude/src/apt_info_tree.h, /cvsroot/aptitude/aptitude/src/apt_options.cc, /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/download_bar.h, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/download_list.h, /cvsroot/aptitude/aptitude/src/download_manager.h, /cvsroot/aptitude/aptitude/src/download_screen.h, /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/config_signal.h, /cvsroot/aptitude/aptitude/src/generic/strhash.h, /cvsroot/aptitude/aptitude/src/generic/undo.cc, /cvsroot/aptitude/aptitude/src/generic/undo.h, /cvsroot/aptitude/aptitude/src/load_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/load_grouppolicy.h, /cvsroot/aptitude/aptitude/src/load_sortpolicy.cc, /cvsroot/aptitude/aptitude/src/load_sortpolicy.h, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/mine/board.cc, /cvsroot/aptitude/aptitude/src/mine/board.h, /cvsroot/aptitude/aptitude/src/mine/cmine.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.h, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h, /cvsroot/aptitude/aptitude/src/pkg_view.cc, /cvsroot/aptitude/aptitude/src/pkg_view.h, /cvsroot/aptitude/aptitude/src/strhash.h, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h:
	Everything now compiles and -- almost -- works with g++ 3.0.  Still some
	problems, partly due (I think) to hashtable incompatibilities

	* /cvsroot/aptitude/aptitude/help-fi.txt: New file.

	* /cvsroot/aptitude/aptitude/help-fi.txt:
	Oops, help-fi.txt got left out of CVS.  d'oh!

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h:
	It seems the inline constructors for vs_menu_info were also causing
	confusion.  They were moved in the cc file, and aptitude now (DRUM ROLL)
	compiles with g++-3.0!

2001-07-18  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h:
	The menu/slotarg stuff sort of works, if optimization is off.
	This is done by using the constructor to initialize static arrays
	including slotargs, rather than simply listing initializers for
	the members.

2001-07-11  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/NEWS: Oops.  Fixed NEWS

	* /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/pl.po:
	Ran update-po

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/README:
	Bumped version to 0.2.3

	* /cvsroot/aptitude/aptitude/NEWS: Updated the NEWS file for 0.2.3

	* /cvsroot/aptitude/aptitude/aptitude.1: Also document -w

	* /cvsroot/aptitude/aptitude/aptitude.1:
	Document the available options in aptitude's manpage

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	Don't mark every package as 'new' when starting for the first time

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	Make the program compile again on potato (I had to conditionalize the
	restoration of the candidate version in the cache-loading routine)

2001-07-10  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Use J and K for level-up and level-down -- C-j is taken for other keybindings.

	* /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	It's now possible to run dpkg-reconfigure from within aptitude (hokey, I
	know, but it's only a few lines of code..)

	* /cvsroot/aptitude/aptitude/src/mine/cmine.cc:
	Made the Minesweeper help screen actually work (woops!)

	* /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	Ok, I'm chickening out: the auto-su-to-root on install now just
	shows a preview screen; it doesn't actually start the install.

	This is because I still don't totally trust the transfer of
	the current selections, and want to allow people to avoid
	nasty accidents.

	* /cvsroot/aptitude/aptitude/README:
	Documented the whitespace-sensitive nature of limits

	* /cvsroot/aptitude/aptitude/README: Document the ~a matcher

	* /cvsroot/aptitude/aptitude/README: Document UI::Advance-On-Action

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_treeitem.h:
	Moving forward or backward in a level will no longer ever move 'up' out of
	that level.

	* /cvsroot/aptitude/aptitude/src/apt_options.cc, /cvsroot/aptitude/aptitude/src/pkg_node.cc:
	Added code to make all package-nodes follow Steve Greenland's suggested
	dselect-like behavior.  (is this the RTTD?  dunno..)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h:
	Broke the level-movement commands into separate methods, and exposed
	them to the outside world.

	* /cvsroot/aptitude/aptitude/README: Documented LevelUp and LevelDown

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_treeitem.h:
	Added another vs_tree function, which will advance to the next
	item on the current level.  The keybindings are LevelUp and LevelDown,
	and they default to C-k and C-j, respectively.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	Broke the commands to move up, move down, page up/down, etc out of
	the vs_tree's main keystroke handler and into separate PUBLIC
	functions.  This is just the Right Thing To Do, and also lets me
	easily implement Steve Greenland's suggestion.

	* /cvsroot/aptitude/aptitude/src/generic/matchers.cc:
	It should now be possible to limit based on the action that will be
	taken with it (install/uprgade/remove/purge/reinstall/hold).

	Also, some strings that weren't previously marked for translation are.

	* /cvsroot/aptitude/aptitude/src/generic/apt.cc:
	If the cachefile open fails, fall back to opening read-only.

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	After trying to start a subprocess, clean up errors before reloading the
	cache (if errors were hanging around, the cache would fail to load.
	Probably I should be using something more fine-grained (what?) instead
	of checking _error->PendingError()

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	Finally get passing of candidate-version info to the subprocess to
	work correctly.  (it seems I have to mark the package for installation
	after I set the candidate version.  Oops)

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	Fix some stuff that meant that the version-selection stuff would never have
	worked properly.  (it's still doesn't, but at least it tries)  Specifically,
	don't increment i for a loop on ver (d'oh)

2001-07-09  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_view.cc:
	Keep the description widget from causing a crash when a non-wrappable word
	(one longer than the widget's width) is included in the description.

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	Added some code to try to save versions in the state file (hacky, just for
	su-to-root), but it doesn't work and I'm too tired to fix it.

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	When a vs_tree is resized, the selection will no longer be modified.
	Instead, the screen scrolls until it is once again visible.

2001-07-08  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/generic/aptitudepolicy.cc, /cvsroot/aptitude/aptitude/src/generic/aptitudepolicy.h:
	Make it compile on woody/sid, too

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/generic/aptitudepolicy.cc, /cvsroot/aptitude/aptitude/src/generic/aptitudepolicy.h, /cvsroot/aptitude/aptitude/src/load_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/load_sortpolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	Modified aptitude to once again compile against the potato version of libapt

2001-07-04  uid35045  <uid35045@torrent>

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Don't let the user clean the package cache (even just obsolete files)
	while a download is proceeding.  That's just a weird thing to do.

	* /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/download_list.h, /cvsroot/aptitude/aptitude/src/download_manager.cc, /cvsroot/aptitude/aptitude/src/download_manager.h, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h:
	  Hacked around a nasty crashing bug.  The problem was that I was using
	destroy() to signal the cancellation of a download -- yes, it's evil, but it
	worked because of the deletion queue..at least, until I tried to start
	installation at the beginning of the program, before the main main loop.
	Boom!
	  The hack solution is to override destroy() to call cancel() instead.  The
	real solution is probably never to call destroy() at all, but I'm not sure I
	understand how that would work, and I want to eliminate this crash NOW.
	  This commit also decouples the download status from the widget via
	download_manager -- I thought (wrongly) that it would help the crash, but
	this is useful for other reasons, so I'm leaving it in.

	* /cvsroot/aptitude/aptitude/src/download_manager.cc, /cvsroot/aptitude/aptitude/src/download_manager.h:
	New file.

2001-07-02  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download_bar.cc, /cvsroot/aptitude/aptitude/src/download_list.cc:
	Ok, it compiles again

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	The media-change message should now be split up so that it hopefully fits
	onto enough lines.  (addresses a Debian bug report)

	* /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	aptitude now accepts -w to suppress the startup welcome message, and the
	su_to_root code will pass it to avoid a redundant message

	* /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	The auto-become-root behavior now works for installation as well

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Make the auto-su from update_package_lists() pass -u into the subaptitude

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Don't suddenly exit if the user mistypes a password (or, I suppose, something
	else bad happens) -- maybe I should eventually use a second fifo (eek) to
	distinguish between bad passwords and other problems.

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	have_system_lock wasn't being initialized to false, which caused some pretty
	broken behavior in some situations.  Fixed.

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	D'oh, some partial changes slipped into that last commit and kept it from
	compiling.  Fix them (make the popup message always a popup;
	the status-line stuff can't deal with it properly)

	* /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	Added command-line options to update the lists on startup and to start a
	package run on startup.  (it might be better if you could
	do this and end immediately, but I think that'll be trickier
	to implement)

	* /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/apt_options.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	Added the ability to automatically become root when performing a privileged
	action.

	* /cvsroot/aptitude/aptitude/src/ui.cc: IT WORKS!!!!!
	Redid the su-to-root stuff (again) to avoid using a FIFO to read the status
	information (the tagfile code barfs on FIFOs, grrr)  And..it works!!  Ok, you
	lose undo history, version selections go out the window, but hey..it works!
	It works!  It works!  (Daniel is a happy Daniel)

	* /cvsroot/aptitude/aptitude/src/aptitude.h, /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/generic/apt.h, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	Added the very beginning of the stuff necessary to have a "su to root" option
	integrated into aptitude.  The idea is that it'll be able to send the current
	package state through a FIFO to a subprocess.  Right now it, uh, doesn't work
	at all, but it's stopped screwing up the rest of the program, so I'm
	committing.

2001-07-01  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/main.cc:
	Add skeletal code for option-parsing

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Now set active_status_download to NULL whenever the status-download
	emits a destroyed() signal.  This fixes a segfault the
	last commit introduced.

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Status-area downloads can now be cancelled with 'q' (hmm, not so great,
	but that whole status-area download thing is a hack anyway)

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	Added a description for the hamradio section

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	  Implemented Zach Weinberg's suggestion: if the menubar is set to autohide
	and it's possible to close all screens without exiting the program, make
	the menubar visible anyway if the last screen is closed.  (avoids a certain
	amount of user confusion)

2001-06-30  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download_bar.cc, /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/download_list.h, /cvsroot/aptitude/aptitude/src/ui.cc:
	Experimentally use an altered download_list to do 'status bvar' downloads.
	Probably I should rename the option, or at least change its
	description..

	* /cvsroot/aptitude/aptitude/src/download_bar.cc, /cvsroot/aptitude/aptitude/src/download_bar.h, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_subtree.cc:
	Fix the section-name table -- the section name is 'utils', not 'util'

	* /cvsroot/aptitude/aptitude/src/dep_item.cc:
	  Broken dependencies are now displayed with a textual tag next to the item.
	  (this should help colorblind people and people on B&W displays)

	* /cvsroot/aptitude/aptitude/src/generic/matchers.cc, /cvsroot/aptitude/aptitude/README:
	Added a general mechanism for matching packages with broken dependencies
	of a particular type (eg, Recommends or Suggests)

2001-06-29  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/NEWS: Tweak news

	* /cvsroot/aptitude/aptitude/Makefile.am:
	Oops, the makefile listed help-fi.1 instead of help-fi.txt

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Bumped version number to 0.2.2, updated NEWS

	* /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/pl.po:
	Ran make update-po

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	Added (somewhat experimental) code to display descriptions of package
	sections, similar to what capt does.  This clutters the display up a bit, so
	it may be modified or removed in the future.

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h:
	The default widths for descriptions can now vary with the locale.
	Sorry Michal, I decided not to translate the default
	format string; I think that would be too confusing.

	* /cvsroot/aptitude/aptitude/src/mine/Makefile.am:
	Fix the name of the Finnish Minesweeper help file

	* /cvsroot/aptitude/aptitude/aptitude.fi.1, /cvsroot/aptitude/aptitude/Makefile.am, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/src/mine/Makefile.am, /cvsroot/aptitude/aptitude/src/mine/mine-help-fi.txt:
	Added the new and updated Finnish translation.

	* /cvsroot/aptitude/aptitude/aptitude.fi.1, /cvsroot/aptitude/aptitude/src/mine/mine-help-fi.txt:
	New file.

2001-06-28  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Bump the version number to 0.2.1

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Kill the explicit 'save options' command, it's not necessary anymore

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_treeitem.h:
	Fix a nasty crash due to hairiness surrounding vs_treeiterator
	(and wrote a big NOTE about it in vs_tree.cc)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_treeitem.h:
	Finally found that strange bug about "I pressed the end key and now I can't
	find the root of the tree" -- levelrefs need a parent chain extending as far
	up as they'll be able to move, and the end-iterator for the vs_tree was being
	set to a levelref that didn't go all the way to its root.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	vs_trees now honor the showroot option when they are first created

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	  Fixed an off-by-one error in the handling of the move-up command (it would
	cause the selection to vanish if it was one line away from having to disappear)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	Fix the move-down code to also move one line at a time

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	Hide the cursor when a non-selectable item is 'selected'

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	Rewrote the 'move up' command to be much less jarring.

	* /cvsroot/aptitude/aptitude/src/mine/cmine.cc:
	The 'custom board' dialog in Minesweeper no longer displays its
	title in inverse video from the rest of the dialog

	* /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	  popup_widget now takes an optional parameter which can prevent
	show_all from being called on the widget.  (since most widgets do need
	show_all, it's a nuisance to have to explicitly instantiate them and call
	show_all before calling popup_widget)
	  This fixes the problem with Minesweeper not displaying its popup dialogs.
	(and, hey, maybe some more problems I don't know about)  Also, all those
	places where I explicitly show_all() a popup widget are now redundant.

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	Be sure to display the confirmation CD-ROM dialog (amazingly, this is the
	only change needed to get the CD stuff working, and it was
	only necessary because of changes in 0.2.0)

	* /cvsroot/aptitude/aptitude/po/pl.po:
	A bunch of po files need to have their line number references updated

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_label.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc:
	Fix more signedness issues with addch

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Change a reference to the configuration group 'aptitude' to PACKAGE

	* /cvsroot/aptitude/aptitude/src/apt_options.cc:
	Ok, ok, ok, autosave options.  Don't say I didn't warn ya..

2001-06-26  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/src/ui.cc:
	D'oh, I accidentally made all the help dialogs useless.  I guess I have
	to redo the 0.2.0 release (luckily, it wasn't uploaded yet)

2001-06-25  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/help-pl.txt, /cvsroot/aptitude/aptitude/po/pl.po:
	Merge Michal's Polish translation updates

	* /cvsroot/aptitude/aptitude/configure.in: Bump version number to 0.2.0

	* /cvsroot/aptitude/aptitude/NEWS: Update NEWS for 0.2.0

	* /cvsroot/aptitude/aptitude/TODO:
	Brought the TODO a little more into line with reality

	* /cvsroot/aptitude/aptitude/src/pkg_view.cc:
	  Package-description items now don't allow you to scroll down forever.
	This is done by using the display routine to calculate the number of lines
	in the description; a parameter determines whether it will actually draw
	the widget.

	* /cvsroot/aptitude/aptitude/src/pkg_view.cc:
	Fix the commenting in the package-description wordwrap stuff

	* /cvsroot/aptitude/aptitude/src/apt_options.cc, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/README:
	Added an option to control whether the extended description is shown by
	default.

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Changed {add,insert}_main_widget to no longer use show_all (explicitly or
	implicitly)  This means that the info area will never be on by default in
	info screens.  Yay!

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Make the 'essential package removal' warning box
	work again -- it was assuming that popup_widget used show_all

	* /cvsroot/aptitude/aptitude/README: Bring README up to date for 0.2.0

	* /cvsroot/aptitude/aptitude/aptitude-hackers-guide.txt:
	Update the hacker's guide for the new version

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	pkg_ver_item now also uses the make_foo_screen routines.  This should fix some
	of the "I can't get the description area when I look at a package's
	information" bugs that have appeared..

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Fix a small typo that snuck in with all that sort-policy fixing stuff

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	Use show_all() on the download summary since popup_widget no longer uses it.

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Use recursive mutexes to avoid deadlocks (I suspect I will never understand
	why the deadlocks only started appearing in the last commit or so)

	* /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_sortpolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_sortpolicy.h, /cvsroot/aptitude/aptitude/src/pkg_subtree.cc, /cvsroot/aptitude/aptitude/src/pkg_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_treeitem.h:
	  Really fixed sorting.  The sorting wasn't working properly since the sort
	policy was only passed to the top-level of the tree, causing the rest of the
	tree to be unsorted.  (Doh!)  So I modified things once again, this time
	reverting back to having a 'sort policy class' with a virtual method to
	compare two items; to get around the pass-by-value in the STL's sort(), I
	use a wrapper class.  It is all quite ugly and nasty and probably also
	way too slow.

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am:
	Distribute README.layout in the package

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Kill the Test Error with extreme prejudice.  (if people complain, I'll
	put it back in ;-) )

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	  Made the highlighted letter in "obsolete" the "o", and added a highlight
	on the "C" of ChangeLog.

2001-06-24  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/acconfig.h, /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/src/vscreen/config/colors.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/keybindings.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc:
	  - Eliminated the state where the menubar is selected but no menu is active;
	  it has no particular purpose aside from wasting keystrokes and confusing
	  people.
	  - Added configure tests for hash_map and ext/hash_map (and hash_set
	  and ext/hash_set).  Fall back to the standard map and set if no
	  implementation of the hashed version is available.  (this allows it to
	  compile with both g++-2.95 and g++-3.0)

	* /cvsroot/aptitude/aptitude/Makefile.am, /cvsroot/aptitude/aptitude/src/ui.cc:
	  - I hope that autoclean will now actually autoclean, rather than just
	  saying that it did. (untested)
	  - Added the NEWS file to the help menu.

2001-06-22  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_view.cc, /cvsroot/aptitude/aptitude/src/pkg_view.h, /cvsroot/aptitude/aptitude/src/ui.cc:
	Add the groundwork for hiding the description by default, but
	it's still visible, presumably because something is calling show_all
	on the view.

	* /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Changed some title strings which were still using string concatenation
	to use snprintf (for translators)

	* /cvsroot/aptitude/aptitude/NEWS:
	Ok, the NEWS file now properly reports changes in 0.0.8.7.1

2001-06-19  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/config/colors.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/colors.h, /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.h, /cvsroot/aptitude/aptitude/src/vscreen/config/keybindings.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/keybindings.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_radiogroup.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_stacked.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_staticitem.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_treeitem.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_treeitem.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc, /cvsroot/aptitude/aptitude/src/vscreen/columnify.cc, /cvsroot/aptitude/aptitude/src/vscreen/columnify.h, /cvsroot/aptitude/aptitude/src/vscreen/curses++.cc, /cvsroot/aptitude/aptitude/src/vscreen/curses++.h, /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h:
	Got all the stuff in vscreen/ compiling with gcc-3.0..now it crashes on
	startup.  Ouch.  Anyway, the rules for this are: headers explicitly
	use std::class; .cc files declare 'using namespace std'.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc:
	Another Michal fix: somehow vs_pager started screwing up characters with
	the high bit set again.  Added the requisite cast to unsigned (ick)..

	* /cvsroot/aptitude/aptitude/src/apt_options.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	Made Aptitude::UI::Prompt-On-Exit work again, and added it to the options
	dialog.  (oops)

2001-06-18  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/NEWS:
	Add a note about this being a pre-0.2 to NEWS

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Version number bumped to 0.1.9

	* /cvsroot/aptitude/aptitude/src/apt_options.cc, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	Added some missing options to the options dialog, and really
	made Aptitude::UI::Welcome-Dialog control whether the
	welcome dialog was displayed.

	* /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_view.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	  Fixed a bunch of crashes and potential crashes in the package-columnization
	stuff when the package-cache is in a weird state.  There's still something
	bizarre going on with the static items, where iterators I initialize after
	reloading the cache suddenly point to bad memory.
	  Also fixed a crash due to deleting the preview tree and not the preview
	view (connected the tree's destroyed signal to the view's destroy method)

2001-06-17  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/generic/matchers.cc:
	Fix the Origin and Archive stuff to be at least semi-useful

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Only connect signals in show_message if we got a valid slot, so it doesn't
	immediately crash when displaying in the minibuffer.

	* /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	Add a generic popup-message facility.  Currently segfaults in some cases..

	* /cvsroot/aptitude/aptitude/src/pkg_view.cc:
	Edited the 'this is a hack' comment

	* /cvsroot/aptitude/aptitude/src/pkg_view.cc:
	Fixed several unpleasant crashes resulting from pkgCache::VerIterator::end()
	crashing if the version-iterator has a NULL cache reference.  Oops.  The
	static items were generating a dummy iterator to start with, and then passing
	that to the columnizer when they were redrawn, causing it to crash.  The
	program now checks the validity of the iterator first, and tries to make it
	valid if possible (this shouldn't be noticable to the user, since the only
	time it's invalid is at the moment the cache is being loaded)

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/ui.cc:
	Ok, ok; if Aptitude::UI::Preview-Limit is set, preview screens will start with
	a different limit from normal package trees.  Addresses another Michael bug.

	* /cvsroot/aptitude/aptitude/src/pkg_view.h, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/pkg_view.cc:
	Package-view items can now listen for changes to a particular configuration
	option; in particular, static items are modified when the configuration option
	they were derived from is modified.  (fixes the "I changed the column layout
	and nothing happened!" syndrome)

	* /cvsroot/aptitude/aptitude/src/pkg_view.cc:
	Static info widgets now re-columnify themselves whenever they are painted.
	Should fix a lot of weird display quirks.

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Added support for a "header line".  Default is to display program name,
	broken package count, download size, and disk usage.

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	The status line now does something more sensible when no package is selected
	and the columnizers now do something more sensible when passed a NULL iterator.

	* /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.cc:
	The column-parsing code can now sort of recognize \n..but use it at your own
	risk as the columnifier doesn't recognize it (so odd effects will probably
	happen)

	* /cvsroot/aptitude/aptitude/src/apt_options.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	Fixed the status-line stuff so it actually honors the configuration option.
	The status_columns stuff in pkg_columnizer.{cc,h} has been removed.

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h:
	Added the new column types which will be used for the screen header.

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	pkg_ver_columnizer is now a subclass of pkg_columnizer.  This should make it
	possible to make pkg_columnizer accept some extra format types for stuff that
	can go in the "header" (like broken package count, etc) without needing to
	duplicate code.  (in fact, I bet some duplicated code can be removed now, but
	I'll need to think about that)

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	The dependency screen is now also a pkg_view.

	* /cvsroot/aptitude/aptitude/src/apt_info_tree.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	The info screen and dependency screen are now generated as pkg_views with
	the description area and stuff.

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_view.cc, /cvsroot/aptitude/aptitude/src/pkg_view.h, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	  The Grand View Unification begins:
	  pkg_views now, instead of specifically having trees placed, can have any
	widget plugged into their "main widget" slot.  This means that the same
	configuration will work for multiple screens, and I don't have to write in
	stuff for ("info screen", "dep screen", ...) and make that work with the
	signal stuff.

2001-06-16  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	  The preview is now generated as a package view, so it has a description area
	and stuff.  (hacky, yuck)

	* /cvsroot/aptitude/aptitude/src/generic/matchers.cc:
	  Preliminary support for matching on origin and archive.  This is a little
	dicey and should be fixed (eg, it does the Wrong Thing if a version is
	available from multiple origins and archives)

2001-06-15  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Bump version numbers to 0.1.8

	* /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Auto-Install is now on by default

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	Swapped the top-level labels for obsolete and virtual packages, since they
	somehow ended up being reversed.

2001-06-14  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/generic/apt.h, /cvsroot/aptitude/aptitude/src/generic/aptitudepolicy.cc, /cvsroot/aptitude/aptitude/src/generic/aptitudepolicy.h:
	Copyright notices (bleah)

	* /cvsroot/aptitude/aptitude/src/load_grouppolicy.cc:
	Priority grouping policies no longer crash if they are at the end of a stack

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	  Priority groups are now displayed as "Priority (whatever)", and they are
	sorted so that Required priority comes before Important.

	* /cvsroot/aptitude/aptitude/src/generic/apt.h, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_sortpolicy.cc:
	Added a quite nasty hack to force certain trees (eg,
	priorities and installation modes) to be sorted in a particular
	non-alphabetial order.

	* /cvsroot/aptitude/aptitude/src/download.cc:
	  The log is now sorted (yay!)

	* /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/apt_options.cc, /cvsroot/aptitude/aptitude/src/apt_options.h, /cvsroot/aptitude/aptitude/src/ui.cc:
	  Added Recommends and Suggests handling to the in-program options, and split
	dependency-handling into a separate options dialog.

	* /cvsroot/aptitude/aptitude/src/generic/aptitudepolicy.cc, /cvsroot/aptitude/aptitude/src/generic/aptitudepolicy.h:
	New file.

	* /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptitudepolicy.cc, /cvsroot/aptitude/aptitude/src/generic/aptitudepolicy.h, /cvsroot/aptitude/aptitude/src/generic/Makefile.am:
	  Recommends and Suggests can now be like dependencies, at least for an
	initial package installation.  (although libapt seems to be broken wrt ORs)

	  Also, exactly the following dependencies will be colored red if they are
	not met: critical dependencies, recommends, and suggests.  (previously only
	important ones were)

2001-06-13  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/apt_options.cc, /cvsroot/aptitude/aptitude/src/download.cc:
	  aptitude can now do an autoclean operation after updating its package lists..
	in fact, this is now the default behavior.

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	  Added autoclean capabilities and made both clean and autoclean display
	a message during and after the process.

	* /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/load_sortpolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_sortpolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_sortpolicy.h:
	Packages can now be sorted by priority

	* /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/load_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.h:
	It is now possible to group packages by priority

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	Make it painful to mark an essential package for removal.  There should still
	be a pre-install-run check as well.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.h:
	Added a stock string dialog

	* /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/generic/matchers.cc, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc:
	  Added a matcher for essential packages and a line in the info screen for
	them; also fixed a nasty little crash in the matching code (I wasn't checking
	the return value of parse_atom).  This ought to be backported to the stable
	tree if I release anything more from that branch..

	* /cvsroot/aptitude/aptitude/README:
	It's not the most brilliant piece of documentation, but there is now
	a note about Aptitude::Log in the README.

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Fixed colorization of reinstalled packages/versions

	* /cvsroot/aptitude/aptitude/src/generic/apt.cc:
	Don't list reinstalled packages as broken (reinstalled upgradable packages are
	still screwy)

	* /cvsroot/aptitude/aptitude/autogen.sh:
	Don't use the 2.50 autoconf, it breaks gettext

	* /cvsroot/aptitude/aptitude/autogen.sh, /cvsroot/aptitude/aptitude/src/ui.cc:
	[unstable] Added code to prevent the user from doing something
	inconsistent

	* /cvsroot/aptitude/aptitude/src/dep_item.cc:
	Oops, I forgot that GlobOr needs to modify the DepIterator (d'oh) -- fix things
	so we don't go into an infinite loop when generating a dependency
	tree.

2001-06-08  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Bump version to 0.0.8.7.1

	* /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/fr.po, /cvsroot/aptitude/aptitude/po/gl.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/src/pkg_action_tree.cc, /cvsroot/aptitude/aptitude/po/de.po:
	Oops, pkg_action_tree should be calling up to pkg_tree,
	not apt_tree.  Fixed, thanks again to Michal Politowski.

	* /cvsroot/aptitude/aptitude/src/generic/apt.cc:
	Try to do something slightly more sensible in the preview screen
	when auto-upgrade is off: packages are displayed as held instead
	of broken-and-held.

2001-06-07  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/apt_info_tree.h, /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/dep_item.h, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.cc, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.h, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.h, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_info_screen.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h, /cvsroot/aptitude/aptitude/src/pkg_view.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	  Package and version iterators are now consistently passed by reference
	rather than by value.

2001-06-05  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/mine/Makefile.am:
	Oops, make sure mine.txt is distributed..

	* /cvsroot/aptitude/aptitude/NEWS: Doh, the NEWS file was messed up

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Bump version to 0.1.7

	* /cvsroot/aptitude/aptitude/po/POTFILES.in:
	Remove references to the now-removed apt_tree file

	* /cvsroot/aptitude/aptitude/src/apt_options.cc:
	Add an end-marker to the table for package selection options,
	so we don't crash.  (oops)

	* /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/apt_tree.h, /cvsroot/aptitude/aptitude/src/pkg_action_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_action_tree.h, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc:
	  Merged with stable branch through 0.0.8.7

	* /cvsroot/aptitude/aptitude/help.txt:
	Added information about scrolling the extended description (with a/z)
	and a preamble about navigating the help screen to help.txt

2001-06-04  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Bumped the version number to 0.0.8.7

	* /cvsroot/aptitude/aptitude/src/pkg_action_tree.cc:
	Fixed up the check-for-broken-packages code.  I *think* it works now.

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/apt_tree.h, /cvsroot/aptitude/aptitude/src/pkg_action_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_action_tree.h:
	Added some hacks to try to warn the user if some packages were
	automatically modified before doing an install run

2001-05-25  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/autogen.sh:
	Run aclocal before doing anything else, so autoheader doesn't bomb (ew)

2001-05-18  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	  Added a little popup message that appears while the cache is being reloaded
	and the package tree is being build.
	  The reason is simple: there is a delay after all operations with a progress
	bar end, due probably to the time spent building the tree (yes, I need to
	optimize this, but this hack will keep people from thinking things aren't
	working for now.  I hope)

	* /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/generic/apt.h:
	  Added another signal, cache_reload_failed, so that users of apt.cc can
	hook into all exits from apt_reload_cache().

2001-05-16  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/po/POTFILES.in: Updated POTFILES.in

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	  Edit-lines are now white-on-black by default.  (makes the dialogs look more
	logical IMO)

2001-05-15  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/mine/cmine.cc:
	The mine-board no longer explicitly destroys itself (this lets the
	kill-a-widget logic work right.)
	FIXME: shouldn't we handle destroyed widgets properly anyway?

	* /cvsroot/aptitude/aptitude/src/apt_options.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	Fix things so that modifying the package display format actually works:
	fixed the name of the config options, and connected signals for
	when they got modified

	* /cvsroot/aptitude/aptitude/src/apt_config_widgets.cc:
	Oops.  When making an apt_string_widget, the default value should be used
	as the default value, not as the prompt.

	* /cvsroot/aptitude/aptitude/src/apt_options.cc, /cvsroot/aptitude/aptitude/src/apt_options.h, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h, /cvsroot/aptitude/aptitude/src/ui.cc:
	Added a bunch more options and stuff to the options dialogs.  (this will
	probably make several deficiencies much more obvious; need to work on them..)

	* /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/apt_options.cc:
	Don't document Fix-Broken, it doesn't have any effect in the beta version

	* /cvsroot/aptitude/aptitude/README:
	Correct the documented default value of Auto-Fix-Broken

	* /cvsroot/aptitude/aptitude/src/apt_options.cc:
	  Restructured options around static tables.  I hope this makes it easier to
	add new options to the dialog and make completely new options dialogs.
	(crosses fingers)

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Don't crash when the user tries to repeat a search before doing an initial
	search

	* /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc:
	Fix a bug that's been around for ages, where the description of the most
	recent package version was used, even if you were viewing an older
	version.

2001-05-14  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	  Actually make use of the aforementioned ability.  This means, in practical
	terms, that if you start playing minesweeper, switch back to the package view,
	pop up a package-info screen, and press "q", you'll go back where you came from
	instead of seeing Minesweeper again.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h:
	  Added the ability for multiplexes to add widgets after particular other
	widgets.

	* /cvsroot/aptitude/aptitude/src/mine/cmine.cc:
	  Fixed a bunch of little bugs:
	    - The "new custom game" dialog now goes away when you tell it to
	    - "height" -> "width" in entry-error message
	    - Enter (well, Confirm) now works as a binding for Ok in new-game dialogs
	    - Default to easy in the new-game dialog

	* /cvsroot/aptitude/aptitude/src/mine/cmine.cc:
	Oops, actually display the new-game and custom-difficulty
	dialogs (this is waaayy too hard, need to make it easier someday)

	* /cvsroot/aptitude/aptitude/src/mine/cmine.cc, /cvsroot/aptitude/aptitude/src/mine/cmine.h:
	Fix some small bugs: use the lower-left corner in the lower-left, and
	actually ask for focus.  (both Minesweeper-related)  Also purged
	the cruft with non-Minesweeper bindings being defined in the
	Minesweeper code.

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	The timeout-checking routine now calls vscreen_tryupdate

	* /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/mine/cmine.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	  Minesweeper compiles and links now, and has its own menu option.
	  Be afraid.  Be very afraid.

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/mine/board.cc, /cvsroot/aptitude/aptitude/src/mine/board.h, /cvsroot/aptitude/aptitude/src/mine/cmine.cc, /cvsroot/aptitude/aptitude/src/mine/cmine.h, /cvsroot/aptitude/aptitude/src/mine/Makefile.am, /cvsroot/aptitude/aptitude/src/mine/mine-help.txt, /cvsroot/aptitude/aptitude/src/ui.cc:
	  Merged the Minesweeper code.  Doesn't quite compile+link and isn't very
	pretty, but it should work soon.

	* /cvsroot/aptitude/aptitude/src/mine/board.cc, /cvsroot/aptitude/aptitude/src/mine/board.h, /cvsroot/aptitude/aptitude/src/mine/cmine.cc, /cvsroot/aptitude/aptitude/src/mine/cmine.h, /cvsroot/aptitude/aptitude/src/mine/Makefile.am, /cvsroot/aptitude/aptitude/src/mine/mine-help.txt:
	New file.

2001-05-06  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Added a FIXME in vs_table for the Incredible Non-Shrinking Widget problem,
	just above vs_table::layout_me.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc:
	Work around problems with the table code, so the help dialog
	has a visible scrollbar.

2001-05-04  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	  Bump version to 0.1.6

	* /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	  Merged with stable through 0.0.8.6.

	* /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/fr.po, /cvsroot/aptitude/aptitude/po/gl.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/po/pt_BR.po:
	Fixed a typo in NEWS

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/fr.po, /cvsroot/aptitude/aptitude/po/gl.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/README:
	Bump the version to 0.0.8.6

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h:
	  I forgot to backport the fixes to aptcache.cc (oops); this does that, and
	also disentangles a hairy ?: construct in apt_tree.cc.

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Version-items now behave correctly if purged (bug #96228)

2001-05-03  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	  The off-by-one fix had its own problems, caused by trying to figure out the
	best location for the top of the screen when the screen size was "zero" (ie,
	before the widget was realized)  This doesn't make any sense anyway, so
	download_list::sync_top now returns immediately if this is the case.

2001-05-02  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	  Tagged a whole bunch more strings as translatable.  Also, the last commit
	included a lot of changes which should have been listed "merge with the
	stable branch through 0.0.8.5", but weren't.  (oops)

	* /cvsroot/aptitude/aptitude/ABOUT-NLS, /cvsroot/aptitude/aptitude/intl/bindtextdom.c, /cvsroot/aptitude/aptitude/intl/cat-compat.c, /cvsroot/aptitude/aptitude/intl/ChangeLog, /cvsroot/aptitude/aptitude/intl/config.charset, /cvsroot/aptitude/aptitude/intl/dcgettext.c, /cvsroot/aptitude/aptitude/intl/dcigettext.c, /cvsroot/aptitude/aptitude/intl/dcngettext.c, /cvsroot/aptitude/aptitude/intl/dgettext.c, /cvsroot/aptitude/aptitude/intl/dngettext.c, /cvsroot/aptitude/aptitude/intl/explodename.c, /cvsroot/aptitude/aptitude/intl/finddomain.c, /cvsroot/aptitude/aptitude/intl/gettext.c, /cvsroot/aptitude/aptitude/intl/gettext.h, /cvsroot/aptitude/aptitude/intl/gettextP.h, /cvsroot/aptitude/aptitude/intl/hash-string.h, /cvsroot/aptitude/aptitude/intl/intl-compat.c, /cvsroot/aptitude/aptitude/intl/l10nflist.c, /cvsroot/aptitude/aptitude/intl/libgettext.h, /cvsroot/aptitude/aptitude/intl/libgnuintl.h, /cvsroot/aptitude/aptitude/intl/loadinfo.h, /cvsroot/aptitude/aptitude/intl/loadmsgcat.c, /cvsroot/aptitude/aptitude/intl/localcharset.c, /cvsroot/aptitude/aptitude/intl/localealias.c, /cvsroot/aptitude/aptitude/intl/Makefile.in, /cvsroot/aptitude/aptitude/intl/ngettext.c, /cvsroot/aptitude/aptitude/intl/plural.y, /cvsroot/aptitude/aptitude/intl/po2tbl.sed.in, /cvsroot/aptitude/aptitude/intl/ref-add.sin, /cvsroot/aptitude/aptitude/intl/ref-del.sin, /cvsroot/aptitude/aptitude/intl/textdomain.c, /cvsroot/aptitude/aptitude/intl/VERSION, /cvsroot/aptitude/aptitude/intl/xopen-msg.sed, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/po/ChangeLog, /cvsroot/aptitude/aptitude/po/Makefile.in.in, /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Create ~/.aptitude if it doesn't exist when saving options

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Bump version to 0.0.8.5

	* /cvsroot/aptitude/aptitude/intl/cat-compat.c:
	Oops, one removed file missed me..

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	  Changed "purge" to "purged" when describing a package's current state; this
	is probably more correct, and makes life better for translators.

	* /cvsroot/aptitude/aptitude/ABOUT-NLS, /cvsroot/aptitude/aptitude/intl/bindtextdom.c, /cvsroot/aptitude/aptitude/intl/ChangeLog, /cvsroot/aptitude/aptitude/intl/config.charset, /cvsroot/aptitude/aptitude/intl/dcgettext.c, /cvsroot/aptitude/aptitude/intl/dcigettext.c, /cvsroot/aptitude/aptitude/intl/dcngettext.c, /cvsroot/aptitude/aptitude/intl/dgettext.c, /cvsroot/aptitude/aptitude/intl/dngettext.c, /cvsroot/aptitude/aptitude/intl/explodename.c, /cvsroot/aptitude/aptitude/intl/finddomain.c, /cvsroot/aptitude/aptitude/intl/gettext.c, /cvsroot/aptitude/aptitude/intl/gettext.h, /cvsroot/aptitude/aptitude/intl/gettextP.h, /cvsroot/aptitude/aptitude/intl/hash-string.h, /cvsroot/aptitude/aptitude/intl/intl-compat.c, /cvsroot/aptitude/aptitude/intl/l10nflist.c, /cvsroot/aptitude/aptitude/intl/libgettext.h, /cvsroot/aptitude/aptitude/intl/libgnuintl.h, /cvsroot/aptitude/aptitude/intl/loadinfo.h, /cvsroot/aptitude/aptitude/intl/loadmsgcat.c, /cvsroot/aptitude/aptitude/intl/localcharset.c, /cvsroot/aptitude/aptitude/intl/localealias.c, /cvsroot/aptitude/aptitude/intl/Makefile.in, /cvsroot/aptitude/aptitude/intl/ngettext.c, /cvsroot/aptitude/aptitude/intl/plural.y, /cvsroot/aptitude/aptitude/intl/po2tbl.sed.in, /cvsroot/aptitude/aptitude/intl/ref-add.sin, /cvsroot/aptitude/aptitude/intl/ref-del.sin, /cvsroot/aptitude/aptitude/intl/textdomain.c, /cvsroot/aptitude/aptitude/intl/VERSION, /cvsroot/aptitude/aptitude/intl/xopen-msg.sed, /cvsroot/aptitude/aptitude/po/ChangeLog, /cvsroot/aptitude/aptitude/po/Makefile.in.in:
	  Re-ran gettext and merged the results into CVS.  This should clear up
	bug #95749, or your money back.  (I was using an old Makefile.in.in with a new
	gettext, not cool..I'm just lucky nothing broke in a worse way.  Or maybe not,
	then I would have noticed..)

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	This one's for the translators..

	The menus are now fully marked for translation, and translations should take
	effect unless I screwed up.  And it only took a huge gross hack to do it :)

	* /cvsroot/aptitude/aptitude/Makefile.am, /cvsroot/aptitude/aptitude/src/ui.cc:
	  Allow the README to be viewed from the program.  (Help/User's Manual)
	  Also, COPYING is now installed into HELPDIR.  (why this wasn't true before
	I don't know)

2001-05-01  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/ui.cc: Put the Help keybinding back

	* /cvsroot/aptitude/aptitude/src/vscreen/config/keybindings.cc:
	  Correctly display C-_ as C-_, not C-^?.  (more special casing, ewwwww)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc:
	Remove some spurious cruft in the file-pager

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	Fix a off-by-one error that caused the current download to be displayed off
	the bottom of the screen.  (this will sometimes cause a break at
	the bottom of the display, but that's better than not being able
	to see that line at all)

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Display the menu descriptions with a bold version of the status color

2001-04-30  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	  In addition to a first backup of the cache, I now back it up AFTER doing
	any pre-marking of upgradable packages and so on.  I think this fixes the
	"I hit undo and all my packages went into the HOLD state" bug.  (silly me,
	I upgraded and lost my reproducible test case..)

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Re-enable undo, although it unfortunately doesn't have the mark/revert behavior
	any more.

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	File menu is now named Actions -- it's more logical.

2001-04-28  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	  Moved to version 0.1.5

	* /cvsroot/aptitude/aptitude/help.txt, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Sync up with the stable branch through 0.0.8.4

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/pkg_view.cc:
	  You can now, with one easy keystroke, scroll any description items downwards
	from a tree.  Defaults are "a" for up and "z" for down (yes, this sucks)

	* /cvsroot/aptitude/aptitude/src/pkg_view.cc:
	  Added (very slightly hacky) code to allow the description-widget to be
	focussed and to be scrolled using that focus.  Obviously keybindings for this
	in the tree are eventually preferable, but having this available allows other
	ideas as well..

	* /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/fr.po, /cvsroot/aptitude/aptitude/po/gl.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/po/pt_BR.po:
	Oops, added an item I forgot to the changelog

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/help.txt, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Prepare to release 0.0.8.4

	* /cvsroot/aptitude/aptitude/help.txt, /cvsroot/aptitude/aptitude/README:
	Add badly-written explanations of the state/action flags (bug #93216)

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Use the compiled matcher to do searches. (this should have been happening all
	along, oops)  This means that (a) searches ought to be faster, and (b) we can
	handle bad search patterns gracefully.  (bug #95455)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	  Don't crash when the user tries to search beginning at the end of the list.

2001-04-20  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_view.cc:
	Ok, make the word-wrapping stuff not prepend gratuitous spaces to preformatted
	lines.  I think it's working correctly now.  (crosses fingers)

	* /cvsroot/aptitude/aptitude/src/pkg_view.cc:
	Don't runtogether words which are around linebreaks in the Description

2001-04-19  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_view.cc:
	  Ok, rewrite the wordwrapper so that it, well, works.  Or at least sort
	of works.  (still needs a little work; eg, see what happens to the at
	description)

2001-04-16  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_view.cc, /cvsroot/aptitude/aptitude/src/pkg_view.h, /cvsroot/aptitude/aptitude/src/ui.cc:
	Add the ability for package views to have different backgrounds,
	and make the default description-view thingy have a status-line style

2001-04-15  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/help.txt, /cvsroot/aptitude/aptitude/README:
	Add info on 'D' to the documentation

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	Activate the show/hide feature (using D as a default binding, eww)

	* /cvsroot/aptitude/aptitude/src/pkg_view.cc, /cvsroot/aptitude/aptitude/src/pkg_view.h, /cvsroot/aptitude/aptitude/src/ui.cc:
	  Added a description widget.  Yes, the implementation is a bit of a hack.
	No, at this point, I don't care; I still want to implement the all-powerful
	 ber-info-widget, but this is quite a bit of what people want.

	* /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc:
	  If no explicit source package is known, assume it's the same as the package
	name.  I believe this should work.  Maybe.  (affects pkg_info_screen)

	* /cvsroot/aptitude/aptitude/src/pkg_view.cc, /cvsroot/aptitude/aptitude/src/pkg_view.h, /cvsroot/aptitude/aptitude/src/ui.cc:
	  Added stuff for showing/hiding package views on demand.  (needs a lot more
	work, probably a new package view, to be useful at all)

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h:
	Don't write out extended state info unless something actually changed
	(to do this, I just use a dirty flag in the cache wrapper)

2001-04-14  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Save the extended selection info when we exit, too

2001-04-10  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Bump versions to 0.1.4

	* /cvsroot/aptitude/aptitude/aptitude.gl.1, /cvsroot/aptitude/aptitude/help-gl.txt, /cvsroot/aptitude/aptitude/Makefile.am, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/fr.po, /cvsroot/aptitude/aptitude/po/gl.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/po/pt_BR.po:
	  Merged with HEAD through 0.0.8.3.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h:
	Actually hide displayed menu descriptions when the user stops using the menu

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc:
	It really isn't that hard to hide menus in the place where they should be
	hidden

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	  Actually use the menu-item-description facilities that I just introduced.
	  Not all the descriptions are especially good, and instances of
	add_main_widget are mostly lacking descriptions entirely..

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h:
	  Added facilities to support a useful textual description of menu items.
	  vs_menu now emits a signal whenever one of its menu-items is selected; this
	can be pretty easily bound to a function that updates a text display (see
	testvscreen.cc)

2001-04-09  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/po/gl.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/fr.po:
	Back out the nasty gettext hacks for now

2001-04-08  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download.cc:
	Make the 'saving status' progress bar go away when updating the lists as well.
	Does this suggest that Done should be called by save_selection_list?

	* /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/vs_progress.cc:
	Make the progress bar hide itself while the download is proceeding. (and
	whenever an operation is done, as a matter of fact)

	* /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/download.h, /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/download_list.h, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	Finally did the work (and one minor hack) needed to make the 'cancel' button
	functional.  Yeah\!

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	Added a simple download-progress-bar.

2001-04-06  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in:
	Oops, hack was broken.  Fixed.  (use /bin/true, not '')

	* /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/fr.po, /cvsroot/aptitude/aptitude/po/gl.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/po/pt_BR.po:
	See gettext..see gettext modify its files randomly..

	* /cvsroot/aptitude/aptitude/configure.in:
	Try to hack around evilness in gettext.m4

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc:
	Fix the multiplexer so that if the user chooses not to switch between
	views, it acts like a stack.  (just choose to move back if possible when
	deleting a view)

	* /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/fr.po, /cvsroot/aptitude/aptitude/po/gl.po, /cvsroot/aptitude/aptitude/po/pl.po:
	Usual mysterious line readjustments..

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Update build files/documentation for 0.0.8.3

	* /cvsroot/aptitude/aptitude/po/gl.po:
	Update the gl pofile to actually use the new help-gl.txt

	* /cvsroot/aptitude/aptitude/aptitude.gl.1, /cvsroot/aptitude/aptitude/help-gl.txt, /cvsroot/aptitude/aptitude/Makefile.am:
	Add Galacian manpage and help file

	* /cvsroot/aptitude/aptitude/src/pkg_action_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_action_tree.h:
	Fix Debian Bug #90909, reported by Robert Bihlmeyer (reproducible segfault).
	I don't know why pkg_action_tree was overriding restore() to be a nullop, but
	it doesn't any more.

2001-03-23  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/NEWS: Tweak the NEWS message

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/fr.po, /cvsroot/aptitude/aptitude/po/gl.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/README:
	Get ready to release 0.0.8.2, with a fix for series 0.3 apts

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/README:
	  Pull things into line for aptitude 0.1.3.

	* /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/fr.po, /cvsroot/aptitude/aptitude/po/gl.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/po/pt_BR.po:
	Merge with the stable branch up to 0.0.8.1

	* /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.cc, /cvsroot/aptitude/aptitude/aptitude.fr.1, /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/help-fr.txt, /cvsroot/aptitude/aptitude/help-pl.txt, /cvsroot/aptitude/aptitude/Makefile.am, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/fr.po, /cvsroot/aptitude/aptitude/po/gl.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/generic/matchers.cc, /cvsroot/aptitude/aptitude/src/load_config.cc, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.cc, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h, /cvsroot/aptitude/aptitude/src/vscreen/curses++.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	  Merge with the stable version through 0.0.8.0.

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	Fix a compile problem with apt 0.4

2001-03-18  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/fr.po, /cvsroot/aptitude/aptitude/po/gl.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/README:
	What the heck, release a minor version update. README, NEWS, etc all bumped.

	* /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/fr.po, /cvsroot/aptitude/aptitude/po/gl.po, /cvsroot/aptitude/aptitude/po/ja.po:
	More pofiles altering their line indexes (presumably to keep up with the code)

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	  We were storing packages without available versions in the apt cache, which
	occasionally was causing annoying oddness (eg, when a package was named in a
	dependency before being installed into the archive, it wouldn't show up as
	"new" when it was finally installed)

2001-03-17  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Update documentation and configure for 0.0.8.0

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	Installing a new package by selecting a particular version, then undoing, no
	longer causes a segfault.

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	If we install a package, only color the particular version that is being
	installed.

	* /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/fr.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	  Added support for installing a particular version of a package (wooo!)

	  It doesn't attempt to be sticky yet, but it's a start.

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/po/gl.po:
	Add Galician translation.  I didn't even know Galician was a language!

2001-03-07  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in:
	Oops.  We should AC_MSG_ERROR if curses isn't found..

	* /cvsroot/aptitude/aptitude/src/load_sortpolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_sortpolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_sortpolicy.h:
	  Sorting policies can now be reversed.  The syntax in the loading code is to
	put a "~" in front of the policy name.

	* /cvsroot/aptitude/aptitude/src/pkg_sortpolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_sortpolicy.h, /cvsroot/aptitude/aptitude/src/pkg_subtree.cc, /cvsroot/aptitude/aptitude/src/pkg_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Made the new sorting mechanisms functional.  Woohoo!
	  Just hooked it into pkg_tree and thwapped the problems that arose.

	* /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_sortpolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_sortpolicy.h, /cvsroot/aptitude/aptitude/src/pkg_subtree.cc, /cvsroot/aptitude/aptitude/src/pkg_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h, /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_treeitem.h:
	  Cleaned up and modified a lot of things dealing with sorting.  There's
	too much to list explicitly, but here are the important pieces:
	  * cmp_policy is gone.  It was the Wrong Way to do things (virtual methods
	  shouldn't work in that context; why they did work is a mystery to me..)
	  * vs_subtree doesn't treat the optional second parameter nearly as specially
	  (it's just the default sort method)
	  * vs_subtree::sort is now templated.
	  * the wrapper around pkg_sortpolicies for the sake of vs_subtree::sort is
	  now a very simple class -- in particular it doesn't delete its "contents"
	  when it's destroyed.  (otherwise, if you think about it, I'd have to do
	  refcounting and..ugh..)

2001-03-06  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_treeitem.h:
	Move cmp_policy to vs_treeitem.h (good idea??) and give it an empty virtual
	destructor, just in case.

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/load_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/load_sortpolicy.cc, /cvsroot/aptitude/aptitude/src/load_sortpolicy.h, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_sortpolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_sortpolicy.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h:
	  Added some preliminary stuff to "sort of" make sorting work.  Still needs
	some more work and thought.

	* /cvsroot/aptitude/aptitude/src/load_sortpolicy.cc, /cvsroot/aptitude/aptitude/src/load_sortpolicy.h:
	New file.

2001-03-04  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Bump version to 0.0.7.19

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Oops, really make ReSearch have two bindings

	* /cvsroot/aptitude/aptitude/src/generic/matchers.cc:
	Don't complain about blank limits

	* /cvsroot/aptitude/aptitude/src/generic/apt.cc:
	Rewrote some of the state-deducing stuff to be more legible

	* /cvsroot/aptitude/aptitude/Makefile.am:
	Oops, add help-pl.txt to the installed stuff

	* /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/fr.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/po/pt_BR.po:
	Pofiles magically changed again

	* /cvsroot/aptitude/aptitude/src/load_config.cc, /cvsroot/aptitude/aptitude/src/load_config.h, /cvsroot/aptitude/aptitude/src/load_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/load_grouppolicy.h, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h, /cvsroot/aptitude/aptitude/src/ui.cc:
	  Moved the group-policy parsing stuff to a separate file, for reasons of
	Hygeine.  (also because I'm about to write the sort-policy stuff, which would
	make load_config get way too big if I had kept both in it)

	* /cvsroot/aptitude/aptitude/src/load_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/load_grouppolicy.h:
	New file.

2001-03-03  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/help-pl.txt, /cvsroot/aptitude/aptitude/Makefile.am, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/po/pl.po, /cvsroot/aptitude/aptitude/README:
	  Updated documentation and build files for 0.0.7.18, and merged in the
	Polish translation.

	* /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/dep_item.h, /cvsroot/aptitude/aptitude/src/generic/matchers.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.cc, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h, /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.cc, /cvsroot/aptitude/aptitude/src/vscreen/curses++.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Update a bunch of copyright lines

	* /cvsroot/aptitude/aptitude/src/vscreen/curses++.cc:
	  Fix the 'accented chars' bug the Right Way[tm], by removing the
	sign-extension bug I stupidly allowed to seep in.

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Ok, ok, vi fans can have their 'n'=='search again' binding.. *grumble*
	(this fixes Debian bug #85076)

	* /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/fr.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pt_BR.po:
	The pofiles modified themselves for no apparent reason

	* /cvsroot/aptitude/aptitude/src/generic/matchers.cc:
	When encountering a double-tilde, don't keep parsing it over and over and
	over and over and over....  (fixes another one of Michal's bugs)

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Fix some weird stuff in the way I was setting the limit of a pkg_tree
	(for some reason, the code was testing for blank strings and possibly trying
	to parse an invalid limit multiple times..)

	* /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.cc:
	  Don't crash if we get "%%" in a column-definition.

	* /cvsroot/aptitude/aptitude/src/generic/matchers.cc:
	Oops.  It was possible for parse_atom to return by falling off the closing
	brace.  This caused some "interesting" failure modes, most of which involved
	crashing.  Fixed.  (how'd this get by -Wall? oh well..)

	* /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.cc, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.h:
	Fixed some problems and potential problems due to overeager translations
	(package descriptions were being translated, and the default argument to a
	constructor was being translated with N_, which isn't really right..that can't
	be handled correctly at all, in fact, so I just rewrote it with two
	forms)

	* /cvsroot/aptitude/aptitude/src/vscreen/curses++.cc:
	Apply patch from Michal Politowski to (maybe) work around Curses problem
	with displaying accented characters.

2001-02-27  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	  Only display the 'continue/cancel' buttons if the user didn't cancel the
	download. (ie, if they have a choice)

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	  Used the new vs_util abilities to add "continue" and "cancel" buttons to the
	"download complete" thingy (some redesign is needed for them to actually work
	:( )

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.h:
	You can now use a third form of the dialog convenience functions to twiddle
	the button label(s).

2001-02-26  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	  The download-list now updates its display on every call to Pulse().  This
	is what was causing the perplexingly long pauses between updates. (doh!)

2001-02-24  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/generic/matchers.cc, /cvsroot/aptitude/aptitude/README:
	Add a match type (~V) for versions.

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Version numbers bumped to 0.0.7.17.  This getting silly yet? :)

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/fr.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/src/dep_item.cc:
	Fixed a horribly stupid dependency-parsing bug..I swapped the "dependency
	version" and "package version" arguments to CheckDep, causing all sorts of
	breakage.  It'll be nice to have this fixed :P

	* /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/fr.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pt_BR.po:
	Blah, all the pofiles got munged again..

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc:
	Fix localization of help.txt (glad someone finally used it :P )

	* /cvsroot/aptitude/aptitude/Makefile.am: Oops, install help-fr.txt..

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	  Tweak headers for 0.0.7.16

	* /cvsroot/aptitude/aptitude/src/load_config.cc:
	More internationalization

	* /cvsroot/aptitude/aptitude/po/fr.po:
	Make fr.po refer to help-fr.txt (which is what I think the intent was)

2001-02-23  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/aptitude.fr.1, /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/help-fr.txt, /cvsroot/aptitude/aptitude/Makefile.am, /cvsroot/aptitude/aptitude/po/fr.po:
	  Added French translations from Martin Quinson <mquinson@ens-lyon.fr>
	(Debian bug #86684)
	  I'm not sure what to do with aptitude.fr.1 and help-fr.txt (the latter seems
	like it won't work with his pofile unless I tweak it, which is fine)

	* /cvsroot/aptitude/aptitude/configure.in:
	Add hack for brokenness in autoconf (yes, C++ has const and inline..surprise..)

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/fi.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pt_BR.po:
	Added fi.po from Jaakko Kangasharju <ashar@iki.fi> (UNTESTED)

2001-02-22  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pt_BR.po:
	Pofiles got munged by compiling..

	* /cvsroot/aptitude/aptitude/configure.in:
	  Fix configure.in to really really never define const and inline to null
	strings..

	* /cvsroot/aptitude/aptitude/po/POTFILES.in:
	Oops, a removed file was left in POTFILES (pkg_grouppolicy_hash)

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/TODO:
	Sync all the documentation and metafiles for 0.1.2

2001-02-21  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Added a quick hack to allow static configuration of grouping policies in
	apt.conf.  (this needs work but will be good enough for a new
	beta release)

2001-02-19  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	Fixed what appears to be some sort of off-by-one error in sync_top (?)

2001-02-18  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	  Flipped topdir and subdir in the UI, thus bringing things in line with how
	the stable tree does them.

	* /cvsroot/aptitude/aptitude/src/load_config.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.h, /cvsroot/aptitude/aptitude/src/ui.cc:
	  The section-grouper's behavior wrt passing packages through transparently is
	now configurable in the code and in the grouping configuration (second
	option "passthrough" or "nopassthrough")  This should slay the issues with
	weird stuff happening because of the transparent-passthrough feature.  More or
	less.

	* /cvsroot/aptitude/aptitude/src/load_config.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.h:
	  Ok, totally useless feature of the day..
	  the "firstchar" grouping policy now generates a bunch of trees based on
	the first character of the input.  If there's a great demand for it, I suppose
	this could be spiffed up, but as far as I'm concerned the only point for this
	is to give another test point for my parsing code.  I can't imagine anyone
	actually uses this.

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h:
	  Fixed the problem where the version of set_grouping which took a string
	was causing problems..it seems that you have to cast it to the right type
	of member pointer to resolve the overloading.  This leads to hairiness in
	handle_char(), but I prefer that to the hairiness of _from_string

	* /cvsroot/aptitude/aptitude/src/load_config.cc:
	Don't get confused when parsing multiple grouping policies in a row (there are
	still some quirks after that's fixed, probably due to the pruning stuff; eg,
	try 'section(topdir),status,section(subdir)'

	* /cvsroot/aptitude/aptitude/src/load_config.cc:
	Remember to initialize the chain for mode grouping if it's NULL (this isn't the
	best calling convention, but I don't think I can really do better)

	* /cvsroot/aptitude/aptitude/src/load_config.cc:
	  It seems that starting a vector::size_type at the end of the vector and
	decrementing it until it's less than 0 is a dumb idea.  I'm just giving in
	and using reverse_iterators.  This fixes some crashes.

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/load_config.cc, /cvsroot/aptitude/aptitude/src/load_config.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h:
	  Added a trivial hook to test the grouppolicy-parsing stuff (you can now
	attempt to change a tree's policy with 'G' and watch aptitude crash)

	* /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	Updated some more copyright lines

	* /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/dep_item.h, /cvsroot/aptitude/aptitude/src/load_config.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy_hash.h, /cvsroot/aptitude/aptitude/src/strhash.h:
	  I believe that pkg_grouppolicy_hash is just cruft..I can't find any use for
	it, at least.  Deleted it (also fixed some copyright dates that I ran across
	while doing this..)

	* /cvsroot/aptitude/aptitude/src/load_config.cc, /cvsroot/aptitude/aptitude/src/strhash.h:
	  Added the long-rumored grouping-policy parse code.
	  I think it'll work!  Untested, however; I just got it compiling.

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	  Added guards around a bunch of routines so we don't accidentally segfault
	in edge cases.  (eg: "if(apt_cache_file) {...}")  This is similar to the
	stuff that needed to be changed on the stable branch.

	* /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/load_config.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	  Sync with APTITUDE-00715 on HEAD.  This gets us a lot of code in apt_tree,
	but also some good config-related stuff.

	* /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/download_list.h:
	  Added keybindings for the download-list (up-arrow/down-arrow) that scroll
	by a single line.

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	Fixed an off-by-one error in download_list::pagedown

2001-02-17  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download_list.h:
	  Whee, I'm an idiot..

	  So it seems that I forgot to override focus_me() to return true in
	download_list.  This is what was preventing keystrokes from registering
	with the widget.  Fixed.  (of course, the issues with apt taking over the
	flow of control mean that this control is very touchy.. :( )

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	Remember to do vscreen_update(); vscreen_tryupdate() in download_list bindings
	(ewwwwwwwwwwwww)

	* /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/download_list.h:
	Added support (theoretically) for Home and End in the download-list

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	Also page the download-list on 'up' and 'down'

	* /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/download_list.h:
	  Several changes:
	  - The download-list now properly handles layout messages (it calls sync_top,
	  so it'll stick to the bottom if necessary)
	  - download_list::pageup() and download_list::pagedown() do the Right Thing[tm]
	  - download_summary() is now static
	  - fixed an off-by-one error in sync_top (so we really jump to the bottom, not
	  one line away from the bottom)

	* /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/download_list.h:
	  The little "download complete" box that pops up now allows you to page up
	and down.  Naturally, this has revealed a bunch of bugs with the paging..

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	Heh, even if control got into download_list::handle_char, it wouldn't have
	worked 'cause I was using the wrong keyname for Page Up.  Doh.

	* /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/download_list.h:
	Handle cancellation of downloads (by destruction of the associated widget)

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	Well, we should now twiddly the sticky_end thingy when certain keys are
	pressed.  For some reason though, download_list::handle_char isn't working

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	Doh, forgot to initialize sticky_end in download_list::download_list

2001-02-16  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/download_list.h:
	  WOOHOOO!!!  (I had to say that)

	  The download-list now automatically scrolls as new items are added.
	Scrolling back doesn't currently work, but people have rightly reported
	this as a major annoyance in the current codebase, and having it fixed will
	be excellent.

2001-02-05  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download_list.cc:
	  Fixed divide-by-zero problems when downloading (oops)

	* /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_sortpolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_sortpolicy.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_subtree.h:
	  Added the skeletal beginnings of a "sort policy" class, which I hope will
	do for overall sorting what group policies did for grouping.  (and of course
	I have to write configuration parsers for both of these..argh argh argh)

	* /cvsroot/aptitude/aptitude/src/pkg_sortpolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_sortpolicy.h:
	New file.

2001-02-03  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	  When a vs_tree's root is changed, it now tells any currently selected item
	to unhighlight.  This is a nice and elegant (for a change) solution to the
	bug that caused random package-info lines to be displayed after the user did
	a download.

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	aptitudeDepCache::forget_new() now calls the cache_reloaded() signal.  Hack
	or not?  You decide.  Anyway, this fixes the bug where after doing a "forget
	new", the trees weren't updated to reflect it.

2001-02-01  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Update various metafiles for 0.0.7.15

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	  Moved the bindings for trees to where they belong, in global_bindings.

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc:
	  Don't crash when trying to exit if reading the package file failed (oops)

	* /cvsroot/aptitude/aptitude/src/load_config.cc:
	Ignore keybinding subgroups

	* /cvsroot/aptitude/aptitude/src/main.cc:
	Don't crash if we encounter a problem while loading stuff from apt.conf

2001-01-30  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/NEWS: Actually add 0.1.1 to the NEWSfile

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/README:
	Bump version numbers to 0.1.1

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h:
	Slightly tweak the resize code again (doesn't help much :( )

	* /cvsroot/aptitude/aptitude/src/vscreen/curses++.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Tried to add some stuff to make resizing less mysteriously unreliable..not
	working yet :(

	* /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/download_list.h:
	Add code to (theoretically) allow paging up and down a download_list

2001-01-29  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/TODO: Tweak the TODO

	* /cvsroot/aptitude/aptitude/src/apt_info_tree.cc, /cvsroot/aptitude/aptitude/src/apt_info_tree.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h:
	  apt_info_tree and pkg_tree now make use of the cache_closed signal; I believe
	that this will eliminate a number of elusive crashing bugs.

	* /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/generic/apt.h:
	Add a cache_closed signal, so objects that need to avoid accessing the
	cache while it's invalid can do so.

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Remove an unnecessary setting-to-null (destroying the preview will
	do that for us)

	* /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Don't run delete sweeps in sub-main-loops, as that can cause deletions at
	bad moments.  (the real fix here is to garbage-collect..)

	* /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/download_list.h:
	Be sure to initialize 'start', and display ignored failures as hits (?)

	* /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/download_list.h, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/ui.cc:
	Got the download_list class to compile and sort of work

2001-01-28  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	  Moved the forget-new function to the global UI file, and added a
	(poorly-named) menu entry for it.

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Added a menu item to clear out the package cache

	* /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/download_list.h:
	Added the beginnings of a new, sane download progress meter.  We'll see if it
	works..

	* /cvsroot/aptitude/aptitude/src/download_list.cc, /cvsroot/aptitude/aptitude/src/download_list.h:
	New file.

2001-01-27  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/TODO:
	Update the TODO items to reflect reality better

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Fix the update-package-list global keybinding

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Added code to keep the user from simultaneously installing packages and
	updating package lists (or doing either of these twice)

	* /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h:
	  Use the new search code to move to a pkg_matcher-based search system.  I hope
	this will significantly reduce search times (since the search string won't be
	parsed over and over--which incidentally also reduces memory management load)

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h:
	  Change some methods to const (maybe they should've been all along..) to
	get package searching working with the new setup.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	Unreverse the search logic

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_treeitem.h:
	  At least moved the vs_tree search routine to a specifiable predicate, so I
	can plug in something less hacky (otoh..this is another level of
	indirection..more slowness..argh..)

	* /cvsroot/aptitude/aptitude/src/apt_options.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	  An option is now available to toggle whether the menubar autohides.  (the
	default is to always show the menubar, for the sake of new users..)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.h:
	  Modified the menubar to support having it constantly visible.

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h:
	Hook searching back into the UI

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h:
	Modify vs_tree::search_for to be a pure search method instead of a fancy
	do-everything method

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h:
	Remove an obsoleted class member (vs_tree::last_search_term)

	* /cvsroot/aptitude/aptitude/TODO: Tweak the short-term TODO

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc:
	  Hide menus before emitting a signal -- this prevents a situation from occuring
	where a signal that runs for a while (eg, updating package lists) runs with a
	strangely visible menu.

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Add hooks to the update function

	* /cvsroot/aptitude/aptitude/src/download.cc:
	Reload the cache after doing a download

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Make 'g' a global keybinding for installation again

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	  Only allow a single install preview to be displayed at a time.

	* /cvsroot/aptitude/aptitude/TODO: Update the TODO list

	* /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc:
	  Don't short-circuit when checking for keys bound to slots.  This allows
	multiple slots to be hooked up to the same pseudo-signal and lets the
	connections for the download screen actually work properly..

	* /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/download_screen.h:
	Maybe fix the media-change stuff..

	* /cvsroot/aptitude/aptitude/src/download_screen.h:
	Hide the cursor when downloading

	* /cvsroot/aptitude/aptitude/src/download_screen.cc:
	Make the download screen actually (mostly) work.

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Move the global keybindings down into the main_stacked widget -- I find this to
	be more logical than having them all in the menubar.  YMMV.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_passthrough.cc:
	I believe that vs_passthrough should be passing characters which its
	subwidget declines to handle into vs_container::handle_char, so key
	connections work on them.

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Patch up the download stuff to the point that you can coax the program to
	sort of perform a download for you.

	* /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Fixed some problems with apt 0.4 and some weird compile problems that appear to
	be the result of incomplete CVS commits

2001-01-12  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/NEWS:
	Oops, really fix Arto's email address..

2001-01-07  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/NEWS:
	Insmodded timewarp.o and retroactively fixed Arto's name/email

	* /cvsroot/aptitude/aptitude/acconfig.h, /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/help.txt, /cvsroot/aptitude/aptitude/intl/Makefile.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/dep_item.h, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/generic/matchers.cc, /cvsroot/aptitude/aptitude/src/load_config.cc, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.h, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_info_screen.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h:
	  (mostly) merge with HEAD up to APTITUDE-00714

2001-01-02  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in:
	Fix up the test for sigc to abort if it can't find an appropriate version

2000-12-19  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/README:
	Bump lots of versions to 0.0.7.14

	* /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc:
	Don't crash if stuff has a NULL Priority

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	  Add hacks to eliminate nasty duplicated bits of hierarchy such as
	virtual/virtual.  Can this be done better in the newer versions?

2000-12-18  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/generic/matchers.cc:
	Fix a segfault when limiting on package priority

	* /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/dep_item.h, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.h, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_info_screen.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h:
	  Rewrote the grouping stuff to pass roots around on the stack instead of the
	heap.  This should allow some redundant trees to be pruned, assuming I figure
	out what the logical way of doing that is.

2000-12-17  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/intl/Makefile.in:
	sometimes a special private libintl.h gets generated (if gettext isn't
	around) -- it wasn't getting removed on distclean, which
	screwed all sorts of stuff up.  I hope this fixes it.

2000-12-15  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h:
	Make installing packages actually work with apt 0.4

	* /cvsroot/aptitude/aptitude/help.txt, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pt_BR.po:
	Add a simple note about the 'f' key to help.txt

	* /cvsroot/aptitude/aptitude/src/main.cc:
	Switch the hierarchy; I think this new setup is clearer.

2000-12-14  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	Tentatively merge Arlo's Tasks-branch patch

2000-12-13  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Bump various things to 0.0.7.13

	* /cvsroot/aptitude/aptitude/src/download.cc:
	My fix for the 'dequeuing queued object' bug wasn't :( -- this isn't
	either, but at least it would work if my theory on the bug was correct.

	* /cvsroot/aptitude/aptitude/src/generic/apt.cc:
	Hm, apt 0.4 segfaults if I delete the package records after deleting the
	cache file.

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/acconfig.h, /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/load_config.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h:
	  Complete the addition of support for apt 0.4.  It compiles and runs well
	enough to install packages, AND I think I fixed the "thousands of little errors
	generated if downloads are aborted" bug (not tested, though)

2000-12-12  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/acconfig.h, /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/generic/apt.cc:
	  Begin adding support for APT 0.4.  This branch will never fully support it
	(probably), but I want to be able to compile and use aptitude with at least the
	old feature set.  Once this is done, I'll port the unstable branch FULLY there
	unless someone restrains me :)  (this will mean that it requires apt 0.4 to
	function, but maybe I can find a way to get rid of the aptitudeDepCache hack..)

2000-12-09  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Hook in install stuff in a very broken and preliminary way.  This will probably
	go in the future or something..

2000-12-04  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/po/POTFILES.in, /cvsroot/aptitude/aptitude/src/Makefile.am:
	More fixups :(

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/Makefile.am, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am:
	Argh, more stuff that I forgot to include in the tarball..

	* /cvsroot/aptitude/aptitude/src/generic/Makefile.am:
	Oops, strhash.h should be in the source list for libgeneric so it gets disted..

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Kill an EVIL focus bug where tables kept trying to give focus to widgets that
	no longer wanted it. (easy to work around, luckily)

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Let people modify package-tree limits (even though I still can't do it from a menu
	nicely :( )

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Hey, fix the minibuf-widget thingy too

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Fix prompt_string in major ways (for the non-minibuf case)

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Always use a download-bar for changelogs

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Oops, use the right option name for download-bar

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Fix the options that the main-multiplexer is inserted with so that the
	'status line' is still visible

	* /cvsroot/aptitude/aptitude/src/apt_config_widgets.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Fix a silly typo that was causing changelogs to be downloaded twice (oops..)

	* /cvsroot/aptitude/aptitude/src/apt_options.cc:
	Fix a small oopsie in the options dialog (some items weren't committing
	because I forgot to hook signals up for them)

	* /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/apt_options.cc:
	Initial stab at getting downloads really working again (needs work..)

2000-12-03  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download_bar.cc, /cvsroot/aptitude/aptitude/src/download_bar.h, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/download.h, /cvsroot/aptitude/aptitude/src/download_item.cc, /cvsroot/aptitude/aptitude/src/download_item.h, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/download_screen.h, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	Link download stuff back in.  Well -- it compiles :P

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Add menu items to display the old online-help and the license

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.h:
	Add a convenience routine to pop up a dialog containing a paged file

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h:
	Make sure that info areas get cleared when a package item is unhighlighted

	* /cvsroot/aptitude/aptitude/src/apt_options.cc, /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/pkg_changelog.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	Use PACKAGE instead of Aptitude for our config tree (so multiplex versions
	can live on the same system eventually)

	* /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.cc, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h:
	Re-enable package info screens and description screens

	* /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/dep_item.h, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Re-enable the dependency display

	* /cvsroot/aptitude/aptitude/src/pkg_view.cc: Fix indentation

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	Switch the close-view and quit bindings.....again.
	With the quit-on-last-close behavior implemented, I'd like to retain the
	historical behavior as much as possible.

	* /cvsroot/aptitude/aptitude/src/apt_info_tree.h:
	Fix a thinko that caused package version screens to segfault

	* /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	Make all package-view instantiation happen in ui.cc for now

	* /cvsroot/aptitude/aptitude/src/pkg_view.h:
	Errrr...using the proper values to initialize the layout options is
	a good idea..

	* /cvsroot/aptitude/aptitude/src/apt_info_tree.h, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h, /cvsroot/aptitude/aptitude/src/pkg_view.cc, /cvsroot/aptitude/aptitude/src/pkg_view.h, /cvsroot/aptitude/aptitude/src/ui.cc:
	  Added all sorts of magic to reenable the status-line display, in spades.  It
	should be possible (untested!!) to eventually do far far more than the old
	system was ever able to do.  If there aren't so many hacks to get this to work
	that it implodes under its own weight (knock on wood..)

	* /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Use handle_char instead of the inappropriate dispatch_char for pkg_trees

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Make the intro message nicer, and add some i18n markings

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Make the keybinding for menu-toggling display-friendly

	* /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/pkg_view.cc, /cvsroot/aptitude/aptitude/src/pkg_view.h, /cvsroot/aptitude/aptitude/src/ui.cc:
	Fix all the package-view stuff to be 'right' in terms of using the
	new table abilities properly

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.h:
	Update more bits of the test code to take advantage of the new table
	abilities

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Fix a really evil table-layout bug that was causing all sorts of weirdness

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc:
	We should queue the layout after doing something drastic to a pager..

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.h:
	  Added stuff to (theoretically) support finer-grained specification of
	expand/shrink options in tables.

	* /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	Use the pkg_view stuff to generate package trees (this has showed one
	weakness in vs_table immediately.. :) )

	* /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_view.cc, /cvsroot/aptitude/aptitude/src/pkg_view.h:
	  Added pkg_view, a collection of stuff that'll eventually handle the
	"configurable layout" stuff that was the motivation behind this whole
	exercise.  Right now it just sits there and looks cute.

	* /cvsroot/aptitude/aptitude/src/pkg_view.cc, /cvsroot/aptitude/aptitude/src/pkg_view.h:
	New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h, /cvsroot/aptitude/aptitude/src/apt_options.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	  Added a "closing last screen exits" option to get the old behavior back
	(and, what the heck, made it the default..not sure this is great but..)

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Convert a bunch of explicit owner->add_widget thingies to use the cleaner
	add_main_widget(), incidentally making (eg) version lists get proper
	entries in the Views menu

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	Got the thingy with the close/quit working (unfortunately, uses different keys
	than historic aptitude right now :( ) and added the ability to pop up
	new package views

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h:
	Modify things so that 'q' causes the current 'top' widget to be destroyed,
	and 'C-q' exits.

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/download_bar.cc, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/download_item.cc, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Fixed a bunch of color errors due to the fact that get_color() now returns an
	attribute set rather than a color pair index

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/main.cc:
	Make vscreen_main automatically flush pending updates before waiting
	for input for the first time

2000-12-02  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/main.cc:
	Oops..calling ui_main after setting stuff up would be a really good idea..

	* /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/columnify.cc:
	ummm, since when does order matter when passing arguments to GNU ld?

	* /cvsroot/aptitude/aptitude/src/apt_info_tree.cc, /cvsroot/aptitude/aptitude/src/apt_info_tree.h, /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/download_bar.h, /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/generic/apt.h, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_action_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_action_tree.h, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_subtree.cc, /cvsroot/aptitude/aptitude/src/pkg_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h, /cvsroot/aptitude/aptitude/src/ui.cc:
	  Forward-port large quantities of stuff related to package trees, to attempt
	to just pop up a package list (sans a lot of useful features :( ).
	  Still not perfect, but getting better.  Almost compiles.

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/vscreen/columnify.cc, /cvsroot/aptitude/aptitude/src/vscreen/columnify.h, /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/POTFILES.in, /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/apt_tree.h, /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_node.cc, /cvsroot/aptitude/aptitude/src/pkg_node.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	  Merged in changes made to HEAD since the last merge.  (this coincides with
	the tag APTITUDE-00712, so use that if merging again is necessary)

	* /cvsroot/aptitude/aptitude/src/strhash.h:
	Umm, this needs to be added?

2000-11-27  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Well, let's release again.  Why not?  Updated docs and build files.

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h:
	Don't accidentally clear sticky-states when doing this single-package
	installation stuff.

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_node.cc, /cvsroot/aptitude/aptitude/src/pkg_node.h, /cvsroot/aptitude/aptitude/src/apt_tree.h:
	Add some hacks to allow the long-desired 'single package' installation

2000-11-26  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/README:
	Some pos got changed by make dist again..

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/apt.cc:
	Fix a nasty segfault in the initialization code.  How it avoided my notice so
	long, I don't know..

	* /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pt_BR.po:
	Errr, something odd happened when I make disted

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Update docs for 0.0.7.10

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/vscreen/columnify.cc, /cvsroot/aptitude/aptitude/src/vscreen/columnify.h, /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.h:
	Now that the old hack to get sort-of indented package names is gone, replace it
	with a brand new hack that at least doesn't lead straight to an infinite
	loop.

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Bah, don't even try to indent packages for the tree view

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc:
	Bah, fix a silly bug -- the hack to make package items 'sort of line up' broke
	other stuff, just let them look over-indented..

2000-11-25  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/README:
	Update documentation and configure script for 0.0.7.9

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc:
	Eh, don't expand versions by default

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc:
	Fix the default column format so that the space before Package isn't expanded,
	and fix the hack to make the package name line up correctly again..

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc:
	Add a hack to make package names line up correctly for now (it's gross..)

	* /cvsroot/aptitude/aptitude/src/vscreen/columnify.cc:
	Only expand expandable things and shrink shrinkable things

	* /cvsroot/aptitude/aptitude/src/vscreen/columnify.cc:
	Actually expand expandable columns instead of just acting like we did

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/vscreen/columnify.cc:
	Incorporate expandability/shrinkability into the defaults

	* /cvsroot/aptitude/aptitude/src/vscreen/columnify.cc:
	Always pad columnified strings up to their maximum width

	* /cvsroot/aptitude/aptitude/src/vscreen/columnify.cc, /cvsroot/aptitude/aptitude/src/vscreen/columnify.h, /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.h:
	  Kill an evil typo -- I was passing in the column type as the column width,
	which caused all sorts of nastiness when the type was -1.  Also added some
	asserts to avoid this in the future..

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.h:
	  Another raft of changes to everything even vaguely related to columns sails
	through..
	  (all the startloc stuff is now purged, and trees should work (not that I can
	   tell yet..) -- not tested atm, though)

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/vscreen/columnify.cc, /cvsroot/aptitude/aptitude/src/vscreen/columnify.h, /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.h:
	  MAJOR CHANGES!  EVERYTHING PROBABLY JUST BROKE!

	  The package columnization code has been rewritten from scratch.  Again.
	  This time it's based on the table-formatting code in the ui-rewrite branch
	and will hopefully be flexible enough to avoid future rewrites.  I think
	it may even parse config options in the same way, but I'm not sure :)
	  The concepts of "column groups" and justification have been replaced by
	expandable/shrinkable, which are much more general and easier to calculate
	correctly.  Column-group starts are therefore no longer relevant (which WILL
	break some of the tree code for now..it has to be modified to manually indent
	stuff)

2000-11-24  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_scrollbar.h:
	Add a scrollbar to the Apt error list

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_scrollbar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_scrollbar.h:
	Add a scrollbar widget and tweak the test code and pager to work with it.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_scrollbar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_scrollbar.h:
	New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.h:
	Screwed with the pager some more, it's much better now :)

	* /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	Make check_apt_errors public, and explicitly use it after initialization
	(since we aren't in the main loop yet then, it didn't get called if
	something bad happened)

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Color the error dialog with the Error color..

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc:
	Oops, don't randomly reset the current text attributes

	* /cvsroot/aptitude/aptitude/src/ui.cc:
	Add a menu item that triggers a test error

	* /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/generic/apt.h, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	Overhaul the apt error system, and avoid some segfaults in error conditions

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc:
	Fix some segfaulting and layout bugs with pagers

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc:
	what the heck, add a hack to clear the editline's text when it's
	entered

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.h:
	Add test code for the pager and fix some nasty bugs that caused stdin to
	get closed (oops)

2000-11-23  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.h:
	Allow the vs_file_pager to load a new file.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.h:
	Perform a long-overdue overhaul of vs_pager..it should now handle newlines and
	tabs properly, and handle layout information and so on

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.h:
	Add support for a 'main hook' thing (basically lets programs extend the
	vscreen main loop with their own actions)

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.h:
	Make vscreen timeouts be sigc++-based

	* /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/generic/config_signal.cc, /cvsroot/aptitude/aptitude/src/generic/config_signal.h, /cvsroot/aptitude/aptitude/src/ui.cc:
	Fix up the option-reverting code..it should /mostly/ work now

	* /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/generic/apt.h:
	Fix the option-saving code, and write a routine to revert the options to the
	defaults and the contents of /etc/apt/apt.conf

	* /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	Doh, getenv(HOME) should be getenv("HOME")

	* /cvsroot/aptitude/aptitude/src/generic/apt.h, /cvsroot/aptitude/aptitude/src/generic/apt.cc:
	Add preliminary support for user-specific configuration: apt_preinit now
	attempts to load ~/.aptitude/config, and there's a routine (apt_dumpcfg)
	to save a subtree of the configuration to that file.

	* /cvsroot/aptitude/aptitude/src/main.cc:
	Force an update after reading in the control file (to make the progress-bar
	really go away) -- hack?

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Fix a silly order-of-operations bug that was causing table navigation to have
	awkward resolution of ambiguities

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/download.cc:
	Bump various things for version 0.0.7.8

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.cc:
	Add delete-to-BOL and delete-to-EOL functions to the minibuf editor

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Fix the bug which caused limits specified in the display file to not be
	presented as default selections to the user

	* /cvsroot/aptitude/aptitude/README: Fix a minor documentation bug

	* /cvsroot/aptitude/aptitude/src/apt_config_widgets.h, /cvsroot/aptitude/aptitude/src/apt_options.cc:
	Several small tweaks -- the options dialog now works! (albiet minimally)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.h:
	Oops, status-choice thingies should hog the focus

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_button.cc:
	Match on 'confirm' as well..(good idea?)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_button.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Create a new keybinding ('PushButton', bound to ' ' by default) and use it
	for buttons instead of Confirm.

	* /cvsroot/aptitude/aptitude/src/apt_config_widgets.cc, /cvsroot/aptitude/aptitude/src/apt_config_widgets.h, /cvsroot/aptitude/aptitude/src/apt_options.cc, /cvsroot/aptitude/aptitude/src/apt_options.h, /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/load_config.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	Add some preliminary option dialogs and stuff

	* /cvsroot/aptitude/aptitude/src/apt_options.cc, /cvsroot/aptitude/aptitude/src/apt_options.h:
	New file.

	* /cvsroot/aptitude/aptitude/src/generic/apt.cc:
	Declare the new global config wrapper..

	* /cvsroot/aptitude/aptitude/src/apt_config_widgets.cc:
	Doh, fix a tyop..

	* /cvsroot/aptitude/aptitude/src/apt_config_widgets.cc, /cvsroot/aptitude/aptitude/src/apt_config_widgets.h, /cvsroot/aptitude/aptitude/src/Makefile.am:
	Add some very simple utility widgets for dealing with apt configuration

	* /cvsroot/aptitude/aptitude/src/apt_config_widgets.cc, /cvsroot/aptitude/aptitude/src/apt_config_widgets.h:
	New file.

	* /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/generic/apt.h, /cvsroot/aptitude/aptitude/src/generic/config_signal.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_togglebutton.cc:
	Fix some silly compile errors

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_togglebutton.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_togglebutton.h:
	Add support in the togglebutton for 'silent' toggling

2000-11-22  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/generic/config_signal.cc, /cvsroot/aptitude/aptitude/src/generic/config_signal.h, /cvsroot/aptitude/aptitude/src/generic/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/config/colors.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/keybindings.h:
	Add a tentative implementation of config-signals.  Not sure if it'll work
	(untested)

	* /cvsroot/aptitude/aptitude/src/generic/config_signal.cc, /cvsroot/aptitude/aptitude/src/generic/config_signal.h:
	New file.

	* /cvsroot/aptitude/aptitude/src/generic/strhash.h, /cvsroot/aptitude/aptitude/src/strhash.h:
	Move strhash.h to generic..

	* /cvsroot/aptitude/aptitude/src/generic/strhash.h: New file.

2000-11-06  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc:
	Fix cycling backwards in a multiplexer

	* /cvsroot/aptitude/aptitude/src/ui.cc: Hook up some global keybindings

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h:
	Allow keys to be bound to signals so that they are checked for AFTER all
	class-specific keys (ie, they are checked in vscreen_widget::handle_char)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc:
	Fix the menubar to pass keystrokes up the inheritence hierarchy

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Fix vs_table to pass unhandled keystrokes up the inheritence hierarchy

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_button.cc:
	Correctly fall back to the superclass' handle_char from vs_button

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/ui.cc:
	  Update ui.cc to take advantage of the new menu abilities.

	* /cvsroot/aptitude/aptitude/src/vscreen/config/keybindings.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/keybindings.h, /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h:
	  Added a provision for making bound characters automagically appear on the
	right-hand side of a menu (all bindings but the first are deliberately hidden
	to prevent unwieldly menus)  In the process, fixed a silly width-handling bug
	in vs_menu (the default requested width wasn't being initialized properly, oops)

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Change some character constants to string constants (eg: 'y' -> "y"[0])
	This will hopefully make i18n of some obviously English-dependant
	key definitions possible.

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc:
	Use key-connection to bind 'y' and 'n' logically in yesno-dialogs

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.cc:
	Always do vscreen_update instead of vscreen_updatecursor when moving an
	edit-line's cursor (unfortunately, some cases where a full update was
	needed were being missed..I should probably do this more effectively,
	but the brute-force approach works for now)

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc:
	Eliminate the silly_table class, as connect_key allows it to be effectively
	implemented without inheritence.

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/apt_tree.h, /cvsroot/aptitude/aptitude/src/download_bar.cc, /cvsroot/aptitude/aptitude/src/download_bar.h, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/download_screen.h, /cvsroot/aptitude/aptitude/src/pkg_action_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_action_tree.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h, /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_button.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_button.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_passthrough.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_passthrough.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h:
	vscreen: added a concept of "key signals".  These are basically pseudo-signals
	    which widgets emit before (and maybe eventually also after) calling their
	    main key-handling routine.  They can obviously be used to extensively
	    customize behavior without resorting to inheritence (which I don't like as
	    it requires lots of typing) and in particular to implement key shortcuts
	    and accelerators (eg, default selections in dialog boxes and so on)  I
	    believe that the impact on widgets that don't use it will be minimal (in
	    terms of time and space), and it looks like a very useful feature.

	      dispatch_char has been split by this into two parts: the externally
	    callable routine retains the same name, while a new routine ("handle_char")
	    does what dispatch_char used to (basically, this is so we can catch the
	    character before the derived class does for pre-signals)

	aptitude: did lots of s/dispatch_char/handle_char/

2000-11-05  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	Add a menu listing the currently active main-widgets and the ability to switch
	between them

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc:
	Fix a problem with displaying labels of menuentries

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h:
	Tweaks to the menu code:
	 (a) it should now be possible to dynamically add and remove menu items
	    from an existing menu;

	 (b) convenience constants VS_MENU_SEPARATOR and VS_MENU_END are available
	   for easy generation of menu separators and menu end markers.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h:
	Tweak the menu_item initializer to infer the hotkey on its own

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h:
	Rewire the vs_multiplex to be more friendly to users that want to set up a
	menu mapping items to widgets without showing them in the incorrect order.
	The widget list is now treated as a circular list, and shown widgets
	cause it to be rotated until they are visible (rather than popping to the
	top and altering order)  Also, a public method to rotate to the next
	or previous widget is available.

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/vs_progress.cc:
	Tweak a few small layout issues, fix a potential color bug in vs_progress,
	and fix a part of apt_tree that will probably be deleted anyway..

	* /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	Add some useful abstract mechanisms for simple prompts (so they can, eg, be
	stuffed into a 'minibuffer')

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc:
	Fix the default-widget stuff (hmm, this should maybe be done more cleanly..)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.h:
	Fill in missing methods of vs_statuschoice, so it's non-abstract

	* /cvsroot/aptitude/aptitude/src/vscreen/slotarg.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.h:
	  Changed some prototypes from "string foo" to "const std::string &foo",
	changed vs_dialog_yesno to accept an argument specifying which button is
	focussed by default, and changed vs_table to allow a specific widget to
	be focussed on demand.

	* /cvsroot/aptitude/aptitude/src/vscreen/slotarg.h: New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/slotarg.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.h:
	  Split the SlotArg stuff into a separate file, templatized it, and changed
	vs_menu to use it instead of the nop_slot hack.

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h, /cvsroot/aptitude/aptitude/src/vs_progress.cc, /cvsroot/aptitude/aptitude/src/vs_progress.h:
	  Modify files to at least get to the point of opening the apt caches (and
	displaying a progress bar while doing so)

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.h:
	Let people call vscreen_tryupdate directly

2000-11-04  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/apt_tree.h, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	Add a quit-confirmation dialog

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.h:
	Change the dialog-convenience routines to a factory method which takes slots
	as arguments.

	* /cvsroot/aptitude/aptitude/src/aptitude.h, /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.h:
	  Hacked main.cc to actually compile.  This marks the first time since the Great
	UI Rewrite that something called "aptitude" pops out of the build process.  Of
	course, I've disabled most of the code, so all that you get is a menubar and
	an annoying welcome dialog.  But hey, it's a start..

	* /cvsroot/aptitude/aptitude/src/ui.cc, /cvsroot/aptitude/aptitude/src/ui.h:
	New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_stacked.cc:
	Stacked widgets should never appear to focus anything except the topmost widget

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc:
	Multiplexes should show the visible item on show_all

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc:
	Handle empty menubars without crashing (no, I don't know why you'd want to
	do this..)

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/generic/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vs_progress.cc, /cvsroot/aptitude/aptitude/ABOUT-NLS, /cvsroot/aptitude/aptitude/acconfig.h, /cvsroot/aptitude/aptitude/aptitude.1, /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/intl/bindtextdom.c, /cvsroot/aptitude/aptitude/intl/cat-compat.c, /cvsroot/aptitude/aptitude/intl/ChangeLog, /cvsroot/aptitude/aptitude/intl/dcgettext.c, /cvsroot/aptitude/aptitude/intl/dgettext.c, /cvsroot/aptitude/aptitude/intl/explodename.c, /cvsroot/aptitude/aptitude/intl/finddomain.c, /cvsroot/aptitude/aptitude/intl/gettext.c, /cvsroot/aptitude/aptitude/intl/gettext.h, /cvsroot/aptitude/aptitude/intl/gettextP.h, /cvsroot/aptitude/aptitude/intl/hash-string.h, /cvsroot/aptitude/aptitude/intl/intl-compat.c, /cvsroot/aptitude/aptitude/intl/l10nflist.c, /cvsroot/aptitude/aptitude/intl/libgettext.h, /cvsroot/aptitude/aptitude/intl/loadinfo.h, /cvsroot/aptitude/aptitude/intl/loadmsgcat.c, /cvsroot/aptitude/aptitude/intl/localealias.c, /cvsroot/aptitude/aptitude/intl/Makefile.in, /cvsroot/aptitude/aptitude/intl/po2tbl.sed.in, /cvsroot/aptitude/aptitude/intl/textdomain.c, /cvsroot/aptitude/aptitude/intl/VERSION, /cvsroot/aptitude/aptitude/intl/xopen-msg.sed, /cvsroot/aptitude/aptitude/Makefile.am, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/po/ChangeLog, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/po/Makefile.in.in, /cvsroot/aptitude/aptitude/po/POTFILES.in, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/aptitude.h, /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/download_bar.cc, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/download_item.cc, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/load_config.cc, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_action_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.cc, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.h, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Update to HEAD

2000-11-03  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h:
	Hmm, preliminary attempts to set up hotkeys for items while the menu is active.
	I have mixed feelings about this..

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc:
	Tweaked the menu system to allow the '^L' idiom meaning 'display L bold' (it
	will also function as a shortcut while navigating menus in the future)

	* /cvsroot/aptitude/aptitude/src/vscreen/config/keybindings.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/keybindings.h, /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc:
	Finally write a (crude..) keycode -> keyname routine

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_label.cc:
	Labels should update the display when their text is altered

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc:
	Fix the problem that the menubar wasn't resetting active menus and the
	current selection when it was hidden.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	Fix the tree's handling of cursor locations (note to self: the tree code has
	suddenly gotten WAAAY too slow..)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc:
	Make menus and the menubar itself display the cursor in reasonable locations

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Fix a bunch of cursor-positioning issues.  There are still problems, but it's
	a lot better behaved than it used to be..

2000-11-02  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Play nicely on non-pthread systems

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Fix vscreen.cc for the Hurd (pthread.h was being included unconditionally,
	oops)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_passthrough.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_passthrough.h:
	New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_button.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_button.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_passthrough.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_passthrough.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_stacked.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_stacked.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h:
	  Totally rewrote the cursor/focus system.  Cursor locations are now queried
	via tree descent, which will be slightly less efficient but simpler to get
	correct (the old system was just too hairy and had too much weird and
	inexplicable behavior)
	  Not everything is perfect, but the basic stuff is there now..

2000-10-29  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.cc:
	Fix a missing cursor-update in vs_bin

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_stacked.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_stacked.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Fix a number of issues involving incorrectly handled cursors

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_button.cc:
	Feh.  The cursor-hack isn't the right solution (it breaks radio-buttons on
	color displays).  Revert it while I think about what *is* the right solution.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_button.cc:
	Bah.  Really put the button-cursor in the right place..

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_button.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_button.h:
	Make the cursor visible for buttons (and put it in a logical place) -- without
	this, people on colorless terminals may be screwed.  (should I conditionalize
	it on whether color is supported?  That's not reliable, I think.. :( )

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.h:
	Fix some brokenness wrt tables and focus (widgets which were added would
	cause assertion failures if they updated their cursor location before
	being displayed -- focus could be assigned by default to a hidden widget)

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h:
	Menus can now activate 'real' slots when items get selected

2000-10-28  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/pt_BR.po:
	Hmm, try clarifying copyrights on pofiles (not sure about this..?)

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/README:
	Bump various version numbers to 0.0.7.7

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.h:
	Gah!  I forgot to add editline to the CVS repository!  I'm an idiot..

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_editline.h:
	New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Improvements to the line-editor: ^K and ^U (delEOL and delBOL) are now
	supported

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	vs_statusedit is now obsolete and an amusing anacrhonism; remove it.

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc:
	Fix a minor silly bug in the test code..

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	Delete some (apparently) unnecessary refresh() calls immediately following
	beep() calls

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Avoid unnecessary layout calculations.  This might cause previously
	unspotted bugs to surface :(

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc:
	Fix up some visual bugs in the new minibuf-win

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_label.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h:
	  Drastically overhauled the minibuf-win widget.  It now is just a thin
	wrapper around a collection of sub-widgets (some labels, a multiplexer, and
	an arbitrary "main" widget).  This should make things much simpler and robust.
	(crosses fingers)  In the process, I tweaked a few more things: in particular,
	the former vs_minibuf_msg is now vs_labeltransient in vs_label.{cc,h}, and
	vs_multiplex now overrides focus_me in the logical way.

	* /cvsroot/aptitude/aptitude/po/es_ES.po, /cvsroot/aptitude/aptitude/po/pt_BR.po, /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS:
	Add contributed es_ES and pt_BR translations (credits in the pofiles)

2000-10-23  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_frame.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am:
	Resolved a bunch of bugs mostly related to cursor-display while the Miller
	network was dead

2000-10-15  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Bump them versions to 0.0.7.6..

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Only use pthreads if they're available..

2000-10-14  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Fix a thinko that broke table layout when the table needed to be shrunk
	horizontally..

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Fix a silly bug about hiding/unhiding widgets (vscreen_queuelayout wasn't
	always being called)

	* /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Bump to version 0.0.7.5

2000-10-13  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc:
	Fix a silly bug introduced when I eliminated the 'will/wont be saved' message
	for non-root users -- 'n' and 'y' were interpreted backwards for those users.
	Oops.

2000-10-11  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_radiogroup.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_radiogroup.h:
	Make radiogroups emit a signal when a member is selected, and demonstrate
	this on the button page of testvscreen.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_togglebutton.h:
	Fix a thinko which caused vs_togglebutton::set_checked to be severely broken

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_checkbutton.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_checkbutton.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_togglebutton.h:
	Trim vs_checkbutton.{cc,h} as the class is now just a thin wrapper around
	vs_togglebutton and can better be included with it.  Radio buttons are also
	available now (also a wrapper) -- unfortunately, they don't work yet :(

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_radiogroup.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_radiogroup.h:
	Radio-groups now use togglebuttons instead of checkbuttons

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/vs_checkbutton.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_checkbutton.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_togglebutton.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_togglebutton.h:
	Make a 'togglebutton' class which defines togglable buttons without
	defining policy for them.  This will make radio-buttons much easier to
	do right.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_togglebutton.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_togglebutton.h:
	New file.

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Bump version to 0.0.7.4 (this release fixes translation problems with .de
	and adds more i18n and Japanese translations)

2000-10-09  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/po/ja.po, /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/download_bar.cc, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/download_item.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/load_config.cc, /cvsroot/aptitude/aptitude/src/pkg_action_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/vs_progress.cc:
	Commit a patch to add bunches more translatable strings (and add their
	translations to ja.po)

	* /cvsroot/aptitude/aptitude/po/de.po: Incorporate fixes to de.po

	* /cvsroot/aptitude/aptitude/po/de.po:
	Make de.po correct, thanks to Sebastian Schaffert

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_checkbutton.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_radiogroup.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_radiogroup.h:
	Fix some problems with radiogroups.  There's at least one nasty unresolved
	one, though.

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc:
	Add some test code for radiogroups

2000-10-08  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/vs_radiogroup.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_radiogroup.h:
	Add preliminary radio-group code..

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_radiogroup.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_radiogroup.h:
	New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_checkbutton.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_checkbutton.h:
	Always call vscreen_update() when a checkbutton is toggled

2000-10-03  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Bah.  Release a totally new version..

	* /cvsroot/aptitude/aptitude/Makefile.am:
	Bah.  I'm an idiot.  Include the manpage in the dist tarball..

2000-10-02  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Fix cursor-key navigation of tables.  It now works in what seems like a
	reasonable way to me.  Moving from a widget when there are two possibilities
	is still a little weird, but I don't think there's really any 'correct'
	soltion there.

2000-10-01  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_checkbutton.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_checkbutton.h:
	Add (um, in a preliminary form) checkbuttons.  Radiobuttons are next..

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_checkbutton.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_checkbutton.h:
	New file.

2000-09-30  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Fix the problem that was weirding out left and upward motion

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc:
	Add test code for the table-arrow-keying

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_button.cc:
	Make expanded buttons only invert the background of the displayed button,
	not the whole curses window

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.h:
	Add basic (but still amazingly complex..) code to allow cursor-key navigation
	of vs_tables

2000-09-25  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.h:
	Make the menus hide themselves when an item is selected.

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc:
	Really clear ALL signals when a widget is destroyed

2000-09-24  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/curses++.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc:
	This version should squash a LARGE quantity of memory-leak bugs that I was
	seeing.  Basically, I kept allocating CWINDOWS; I thought I was freeing them
	but I actually wasn't (oops).  I now refcount each CWINDOW via the
	cwindow_master wrapper.  Complex and probably slow, but it doesn't leak memory
	at alarming rates.. :)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Fix some thinkos with delete[] vs delete in the table-layout stuff

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_stacked.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_stacked.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.h:
	More sanitization of widget destruction; widgets remove themselves from their
	owner and delete all signals pointing at them when they are destroyed.
	(this means that containers no longer have to keep track of the destroyed
	signal..)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	patch a memory leak in vs_table.cc

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Actually delete widgets which are flagged to be deleted..

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc:
	vscreen_widgets now destroy themselves when removed from their owned (hack?)

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Oops.  The old 'todelete' list stuck around in spite of being unused

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h:
	Several containers which used to call destroy() on their subwidgets now just
	call set_owner(NULL) on them

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc:
	Make the silly menu-entry REALLY silly

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Oops, inherit vs_table's bindings from the global keybindings..

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc:
	Doh.  Apply the background to both buttons in yesno dialogs

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h:
	Add a hook for hiding the menubar when something is selected (**hack**)

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc:
	Add a very silly menu item..

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.h:
	Add a constructor for dialogs which uses a default attribute value

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_button.cc:
	Really make vs_button correctly switch A_REVERSE on and off (I hope)

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.h:
	Replace vs_message_box with a nicer class using vs_button

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/vs_button.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_button.h:
	Add a simple button class

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_button.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_button.h:
	New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Fix a dumb mistake in vs_table::dispatch_char

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.h:
	Bins now propagate focus to their contents (make this optional??)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.h:
	Propagate focus changes of a table to its contents

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc:
	Focus and unfocus a menubar's subwidget when it is focussed or unfocussed

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.h:
	Remove an unused routine

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h:
	In addition to emitting signals when focussed or unfocussed, vscreen_widgets
	now keep track of their own focussed/unfocussed state.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Properly unfocus widgets when hiding or removing them from a table

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_label.h:
	Hm, labels shouldn't accept the input focus

2000-09-23  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_stacked.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_stacked.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.h:
	Added a concept of focus, although it could probably use some further work.
	vs_table can now use this to cycle the input focus among its subwidgets,
	allowing it to act like a usual dialog box.  (buttons and stuff are coming
	next >=) )

	* /cvsroot/aptitude/aptitude/Makefile.am:
	Gah!  It seems that aclocal.m4 isn't distributed by default anymore :(

	* /cvsroot/aptitude/aptitude/src/Makefile.am:
	Oops, I forgot to add aptitude.h to SOURCES..

	* /cvsroot/aptitude/aptitude/po/ChangeLog, /cvsroot/aptitude/aptitude/po/de.po, /cvsroot/aptitude/aptitude/po/ja.po:
	Add a dummy ChangeLog to po/

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Update versioning and NEWS to 0.0.7.2

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/po/de.po:
	Add a painful German translation

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/download.cc:
	Fix some problems with marking strings for translation

	* /cvsroot/aptitude/aptitude/src/aptitude.h:
	Masato seems to have added a common header for i18n, might as well include
	it in CVS..

	* /cvsroot/aptitude/aptitude/po/ja.po:
	Oops, left out the japanese translation..

	* /cvsroot/aptitude/aptitude/intl/bindtextdom.c, /cvsroot/aptitude/aptitude/intl/cat-compat.c, /cvsroot/aptitude/aptitude/intl/ChangeLog, /cvsroot/aptitude/aptitude/intl/dcgettext.c, /cvsroot/aptitude/aptitude/intl/dgettext.c, /cvsroot/aptitude/aptitude/intl/explodename.c, /cvsroot/aptitude/aptitude/intl/finddomain.c, /cvsroot/aptitude/aptitude/intl/gettext.c, /cvsroot/aptitude/aptitude/intl/gettext.h, /cvsroot/aptitude/aptitude/intl/gettextP.h, /cvsroot/aptitude/aptitude/intl/hash-string.h, /cvsroot/aptitude/aptitude/intl/intl-compat.c, /cvsroot/aptitude/aptitude/intl/l10nflist.c, /cvsroot/aptitude/aptitude/intl/libgettext.h, /cvsroot/aptitude/aptitude/intl/loadinfo.h, /cvsroot/aptitude/aptitude/intl/loadmsgcat.c, /cvsroot/aptitude/aptitude/intl/localealias.c, /cvsroot/aptitude/aptitude/intl/Makefile.in, /cvsroot/aptitude/aptitude/intl/po2tbl.sed.in, /cvsroot/aptitude/aptitude/intl/textdomain.c, /cvsroot/aptitude/aptitude/intl/VERSION, /cvsroot/aptitude/aptitude/intl/xopen-msg.sed, /cvsroot/aptitude/aptitude/po/Makefile.in.in, /cvsroot/aptitude/aptitude/po/POTFILES.in, /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/generic/Makefile.am, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.h, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/ABOUT-NLS, /cvsroot/aptitude/aptitude/acconfig.h, /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/Makefile.am:
	Merge in Masato Taruishi's i18n patch.  (I'm not sure of the distinction
	between autogenerated and non-autogenerated files, so I might have to
	add a few more things in the next commit..)

2000-09-17  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h:
	Fix bug #71844, sort of

2000-09-12  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/generic/apt.cc:
	DIE, local-file bug, DIE\!
	(I was testing whether FetchNeeded()>0 before calling Run() -- bad idea)

2000-09-11  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc:
	The 'background' color is now also used as the default attribute when
	the paint() routine is entered (good idea? bad?); maybe its name should
	change..  vs_message_box now takes advantage of this, allowing nice
	inverse-video dialog boxes a la links (I think that's a nice way of getting
	contrast, myself..)

2000-09-10  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_stacked.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_stacked.h:
	Add simple support for widget-stacking.  Not sure whether this should include
	positioning or not (I favor using vs_center-style widgets to do layout,
	but that's just me)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_stacked.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_stacked.h:
	New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_center.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc:
	Hack: setting the background attribute to a magic value (-1) will cause
	the widget to not automatically erase its background.  Should probably be a
	bool or a bitflag eventually.  Needed for 'invisible layout widgets' like
	vs_center

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc:
	It's not clear exactly what show_all should do on a multiplex widget,
	 but it should at least show the widget itself

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Doh, the last commit was stupid.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Layout the screen after adding a widget to a table

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.h:
	Remember to remove widgets from tables when they're deleted..

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc:
	Make the test code more complete (pressing 'd' hides and displays a pane)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.h:
	Make sure to re-layout the screen when a subwidget is hidden or shown

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h:
	Add a method to toggle visibility

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.h:
	Doh!  I forgot to add the headerfile for the table

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.h: New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	Eliminate places where widgets manually set their own backgrounds, using
	set_bg instead

2000-09-09  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/config/colors.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/colors.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_treeitem.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_frame.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h:
	Finally sanitize get_color to return an attribute representing the
	color pair rather than just a color number.

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.h:
	Add a default widget background and use it in many places

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h:
	Add a background property for widgets; all widgets now erase themselves with
	their background before painting themselves.

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_center.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_center.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_frame.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_frame.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_staticitem.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_staticitem.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_treeitem.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_treeitem.h:
	  Renamed the "display" method to "paint" and made it protected.
	  There is a new (non-virtual) vscreen_widget::display method, which should be
	called to display a widget; it will perform preprocessing (eg, plonking down a
	default background) and then invoke the virtual paint method.

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc:
	Make the test code a bit more complex

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_label.cc:
	Finally convert vs_label to manually format strings for output (so I have more
	control over them)

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc:
	Tweak the table test code

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Oops, I need to set the widget's owner when I add it..

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Fix some incorrect show_all routines: vs_table and vs_bin

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Add a constructor for vs_table and hook it (minimally) into the test code

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Remember to take the visible property of subwidgets into account in
	vs_table

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Complete the vs_table layout algorithms.  Keystroke handling (?), display,
	and test code are stil needed.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Completed vs_table::size_request.  The actual layout algorithm and the
	input handling still need to be written.

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Start filling in the table-layout algorithm, and add vs_table to the Makefile

2000-09-08  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/aptitude.1:
	Add a simple manpage (as requested in the Debian BTS)

2000-09-07  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/TODO:
	Add an interesting idea to the head of the TODO

2000-09-06  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc:
	Add the basic child-handling routines for vs_table (not yet added to Makefile.am as it's incomplete)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_table.cc: New file.

2000-09-04  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Update README and add NEWS entries for 0.0.7.1

2000-08-03  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/README:
	Bring some dated info in the README up-to-date

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_container.cc: New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_center.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_container.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_container.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_frame.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc:
	showing/hiding now exclusively use a visible member and signals.  (this is
	a bit of a reversion, yes)  The implementation isn't completely clean yet,
	but can be made so in the future, which is what's important..

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Bump the version number to 0.0.7.1 and update documentation -- I should have
	done this back in May..

2000-08-02  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.h:
	Fix some problems due to message-boxes not having explicitly specified
	attributes

2000-07-31  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	Fix up a few minor issues with the tree code and widgets (height
	calculation, y starting base, etc)

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h:
	Preliminary work to patch vs_tree into the new system.  A lot more still needs
	to be done, though.

2000-07-19  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc:
	do_layout() has to be connected up in multiplexers

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc:
	The main widget of a minibuf should be offset down one
	character from the minibuf-window itself

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_frame.cc:
	Handle situations where frames have no subwidget sanely

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_center.cc:
	Correctly set the size of centered widgets

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc:
	alloc_size needs to call do_layout()

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc:
	Kill the crashing bug--it was somehow related to using an auxillary counter in
	the first for loop in vs_menubar::layout_me().  (I hate C++)  Anyway,
	that counter was unnecessary anyway, so I just removed it and made
	things more stable AND cleaner in one fell swoop :)

	* /cvsroot/aptitude/aptitude/src/vscreen/README.layout, /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_center.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_center.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_container.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_frame.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_frame.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h:
	  Implemented the layout system described in README.layout, mostly.  It's been
	remarkably effacious at eliminating crufty hacks, which is good since that's
	why I adopted it :-)  Menus still crash, though; I'll see what's up with that
	next.

2000-07-18  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/README.layout: New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/README.layout:
	  The layout code is getting dangerously complicated, and so I've decided to
	write up a document laying out a plan (with no basis in current code) for
	its eventual structure, and explaining the algorithm I'll use for table
	layout.  (borrowed from GTK+, with my own tweak(s))

2000-07-09  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.h:
	  Added a file for utility routines; for instance, it currently contains a
	routine to set up (but not display) a message box.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_util.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_util.h:
	New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_center.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_center.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_frame.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_frame.h:
	  Added a simple widget to center widgets inside other widgets.  It uses
	the hack that a minimum size of 0 means to expand as much as possible
	(note to self: this probably doesn't work so well when placed inside most
	 widgets..)  May need some work in the future.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_center.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_center.h:
	New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_frame.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_frame.h:
	  Added a generic class to handle a lot of the nuisances involved in writing
	a "bin" -- a widget that can only handle one child at once.  (idea
	stol^H^H^H^Hborrowed from GTK+)  vs_frame is the only current instance of
	this.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_bin.h:
	New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_frame.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_frame.h:
	  Added a widget which can display a frame around another widget.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_frame.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_frame.h:
	New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_label.cc:
	Fix the minimum-size behavior of labels

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.h:
	  Added a simple "label" widget which displays unwrapped, unscrolled,
	static text.  A more complicated widget will also be needed in the
	future..

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_label.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_label.h:
	New file.

2000-07-08  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_container.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h:
	  Added the shaky beginnings of a layout system.

	  The idea is that you can set the minimum size of a widget, and that the
	layout() signal is used when a widget's owner needs to recalculate
	its layout wrt the other widgets (eg, its size changes)  May not be
	completely implemented and/or clean yet.  For instance, I don't quite
	have a policy on when set_geom() is called, or what (if anything) to use
	the resize() signal for..

2000-07-06  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h:
	Twiddle the handling of signals in menus.  Autogenerated
	menu items still have their signals routed through the main handler
	in the containing menu, but your code can use that hook as well..

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h:
	Make a bunch of signals into zero-argument signals; when they're
	bound to something that needs the widget, bind() should be explicitly
	used to create a 'closure'

2000-07-04  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h:
	Add a rectangle type and use it to store widget geometries.
	This change is a precursor to adding a size hint for layout.

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc:
	Make the default colorization of various widgets be white-on-blue/blue-on-white
	due to issues with having yellow in the background on the console (it
	mutates into a really ugly shade of brown)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc:
	Fix a bug that caused entries which filled the menu horizontally to be
	followed by 'holes'

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc:
	Add cursor-update handling for the vs_menubar

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h:
	  Fiddled with the refreshing behavior again -- I now understand more about
	how (n)curses handles subwindows, and realized that all those refreshes on
	subwindows are a waste of time.  All that's necessary is to touch and then
	refresh the toplevel window.  So I did that, and all seems to be well (I don't
	think that I even lost much efficiency!)

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	  vscreen_update no longer actually updates the screen; instead, it sets a flag
	indicating that the screen *should* be redrawn.  vscreen_poll() and
	vscreen_mainloop() test this flag after dispatching a keystroke.

	  vscreen_updatenow() updates the screen immediately, for use in those corner
	cases where you really need it.  (it isn't even exported yet, I'll export it
	when I find such a corner case..)

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc:
	Add a Help menu to the test program

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc:
	Prettify the menu bar a bit

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Add escape as a binding for Cancel and F10 as a binding for ToggleMenuActive

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.h:
	New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menubar.h:
	Somehow, my earlier attempt to add the menu bar code to the repository failed miserably.  Doh.  Fixed.

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc:
	  Add very basic support for menu-bars.  A menu-bar, in my definition, is a
	sometimes-hidden entity which contains both the menus it pops up AND the
	widget that appears behind it.  (that is -- you can't generate a menubar by
	itself; not without a bit of extra effor, at least)

	  Some might say that this is a hack, but I can deal with that objection
	by sticking my fingers in my ears and loudly singing "LALALALALA"..

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h:
	Add support for separators in menus

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h:
	Oops, I need to enable the keypad and set cbreak mode..

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h:
	Doh, I switched the parameters in set_height().  Fixed.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc:
	Fix the width calculations..

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc:
	Don't forget to include the quit entry in the menu!

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h:
	Fix a minor drawing quirk in the menu code (the borders were getting random
	background attributes) and make sure the bindings table for menus is
	properly set up

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc:
	Make a minibuf-window clear its whole background before displaying a child
	(so that empty space around the child, if any, is cleared nicely)

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc:
	Fix a crashing bug in the test code

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h:
	  Add a basic menu widget.  It compiles, that's all I can say about it right
	now :)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_menu.h:
	New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h:
	Fix a thinko in the various routines to resize a widget -- when attempting to
	change the widget's cwindow to be the correct size, rather than setting its
	owner-window to be its current owner-window again, they set it to its OWN
	window.  Oops.

2000-07-03  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h:
	  Fix the refreshing behavior to be correct.  Basically, we have to do
	wnoutrefresh() on all the subwindows (in back->front order), then call
	doupdate().  Future container widgets have to implement this as well as the
	other necessary routines, or all sorts of weirdness may or may not occur..

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc:
	Fix a silly problem preventing the user from switching between the two
	multiplexed widgets at all in the test.  (there are still problems)  Perhaps
	the distinction between visible and invisible widgets is not worth the
	trouble..??

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc:
	s/display/vscreen_update/

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc:
	Fix a bunch of potential problems which would cause failure to redraw the
	display properly in some circumstances

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h:
	Bring vs_minibuf_win's focus delegation up-to-date (it now uses dispatch_char
	exclusively)

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc:
	Make the switcher the minibuf_win's main widget instead of a status-widget

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc:
	Fix more crashing bugs

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc:
	Fix more segfaults in vs_minibuf_win.cc (remember that main_widget can be
	NULL\!\!))

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Fix a segfaulting thinko

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Really properly hide and/or update the location of the cursor

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	  Finally fix the evil linking errors (naturally, the problem was simply that I
	forgot to define a method in the .cc file that I declared in the .h file.  Doh)

2000-07-02  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.h:
	Add a test program for the vscreen library

	* /cvsroot/aptitude/aptitude/src/vscreen/testvscreen.cc: New file.

2000-07-01  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_treeitem.cc:
	  Fixed the core vscreen widgets (theoretically) to take the division of
	vs_minibuf_win from its contents.  This will be a bit painful, but hopefully
	it'll be worth it.  (the aptitude layer is now entirely broken..it needs more
	thought to deal with this last change)

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	vs_minibuf_wins now implement the main screen as a subwidget

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h:
	  Fixed a bunch of *compile-time* errors caused by the change of vs_minibuf_win
	to be a real container.  Totally broke runtime as a result (segfault on startup)
	  Oops. :-)  Will fix eventually..

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_progress.cc, /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/download_bar.cc, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/download_screen.cc:
	  Widgets should no longer display() and refresh() themselves directly; this
	is in preparation for support for overlapped widgets.  Instead, they should call
	vscreen_update().  This will cause ALL widgets to be displayed and then
	refreshed.  In the future, this will probably just queue an update request,
	with another routine available in the case that you want immediate response.

	  vs_minibuf_wins are now vs_containers; adding a widget to them adds a status
	widget by default, same for removing.  delete_status_widget was cruft, so I
	removed it.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc:
	  Tweaked the cursor and window handling of the multiplexer to theoretically
	be better..

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h:
	  The global "toplevel" variable is not really needed anymore; it was a bit
	of a wart anyway, IMO :)

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/vs_container.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc:
	  Added a "container" class and made vs_multiplex an instance of it.

2000-06-30  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_container.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h:
	  Added a "container" interface, which defines what widgets which hold other
	widgets should do, and gave widgets a notion of their own "owner".

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_container.h: New file.

2000-06-26  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h:
	Well, now it makes it to the point of displaying a first screen, albiet not
	very well.  I fixed some bugs with assigning owner-windows

	* /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Actually set the toplevel widget to be the toplevel widget, so something
	happens instead of the program just exiting immediately..

2000-06-25  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h:
	Fix a potential (?) problem if a widget got destroyed twice.  Maybe that
	should be an error anyway..hmm..

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc:
	I forgot to write a destructor for vs_multiplex.  Oops.

	* /cvsroot/aptitude/aptitude/src/apt_tree.h, /cvsroot/aptitude/aptitude/src/download_bar.cc, /cvsroot/aptitude/aptitude/src/download_bar.h, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/download_screen.h, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/pkg_action_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_progress.cc, /cvsroot/aptitude/aptitude/src/vs_progress.h, /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/Makefile.am:
	  Many, many, many changes.  Too many to list here (yes, I'm a bad boy,
	but this *is* the middle of a rewrite, so I feel justified)
	  More signalification, lots of tweaks to the hierarchy (vs_minibuf as a
	class is vanished; vscreen_widgets should be used instead), and a bunch of
	other changes.  I *think* that it might possibly compile now, if you sacrifice
	a goat first.

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	  A major "milestone": the vscreen library now compiles!

	  This commit primarily changes the various callback classes to use signals
	instead of inheritence and to display themselves directly instead of
	relying on an owner.  (note: the "minibuf" and "status"widgets should really
	be more general..)

2000-06-22  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h:
	Many more fixes; much of what is left involves the former minibuf-widgets, which
	I think need lots of fixing-up.  No major architectural changes, I think;
	I just clobbered compile errors.

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h:
	New file.

	* /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen_widget.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_multiplex.h:
	Too many corrections to list individually -- basically, the code is being
	converted from implementing the old architecture to implementing the new
	one.
	  Major features:
	 -> vs_multiplex is mostly implemented
	 -> Widget deletion is worked out (use destroy() )

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Make curses_avail visible in vscreen.cc (actually, this variable may be
	archaic and a candidate for removal..)

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/apt_tree.h, /cvsroot/aptitude/aptitude/src/download_bar.cc, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/download_screen.h, /cvsroot/aptitude/aptitude/src/pkg_action_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_action_tree.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/colors.cc, /cvsroot/aptitude/aptitude/src/vscreen/curses++.h, /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h:
	Initial commit for the UI rewrite branch.  This will make the UI much nicer
	and more flexible, but just now it doesn't compile at all..

	The major changes are the move to a widget hierarchy, the use of libsigc++,
	and the removal of the vscreen class (the vs_multiplexer will do about the
	same thing)  Maybe I should change the library name at some point..

2000-05-31  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Do the same for version treeitems

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc:
	Long actions should probably always display something

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h, /cvsroot/aptitude/aptitude/src/vscreen/columnify.cc, /cvsroot/aptitude/aptitude/src/vscreen/columnify.h, /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.h:
	A major overhaul to the column-formatting code.  Everything is now based on
	printf-style format strings, which (er, hopefully) will make this configuration
	much more flexible and much simpler (eg, padding is no longer needed)
	There will probably be some further work to do here..

2000-05-26  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download_screen.cc:
	Fix a serious problem which prevented file: URLs from working

	* /cvsroot/aptitude/aptitude/src/download.cc:
	Errr, lockfiles go in /var/state/apt, not /

	* /cvsroot/aptitude/aptitude/src/download_screen.cc:
	AbortScreen should also cause downloads to be cancelled

2000-05-18  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/generic/apt.h, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	Attempt to write the code necessary to allow log messages to be generated just
	before the dpkg run

2000-04-18  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Removed an extraneous #include of config.h

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Update versions and NEWS for 0.0.7

2000-04-15  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/Makefile.am:
	Distribute help.txt in a dist targz

	* /cvsroot/aptitude/aptitude/TODO: Update the TODO list

	* /cvsroot/aptitude/aptitude/src/generic/undo.cc: DIE BUG DIE!!!!!

	  Ok, I finally killed that evil segfault.  The problem was, simply, that I was
	allowing the floor list to empty.  Doh.  (how exactly this triggered the
	segfault is another question, but I can no longer reproduce it)

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_action_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_action_tree.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Some more changes (which didn't help) to attempt to find the evil bug

2000-04-09  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_tree.h:
	Removed a no-longer-pertinent editorial comment

2000-04-05  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc:
	Fix the scroll-to-end action in the internal pager

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc:
	Change Top and Bottom in vs_pager::dispatch_char to
	Begin and End.  Home and End should now work in pagers.

	* /cvsroot/aptitude/aptitude/help.txt, /cvsroot/aptitude/aptitude/Makefile.am, /cvsroot/aptitude/aptitude/src/apt_tree.cc:
	Wrote up a kinder, gentler online help screen

	* /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Allow column headers to be turned on and off at runtime

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/README:
	Use C-u instead of C-z for undo

	* /cvsroot/aptitude/aptitude/NEWS: Added more stuff to NEWS

	* /cvsroot/aptitude/aptitude/aptitude-hackers-guide.txt:
	Update the hackers guide for the newer version

	* /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Slightly change the description of the ~c matcher

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/download_screen.h, /cvsroot/aptitude/aptitude/src/pkg_action_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h, /cvsroot/aptitude/aptitude/autogen.sh:
	Fix various issues which prevented compilation

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_subtree.h:
	Minor optimization tweak to the ExpandTree and CollapseTree bindings

	* /cvsroot/aptitude/aptitude/NEWS: Update the changelog

	* /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/generic/matchers.cc:
	Add a match type for removed packages with config files
	still on the system

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/TODO:
	Update documentation and stuff for 0.0.6.9

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/defaults.cc:
	Move more keybindings from subtrees to the toplevel

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc:
	Allow the user to repeat searches in a pager

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	Rename SelectParent to Parent, and add a default binding for it

	* /cvsroot/aptitude/aptitude/src/generic/undo.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc:
	Attempt to track down an elusive segfault.  It's not woorkking..

2000-03-19  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc:
	Fix the interaction between reverse depends and virtual packages.  Package
	information screens for virtual packages should now include information on
	reverse depends

	* /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/dep_item.h, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	  dep_screens are now children of apt_info_screen.
	  Also tried to add some code to avoid crashing when we look at reverse
	dependencies of a virtual package, but it's not working yet.  Stay tuned :)

	* /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.cc, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.h:
	pkg_description_screens are now children of apt_info_tree, in case anyone cares.

	* /cvsroot/aptitude/aptitude/src/apt_info_tree.h, /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/apt_tree.h, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	The revert_to parameter can now be omitted when constructing
	apt_trees and apt_info_trees; the current undo stack size will then be used.

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h:
	Version screens are now children of apt_info_screen

	* /cvsroot/aptitude/aptitude/src/apt_info_tree.cc, /cvsroot/aptitude/aptitude/src/apt_info_tree.h, /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_info_screen.h:
	  Added apt_info_tree, a new class which should make it easier to display
	screens with info on a particular package.  Its main selling point is that it
	knows how to restore (or remove) itself after the package cache is altered.
	  Also, converted pkg_info_screen to use this and cleaned up the code for
	apt_tree a bit.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.cc:
	Allow the user to use the Cancel key binding in a multiple-choice status widget

	* /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc:
	Handle virtual package info screns without crashing

2000-03-18  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/apt_tree.h, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.h:
	Added support for two ways to 'quit' screens: you can quit and save changes
	(the historic ExitScreen), or quit and revert changes (AbortScreen, default
	bindings of 'x')

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/apt_tree.h, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.h:
	Get the prompt on exit to work.

2000-03-17  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/apt_tree.h:
	Hopefully add support for an exit prompt; unfortunately, it isn't working right
	now (because mypkgtree overrides it)

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Make it compile

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/apt_tree.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h:
	Allow apt_trees to update the package list (I'll see what blows up; I must
	have had good reasons for not doing this before, right? :)

	* /cvsroot/aptitude/aptitude/src/defaults.cc:
	Oops.  I meant to replace references to the mostly-redundant description
	screen with references to the info screen, but did things the wrong way
	around :)  Fixed.

	* /cvsroot/aptitude/aptitude/src/apt_tree.h, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_info_screen.h:
	Make pkg_info_screen a descendant of apt_tree, so you can do stuff like
	getting help, undoing, and doing install runs from it.

	* /cvsroot/aptitude/aptitude/TODO: TODO updates

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/load_config.cc, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/pkg_action_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_node.cc, /cvsroot/aptitude/aptitude/src/pkg_node.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Fix some more issues with keybindings (some of which were introduced by the
	last commit, oops...)

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/pkg_action_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_action_tree.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_node.cc, /cvsroot/aptitude/aptitude/src/pkg_node.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Finish converting the Apt interface elements to use the new hierarchical
	binding mechanism; now I have to tie it into the config-loading routines

	* /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/apt_tree.h, /cvsroot/aptitude/aptitude/src/defaults.cc:
	  Added a keybinding namespace for apt_trees.

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Add global bindings for Undo and Help, even though they aren't used
	anywhere in the vscreen library, so other screen types can count on their
	existance

2000-03-15  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Try to add better counting of reverse depcounts, but I'm not sure how well
	this works; caveat compilor.

	* /cvsroot/aptitude/aptitude/src/load_config.cc, /cvsroot/aptitude/aptitude/src/load_config.h:
	Doh, forgot to add these files

2000-03-12  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/TODO: Add a very simple TOOD item

	* /cvsroot/aptitude/aptitude/src/dep_item.cc:
	Fix bug that reverse depends involving provided packages
	weren't displayed

2000-03-09  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/config/keybindings.cc:
	Oops.  Bindings in sub-keymaps should shadow bindings in parent keymaps.

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Add various default alternate keybindings for common keys (eg, vi movement keys)

	* /cvsroot/aptitude/aptitude/src/vscreen/config/keybindings.cc:
	Fix a logic bug in the keybindings code that made parents not be checked

2000-03-08  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Should've checked that the last commit compiled (doh)

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Make the pagers not segfault

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	Make it compile again (define the static members that were added)

	* /cvsroot/aptitude/aptitude/src/vscreen/config/keybindings.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/keybindings.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc:
	Keybindings now are hierarchically arranged; each major vscreen class has its
	own keybinding set.  Still missing is use of this in the aptitude code and
	parsing of hierarchies in /etc/apt/apt.conf.

	* /cvsroot/aptitude/aptitude/src/vscreen/config/keybindings.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/keybindings.h:
	Add support for nested keybinding groups in keybindings.{cc,h}

	* /cvsroot/aptitude/aptitude/src/pkg_action_tree.cc:
	Oops.  The pkg_action_tree was handing events all the way up to vs_tree
	instead of passing them just one level up the hierarchy.

	* /cvsroot/aptitude/aptitude/src/defaults.cc:
	Re-add a keybinding for Undo (Control-underscore..maybe I should do something
	more 'intuitive' for non-Emacs users eventually as well ;-)

2000-03-06  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/dep_item.cc:
	Switch to using GlobOr in dep_item::dep_item; changed the or-following logic in
	dep_item::select to not falsely start ors.  I think this finally fixes all
	the (KNOWN!!) problems with handling ORed dependencies, yayy :)

	* /cvsroot/aptitude/aptitude/src/dep_item.cc:
	  Fixed the problems with showing broken dependencies the Right Way[tm].
	The problem was that I was confused about the difference between
	DepGInstall (which is only defined for the last member of an or group
	and tells whether the whole group is OK in the install state), DepInstall
	(which tells whether a particular dep is OK), and DepGCVer (DepGInstall for
	candidate versions)

	  I also fixed yet another bug in setting up dependency trees..sigh..(I may
	just break down and figure out GlobOr; it's just a 5-line function :) )

	* /cvsroot/aptitude/aptitude/TODO: Add TODO items

2000-03-05  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	Cache the state file's size; the idea is that this might make things go a
	little quicker when loading it.  It isn't working.. :)

	* /cvsroot/aptitude/aptitude/src/dep_item.cc:
	Ok, it seems that the undocumented flag DepGCVer has to be tested in addition
	to the undocumented DepGInstall flag in order to see whether a dependency is
	met.

	* /cvsroot/aptitude/aptitude/TODO:
	Added a lot of good suggestions made by ressu@uusikaupunki.fi

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/generic/apt.h, /cvsroot/aptitude/aptitude/src/apt_tree.cc, /cvsroot/aptitude/aptitude/src/apt_tree.h, /cvsroot/aptitude/aptitude/src/download.h, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_action_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_action_tree.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h:
	  Added a new class, apt_tree, which generalizes various former behaviors of the
	pkg_tree.  Currently it's only used by pkg_tree, but I plan to have many of the
	trees in the program inherit from it eventually.
	  In addition, pkg_action_tree was split out from pkg_tree.cc (it's only used
	by the apt_tree class now)

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	Reading or writing extended state info now is tracked by a progress bar.  Oddly,
	this seems to make the program start more slowly (!)  Should I not do that?
	(note that the the spend reading this file was almost negligible previously)

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	When formatting columns, display the priority as Unknown if it's not available

	* /cvsroot/aptitude/aptitude/src/main.cc: Make it compile

	* /cvsroot/aptitude/aptitude/src/main.cc:
	Load the colors and keybindings at an earlier point in the init process

	* /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/generic/apt.h, /cvsroot/aptitude/aptitude/src/main.cc:
	Call pkgInitialize in main instead of in apt_init (I need to access the
	configuration before apt_init is called)

2000-03-04  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Move the try_fix_broken routine into the generic directory and have it
	generate undo info

	* /cvsroot/aptitude/aptitude/src/generic/undo.cc, /cvsroot/aptitude/aptitude/src/generic/undo.h:
	Add support for an undo 'floor'

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Hopefully fix some nasty crashing in the column code when sectionless package's
	secions were requested

	* /cvsroot/aptitude/aptitude/TODO: Add items to TODO

	* /cvsroot/aptitude/aptitude/README:
	Add a description of the DebSize column type, remove a duplicate description
	of Aptitude::Fix-Broken

2000-03-03  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/TODO:
	Add a note that a bugs.debian.org interface would be nice

	* /cvsroot/aptitude/aptitude/TODO: Update/fix the TODO list

2000-02-25  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/defaults.cc:
	*oops*  When I renamed all the colors, I sort of forgot to include a definition
	for the download progress color.  This made the download progress screen look
	somewhat different (no progress bars for individual items)  Fixed.

	* /cvsroot/aptitude/aptitude/src/generic/undo.cc, /cvsroot/aptitude/aptitude/src/generic/undo.h:
	Added hooks to collapse the top of the undo stack to a single item or to
	revert items en masse.  Not used in the UI (yet..)

2000-02-22  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/generic/apt.h, /cvsroot/aptitude/aptitude/src/pkg_node.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.h:
	Moved the undo list back out of the vscreen class; there's now a global apt
	undo queue.  This makes things compile again, always a Good Thing[tm] :)

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	Fix a nasty segfault due to a brain glitch which caused me to use mark_install in lieu of MarkInstall

	* /cvsroot/aptitude/aptitude/src/generic/Makefile.am, /cvsroot/aptitude/aptitude/src/generic/undo.cc:
	Make it compile again

2000-02-20  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/generic/undo.h, /cvsroot/aptitude/aptitude/src/generic/undo.cc:
	Move some undo code out of the header

	* /cvsroot/aptitude/aptitude/src/dep_item.cc:
	Use ProvideVersion to choose which versions of provided depended packages
	to display

	* /cvsroot/aptitude/aptitude/src/dep_item.cc:
	Pressing 'install' on a dependency now automatically selects a single target to
	install

	* /cvsroot/aptitude/aptitude/src/pkg_node.cc:
	Fixed the performance problems with altering the state of large package groups

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	Fix some correctness problems with the freeze/thaw code for undos that I just
	committed, introduced some more performance problems..

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/pkg_subtree.cc:
	Attempted to fix up the performance problems.  Still not as quick as I'd like,
	but bearable -- no more O(n^2) nonsense

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_subtree.cc:
	First iteration of support for actions on a package subtree.  This revealed
	a nasty performance 'issue' that needs to be resolved..

2000-02-19  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_subtree.h: Fix indentation

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	You should now be able to undo a 'forget new' command (untested :( )

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	Fixed the weird problem with reinstalls sometimes not being undoable (it was
	symptomatic of a deeper problem -- some reinstall flags weren't actually
	being cleared)

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	You can now undo the reinstallation of a package..sort of..

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	Partly fixed undoing wrt reinstallation

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Oops..fixed a problem that caused Allow-ReInstall to default to off--sometimes

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	  Avoid the problem of the backup-cache not being updated after an undo;
	as a side-effect, set_reinstall has vanished, to be replaced by an argument
	to mark_install.

	* /cvsroot/aptitude/aptitude/src/pkg_node.cc:
	Oops..pass in a real undo_group in the dispatch_char code for pkg_node

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	Clarify a ?: clause

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	The screen should be redrawn after an undo goes through

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/undo.h:
	Fix bugs in undo code, at least it doesn't segfault now :-)

	* /cvsroot/aptitude/aptitude/src/generic/undo.h, /cvsroot/aptitude/aptitude/src/pkg_node.cc, /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.h:
	Added hooks into the undo code from the UI.  It segfaults.  Bah. :)  I'll fix
	it this afternoon..

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_node.cc, /cvsroot/aptitude/aptitude/src/pkg_node.h, /cvsroot/aptitude/aptitude/src/pkg_subtree.cc, /cvsroot/aptitude/aptitude/src/pkg_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h:
	Update code in the upper level to add support for the new undo stuff.  This
	change means that the program is (theoretically >=) ) compilable again..

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	More tweaks to the undo handling

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h:
	Finally completed support for undo info.  I hope it's not too horrendously
	hairy to comprehend. :-)
	  This also replaces the overloading of MarkInstall with a separate method,
	mark_install; external classes should probably use that one (in fact, I'd
	like to hide MarkInstall altogether) -- same goes for the other state-changing
	operations..

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc:
	Tweak handling of aptitude-states in the apt undoer

	* /cvsroot/aptitude/aptitude/src/vscreen/config/colors.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/colors.h, /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/column_definition.h, /cvsroot/aptitude/aptitude/src/vscreen/config/keybindings.cc, /cvsroot/aptitude/aptitude/src/vscreen/config/keybindings.h:
	OOPScvs add vscreen/config/*.{cc,h}  I forgot to re-add these when I moved them into vscreen/..the tree
	should compile from a fresh checkout now..

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/generic/undo.h:
	Added some code which will hopefully allow APT actions to be undone

	* /cvsroot/aptitude/aptitude/src/generic/undo.h:
	Added a method to insert items into undo groups

	* /cvsroot/aptitude/aptitude/src/generic/undo.h:
	Added undo_group and a destructor for undo_list

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h:
	Track Aptitude states in snapshots as well

	* /cvsroot/aptitude/aptitude/src/generic/undo.h:
	Added a simple generic undo framework

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Make the necessary changes so that broken-dependency-fixes are reverted
	if the user quits the preview screen.

	* /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h:
	Added facilities to snapshot and restore the cache state

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc: More compile fixes

	* /cvsroot/aptitude/aptitude/acconfig.h: Make it compile properly

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.h:
	Add minimal support for threading (hopefully this is a good idea :) )

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Eliminate an unnecessary parameter to pkg_changelog::pkg_changelog()

	* /cvsroot/aptitude/aptitude/src/download_screen.cc:
	Fix a thinko that made paging down when using a download_screen impossible

2000-02-18  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	Fix detection of packages which are upgradable but being held back due to
	broken dependencies

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h:
	Finally fix a longstanding visual quirk -- the planned action screen now goes
	away nicely when you start the installation

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Properly yank away a vscreen's window when it's hidden

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Oops, handle CycleScreen keystrokes in vscreen_poll() also..

	* /cvsroot/aptitude/aptitude/src/main.cc:
	Handle exiting cleanly (ie, without segfaulting) -- save selections from the
	quit() routine instead of from main..

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Fix a logic bug in vscreen_push

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc:
	Pass the inputted character up to vscreen -- maybe not the best way
	to do things?

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h:
	Make the removed() method applicable to all minibuf-widgets and call it from
	vs_minibuf_win::remove_status_widget()

	* /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/dep_item.h, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.cc, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.h, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_info_screen.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h:
	Made preliminary modifications to the Aptitude code to make it work with
	the new vscreen code

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc:
	Pass dispatch_char events up the hierarchy

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.h:
	Major changes, again, to the vscreen code; now uses a system of a list of
	stacks of screens..hopefully flexible enough and not too messy..

2000-02-16  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc:
	Exiting is handled by the main loop; exiting the top-level screen causes the
	program to 'fall out' of the main loop

	* /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.h:
	Replaced vscreen_show with vscreen_push and vscreen_hide, which manage an
	internal stack of windows.  This could, of course, become more complex if
	necessary :)

2000-02-10  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download_bar.cc, /cvsroot/aptitude/aptitude/src/download_bar.h, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/download_screen.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.h:
	Added a new method, vscreen_poll; this just checks for any pending input or
	timeouts and dispatches them, then returns.  Used to do input the Right Way
	in the download objects

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/download_bar.cc, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/download_item.cc, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_treeitem.h, /cvsroot/aptitude/aptitude/src/vs_progress.cc, /cvsroot/aptitude/aptitude/src/vs_progress.h:
	  -> get_color() no longer implicitly creates a new color definition if
	    none is available.  Colors are now explicitly and centrally defined.
	  -> Keybinding and color definitions for vscreen stuff moved to vscreen_init.
	  -> Color names now follow apt.conf conventions: FooName instead of foo_name.

	* /cvsroot/aptitude/aptitude/src/vscreen/vs_progress.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_progress.h, /cvsroot/aptitude/aptitude/src/vs_progress.cc, /cvsroot/aptitude/aptitude/src/vs_progress.h:
	  Moved vs_progress.{cc,h} back to the toplevel source directory, it belongs
	there.

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/src/aptcache.cc, /cvsroot/aptitude/aptitude/src/aptcache.h, /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/apt.h, /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.cc, /cvsroot/aptitude/aptitude/src/generic/aptcache.h, /cvsroot/aptitude/aptitude/src/generic/apt.cc, /cvsroot/aptitude/aptitude/src/generic/apt.h, /cvsroot/aptitude/aptitude/src/generic/Makefile.am, /cvsroot/aptitude/aptitude/src/generic/matchers.cc, /cvsroot/aptitude/aptitude/src/generic/matchers.h, /cvsroot/aptitude/aptitude/src/generic/pkg_changelog.cc, /cvsroot/aptitude/aptitude/src/generic/pkg_changelog.h, /cvsroot/aptitude/aptitude/src/main.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/matchers.cc, /cvsroot/aptitude/aptitude/src/matchers.h, /cvsroot/aptitude/aptitude/src/pkg_changelog.cc, /cvsroot/aptitude/aptitude/src/pkg_changelog.h, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/testscr.cc:
	  Lots more structural changes: moved the stuff that doesn't depend on the
	user-interface to generic/ .  This being a frontend, there's not much of it :)
	but I did it anyway.

	* /cvsroot/aptitude/aptitude/src/vscreen/config/Makefile.am, /cvsroot/aptitude/aptitude/src/vscreen/Makefile.am:
	Oops, forgot to add these before

	* /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/apt.h, /cvsroot/aptitude/aptitude/src/columnify.cc, /cvsroot/aptitude/aptitude/src/columnify.h, /cvsroot/aptitude/aptitude/src/config/colors.cc, /cvsroot/aptitude/aptitude/src/config/colors.h, /cvsroot/aptitude/aptitude/src/config/column_definition.cc, /cvsroot/aptitude/aptitude/src/config/column_definition.h, /cvsroot/aptitude/aptitude/src/config/keybindings.cc, /cvsroot/aptitude/aptitude/src/config/keybindings.h, /cvsroot/aptitude/aptitude/src/config/Makefile.am, /cvsroot/aptitude/aptitude/src/curses++.cc, /cvsroot/aptitude/aptitude/src/curses++.h, /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/dep_item.h, /cvsroot/aptitude/aptitude/src/download_bar.cc, /cvsroot/aptitude/aptitude/src/download_bar.h, /cvsroot/aptitude/aptitude/src/download.h, /cvsroot/aptitude/aptitude/src/download_item.cc, /cvsroot/aptitude/aptitude/src/download_item.h, /cvsroot/aptitude/aptitude/src/download_screen.h, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.h, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_info_screen.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_node.cc, /cvsroot/aptitude/aptitude/src/pkg_node.h, /cvsroot/aptitude/aptitude/src/pkg_subtree.cc, /cvsroot/aptitude/aptitude/src/pkg_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h, /cvsroot/aptitude/aptitude/src/testscr.cc, /cvsroot/aptitude/aptitude/src/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/columnify.cc, /cvsroot/aptitude/aptitude/src/vscreen/columnify.h, /cvsroot/aptitude/aptitude/src/vscreen/curses++.cc, /cvsroot/aptitude/aptitude/src/vscreen/curses++.h, /cvsroot/aptitude/aptitude/src/vscreen.h, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen/vscreen.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_pager.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_progress.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_progress.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_staticitem.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_staticitem.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statuschoice.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_statusedit.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_tree.h, /cvsroot/aptitude/aptitude/src/vscreen/vs_treeitem.cc, /cvsroot/aptitude/aptitude/src/vscreen/vs_treeitem.h, /cvsroot/aptitude/aptitude/src/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vs_pager.h, /cvsroot/aptitude/aptitude/src/vs_progress.cc, /cvsroot/aptitude/aptitude/src/vs_progress.h, /cvsroot/aptitude/aptitude/src/vs_staticitem.cc, /cvsroot/aptitude/aptitude/src/vs_staticitem.h, /cvsroot/aptitude/aptitude/src/vs_statuschoice.cc, /cvsroot/aptitude/aptitude/src/vs_statuschoice.h, /cvsroot/aptitude/aptitude/src/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vs_statusedit.h, /cvsroot/aptitude/aptitude/src/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h, /cvsroot/aptitude/aptitude/src/vs_treeitem.cc, /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	Stage I of the Great De-Crufting: Moved the vscreen classes into their own
	tree.  This, of course, nukes a lot of the CVS history and leaves an empty
	config/ directory :(

2000-02-09  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/matchers.cc, /cvsroot/aptitude/aptitude/src/matchers.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Pass the package into the matcher as well; this eliminates various bugs and
	crashes involving virtual packages (VerIterator::ParentPkg doesn't work
	for the null iterator at the end of a version list..)

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Don't filter out virtual packages when searching

	* /cvsroot/aptitude/aptitude/src/download_bar.cc:
	Fix formatting bug when the total size was unknown

2000-02-06  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/Makefile.am:
	Actually create /var/state/aptitude on install, and put
	aptitude-hackers-guide.txt in the distribution tarball

	* /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/NEWS:
	Update for 0.0.6a

	* /cvsroot/aptitude/aptitude/configure.in:
	Bump the version to 0.0.6a (to release with the compile fixes)

	* /cvsroot/aptitude/aptitude/src/download.cc:
	Fix some (more) problems that occur when compiling with optimization on (oops)

	* /cvsroot/aptitude/aptitude/src/download.cc:
	Fix some problems that occur when compiling with optimization on (oops)

	* /cvsroot/aptitude/aptitude/autogen.sh, /cvsroot/aptitude/aptitude/Makefile.am:
	Fixes to more correctly handle generation of config.h.in

	* /cvsroot/aptitude/aptitude/BUGS, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	Documentation updates

	* /cvsroot/aptitude/aptitude/acconfig.h, /cvsroot/aptitude/aptitude/Makefile.am, /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Added a minimal online-help screen (it just displays the README file);
	probably I should make something more concise (and maybe even in a cute little
	popup dialog like console-apt has) in the future :)

	* /cvsroot/aptitude/aptitude/acinclude.m4, /cvsroot/aptitude/aptitude/configure.in:
	Add an AC_DEFINE for 'HELPDIR', where some online help stuff will go

	* /cvsroot/aptitude/aptitude/NEWS:
	Added information about the changes in 0.0.6

	* /cvsroot/aptitude/aptitude/aptitude-hackers-guide.txt, /cvsroot/aptitude/aptitude/README:
	Documentation updates

	* /cvsroot/aptitude/aptitude/src/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vs_pager.h:
	Display the approximate percentage of the text viewed in the internal pager

	* /cvsroot/aptitude/aptitude/README: Documentation updates

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Show something in the header of the package changelog screen

	* /cvsroot/aptitude/aptitude/src/vs_pager.cc:
	Fix annoying visual quirk that occured when scrolling to the right past the end
	of lines

	* /cvsroot/aptitude/aptitude/src/vs_pager.h:
	Remember to initialize the horizontal shift to 0

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vs_pager.h:
	Allow the user to scroll left and right in the internal pager

	* /cvsroot/aptitude/aptitude/src/download_bar.cc: Fix another typo.

	* /cvsroot/aptitude/aptitude/src/download_bar.cc:
	Oops.  Fix typo that prevented compilation.

	* /cvsroot/aptitude/aptitude/src/download_bar.cc:
	More tweaks to the formatting of the download status widget

	* /cvsroot/aptitude/aptitude/src/download_bar.cc:
	Hopefully display slightly more useful information about the package being
	downloaded, and drop the update interval to one second.

	* /cvsroot/aptitude/aptitude/src/download_bar.cc:
	Allow the user to cancel minibuf-controlled downloads with ExitScreen (a little
	hacky..)

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Default Auto-Fix-Broken to false

	* /cvsroot/aptitude/aptitude/README: Documentation updates for 0.0.6

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Correctly handle the default limit

	* /cvsroot/aptitude/aptitude/src/matchers.cc:
	Add a section-matching class

	* /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Doh.  Really make it compile.

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc: Tweak the variable name

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Allow a configuration option to set the default display limit

	* /cvsroot/aptitude/aptitude/src/download.cc:
	Uh, really make it compile

	* /cvsroot/aptitude/aptitude/src/matchers.cc:
	Remove some gratuitous checks for whitespace which may have interfered with
	entering search and limit terms

	* /cvsroot/aptitude/aptitude/src/download.cc:
	Oops.  Make it compile again

	* /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/vs_minibuf_win.cc:
	Use the color 'error' for all error message

	* /cvsroot/aptitude/aptitude/src/download.cc:
	Using the minibuf download widget now defaults to false

	* /cvsroot/aptitude/aptitude/configure.in: Bump version number to 0.0.6

	* /cvsroot/aptitude/aptitude/src/matchers.cc:
	Added new matcher, ~i, which matches installed packages

	* /cvsroot/aptitude/aptitude/src/matchers.cc:
	  Added a new special match type, ~e, which toggles exact matching of the
	remainder of the expression.  Also, added ~p for matching of the Priority field.

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Mark virtual packages for which one providing package is installed bold

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h:
	Fix more error-display glitches

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Correct the number of columns in the status display

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	  Fixed up some glitches in the columnification code: versions display their
	sizes if applicable, sizes which are 0 are described as <N/A>, non-installed
	packages show "<none>" as their current version (instead of a blank)

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Remove an old hack to display errors which accidentally got left in and was
	probably causing all sorts of *interesting* problems

	* /cvsroot/aptitude/aptitude/src/vs_pager.cc:
	Don't keep matching the current line when searching in the pager

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/vs_pager.cc, /cvsroot/aptitude/aptitude/src/vs_pager.h:
	  Added an internal pager, and modified the changelog-snarfing code to work with
	it.

2000-02-05  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download_bar.cc:
	  Tweaked the selection of a 'next worker' to (a) be more robust (ie, never
	end up with a stale pointer), and (b) avoid workers with no item /and/ no
	status message.

	* /cvsroot/aptitude/aptitude/src/download_bar.cc:
	Properly display the overall progress

	* /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/download.h, /cvsroot/aptitude/aptitude/src/download_item.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  It's now possible to use the 'minibuf download status widget' instead of the
	default full-screen display when downloading packages.

	* /cvsroot/aptitude/aptitude/src/download_bar.cc:
	Only display in the status line

	* /cvsroot/aptitude/aptitude/src/download.cc, /cvsroot/aptitude/aptitude/src/download.h, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/download_screen.h, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Split the code to actually perform a download into download.{cc,h}.

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	Unsuccessful searches no longer cause the display to be shifted so that
	the currently selected item is at the top

	* /cvsroot/aptitude/aptitude/src/download_bar.cc:
	Fix the display of the status download progress bar to stay inside its own area

	* /cvsroot/aptitude/aptitude/src/download_bar.cc:
	Fix a nasty segfault that occured when libapt yanked a Worker out from under us

	* /cvsroot/aptitude/aptitude/src/vs_minibuf_win.cc:
	Remove what I did at first -- breaking out is sufficient.

	* /cvsroot/aptitude/aptitude/src/vs_minibuf_win.cc:
	Break out of the loop when we find the widget to delete

	* /cvsroot/aptitude/aptitude/src/vs_minibuf_win.cc:
	Don't go into an infinite loop when removing status widgets (oops..)

	* /cvsroot/aptitude/aptitude/src/download_bar.cc, /cvsroot/aptitude/aptitude/src/download_bar.h:
	Throttle the speed at which we switch between workers

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/download_bar.cc, /cvsroot/aptitude/aptitude/src/download_bar.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_node.cc, /cvsroot/aptitude/aptitude/src/pkg_node.h, /cvsroot/aptitude/aptitude/src/pkg_subtree.cc, /cvsroot/aptitude/aptitude/src/pkg_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h, /cvsroot/aptitude/aptitude/src/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	  Got everything to compile.  This required a number of changes, including
	one I'm not sure about: vs_treeitem::dispatch_char now takes an additional
	argument, vs_tree *owner.

	* /cvsroot/aptitude/aptitude/src/vs_minibuf_win.cc:
	Make delete_status_widget a NOP if the widget isn't in the status stack

	* /cvsroot/aptitude/aptitude/src/pkg_changelog.cc: Indentation changes

	* /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_changelog.cc, /cvsroot/aptitude/aptitude/src/pkg_changelog.h:
	  Added code that should allow a package's changelog to be downloaded from
	the Debian web servers.  Still needs to be hooked into the UI for testing.

	* /cvsroot/aptitude/aptitude/src/download_bar.cc, /cvsroot/aptitude/aptitude/src/download_bar.h, /cvsroot/aptitude/aptitude/src/Makefile.am:
	  Added a new download status display, which uses an existing screen's status
	line.  Needs a little work, but should be good for just downloading a single
	small file.

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc:
	The default column format now pads between the left column group and the
	center one; this may not be the best way to do things, though (ie, I should
	perhaps always insert one space between groups)

	* /cvsroot/aptitude/aptitude/src/download_item.cc:
	Errors probably should be white-on-red, not black-on-red

2000-02-04  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/config/column_definition.cc, /cvsroot/aptitude/aptitude/src/config/column_definition.h, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc:
	  Fixed the column definition parser for the new padding option.

	* /cvsroot/aptitude/aptitude/src/columnify.cc, /cvsroot/aptitude/aptitude/src/columnify.h, /cvsroot/aptitude/aptitude/src/config/column_definition.cc, /cvsroot/aptitude/aptitude/src/config/column_definition.h, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Added support for varying the amount of padding placed after a column
	item; the syntax should be "Item:Width:Pad" but the parser doesn't
	handle it correctly yet.  It works for the single-letter flags,though..

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	  More tweaking to the display of what's to be done -- packages which are
	being installed other than the ones originally asked for are marked, the entire
	tree of not-installed packages isn't dumped into the 'held back' category,
	and the list of packages being left alone is more general (it includes, for
	example, packages which would be newly installed but were set to Keep)

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	  Adjusted the code to group packages based on their state to more correctly
	detect and handle broken packages.  Packages for which InstBroken returns
	true are unconditionally put into a broken tree, while packages which have
	changed state due to a broken-package-fixing spree are properly identified.

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vs_minibuf_win.h:
	Added a display_error method to the minibuf_win class, to handle the
	common case of displaying an error in the status line

2000-02-03  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/config/keybindings.cc:
	Include config.h from keybindings.cc (to pick up HAVE_LIBAPT_PKG)

	* /cvsroot/aptitude/aptitude/src/dep_item.cc:
	  Fixed a bug that caused dependency list creation to be off-by-one in finding
	the beginning of OR lists.

	* /cvsroot/aptitude/aptitude/acconfig.h, /cvsroot/aptitude/aptitude/config.h.in, /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/src/testscr.cc:
	  Modified testscr.cc to remove that *highly annoying* periodic beep by default
	(cleaning out a lot of cruft in the process), got rid of config.h.in from CVS
	(it's autogenerated), modified configure.in to take a --with-period-beep
	argument and to use config.h.

2000-02-02  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/config/keybindings.cc:
	Conditionalize use of _error in config/keybindings.h depending on whether
	libapt is available

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h:
	  Added a (slightly toy) use of vs_statuschoice; you can now be prompted to
	fix broken packages.  Things don't work perfectly, but they work sorta..shelving
	this for the day, playing Freeciv :-)

	* /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/vs_statuschoice.cc, /cvsroot/aptitude/aptitude/src/vs_statuschoice.h:
	  Added simple code to present a multiple-choice question in the status line.
	Hopefully this'll become more complex in the future. :)

	* /cvsroot/aptitude/aptitude/src/vscreen.cc:
	Use quotes instead of brackets to include config/keybindings.h

2000-02-01  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vs_minibuf_win.h:
	  Renamed the various colors used by the minibuf-win to get rid of the "tree"
	references -- basically changed them to "screen_*".

	* /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen.h, /cvsroot/aptitude/aptitude/src/vs_minibuf_win.cc, /cvsroot/aptitude/aptitude/src/vs_minibuf_win.h, /cvsroot/aptitude/aptitude/src/vs_progress.cc, /cvsroot/aptitude/aptitude/src/vs_progress.h, /cvsroot/aptitude/aptitude/src/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vs_statusedit.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h:
	  Two major changes:

	  First, a new class called "vs_minibuf_win" has been added; it's a sort of
	intermediate level between vscreen and vs_tree which provides simple support for
	the header and status line-motif.
	  Second, vscreen::repaint no longer has the semantic of implicitly refreshing
	the display.

2000-01-31  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	You can now de-hold a held installed package by pressing the hold key again

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Erk.  Make it compile again

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	  Fixed the handling of keystrokes leading to a "hold" or "keep" state -- in
	particular, packages shouldn't be put on hold just by cancelling a delete
	directive.

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	  Major sanitization to the handling of the display of broken packages --
	hopefully things should be more consistent now.  Hopefully.

	* /cvsroot/aptitude/aptitude/src/matchers.cc:
	Don't crash when using the broken-package matcher on
	virtual packages

	* /cvsroot/aptitude/aptitude/src/matchers.cc:
	  Added match types for virtual and broken patches (the matching itself is
	currently broken..)

	* /cvsroot/aptitude/aptitude/src/testscr.cc, /cvsroot/aptitude/aptitude/src/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen.h:
	  Renamed init_vscreen to vscreen_init, for consistency

	* /cvsroot/aptitude/aptitude/src/vscreen.cc:
	  Fixed the mysterious bug that was causing timeouts to sometimes be delayed
	until a key was pressed.

	* /cvsroot/aptitude/aptitude/src/vscreen.cc:
	  Fixed what was maybe a potential bug with overflowing times when calculating
	the activation time of a timeout.

2000-01-30  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/testscr.cc, /cvsroot/aptitude/aptitude/src/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen.h:
	  I kept trying to enter the arguments to vscreen_addtimeout backwards, so
	I reversed the order that it expects them in :)  (presumably this is more
	logical and intuitive..)

	* /cvsroot/aptitude/aptitude/src/config/keybindings.cc, /cvsroot/aptitude/aptitude/src/config/keybindings.h, /cvsroot/aptitude/aptitude/src/curses++.cc, /cvsroot/aptitude/aptitude/src/curses++.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/testscr.cc, /cvsroot/aptitude/aptitude/src/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen.h:
	  Fiddled with the copyright dates on various source files (I'm not sure if this
	is really necessary?)  Stopped after a couple and decided to do it lazily in the
	future :)

	* /cvsroot/aptitude/aptitude/src/testscr.cc:
	Added test code for the timeout routines; Aptitude will beep once a
	second while this is enabled :)

	* /cvsroot/aptitude/aptitude/src/vscreen.h:
	Forgot to make timeout_closure::activate abstract, which was preventing
	compilation; fixed

	* /cvsroot/aptitude/aptitude/src/vscreen.cc:
	Initialize timeout_value to 0 in vscreen::vscreen

	* /cvsroot/aptitude/aptitude/src/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	  Added the first iteration of code to provide a mechanism for timeouts
	in the main vscreen event handler.  Not especially efficient, but no less
	efficient than, say, glib's :)  (it really *ought* to use a heap, but
	I don't expect to be using it heavily enough for this to be a huge issue)
	  Also, the vscreen code itself now handles the Refresh keystroke; I removed
	the test for that from vs_tree.cc .

	* /cvsroot/aptitude/aptitude/src/defaults.cc:
	Bind C-l to Refresh by default

2000-01-29  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	Make searches wrap around to the beginning

2000-01-26  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h:
	Add support for limiting the display to packages matching a given pattern

	* /cvsroot/aptitude/aptitude/src/matchers.cc:
	Don't crash when handed virtual packages (how'd I miss this one?)

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	  Added two new bindings, ExpandAll and CollapseAll.  ExpandAll expands a
	subtree and all of its children, and CollapseAll collapses a subtree and its
	children.  (I'm not quite sure about the default bindings -- '[' and ']',
	though..)

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	Fix a potential glitch in the status-widget code

	* /cvsroot/aptitude/aptitude/src/matchers.cc:
	  Modified the matching code to support actual grammer -- grouping, ands, ors,
	nots, etc.

2000-01-25  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/matchers.cc, /cvsroot/aptitude/aptitude/src/matchers.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	  Added rudimentary support for more complex search commands.

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Add columns for Seciton and Priority (they may need a little work)

2000-01-20  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/BUGS:
	Purged a fixed bug and mentioned that the list is very incomplete

	* /cvsroot/aptitude/aptitude/Makefile.am:
	Don't clobber the source directory's placeholder ChangeLog in 'make dist'

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Honor the package status column format for version items, also

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc:
	Change the default package column format to get rid of the file sizes

	* /cvsroot/aptitude/aptitude/NEWS: Update the NEWS file

	* /cvsroot/aptitude/aptitude/aptitude-hackers-guide.txt:
	Update the hacker's guide (sorta)

	* /cvsroot/aptitude/aptitude/README: Update documentation for 0.0.5

	* /cvsroot/aptitude/aptitude/configure.in:
	Bump the version number to 0.0.5

	* /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h:
	  pkg_item_with_subtree objects now check for vs_subtree keystrokes before
	pkg_item keystrokes.  The upshot is that you can expand and collapse them,
	something which became impossible when I bound Enter in pkg_item. (oops)

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Added a command to switch between displaying (by default) the current and
	the candidate versions of a package.

2000-01-19  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/dep_item.h, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	  Added support for displaying reverse dependencies of a package.  They're
	displayed in the general info screen or when you type 'r', but I may want to
	remove them from the general screen (they clutter it up too much)

	* /cvsroot/aptitude/aptitude/src/pkg_subtree.h:
	pkg_subtree now takes a string as its initializer

2000-01-18  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	  Unreversed the flags for to-be-installed and to-be-deleted versions. (oops)

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	Fix a silly thinko that was causing the status line to mysteriously blank
	itself from time to time; in particular, after a download completed

	* /cvsroot/aptitude/aptitude/src/download_screen.cc:
	Make sure the status line is displayed when there are missing packages

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	  Modified pkg_ver_item to honor column layout information.

	* /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h:
	  Added three new column format options: LongState, LongAction, and Maintainer.
	LongState and LongAction are more verbose indicators of the current state and
	the action to be taken, while Maintainer is the obvious.

	* /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_columnizer.cc, /cvsroot/aptitude/aptitude/src/pkg_columnizer.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Split pkg_columnizer into its own file; it was getting too large and messy.

	* /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_info_screen.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	  When you ask for information about a package, you're now given information
	about the visible version of the package; if you ask for information about a
	specific version, the logical thing happens ;-)

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	  Allow the user to modify the formatting of the status line the same way the
	formatting of the package list is modified.

	* /cvsroot/aptitude/aptitude/src/config/column_definition.cc:
	Fix a bug that caused incorrect parsing of column definitions with a
	trailing ':'

	* /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h:
	Make the pkg_item_with_subtree consistent with other subtrees by adding a space
	after the +/- indicator.

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	  Added code to separate out obsolete/local packages into their own tree when
	grouping by status.

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Reinstall and Purge now have their own action flags (instead of
	piggybacking on Install and Delete)

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	  Added a binding, ReSearch, which repeats the last search in a single
	keystroke.  Defaults to '\'.

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	Oops.  Make it compile again.

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	Fix a silly mistake which caused the status line to get messed up when
	you searched for an item

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h:
	  Finally added code to display package information in the package list the
	Right Way[tm]; instead of arbitrarily picking a version, routines that need
	to look up information (say, file size) about a particular version call
	pkg_item::visible_version().  Currently it just returns the candidate version,
	but I'll change that eventually so it can return either the candidate or the
	current version.

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h:
	  Modified the pkg_item_with_subtree class to display columns.

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Allow subclasses of pkg_columnizer to see the stored package

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h:
	The pkg_columnizer class is now protected and its setup_column method
	is now virtual, so subclasses can override the default behavior.

	* /cvsroot/aptitude/aptitude/src/pkg_item.h:
	You can now at least see the column definition list from outside
	pkg_item

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Fixed a rather dumb mistake that was causing segfaults, and made the default
	format string contain the version columns

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	 Now display 'p' for the state of purged packages and 'u' for the state of
	unpacked packages.
	 Added two more column types: "CurrentVersion" and "CandidateVersion" (they
	display the currently installed version and the version which will be installed,
	respectively)

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	The column headers for the action and state flags are now longer; for the
	default column size they'll be truncated back to a single character, but
	weird people might want to make the state longer :)

	* /cvsroot/aptitude/aptitude/src/columnify.cc, /cvsroot/aptitude/aptitude/src/config/column_definition.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	  columnify now interprets a column-width of -1 as meaning that the column
	should be exactly the size of the string it contains.  In the configuration
	this is indicated by putting a trailing ':' on the column name, but omitting the
	size.

	* /cvsroot/aptitude/aptitude/src/columnify.cc:
	  Finally hunted down and squashed the bug that was cutting off the last
	character of some right-justified columns.  In fact it was simpler than I
	thought -- I confused the length of the text in a column with the size of the
	column.  Oops.

	* /cvsroot/aptitude/aptitude/src/config/column_definition.cc, /cvsroot/aptitude/aptitude/src/config/column_definition.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h:
	  It's now possible to set a column's width by adding ":size" to the
	definition.  For example, "Description:10" will create a Description column of
	width 10.

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	  Changed the default column format to include an 'action' flag.

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	  Added two more things that can be displayed in columns: ActionFlag, showing
	what APT will do with the package, and Description, showing green aliens from
	Pluto--er, I mean the package description.

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Allow 30 characters for the package name instead of 20

2000-01-17  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Added an option (which is a bit of a hack :( ) to attempt to display titles
	over the various columns of packges identifying the column in question.  The
	problem is that the middle column -- the one aligned with the package's location
	in the tree -- can't be accurately determined, so I just guess at it for the
	moment.  There may not be a good solution to this problem..

	* /cvsroot/aptitude/aptitude/src/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vs_statusedit.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h:
	  Added hooks in the status widget class which allow the widget to take action
	when it becomes and/or stops being the visible item.  This allows the
	text-editing widget's behavior with respect to leaveok to be correct.

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vs_statusedit.h:
	  Major changes to the status-line edit widget.  Among other things, it now
	supports movement of the cursor, handles strings longer than the screen width
	more-or-less correctly, and allows you to cancel an action (with Ctrl-G)

	* /cvsroot/aptitude/aptitude/src/config/keybindings.cc, /cvsroot/aptitude/aptitude/src/config/keybindings.h:
	  Export the KEY_CTRL and KEY_SHIFT macros, flaky as they are -- some other
	routines might have a use for them.

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/vs_tree.h:
	  Moved the pkg_item column info into the class itself, and added a way to
	change it from the UI (default binding is 'p')

	* /cvsroot/aptitude/aptitude/src/columnify.cc:
	Fixed an off-by-one error in the column-width calculation; there's another,
	similar problem lurking somewhere

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Moved the declaration of pkg_columnizer::type to be on the same screen
	of text as the definition of pkg_columnizer::sizes

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Display the status of virtual packages as 'v'

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Change the default column layout to be more interesting

	* /cvsroot/aptitude/aptitude/src/config/column_definition.cc, /cvsroot/aptitude/aptitude/src/config/column_definition.h, /cvsroot/aptitude/aptitude/src/config/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	  Added a whole lot of code to parse, store, and use information about how
	the columns in package lists (and, eventually, other things) should be laid
	out.

	* /cvsroot/aptitude/aptitude/src/columnify.cc, /cvsroot/aptitude/aptitude/src/columnify.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	columnify now has (slightly hacky but servicable) code to make negative
	starting offsets mean that the column group is right-justified.

2000-01-16  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen.cc:
	Don't die with an assertion failure if we get a KEY_RESIZE..libncurses5
	seems to sometimes actually provide them (this is as opposed to libncurses4's
	behavior) but I don't have time to work out when it gives us them at the
	moment..

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Resizing the window to be very thin could cause an incorrect header to be
	displayed, due to the fact that the right-hand column group could get
	initialized with a negative starting offset.

	* /cvsroot/aptitude/aptitude/src/testscr.cc:
	Manually clear the screen on exit (libncurses5 doesn't always)

	* /cvsroot/aptitude/aptitude/src/vs_progress.cc:
	When I wrote the progress widget, I overlooked Progress::CheckChange.  Now
	 use it to throttle update frequency -- improves performance remarkably\!

	* /cvsroot/aptitude/aptitude/src/columnify.cc:
	Force at least one space in between columns

2000-01-15  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/columnify.cc, /cvsroot/aptitude/aptitude/src/columnify.h, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Added columnify.cc and columnify.h, a general mechanism for formatting strings
	into columns.  (it could probably be optimized a little by removing the STL
	stuff, but so could the whole program..)  Currently it is used in a hacky
	fashion by pkg_tree.cc; once it seems to work (it does already :) ) I'll
	do things right.

	* /cvsroot/aptitude/aptitude/README:
	Document the ExpandTree and CollapseTree bindable functions

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Correctly flag broken package versions as..well..broken.

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	  Don't claim that virtual packages are broken and being held back.

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	  Include a special group in the preview screen for packages which won't have
	action taken due to broken dependencies.

2000-01-11  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Allow the user to get package information by pressing the PackageInfoScreen
	key while a version is selected -- this ought to display info for a particular
	version but doesn't yet..

	* /cvsroot/aptitude/aptitude/src/testscr.cc:
	Don't crash if root tries to run us but we can't lock the package directory

2000-01-10  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/NEWS:
	Add an entry to NEWS for release 0.0.4a

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/src/curses++.h:
	  Hack around the fact that libncurses5 no longer implicitly hides the cursor
	when leaveok is set to true.

	* /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	  Argh.  I forgot to commit this stuff before tagging 0.0.4 .  Grrr....

	* /cvsroot/aptitude/aptitude/src/aptcache.cc:
	  Hopefully honor Auto-Install when automatically upgrading packages as well.

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Also honor Aptitude::Auto-Install when the package is installed by selecting
	a particular version

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	Don't send characters to unselectable items

	* /cvsroot/aptitude/aptitude/Makefile.am:
	Hopefully get a CVS logfile when doing 'make dist'

	* /cvsroot/aptitude/aptitude/aptitude-hackers-guide.txt, /cvsroot/aptitude/aptitude/BUGS:
	  Documentation updates..

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	  Updated the "preview actions" screen to show reinstalled packages.

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Fixed the semantics of fiddling with version items to handle reinstall and
	be slightly more consistent

	* /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/aptcache.cc, /cvsroot/aptitude/aptitude/src/aptcache.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	  Added full support for reinstallation of packages and tweaked the
	documentation to mention this.

	* /cvsroot/aptitude/aptitude/BUGS, /cvsroot/aptitude/aptitude/README:
	  Added a list of known bugs, and brought the README up-to-date with the current
	state of things.

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Renamed Aptitude::UI::Display-SizeStats to Aptitude::Display-SizeStats

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Slightly tweaked the download/install-size display..it now correctly hides
	zero-byte changes while not hiding non-zero-byte changes.

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/src/testscr.cc:
	  Commented out (with "#if 0") gobs of rigged-up test code, and bumped the
	configure.in version to 0.0.4 .  Yes, I'm finally getting ready for another
	release..

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/vs_tree.h:
	  Display an indicator of the amount of stuff being downloaded and installed
	at the top of package trees.

	* /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc, /cvsroot/aptitude/aptitude/src/vs_staticitem.cc, /cvsroot/aptitude/aptitude/src/vs_staticitem.h:
	  Moved the vs_staticitem class into another file, where it belongs.

	* /cvsroot/aptitude/aptitude/src/vs_progress.cc, /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	Hopefully don't display the weird ": 0%" message when nothing has happened yet

	* /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc:
	  Finally, finally fixed the package size displayed in the package information
	screen.

2000-01-09  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc:
	  Only add a "Source Package:" line in the info screen if the
	'SourcePackage' string is nonempty.

	* /cvsroot/aptitude/aptitude/src/defaults.cc:
	  Trrying something new -- "Enter" now display info about a package.

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	  Previously, the selection bar, when a new page was encountered while in the
	middle of non-selectable gunk, would get temporarily 'stuck' -- you'd have to
	press down or up again to select something.  It has more logical behavior now,
	and another bug in the scrolling was cleared up..

2000-01-08  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	  Do something slightly more sensible if a non-selectable thing gets selected--
	just hide the selection (yes, it's silly :) )

	* /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	  Added descriptive headers to various information screens.

	* /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc:
	  Display the names of the attributes of a package ("Section:", "Maintainer:",
	etc) with the A_BOLD flag on.

	* /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.h:
	  Display the "Description" header of the description line with the A_BOLD
	attribute.

	* /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc:
	  Actually display the package itself in the information screen about it.

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	  Fixed a number of visual bugs involving mixtures of selectable and
	non-selectable items.

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_info_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_info_screen.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h, /cvsroot/aptitude/aptitude/src/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vs_treeitem.cc, /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	  Added preliminary support for a unified package information screen.  Needs
	a little work, still..

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h:
	  Fixed a problem that was causing all sorts of weirdness and segfaults by doing
	what I should have done long ago: all package trees are now tracked in a
	container, so when something changes that requires that their pointers be
	updated, all of them can be updated at once.

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Commented out the call to InstallProtect--it /should/ be unnecessary and
	was causing packages to be upgraded in spite of being marked as Held.

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Setting the configuration option "Aptitude::Fix-Broken" to true will cause
	Aptitude to attempt to fix up dependencies before installing packages.  This
	is a little quirky, but I'm defaulting it to on for now.

	* /cvsroot/aptitude/aptitude/src/aptcache.cc:
	Enable autoinstall sometimes (hmm..)

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	  You can now request autoinstall of dependencies by setting the
	configuration option Aptitude::Auto-Install to true.

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h:
	  Added a hook to catch when a transient message has been removed.  Not sure if
	it's useful right now, but.. :)

	* /cvsroot/aptitude/aptitude/src/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vs_statusedit.h:
	  Fixed some backwards logic dealing with leaveok and getting string input from
	the user..

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h:
	  Finally added an intermediate install-run screen, in which Aptitude displays
	what it's about to do before actually doing it.

2000-01-07  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vs_statusedit.cc:
	  Added some hacks to try to have the cursor do something sensible while a
	search term is being edited.  It's not working (grrr....)

	* /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/testscr.cc, /cvsroot/aptitude/aptitude/src/vscreen.h, /cvsroot/aptitude/aptitude/src/vs_statusedit.cc, /cvsroot/aptitude/aptitude/src/vs_statusedit.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h:
	  Generalized the search-entry stuff slightly and moved it to the new
	status-widget system, which eliminated a whole lot of nastiness.  It also
	caused some minor internal API tweaks..not sure how many of them are good
	long-term ideas..but they're infinitely better than the mess I had before.

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h:
	  Errors are now pushed onto the back of a display queue instead of the front.
	This has two effects: first, they show up behind other things (text being
	edited, for example) and second, they appear in the right order (as opposed to
	in reverse order..)

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/vs_progress.cc, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h:
	  Moved the error indicators over to the new system.  In the process, fixed some
	weirdness which occured when a non-root user tried to update package lists and
	got an error.

	* /cvsroot/aptitude/aptitude/src/curses++.cc, /cvsroot/aptitude/aptitude/src/curses++.h, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/download_screen.h, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/testscr.cc, /cvsroot/aptitude/aptitude/src/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen.h, /cvsroot/aptitude/aptitude/src/vs_progress.cc, /cvsroot/aptitude/aptitude/src/vs_progress.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h:
	Added support code to handle transient messages and minibuffer-style editing
	the Right Way[tm].  This obviously touches a *lot* of source files.  Hopefully
	it's worth it :)

2000-01-06  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/dep_item.cc:
	Fix the "eternal dependency OR" bug (the OR counter wasn't being cleared,
	so after encountering one 'or', everything afterwards was treated as
	part of it)

2000-01-03  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen.h:
	More fiddling with handling of leaveok; unfortunately, it didn't help

	* /cvsroot/aptitude/aptitude/src/curses++.h, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/vscreen.cc, /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	Updated it to at least compile against libncurses5

2000-01-02  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download_item.cc, /cvsroot/aptitude/aptitude/src/download_screen.cc:
	  Added some more information in the download screen: the actual number of bytes
	downloaded, and the estimated time to completion (with the latter shamelessly
	stolen from apt-get)

2000-01-01  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/aptcache.cc:
	  Eliminated the annoying warning message when the package state file can't be
	opened simply because it doesn't exist.

	* /cvsroot/aptitude/aptitude/src/aptcache.cc:
	  Finally hunted down the bug with New packages being ignored or forgotten --
	changing the name of the tag in the statefile to Unseen (which isn't as
	accurate, but..) worked!  I say it's a bug in the tagfile class, but anyway
	it's working again..

1999-12-28  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/config/colors.cc, /cvsroot/aptitude/aptitude/src/config/colors.h:
	Ok, you can now use symbolic names ("white", "black", etc) for colors.

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	Added a potential new binding; binding something to Refresh will make it force
	a redraw of the screen.  Not sure what the default should be :)

	* /cvsroot/aptitude/aptitude/src/config/colors.cc, /cvsroot/aptitude/aptitude/src/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen.h:
	Ok, fixed the problem which was causing the screen to not be refreshed
	when colors were altered (it's an ncurses bug but I hacked around it..)

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h:
	  vs_trees no longer even pretend to store their colors internally; all color
	tests go through vs_tree::get_*_color.  This makes it a lot easier to change the
	default :) -- although I may want to switch to using a static list of defaults
	(trying to keep all the different default settings up-to-date is an incredible
	pain..)

	* /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	You almost certainly want the background color to be used to display tree items
	(otherwise everything looks awful), so vs_treeitem::get_normal_attr() now
	returns the background color.

	* /cvsroot/aptitude/aptitude/src/vs_tree.h:
	  The last commit swapped the background and status colors of the vs_tree for
	some routines.  Oops.  get_background_color() and get_status_color() now
	return the Right Thing[tm]..

	* /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/config/colors.cc, /cvsroot/aptitude/aptitude/src/config/colors.h, /cvsroot/aptitude/aptitude/src/config/Makefile.am, /cvsroot/aptitude/aptitude/src/curses++.cc, /cvsroot/aptitude/aptitude/src/curses++.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h, /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	  Finally added the ability to change colors using apt.conf .  Syntax is:
	SomeColor {Fg; Bg;};
	  where Fg and Bg are color numbers (see curses.h).  Sort of works. :)

	* /cvsroot/aptitude/aptitude/config.h.in, /cvsroot/aptitude/aptitude/src/download_item.cc, /cvsroot/aptitude/aptitude/src/download_item.h, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/download_screen.h:
	  Reverted the changes -- I can't make them work properly with libapt
	the way it is, and the old system was at least somewhat stable and workable.
	Even if it doesn't display "Connecting" and "Waiting for File" messages :)

1999-12-27  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download_item.cc, /cvsroot/aptitude/aptitude/src/download_item.h, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/download_screen.h:
	  Tried to modify the download status code to display messages while the
	download processes are connecting, waiting for files, etc.  It's..um..sorta
	working.  It stopped crashing, anyway..

	* /cvsroot/aptitude/aptitude/src/apt.cc:
	Notice both errors /and/ warnings

1999-12-23  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/aptcache.cc, /cvsroot/aptitude/aptitude/src/aptcache.h:
	Fixed another thinko; held packages weren't properly being held.  MarkKeep now
	sets the state to "hold" *by default*, but takes another optional parameter
	to change this.

1999-12-22  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/aptcache.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Fixed a number of thinkos and got watching of the dselect status working; also,
	made the callers of MarkKeep responsible for changing the selection state
	(hmmm...)

	* /cvsroot/aptitude/aptitude/src/aptcache.cc:
	Initialize the selection states when we allocate them for the first time

	* /cvsroot/aptitude/aptitude/src/aptcache.cc:
	Fixed a bug that would have caused us never to change what the 'last' selected
	state was

	* /cvsroot/aptitude/aptitude/src/aptcache.cc, /cvsroot/aptitude/aptitude/src/aptcache.h:
	Added a hack to attempt to detect changes in the dpkg status of a package and
	compensate accordingly

1999-12-20  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/src/Makefile.am:
	Fixed a couple of things that caused 'make dist' to fail, and corrected the
	version number

	* /cvsroot/aptitude/aptitude/aptitude-hackers-guide.txt, /cvsroot/aptitude/aptitude/Makefile.am, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/TODO:
	  Updated the documentation in preparation for release 0.0.3 .  Split out the
	TODO and code guide from README.

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc: Fix syntax error

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	Don't check the currently selected item for matches.

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	Allow the search to match any substring

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	Oops, change the selected package when we find something.  Also, it seems that
	we need to call refresh after beeping or the beep never happens..

	* /cvsroot/aptitude/aptitude/src/testscr.cc:
	Finally get the bloody thing to compile again.. (the gods of C++ are clearly
	angered with me for the disgusting mess that is the vs_treeitem system..)

	* /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	Make it compile again, hopefully.

	* /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/testscr.cc, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h:
	Eliminated the problem which lead to problems entering search strings.
	Unfortunately, used an ugly hack to do it :(  This needs to be fixed by
	adding a minibuffer stack in the next release.

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	Hopefully, finished getting the search code compiled and integrated into the
	vs_tree class.

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/pkg_node.h, /cvsroot/aptitude/aptitude/src/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h, /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	  Added code (some of which is IMO rather kludgy) which should allow the user
	to search for packages in the tree.

	* /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_node.cc:
	Added bindable commands HoldPackage and PurgePackage; they default to
	dselect-style bindings (because I'm lazy :) )

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Fix the not-compiling error introduced in the last commit, oops..

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Added configuration options Aptitude::Forget-New-On-Update and
	Aptitude::Forget-New-On-Install.  The first causes information about what
	packages are 'new' to be discarded when the package lists are updated; the
	second causes this information to be discarded when an install run is
	performed.  Untested, but it's so trivial that I don't feel a need
	to test (which means it's probably the one part of the program that'll eat
	the user's filesystem alive ;-) )

	* /cvsroot/aptitude/aptitude/src/aptcache.cc, /cvsroot/aptitude/aptitude/src/aptcache.h:
	  Finished up preliminary support for sticky package selections.  I decided to
	essentially mimic dselect's behavior for now; more complex behavior will be
	coming next millennium :)  (yes, 2000 *is* the end of the millennium; everyone
	knows you count from 0..)
	  Unfortunately, I also removed the dselect integration in this commit.  Trying
	to figure out how to maintain two separate databases of package selection states
	was too much for my feeble mind ;-)  Actually, the main problem was that you'd
	have to release the dpkg lock from inside an aptitudeDepCache in order to run
	dpkg --set-selections, which is icky..
	  Anyway, since most of dselect's important abilities (with the notable
	exceptions of running on poor terminals and searching for packages) are now
	available in aptitude, this won't be too painful.  Maybe it'll spur me to finish
	up the remaining features :)

1999-12-19  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/aptcache.cc:
	Add code to make the selection states 'sticky' -- using the same mechanism as
	the sticky 'newness'.

	* /cvsroot/aptitude/aptitude/src/aptcache.cc, /cvsroot/aptitude/aptitude/src/aptcache.h, /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Persistent-state code in hand, I rewrote forget_net as a method of
	aptitudeDepCache, which was the point of this whole bloody exercise anyway --
	and..IT LIVES!  IT LIVES!  <maniacal laughter>
	  Oh, and now that ForgetNewPackages doesn't cause an immediate segfault, I've
	added a default keybinding for it (it's bound to 'f')

	* /cvsroot/aptitude/aptitude/src/vs_treeitem.h, /cvsroot/aptitude/aptitude/src/vs_subtree.h:
	Fix a rather nasty and hard to track down segfault

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	Now that I have my own persistent 'new' information, use it to build the tree.

	* /cvsroot/aptitude/aptitude/src/curses++.cc: More compile fixes

	* /cvsroot/aptitude/aptitude/src/testscr.cc:
	Fix a thinko that broke the compile

	* /cvsroot/aptitude/aptitude/src/aptcache.cc, /cvsroot/aptitude/aptitude/src/aptcache.h, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/testscr.cc:
	Actually save the selection states, and handle missing stuff more sanely

	* /cvsroot/aptitude/aptitude/src/aptcache.cc, /cvsroot/aptitude/aptitude/src/aptcache.h, /cvsroot/aptitude/aptitude/src/apt.cc:
	  Altered the aptitudeDepCache to include a first stab at persistent state.
	dselect selection inheritence was moved into this file as well, and is now
	off by default (set Aptitude::Use-DSelect-Selections to turn it on)

	* /cvsroot/aptitude/aptitude/src/aptcache.cc, /cvsroot/aptitude/aptitude/src/aptcache.h, /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/apt.h, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.h:
	  Reimplemented pkgCacheFile, in order to (in the future :) ) add my own
	depcache extensions.  The code was basically retyped from cachefile.cc (so it
	fits my own style of indentation and so on)

	* /cvsroot/aptitude/aptitude/src/config/keybindings.cc:
	Fixed two off-by-one errors in keybindings.cc which made it impossible to bind
	to modified keys.

	* /cvsroot/aptitude/aptitude/src/apt.cc:
	  You can now bind actions to multiple keys with the syntax:
	SomeAction "key1,key2,key3";
	  in apt.conf.

	* /cvsroot/aptitude/aptitude/src/config/keybindings.cc:
	When you're storing stuff in lower case, it's a good idea to turn strings to
	lower case instead of upper case when you search for them, now isn't it?..

	* /cvsroot/aptitude/aptitude/src/config/keybindings.cc:
	Complete the fix (doh\!)

	* /cvsroot/aptitude/aptitude/src/config/keybindings.cc:
	  Fixed a silly thinko in keybindings.cc which caused keys in configuration
	files to sometimes be read with the opposite "shifted" state from what was
	expected.

	* /cvsroot/aptitude/aptitude/src/defaults.cc:
	Include default bindings for pkg_tree stuff

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Synced pkg_tree's keybinding names with the general conventions

	* /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/apt.h, /cvsroot/aptitude/aptitude/src/config/keybindings.cc, /cvsroot/aptitude/aptitude/src/config/keybindings.h, /cvsroot/aptitude/aptitude/src/defaults.cc, /cvsroot/aptitude/aptitude/src/defaults.h, /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/download_item.cc, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.cc, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_node.cc, /cvsroot/aptitude/aptitude/src/pkg_node.h, /cvsroot/aptitude/aptitude/src/pkg_subtree.cc, /cvsroot/aptitude/aptitude/src/pkg_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/testscr.cc, /cvsroot/aptitude/aptitude/src/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	  Moved over entirely to the new keybindings system.  I also cleaned up some
	hacks to be slightly less ugly -- all the ismychar stuff got removed.  Things
	seem to be working again (although I haven't tested the parser much yet)

1999-12-18  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/config/keybindings.cc:
	Remove the debugging output and get it to compile again..

	* /cvsroot/aptitude/aptitude/src/config/keybindings.cc, /cvsroot/aptitude/aptitude/src/config/keybindings.h, /cvsroot/aptitude/aptitude/src/config/Makefile.am, /cvsroot/aptitude/aptitude/config.h.in, /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/apt.h, /cvsroot/aptitude/aptitude/src/curses++.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy_hash.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/strhash.h:
	  Added preliminary support for configurable keybindings.  This needs to be
	expanded to cover everything in the program..

	* /cvsroot/aptitude/aptitude/src/curses++.cc, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/strhash.h:
	Split hash<string> into its own file

	* /cvsroot/aptitude/aptitude/src/download_screen.cc:
	Be pedantic, move the error-discarding in download_screen.cc to a better spot

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Fix the weirdness with the status bar that I just introduced

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h:
	  Rewrote the error-display code again.  I like the way it's handled now, I
	think I'll keep this :)
	  vs_tree now exports to its childrenthe ability to display an arbitrary string
	using any text attributes desired in the status bar.  This means that it's
	possible to display temporary messages (like errors) without having to fool
	around with set_status.
	  Actually, I just thought of an even better approach: make the status bar
	itself an object.  This will require a little more work, though, and isn't
	really necessary /just now/.

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  If there's an error and the package list is empty, clear the status line
	when the error is cleared (instead of leaving the error sitting there..)

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	Don't segfault if reading sources.list fails; fixed some vs_tree segfaults

	* /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h:
	Do something (slightly) more sensible when the source list can't be parsed

	* /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/apt.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h:
	Added what is (in my opinion) a much better way of handling apt errors

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Complete the fix by calling the selected item's highlighted() method

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h:
	  Fixed a minor annoyance -- after an error was displayed the status bar didn't
	return to its normal color (note that we still don't call selected->highlighted;
	that's needed to completely eliminate this bug)

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h:
	  Remove the "unhighlighted" method from pkg_ver_item -- it's redundant with
	the last change I made.

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/vs_treeitem.cc, /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	  The default vs_treeitem now blanks the status line on being highlighted; this
	should clean up a lot of minor visual irritations and remove the need for an
	unhighlighted method in most classes..

	* /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/vs_tree.h:
	  Added preliminary support for displaying error messages in a Nice Way[tm].

1999-12-15  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Well, got rid of the segfaulting..not sure that all that trouble was worth it,
	though; I may revert to the system I had before, which was also somewhat safer
	and nicer :)

	* /cvsroot/aptitude/aptitude/src/download_screen.cc:
	More attempts to squash potential bugs -- they don't seem to help the segvs, tho

	* /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/download_screen.h:
	Try to fix a segfault..it isn't working...

	* /cvsroot/aptitude/aptitude/src/download_item.cc:
	Fix dumb bug with displaying items which are downloading

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	Fix a silly crashing bug in vs_tree::dispatch_char

	* /cvsroot/aptitude/aptitude/src/download_screen.cc:
	Make it compile again

	* /cvsroot/aptitude/aptitude/src/vscreen.h:
	Protect some mysteriously unprotected function calls

	* /cvsroot/aptitude/aptitude/src/download_screen.cc:
	Control the creation and deletion of download uis a little more tightly

	* /cvsroot/aptitude/aptitude/src/vscreen.cc:
	  Better handling of things like people displaying screens before Curses is
	initialized, or between calls to vscreen_suspend() and vscreen_resume().  This
	should make things a lot more robust, and allow ever so slightly nicer
	transitions while installing packages (you won't see the previous screen flicker
	on for a moment; screens will be switched before re-entering the vscreen system)

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	Fix a bunch of visual quirks in the progress-bar code.  It seems to work now..

	* /cvsroot/aptitude/aptitude/src/testscr.cc:
	An explicit call to build_tree is redundant; set_grouping does it already.

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Fix a dumb bug in pkg_tree::show_status() -- the curses ordering of y and x
	is unnatural, unnatural I say!!

	* /cvsroot/aptitude/aptitude/src/testscr.cc:
	Changes to the startup procedure to get it to stop segfaulting and do something

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/testscr.cc:
	Use public inheritence for pkg_tree

	* /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/download_screen.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h:
	  It should now be possible to use pkg_trees as progress indicators for Apt
	operations (in particular, loading the package cache)  This has the side-effect
	of making build_tree() public -- because I need to access it from outside the
	class. (?)  I'm not sure whether that's a good idea and may revert it.

	* /cvsroot/aptitude/aptitude/src/download_screen.cc:
	Eliminated some leftover cruft in download_screen::show_status()

1999-12-14  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/curses++.cc, /cvsroot/aptitude/aptitude/src/curses++.h, /cvsroot/aptitude/aptitude/src/download_item.cc, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/vscreen.h:
	  Moved the progress bar display routine to curses++.{cc,h}, where it belongs.

	* /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/download_screen.h:
	  More fixes for screen-resize issues: resizing the screen while
	"Press any key to continue..." is displayed now works correctly.

	* /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/apt.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Added the beginnings of a structure to merge new packages into the main tree;
	unfortunately it's totally borked and doesn't work right now.
	  Also, eliminated a bunch of useless calls to APT methods that I inherited from
	console-apt's broken code.  It seems that pkgCacheFile::Open handles lots of
	stuff.

1999-12-13  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	  Packages not previously known to the system are now collected in their own
	toplevel group if you're using status grouping.

	* /cvsroot/aptitude/aptitude/src/download_screen.cc:
	  Fix the totally broken SIGWINCH handling during downloads (finally, I think);
	the (nasty..) solution was to unblock SIGWINCH before beginning a download and
	/temporarily/ block it during each of the download_screen methods.  The
	CRITICAL_ENTER and CRITICAL_EXIT macros do this.
	  There's one lingering problem: the "Press any key to continue..." message can
	be lost/look funny if you resize the window while it's displayed.  This'll take
	more work to fix :)

1999-12-07  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h:
	  Versions now also display their short description in the status line when
	highlighted.

	* /cvsroot/aptitude/aptitude/src/vscreen.cc:
	  Fixed a silly bug which caused curses screen udpates to become extremely
	suboptimal (start flickering) after the user resized the window.

	* /cvsroot/aptitude/aptitude/src/testscr:
	  Uhhh, what was I thinking when I imported a binary (and an ancient one at
	that) into the tree?  Kill it! KILL KILL -- (nevermind)

	* /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/Makefile.am, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/curses++.h, /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/download_item.cc, /cvsroot/aptitude/aptitude/src/download_item.h, /cvsroot/aptitude/aptitude/src/download_screen.cc, /cvsroot/aptitude/aptitude/src/download_screen.h, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/testscr.cc, /cvsroot/aptitude/aptitude/src/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h:
	  Apologies for the mass commit.  Sourceforge took a few days to copy my
	source tree to their CVS server and I made the mistake of continuing to hack
	on it while they were doing that, so all my progress is going in in one fell
	swoop.  Not that I'm complaining, having the source on their servers at all
	is pretty cool ;-)
	  Anyway, this commit mostly contains the various changes I made to enable
	downloads for version 0.0.2, and of course the documentation and NEWS updates.
	The only thing I've done since releasing 0.0.2 is to fix a bug involving
	SIGWINCH during downloads, albiet maybe not in the best possible way (look at
	the call to sigpending in download_screen.cc..)

1999-11-28  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.h, /cvsroot/aptitude/aptitude/src/testscr.cc:
	  Got rid of the horrible hack previously used to flag upgraded packages as
	to-be-installed; aptitude now obeys dselect hints on a package.

1999-11-22  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	  Fix assorted bugs, weirdness, etc.

	* /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.h:
	  Activate the unselectable feature for descriptions.

	* /cvsroot/aptitude/aptitude/src/vscreen.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	  Gobs of changes to the tree-item/selection code; basically, it should now
	(theoretically!) be possible to have unselectable/static elements in a tree.
	This is untested, but I appear to not have broken the normal element types :)

	* /cvsroot/aptitude/aptitude/README, /cvsroot/aptitude/aptitude/NEWS:
	  Update NEWS and README for release on Sourceforge.

1999-11-18  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen.h, /cvsroot/aptitude/aptitude/src/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h, /cvsroot/aptitude/aptitude/src/vs_treeitem.h, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_node.cc, /cvsroot/aptitude/aptitude/src/pkg_node.h, /cvsroot/aptitude/aptitude/src/pkg_subtree.cc, /cvsroot/aptitude/aptitude/src/pkg_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h, /cvsroot/aptitude/aptitude/src/testscr.cc, /cvsroot/aptitude/aptitude/src/apt.h, /cvsroot/aptitude/aptitude/src/curses++.cc, /cvsroot/aptitude/aptitude/src/curses++.h, /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/dep_item.h, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.cc, /cvsroot/aptitude/aptitude/src/pkg_description_treeitem.h, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.h, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy_hash.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/Makefile.am:
	  Added GPL boilerplate to an ungodly number of files.

1999-11-09  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vs_treeitem.h, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h, /cvsroot/aptitude/aptitude/src/vs_subtree.h:
	  Added copyright notes and tags marking the source as c++ to several headers.

	* /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/dep_item.h, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_item_with_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h:
	  Added a more general (read: templated) way to create classes which are
	package nodes with some type of subtree.

1999-11-07  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/testscr.cc:
	  The test code no longer defaults to showing dependency trees in the main
	package listing.

	* /cvsroot/aptitude/aptitude/src/dep_item.h, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h, /cvsroot/aptitude/aptitude/src/dep_item.cc:
	  Lots and lots of changes/hacks/fixups.  It's now possible to pop up a
	dedicated screen to list dependencies of a package.

	* /cvsroot/aptitude/aptitude/src/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vs_treeitem.cc:
	  Fix silly off-by-one error in display routines which caused funny output if
	a line ran off the right-hand edge of the screen.

	* /cvsroot/aptitude/aptitude/src/dep_item.cc, /cvsroot/aptitude/aptitude/src/dep_item.h, /cvsroot/aptitude/aptitude/src/pkg_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h, /cvsroot/aptitude/aptitude/src/testscr.cc, /cvsroot/aptitude/aptitude/src/vs_subtree.h, /cvsroot/aptitude/aptitude/src/Makefile.am:
	  Moved the pkg_ver_item back into pkg_ver_item.h (yes, I can't make my mind
	up :-P )
	  Added preliminary support for dependency displays.  This may change a lot in
	the near future.

1999-11-06  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	  Fixed memory leaks..

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	  Added a new toplevel status, "Virtual Packages", used for..um..virtual
	packages.

	* /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy_hash.h:
	  Split off the definition of a hash map for grouping policies into another
	header -- it's too useful :)

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.h, /cvsroot/aptitude/aptitude/src/testscr.cc:
	  Added a generic filter mechanism for generating package trees; the default
	setup now uses it to eliminate non-existant packages which are left in the
	cache for whatever reason.

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h:
	  Moved the pkg_ver_item class out of the header file.
	  Provides for a package are now listed as available versions of it.

	* /cvsroot/aptitude/aptitude/src/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	Get tree views containing only a visible root to stop segfaulting

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	Fix a silly thinko in the tree code which caused slightly incorrect scrolling.

1999-10-23  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	  It's no longer possible to crash the program by `falling off the edge of the
	world' in version trees.

	* /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	Hopefully eliminated the "infinite repeating color stripes" bug.

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc: Fixed up some formatting

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	  The pkg_ver_screen now uses the code just added to show its root node.

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h:
	  Added code to hopefully allow a vs_tree's root node to be visible in the tree
	hierarchy.

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	  Cleaned up the pkg_ver_screen code (to eliminate a kludgy and problematic
	tree node)

	* /cvsroot/aptitude/aptitude/src/Makefile.am:
	  Errors are no longer generated when you try to compile.. (*blush*)

	* /cvsroot/aptitude/aptitude/src/vscreen.cc:
	  Clear out the list of stuff-to-delete after deleting it.  This keeps us from,
	eg, deleting a pointer twice.

	* /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/test.cc:
	  Now that I figured the problem out I don't need the code to test for it any
	more..

	* /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	  Some minor changes to (try to) avoid segfaulting when root_iterators with
	NULL targets are floating around..

	  However, the big change is this: I HAVE FOUND AND ELIMINATED THE EVIL
	SEGFAULT-ON-DELETE BUG!  It turns out that vs_treeitem needed an empty virtual
	destructor.  In unison now: "I hate C++, I hate C++, I hate C++..."

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	  Versions appear to now be colored sanely.

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	  Small tweaks to the colorization of broken packages.

	* /cvsroot/aptitude/aptitude/src/testscr.cc:
	  The items visible in the main package display are now version trees.  (this
	won't be the case in the future but it's useful for now..)

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.h:
	  Added an implementation of pkg_grouppolicy_ver_factory::instantiate
	and added beginning support for colorization of version items.

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	  More cleanup operations.

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	  Cleaned up the routine pkg_item::get_normal_attr by fetching
	and caching (*apt_cache_file)[package] at the front of the routine.

	* /cvsroot/aptitude/aptitude/src/pkg_ver_item.h, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_ver_item.cc:
	  Added a way to display the available versions of a package.  See
	pkg_ver_item.{cc,h}

	* /cvsroot/aptitude/aptitude/src/pkg_node.cc:
	  Uh, pkg_node isn't a type; pkg_tree_node is.

	* /cvsroot/aptitude/aptitude/src/test.cc:
	  Fixed a tyop in a comment, slightly altered the test.

	* /cvsroot/aptitude/aptitude/src/pkg_tree.h:   Minor indentation tweak

	* /cvsroot/aptitude/aptitude/src/vscreen.h:
	  Fixed a silly typo (forgot to specify a type for vscreen_preparedelete)

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	  Make sure that a vs_tree's root is set to NULL if none is provided to the
	constructor.

	* /cvsroot/aptitude/aptitude/src/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen.h:
	  Added a way for screen objects to delete themselves from within the main loop.

	* /cvsroot/aptitude/aptitude/src/pkg_node.cc, /cvsroot/aptitude/aptitude/src/pkg_node.h:
	  Moved pkg_node::is_my_char() into pkg_node.cc

	* /cvsroot/aptitude/aptitude/src/vs_tree.h:
	  Deleted set_bounds() -- it's not being used any more.

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_node.cc, /cvsroot/aptitude/aptitude/src/pkg_node.h, /cvsroot/aptitude/aptitude/src/pkg_subtree.h, /cvsroot/aptitude/aptitude/src/Makefile.am:
	  Bunches of restructuring..added pkg_node.cc and moved dispatch_char for
	the pkg_node class into it..unfortunately this causes some other weirdness since
	some classes inherit two copies of dispatch_char; there's a hack there for now
	to see who `owns' dispatch char..I need to come up with a better solution,
	perhaps.

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc:
	  Virtual packages now appear in their own hierarchy..I'll add a filter to
	get rid of them in the future.

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	  Caret ('^') is now used to move up in the hierarchy rather than 'u'.

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	  Moving up in trees works again.  (fixed a dumb thinko :) )

	* /cvsroot/aptitude/aptitude/src/pkg_item.cc:
	  Better colorizing of packages-to-be-upgraded.

	* /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.h, /cvsroot/aptitude/aptitude/src/testscr.cc:
	  'Group-by-status' is now available.

1999-10-22  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.cc, /cvsroot/aptitude/aptitude/src/pkg_grouppolicy.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/testscr.cc:
	  More splittage; the grouping policy stuff was moved to pkg_grouppolicy.{cc,h}.

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	  It's now .. sort of .. possible to set a vs_tree's root to NULL -- at least,
	it won't cause an immediate segfault.  (I don't guarantee anything though :) )

	* /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_item.cc, /cvsroot/aptitude/aptitude/src/pkg_item.h, /cvsroot/aptitude/aptitude/src/pkg_node.h, /cvsroot/aptitude/aptitude/src/pkg_subtree.cc, /cvsroot/aptitude/aptitude/src/pkg_subtree.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Lots of classes split into their own files.  Hopefully compilation times for
	single-line changes will be .. um .. less astronomical now :)

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Yes Virginia, there is a difference between packages to be upgraded and
	packages to be installed..

	  Oh, and I decided to remove the `upgradable' highlighting..

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	  Fixed an oversight which was causing package trees to not be colorized.

	* /cvsroot/aptitude/aptitude/src/testscr.cc:
	  Show the package list on startup again, also reinstituted the random tree.

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Deleted some dead code, and modified pkg_subtree::pkg_subtree and
	pkg_tree::pkg_tree so that the root of a pkg_tree is expanded to start with
	(otherwise weird stuff happens :) )

	* /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	  I spoke too soon..but now navigation REALLY works!  I mean really! :)

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc:
	  Navigating the package list appears to work properly now; I also cleaned up
	some constructions like (*selected).highlighted(...) since my iterators now
	define operator-> ..

	* /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	  Hopefully advancing into subtrees actually works now.

	* /cvsroot/aptitude/aptitude/src/testscr.cc:
	 Commented out the random tree, it's confusing the matter.

	* /cvsroot/aptitude/aptitude/src/testscr.cc, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	  DIE SEGFAULTS DIE!

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Removed some test code, it's done better in test.cc

	* /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/test.cc:
	  Added a test case for some of the pathological stuff I'm seeing..

1999-10-21  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	  Hopefully squished some more embarassing segfaults.

	* /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_treeitem.h:
	  Fixed (hopefully!) a silly segfault bug and a sillier stack-overflow bug.

	* /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/testscr.cc, /cvsroot/aptitude/aptitude/src/vs_subtree.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h, /cvsroot/aptitude/aptitude/src/vs_treeitem.cc, /cvsroot/aptitude/aptitude/src/vs_treeitem.h, /cvsroot/aptitude/aptitude/config.h.in:
	  Entirely reworked the way that the vs_treeiterator class works, hopefully
	this will be somewhat cleaner (albeit less efficient and way too general :( )
	  It compiles again, now I get to watch the pretty fireworks as it panics
	over and over and over..

1999-10-20  Daniel Burrows  <daniel@torrent>

	* /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Improved highlighting and selection code.

	* /cvsroot/aptitude/aptitude/src/testscr.cc, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h, /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/curses++.cc, /cvsroot/aptitude/aptitude/src/curses++.h, /cvsroot/aptitude/aptitude/src/pkg_tree.cc:
	  Fixed a silly bug in get_color() which made it never add colors to the cache.

	  You can now select new packages for installation and deselect them.  You
	cannot, of course, see upgraded packages or actually do the installation, but
	it's a start :)

	* /cvsroot/aptitude/aptitude/src/Makefile.in, /cvsroot/aptitude/aptitude/aclocal.m4, /cvsroot/aptitude/aptitude/autogen.sh, /cvsroot/aptitude/aptitude/configure, /cvsroot/aptitude/aptitude/Makefile.in, /cvsroot/aptitude/aptitude/.cvsignore:
	  Removed autogenerated files, added a .cvsignore to keep them from being
	seen, and added autogen.sh to regenerate them.

	* /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/apt.h, /cvsroot/aptitude/aptitude/src/curses++.cc, /cvsroot/aptitude/aptitude/src/curses++.h, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/Makefile.in, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/testscr, /cvsroot/aptitude/aptitude/src/testscr.cc, /cvsroot/aptitude/aptitude/src/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h:
	  Initial import.

	* /cvsroot/aptitude/aptitude/src/apt.cc, /cvsroot/aptitude/aptitude/src/apt.h, /cvsroot/aptitude/aptitude/src/curses++.cc, /cvsroot/aptitude/aptitude/src/curses++.h, /cvsroot/aptitude/aptitude/src/Makefile.am, /cvsroot/aptitude/aptitude/src/Makefile.in, /cvsroot/aptitude/aptitude/src/pkg_tree.cc, /cvsroot/aptitude/aptitude/src/pkg_tree.h, /cvsroot/aptitude/aptitude/src/testscr, /cvsroot/aptitude/aptitude/src/testscr.cc, /cvsroot/aptitude/aptitude/src/vscreen.cc, /cvsroot/aptitude/aptitude/src/vscreen.h, /cvsroot/aptitude/aptitude/src/vs_tree.cc, /cvsroot/aptitude/aptitude/src/vs_tree.h:
	New file.

	* /cvsroot/aptitude/aptitude/aclocal.m4, /cvsroot/aptitude/aptitude/AUTHORS, /cvsroot/aptitude/aptitude/ChangeLog, /cvsroot/aptitude/aptitude/config.h.in, /cvsroot/aptitude/aptitude/configure, /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/Makefile.am, /cvsroot/aptitude/aptitude/Makefile.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	  Initial import.

	* /cvsroot/aptitude/aptitude/aclocal.m4, /cvsroot/aptitude/aptitude/AUTHORS, /cvsroot/aptitude/aptitude/ChangeLog, /cvsroot/aptitude/aptitude/config.h.in, /cvsroot/aptitude/aptitude/configure, /cvsroot/aptitude/aptitude/configure.in, /cvsroot/aptitude/aptitude/Makefile.am, /cvsroot/aptitude/aptitude/Makefile.in, /cvsroot/aptitude/aptitude/NEWS, /cvsroot/aptitude/aptitude/README:
	New file.

