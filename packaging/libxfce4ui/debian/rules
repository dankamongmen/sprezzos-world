#!/usr/bin/make -f

export DEB_LDFLAGS_MAINT_APPEND=-Wl,--as-needed -Wl,-O1 -Wl,-z,defs
export DEB_BUILD_MAINT_OPTIONS=hardening=+pie,+bindnow

XFVENDOR=Debian
ifeq ($(shell dpkg-vendor --is Ubuntu && echo yes),yes)
	XFVENDOR=Xubuntu
endif

%:
	dh $@ --parallel

override_dh_auto_configure:
	dh_auto_configure -- --with-vendor-info=$(XFVENDOR)

override_dh_install:
	rm $(CURDIR)/debian/tmp/usr/share/glade3/catalogs/libxfce4ui.xml.in
	dh_install --fail-missing -X .la

override_dh_strip:
	dh_strip -p libxfce4ui-1-0 --dbg-package=libxfce4ui-1-dbg
	dh_strip -p glade-xfce --dbg-package=libxfce4ui-1-dbg
	dh_strip -p libxfce4ui-utils --dbg-package=libxfce4ui-utils-dbg
	dh_strip --remaining-packages
